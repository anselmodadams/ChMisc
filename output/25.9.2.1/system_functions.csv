"ch_version","name","is_aggregate","case_insensitive","alias_to","create_query","origin","description","syntax","arguments","parameters","returned_value","examples","introduced_in","categories"
"25.9.2.1","h3PointDistKm",0,0,"","","System","","","","","","","",""
"25.9.2.1","roundBankers",0,0,"","","System","
Rounds a number to a specified decimal position `N`.
If the rounding number is halfway between two numbers, the function uses a method of rounding called banker's rounding, which is the default rounding method for floating point numbers defined in IEEE 754.

- If `N > 0`, the function rounds to the right of the decimal point
- If `N < 0`, the function rounds to the left of the decimal point
- If `N = 0`, the function rounds to the next integer

:::info Notes
- When the rounding number is halfway between two numbers, it's rounded to the nearest even digit at the specified decimal position.
For example: `3.5` rounds up to `4`, `2.5` rounds down to `2`.
- The `round` function performs the same rounding for floating point numbers.
- The `roundBankers` function also rounds integers the same way, for example, `roundBankers(45, -1) = 40`.
- In other cases, the function rounds numbers to the nearest integer.
:::

:::tip Use banker's rounding for summation or subtraction of numbers
Using banker's rounding, you can reduce the effect that rounding numbers has on the results of summing or subtracting these numbers.

For example, sum numbers `1.5, 2.5, 3.5, 4.5` with different rounding:
- No rounding: `1.5 + 2.5 + 3.5 + 4.5 = 12`.
- Banker's rounding: `2 + 2 + 4 + 4 = 12`.
- Rounding to the nearest integer: `2 + 3 + 4 + 5 = 14`.
:::
","roundBankers(x[, N])","- `x` — A number to round. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Decimal*`](/sql-reference/data-types/decimal) or [`Float*`](/sql-reference/data-types/float)
- `[, N]` — Optional. The number of decimal places to round to. Defaults to `0`. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns a value rounded by the banker's rounding method. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Decimal*`](/sql-reference/data-types/decimal) or [`Float*`](/sql-reference/data-types/float)","**Basic usage**

```sql title=Query
SELECT number / 2 AS x, roundBankers(x, 0) AS b FROM system.numbers LIMIT 10
```

```response title=Response
┌───x─┬─b─┐
│   0 │ 0 │
│ 0.5 │ 0 │
│   1 │ 1 │
│ 1.5 │ 2 │
│   2 │ 2 │
│ 2.5 │ 2 │
│   3 │ 3 │
│ 3.5 │ 4 │
│   4 │ 4 │
│ 4.5 │ 4 │
└─────┴───┘
```

","20.1","Rounding"
"25.9.2.1","trunc",0,1,"","","System","
Like [`floor`](#floor) but returns the rounded number with the largest absolute value less than or equal to that of `x`.
","truncate(x[, N])","- `x` — The value to round. [`Float*`](/sql-reference/data-types/float) or [`Decimal*`](/sql-reference/data-types/decimal) or [`(U)Int*`](/sql-reference/data-types/int-uint)
- `N` — Optional. The number of decimal places to round to. Defaults to zero, which means rounding to an integer. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns a rounded number of the same type as `x`. [`Float*`](/sql-reference/data-types/float) or [`Decimal*`](/sql-reference/data-types/decimal) or [`(U)Int*`](/sql-reference/data-types/int-uint)","**Basic usage**

```sql title=Query
SELECT truncate(123.499, 1) AS res;
```

```response title=Response
┌───res─┐
│ 123.4 │
└───────┘
```

","1.1","Rounding"
"25.9.2.1","ceil",0,1,"","","System","
Like [`floor`](#floor) but returns the smallest rounded number greater than or equal to `x`.
If rounding causes an overflow (for example, `ceiling(255, -1)`), the result is undefined.
","ceiling(x[, N])","- `x` — The value to round. [`Float*`](/sql-reference/data-types/float) or [`Decimal*`](/sql-reference/data-types/decimal) or [`(U)Int*`](/sql-reference/data-types/int-uint)
- `N` — Optional. The number of decimal places to round to. Defaults to zero, which means rounding to an integer. Can be negative. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns a rounded number of the same type as `x`. [`Float*`](/sql-reference/data-types/float) or [`Decimal*`](/sql-reference/data-types/decimal) or [`(U)Int*`](/sql-reference/data-types/int-uint)","**Basic usage**

```sql title=Query
SELECT ceiling(123.45, 1) AS rounded
```

```response title=Response
┌─rounded─┐
│   123.5 │
└─────────┘
```

**Negative precision**

```sql title=Query
SELECT ceiling(123.45, -1)
```

```response title=Response
┌─ceiling(123.45, -1)─┐
│                 130 │
└─────────────────────┘
```

","1.1","Rounding"
"25.9.2.1","floor",0,1,"","","System","
Returns the largest rounded number less than or equal to `x`, where the rounded number is a multiple of `1 / 10 * N`, or the nearest number of the appropriate data type if `1 / 10 * N` isn't exact.

Integer arguments may be rounded with a negative `N` argument.
With non-negative `N` the function returns `x`.

If rounding causes an overflow (for example, `floor(-128, -1)`), the result is undefined.
","floor(x[, N])","- `x` — The value to round. [`Float*`](/sql-reference/data-types/float) or [`Decimal*`](/sql-reference/data-types/decimal) or [`(U)Int*`](/sql-reference/data-types/int-uint)
- `N` — Optional. The number of decimal places to round to. Defaults to zero, which means rounding to an integer. Can be negative. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns a rounded number of the same type as `x`. [`Float*`](/sql-reference/data-types/float) or [`Decimal*`](/sql-reference/data-types/decimal) or [`(U)Int*`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT floor(123.45, 1) AS rounded
```

```response title=Response
┌─rounded─┐
│   123.4 │
└─────────┘
```

**Negative precision**

```sql title=Query
SELECT floor(123.45, -1)
```

```response title=Response
┌─floor(123.45, -1)─┐
│               120 │
└───────────────────┘
```

","1.1","Rounding"
"25.9.2.1","roundDown",0,0,"","","System","
Rounds a number down to an element in the specified array.
If the value is less than the lower bound, the lower bound is returned.
","roundDown(num, arr)","- `num` — A number to round down. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Decimal*`](/sql-reference/data-types/decimal) or [`Float*`](/sql-reference/data-types/float)
- `arr` — Array of elements to round `num` down to. [`Array((U)Int*)`](/sql-reference/data-types/array) or [`Array(Float*)`](/sql-reference/data-types/array)
","","Returns a number rounded down to an element in `arr`. If the value is less than the lowest bound, the lowest bound is returned. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT *, roundDown(*, [3, 4, 5]) FROM system.numbers WHERE number IN (0, 1, 2, 3, 4, 5)
```

```response title=Response
┌─number─┬─roundDown(number, [3, 4, 5])─┐
│      0 │                            3 │
│      1 │                            3 │
│      2 │                            3 │
│      3 │                            3 │
│      4 │                            4 │
│      5 │                            5 │
└────────┴──────────────────────────────┘
```

","20.1","Rounding"
"25.9.2.1","UUIDStringToNum",0,0,"","","System","
Accepts a string containing 36 characters in the format `xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx`, and returns a [FixedString(16)](../data-types/fixedstring.md) as its binary representation, with its format optionally specified by `variant` (`Big-endian` by default).
    ","UUIDStringToNum(string[, variant = 1])","- `string` — A string or fixed-string of 36 characters) [`String`](/sql-reference/data-types/string) or [`FixedString(36)`](/sql-reference/data-types/fixedstring)
- `variant` — Variant as specified by [RFC4122](https://datatracker.ietf.org/doc/html/rfc4122#section-4.1.1). 1 = `Big-endian` (default), 2 = `Microsoft`. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns the binary representation of `string`. [`FixedString(16)`](/sql-reference/data-types/fixedstring)","**Usage example**

```sql title=Query
SELECT
    '612f3c40-5d3b-217e-707b-6a546a3d7b29' AS uuid,
    UUIDStringToNum(uuid) AS bytes
```

```response title=Response
┌─uuid─────────────────────────────────┬─bytes────────────┐
│ 612f3c40-5d3b-217e-707b-6a546a3d7b29 │ a/<@];!~p{jTj={) │
└──────────────────────────────────────┴──────────────────┘
```

**Microsoft variant**

```sql title=Query
SELECT
    '612f3c40-5d3b-217e-707b-6a546a3d7b29' AS uuid,
    UUIDStringToNum(uuid, 2) AS bytes
```

```response title=Response
┌─uuid─────────────────────────────────┬─bytes────────────┐
│ 612f3c40-5d3b-217e-707b-6a546a3d7b29 │ @</a;]~!p{jTj={) │
└──────────────────────────────────────┴──────────────────┘
```

","1.1","UUID"
"25.9.2.1","toIntervalHour",0,0,"","","System","
Returns an interval of `n` hours of data type [`IntervalHour`](../data-types/special-data-types/interval.md).
    ","toIntervalHour(n)","- `n` — Number of hours. Integer numbers or string representations thereof, and float numbers. [`Int*`](/sql-reference/data-types/int-uint) or [`UInt*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`String`](/sql-reference/data-types/string)
","","Returns an interval of `n` hours. [`Interval`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
WITH
    toDate('2025-06-15') AS date,
    toIntervalHour(12) AS interval_to_hours
SELECT date + interval_to_hours AS result
```

```response title=Response
┌──────────────result─┐
│ 2025-06-15 12:00:00 │
└─────────────────────┘
```

","1.1","Type Conversion"
"25.9.2.1","toIntervalMinute",0,0,"","","System","
Returns an interval of `n` minutes of data type [`IntervalMinute`](../data-types/special-data-types/interval.md).
    ","toIntervalMinute(n)","- `n` — Number of minutes. Integer numbers or string representations thereof, and float numbers. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`String`](/sql-reference/data-types/string)
","","Returns an interval of `n` minutes. [`Interval`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
WITH
    toDate('2025-06-15') AS date,
    toIntervalMinute(12) AS interval_to_minutes
SELECT date + interval_to_minutes AS result
```

```response title=Response
┌──────────────result─┐
│ 2025-06-15 00:12:00 │
└─────────────────────┘
```

","1.1","Type Conversion"
"25.9.2.1","toIntervalMillisecond",0,0,"","","System","
Returns an interval of `n` milliseconds of data type [IntervalMillisecond](../../sql-reference/data-types/special-data-types/interval.md).
    ","toIntervalMillisecond(n)","- `n` — Number of milliseconds. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`String`](/sql-reference/data-types/string)
","","Returns an interval of `n` milliseconds. [`Interval`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
WITH
    toDateTime('2025-06-15') AS date,
    toIntervalMillisecond(30) AS interval_to_milliseconds
SELECT date + interval_to_milliseconds AS result
```

```response title=Response
┌──────────────────result─┐
│ 2025-06-15 00:00:00.030 │
└─────────────────────────┘
```

","22.6","Type Conversion"
"25.9.2.1","parseDateTime64BestEffortUSOrZero",0,0,"","","System","
Same as [`parseDateTime64BestEffort`](#parsedatetime64besteffort), except that this function prefers US date format (`MM/DD/YYYY` etc.) in case of ambiguity and returns zero date or zero date time when it encounters a date format that cannot be processed.
    ","parseDateTime64BestEffortUSOrZero(time_string [, precision [, time_zone]])","- `time_string` — String containing a date or date with time to convert. [`String`](/sql-reference/data-types/string)
- `precision` — Optional. Required precision. `3` for milliseconds, `6` for microseconds. Default: `3`. [`UInt8`](/sql-reference/data-types/int-uint)
- `time_zone` — Optional. Timezone. The function parses `time_string` according to the timezone. [`String`](/sql-reference/data-types/string)
","","Returns `time_string` converted to [`DateTime64`](../../sql-reference/data-types/datetime64.md) using US format preference, or zero date/datetime (`1970-01-01 00:00:00.000`) if the input cannot be parsed. [`DateTime64`](/sql-reference/data-types/datetime64)","**Usage example**

```sql title=Query
SELECT parseDateTime64BestEffortUSOrZero('02/10/2025 12:30:45.123') AS valid_us,
       parseDateTime64BestEffortUSOrZero('invalid') AS invalid
```

```response title=Response
┌─valid_us────────────────┬─invalid─────────────────┐
│ 2025-02-10 12:30:45.123 │ 1970-01-01 00:00:00.000 │
└─────────────────────────┴─────────────────────────┘
```

","22.8","Type Conversion"
"25.9.2.1","parseDateTime64BestEffortUS",0,0,"","","System","
Same as [`parseDateTime64BestEffort`](#parsedatetime64besteffort), except that this function prefers US date format (`MM/DD/YYYY` etc.) in case of ambiguity.
    ","parseDateTime64BestEffortUS(time_string [, precision [, time_zone]])","- `time_string` — String containing a date or date with time to convert. [`String`](/sql-reference/data-types/string)
- `precision` — Optional. Required precision. `3` for milliseconds, `6` for microseconds. Default: `3`. [`UInt8`](/sql-reference/data-types/int-uint)
- `time_zone` — Optional. Timezone. The function parses `time_string` according to the timezone. [`String`](/sql-reference/data-types/string)
","","Returns `time_string` converted to [`DateTime64`](../../sql-reference/data-types/datetime64.md) using US date format preference for ambiguous cases. [`DateTime64`](/sql-reference/data-types/datetime64)","**Usage example**

```sql title=Query
SELECT parseDateTime64BestEffortUS('02/10/2025 12:30:45.123') AS us_format,
       parseDateTime64BestEffortUS('15/08/2025 10:15:30.456') AS fallback_to_standard
```

```response title=Response
┌─us_format───────────────┬─fallback_to_standard────┐
│ 2025-02-10 12:30:45.123 │ 2025-08-15 10:15:30.456 │
└─────────────────────────┴─────────────────────────┘
```

","22.8","Type Conversion"
"25.9.2.1","parseDateTime64BestEffortOrZero",0,0,"","","System","
Same as [`parseDateTime64BestEffort`](#parsedatetime64besteffort) except that it returns zero date or zero date time when it encounters a date format that cannot be processed.
    ","parseDateTime64BestEffortOrZero(time_string[, precision[, time_zone]])","- `time_string` — String containing a date or date with time to convert. [`String`](/sql-reference/data-types/string)
- `precision` — Optional. Required precision. `3` for milliseconds, `6` for microseconds. Default: `3`. [`UInt8`](/sql-reference/data-types/int-uint)
- `time_zone` — Optional. Timezone. The function parses `time_string` according to the timezone. [`String`](/sql-reference/data-types/string)
","","Returns `time_string` converted to [`DateTime64`](../../sql-reference/data-types/datetime64.md), or zero date/datetime (`1970-01-01 00:00:00.000`) if the input cannot be parsed. [`DateTime64`](/sql-reference/data-types/datetime64)","**Usage example**

```sql title=Query
SELECT parseDateTime64BestEffortOrZero('2025-01-01 01:01:00.123') AS valid,
       parseDateTime64BestEffortOrZero('invalid') AS invalid
```

```response title=Response
┌─valid───────────────────┬─invalid─────────────────┐
│ 2025-01-01 01:01:00.123 │ 1970-01-01 00:00:00.000 │
└─────────────────────────┴─────────────────────────┘
```

","20.1","Type Conversion"
"25.9.2.1","parseDateTime64BestEffort",0,0,"","","System","
Same as [`parseDateTimeBestEffort`](#parsedatetimebesteffort) function but also parse milliseconds and microseconds and returns [`DateTime64`](../../sql-reference/data-types/datetime64.md) data type.
    ","parseDateTime64BestEffort(time_string[, precision[, time_zone]])","- `time_string` — String containing a date or date with time to convert. [`String`](/sql-reference/data-types/string)
- `precision` — Optional. Required precision. `3` for milliseconds, `6` for microseconds. Default: `3`. [`UInt8`](/sql-reference/data-types/int-uint)
- `time_zone` — Optional. Timezone. The function parses `time_string` according to the timezone. [`String`](/sql-reference/data-types/string)
","","Returns `time_string` converted to the [`DateTime64`](../../sql-reference/data-types/datetime64.md) data type. [`DateTime64`](/sql-reference/data-types/datetime64)","**Usage example**

```sql title=Query
SELECT parseDateTime64BestEffort('2025-01-01') AS a, toTypeName(a) AS t
UNION ALL
SELECT parseDateTime64BestEffort('2025-01-01 01:01:00.12346') AS a, toTypeName(a) AS t
UNION ALL
SELECT parseDateTime64BestEffort('2025-01-01 01:01:00.12346',6) AS a, toTypeName(a) AS t
UNION ALL
SELECT parseDateTime64BestEffort('2025-01-01 01:01:00.12346',3,'Asia/Istanbul') AS a, toTypeName(a) AS t
FORMAT PrettyCompactMonoBlock
```

```response title=Response
┌──────────────────────────a─┬─t──────────────────────────────┐
│ 2025-01-01 01:01:00.123000 │ DateTime64(3)                  │
│ 2025-01-01 00:00:00.000000 │ DateTime64(3)                  │
│ 2025-01-01 01:01:00.123460 │ DateTime64(6)                  │
│ 2025-12-31 22:01:00.123000 │ DateTime64(3, 'Asia/Istanbul') │
└────────────────────────────┴────────────────────────────────┘
```

","20.1","Type Conversion"
"25.9.2.1","parseDateTime32BestEffort",0,0,"","","System","
Converts a string representation of a date and time to the [`DateTime`](/sql-reference/data-types/datetime) data type.

The function parses [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601), [RFC 1123 - 5.2.14 RFC-822 Date and Time Specification](https://tools.ietf.org/html/rfc1123#page-55), ClickHouse's and some other date and time formats.
    ","parseDateTime32BestEffort(time_string[, time_zone])","- `time_string` — String containing a date and time to convert. [`String`](/sql-reference/data-types/string)
- `time_zone` — Optional. Time zone according to which `time_string` is parsed [`String`](/sql-reference/data-types/string)
","","Returns `time_string` as a `DateTime`. [`DateTime`](/sql-reference/data-types/datetime)","**Usage example**

```sql title=Query
SELECT parseDateTime32BestEffort('23/10/2025 12:12:57')
AS parseDateTime32BestEffort
```

```response title=Response
┌─parseDateTime32BestEffort─┐
│       2025-10-23 12:12:57 │
└───────────────────────────┘
```

**With timezone**

```sql title=Query
SELECT parseDateTime32BestEffort('Sat, 18 Aug 2025 07:22:16 GMT', 'Asia/Istanbul')
AS parseDateTime32BestEffort
```

```response title=Response
┌─parseDateTime32BestEffort─┐
│       2025-08-18 10:22:16 │
└───────────────────────────┘
```

**Unix timestamp**

```sql title=Query
SELECT parseDateTime32BestEffort('1284101485')
AS parseDateTime32BestEffort
```

```response title=Response
┌─parseDateTime32BestEffort─┐
│       2015-07-07 12:04:41 │
└───────────────────────────┘
```

","20.9","Type Conversion"
"25.9.2.1","parseDateTimeBestEffortOrNull",0,0,"","","System","
The same as [`parseDateTimeBestEffort`](#parseDateTimeBestEffort) except that it returns `NULL` when it encounters a date format that cannot be processed.
The function parses [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601), [RFC 1123 - 5.2.14 RFC-822 Date and Time Specification](https://tools.ietf.org/html/rfc1123#page-55), ClickHouse's and some other date and time formats.

Supported non-standard formats:
- A string containing 9..10 digit unix timestamp.
- A string with a date and a time component: `YYYYMMDDhhmmss`, `DD/MM/YYYY hh:mm:ss`, `DD-MM-YY hh:mm`, `YYYY-MM-DD hh:mm:ss`, etc.
- A string with a date, but no time component: `YYYY`, `YYYYMM`, `YYYY*MM`, `DD/MM/YYYY`, `DD-MM-YY` etc.
- A string with a day and time: `DD`, `DD hh`, `DD hh:mm`. In this case `MM` is substituted by `01`.
- A string that includes the date and time along with time zone offset information: `YYYY-MM-DD hh:mm:ss ±h:mm`, etc.
- A syslog timestamp: `Mmm dd hh:mm:ss`. For example, `Jun  9 14:20:32`.

For all of the formats with separator the function parses months names expressed by their full name or by the first three letters of a month name.
If the year is not specified, it is considered to be equal to the current year.
    ","parseDateTimeBestEffortOrNull(time_string[, time_zone])","- `time_string` — String containing a date and time to convert. [`String`](/sql-reference/data-types/string)
- `time_zone` — Optional. Time zone according to which `time_string` is parsed. [`String`](/sql-reference/data-types/string)
","","Returns `time_string` as a DateTime, or `NULL` if the input cannot be parsed. [`DateTime`](/sql-reference/data-types/datetime) or [`NULL`](/sql-reference/syntax#null)","**Usage example**

```sql title=Query
SELECT parseDateTimeBestEffortOrNull('23/10/2025 12:12:57') AS valid,
       parseDateTimeBestEffortOrNull('invalid') AS invalid
```

```response title=Response
┌─valid───────────────┬─invalid─┐
│ 2025-10-23 12:12:57 │    ᴺᵁᴸᴸ │
└─────────────────────┴─────────┘
```

","1.1","Type Conversion"
"25.9.2.1","parseDateTimeBestEffortOrZero",0,0,"","","System","
Same as [`parseDateTimeBestEffort`](#parseDateTimeBestEffort) except that it returns a zero date or a zero date time when it encounters a date format that cannot be processed.
The function parses [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601), [RFC 1123 - 5.2.14 RFC-822 Date and Time Specification](https://tools.ietf.org/html/rfc1123#page-55), ClickHouse's and some other date and time formats.

Supported non-standard formats:
- A string containing 9..10 digit unix timestamp.
- A string with a date and a time component: `YYYYMMDDhhmmss`, `DD/MM/YYYY hh:mm:ss`, `DD-MM-YY hh:mm`, `YYYY-MM-DD hh:mm:ss`, etc.
- A string with a date, but no time component: `YYYY`, `YYYYMM`, `YYYY*MM`, `DD/MM/YYYY`, `DD-MM-YY` etc.
- A string with a day and time: `DD`, `DD hh`, `DD hh:mm`. In this case `MM` is substituted by `01`.
- A string that includes the date and time along with time zone offset information: `YYYY-MM-DD hh:mm:ss ±h:mm`, etc.
- A syslog timestamp: `Mmm dd hh:mm:ss`. For example, `Jun  9 14:20:32`.

For all of the formats with separator the function parses months names expressed by their full name or by the first three letters of a month name.
If the year is not specified, it is considered to be equal to the current year.
    ","parseDateTimeBestEffortOrZero(time_string[, time_zone])","- `time_string` — String containing a date and time to convert. [`String`](/sql-reference/data-types/string)
- `time_zone` — Optional. Time zone according to which `time_string` is parsed. [`String`](/sql-reference/data-types/string)
","","Returns `time_string` as a `DateTime`, or zero date/datetime (`1970-01-01` or `1970-01-01 00:00:00`) if the input cannot be parsed. [`DateTime`](/sql-reference/data-types/datetime)","**Usage example**

```sql title=Query
SELECT parseDateTimeBestEffortOrZero('23/10/2025 12:12:57') AS valid,
       parseDateTimeBestEffortOrZero('invalid') AS invalid
```

```response title=Response
┌─valid───────────────┬─invalid─────────────┐
│ 2025-10-23 12:12:57 │ 1970-01-01 00:00:00 │
└─────────────────────┴─────────────────────┘
```

","1.1","Type Conversion"
"25.9.2.1","toIPv6OrNull",0,0,"","","System","
Converts an input value to a value of type `IPv6` but returns `NULL` in case of an error.
Like [`toIPv6`](#toIPv6) but returns `NULL` instead of throwing an exception on conversion errors.

Supported arguments:
- String representations of IPv6 addresses in standard notation.
- String representations of IPv4 addresses (converted to IPv4-mapped IPv6).
- Binary representations of IPv6 addresses.

Unsupported arguments (return `NULL`):
- Invalid IP address formats.
- Malformed IPv6 addresses.
- Out-of-range values.
- Invalid notation.
    ","toIPv6OrNull(x)","- `x` — A string representation of an IPv6 or IPv4 address. [`String`](/sql-reference/data-types/string)
","","Returns an IPv6 address if successful, otherwise `NULL`. [`IPv6`](/sql-reference/data-types/ipv6) or [`NULL`](/sql-reference/syntax#null)","**Usage example**

```sql title=Query
SELECT
    toIPv6OrNull('2001:0db8:85a3:0000:0000:8a2e:0370:7334') AS valid_ipv6,
    toIPv6OrNull('invalid::ip') AS invalid_ipv6
```

```response title=Response
┌─valid_ipv6──────────────────────────┬─invalid_ipv6─┐
│ 2001:db8:85a3::8a2e:370:7334        │         ᴺᵁᴸᴸ │
└─────────────────────────────────────┴──────────────┘
```

","22.3","IP Address"
"25.9.2.1","toUUIDOrNull",0,0,"","","System","
Converts an input value to a value of type `UUID` but returns `NULL` in case of an error.
Like [`toUUID`](#touuid) but returns `NULL` instead of throwing an exception on conversion errors.

Supported arguments:
- String representations of UUID in standard format (8-4-4-4-12 hexadecimal digits).
- String representations of UUID without hyphens (32 hexadecimal digits).

Unsupported arguments (return `NULL`):
- Invalid string formats.
- Non-string types.
- Malformed UUIDs.
    ","toUUIDOrNull(x)","- `x` — A string representation of a UUID. [`String`](/sql-reference/data-types/string)
","","Returns a UUID value if successful, otherwise `NULL`. [`UUID`](/sql-reference/data-types/uuid) or [`NULL`](/sql-reference/syntax#null)","**Usage examples**

```sql title=Query
SELECT
    toUUIDOrNull('550e8400-e29b-41d4-a716-446655440000') AS valid_uuid,
    toUUIDOrNull('invalid-uuid') AS invalid_uuid
```

```response title=Response
┌─valid_uuid───────────────────────────┬─invalid_uuid─┐
│ 550e8400-e29b-41d4-a716-446655440000 │         ᴺᵁᴸᴸ │
└──────────────────────────────────────┴──────────────┘
```

","20.12","UUID"
"25.9.2.1","toDecimal64OrNull",0,0,"","","System","
Converts an input value to a value of type [Decimal(18, S)](../data-types/decimal.md) but returns `NULL` in case of an error.
Like [`toDecimal64`](#todecimal64) but returns `NULL` instead of throwing an exception on conversion errors.

Supported arguments:
- Values or string representations of type (U)Int*.
- Values or string representations of type Float*.

Unsupported arguments (return `NULL`):
- Values or string representations of Float* values `NaN` and `Inf` (case-insensitive).
- String representations of binary and hexadecimal values.
- Values that exceed the bounds of `Decimal64`:`(-1*10^(18 - S), 1*10^(18 - S))`.

See also:
- [`toDecimal64`](#toDecimal64).
- [`toDecimal64OrZero`](#toDecimal64OrZero).
- [`toDecimal64OrDefault`](#toDecimal64OrDefault).
    ","toDecimal64OrNull(expr, S)","- `expr` — Expression returning a number or a string representation of a number. [`Expression`](/sql-reference/data-types/special-data-types/expression)
- `S` — Scale parameter between 0 and 18, specifying how many digits the fractional part of a number can have. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns a Decimal(18, S) value if successful, otherwise `NULL`. [`Decimal64(S)`](/sql-reference/data-types/decimal) or [`NULL`](/sql-reference/syntax#null)","**Usage example**

```sql title=Query
SELECT toDecimal64OrNull('42.7', 2), toDecimal64OrNull('invalid', 2)
```

```response title=Response
┌─toDecimal64OrNull('42.7', 2)─┬─toDecimal64OrNull('invalid', 2)─┐
│                        42.70 │                            ᴺᵁᴸᴸ │
└──────────────────────────────┴─────────────────────────────────┘
```

","20.1","Type Conversion"
"25.9.2.1","toDecimal32OrNull",0,0,"","","System","
Converts an input value to a value of type [`Decimal(9, S)`](../data-types/decimal.md) but returns `NULL` in case of an error.
Like [`toDecimal32`](#toDecimal32) but returns `NULL` instead of throwing an exception on conversion errors.

Supported arguments:
- Values or string representations of type (U)Int*.
- Values or string representations of type Float*.

Unsupported arguments (return `NULL`):
- Values or string representations of Float* values `NaN` and `Inf` (case-insensitive).
- String representations of binary and hexadecimal values.
- Values that exceed the bounds of `Decimal32`:`(-1*10^(9 - S), 1*10^(9 - S))`.

See also:
- [`toDecimal32`](#toDecimal32).
- [`toDecimal32OrZero`](#toDecimal32OrZero).
- [`toDecimal32OrDefault`](#toDecimal32OrDefault).
    ","toDecimal32OrNull(expr, S)","- `expr` — Expression returning a number or a string representation of a number. [`Expression`](/sql-reference/data-types/special-data-types/expression)
- `S` — Scale parameter between 0 and 9, specifying how many digits the fractional part of a number can have. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns a Decimal(9, S) value if successful, otherwise `NULL`. [`Decimal32(S)`](/sql-reference/data-types/decimal) or [`NULL`](/sql-reference/syntax#null)","**Usage example**

```sql title=Query
SELECT toDecimal32OrNull('42.7', 2), toDecimal32OrNull('invalid', 2)
```

```response title=Response
┌─toDecimal32OrNull('42.7', 2)─┬─toDecimal32OrNull('invalid', 2)─┐
│                        42.70 │                            ᴺᵁᴸᴸ │
└──────────────────────────────┴─────────────────────────────────┘
```

","20.1","Type Conversion"
"25.9.2.1","toDateTimeOrNull",0,0,"","","System","
Converts an input value to a value of type `DateTime` but returns `NULL` if an invalid argument is received.
The same as [`toDateTime`](#toDateTime) but returns `NULL` if an invalid argument is received.
    ","toDateTimeOrNull(x)","- `x` — A string representation of a date with time. [`String`](/sql-reference/data-types/string)
","","Returns a `DateTime` value if successful, otherwise `NULL`. [`DateTime`](/sql-reference/data-types/datetime) or [`NULL`](/sql-reference/syntax#null)","**Usage example**

```sql title=Query
SELECT toDateTimeOrNull('2025-12-30 13:44:17'), toDateTimeOrNull('invalid')
```

```response title=Response
┌─toDateTimeOrNull('2025-12-30 13:44:17')─┬─toDateTimeOrNull('invalid')─┐
│                     2025-12-30 13:44:17 │                        ᴺᵁᴸᴸ │
└─────────────────────────────────────────┴─────────────────────────────┘
```

","1.1","Type Conversion"
"25.9.2.1","toDateOrNull",0,0,"","","System","
Converts an input value to a value of type `Date` but returns `NULL` if an invalid argument is received.
The same as [`toDate`](#toDate) but returns `NULL` if an invalid argument is received.
    ","toDateOrNull(x)","- `x` — A string representation of a date. [`String`](/sql-reference/data-types/string)
","","Returns a Date value if successful, otherwise `NULL`. [`Date`](/sql-reference/data-types/date) or [`NULL`](/sql-reference/syntax#null)","**Usage example**

```sql title=Query
SELECT toDateOrNull('2025-12-30'), toDateOrNull('invalid')
```

```response title=Response
┌─toDateOrNull('2025-12-30')─┬─toDateOrNull('invalid')─┐
│                 2025-12-30 │                   ᴺᵁᴸᴸ │
└────────────────────────────┴────────────────────────┘
```

","1.1","Type Conversion"
"25.9.2.1","toBFloat16OrNull",0,0,"","","System","
Converts a String input value to a value of type BFloat16.
If the string does not represent a floating point value, the function returns NULL.

Supported arguments:
- String representations of numeric values.

Unsupported arguments (return `NULL`):
- String representations of binary and hexadecimal values.
- Numeric values.

:::note
The function allows a silent loss of precision while converting from the string representation.
:::

See also:
- [`toBFloat16`](#toBFloat16).
- [`toBFloat16OrZero`](#toBFloat16OrZero).
    ","toBFloat16OrNull(x)","- `x` — A String representation of a number. [`String`](/sql-reference/data-types/string)
","","Reurns a 16-bit brain-float value, otherwise `NULL`. [`BFloat16`](/sql-reference/data-types/float) or [`NULL`](/sql-reference/syntax#null)","**Usage example**

```sql title=Query
SELECT toBFloat16OrNull('0x5E'), -- unsupported arguments
       toBFloat16OrNull('12.3'), -- typical use
       toBFloat16OrNull('12.3456789') -- silent loss of precision
```

```response title=Response
\N
12.25
12.3125
```

","1.1","Type Conversion"
"25.9.2.1","toInt128OrNull",0,0,"","","System","
Like [`toInt128`](#toInt128), this function converts an input value to a value of type [Int128](../data-types/int-uint.md) but returns `NULL` in case of an error.

Supported arguments:
- String representations of (U)Int*.

Unsupported arguments (return `NULL`):
- String representations of Float* values, including `NaN` and `Inf`.
- String representations of binary and hexadecimal values, e.g. `SELECT toInt128OrNull('0xc0fe');`.

:::note
If the input value cannot be represented within the bounds of [Int128](../data-types/int-uint.md), overflow or underflow of the result occurs.
This is not considered an error.
:::

See also:
- [`toInt128`](#toInt128).
- [`toInt128OrZero`](#toInt128OrZero).
- [`toInt128OrDefault`](#toInt128OrDefault).
    ","toInt128OrNull(x)","- `x` — A String representation of a number. [`String`](/sql-reference/data-types/string)
","","Returns a value of type Int128, otherwise `NULL` if the conversion is unsuccessful. [`Int128`](/sql-reference/data-types/int-uint) or [`NULL`](/sql-reference/syntax#null)","**Usage example**

```sql title=Query
SELECT
    toInt128OrNull('-128'),
    toInt128OrNull('abc')
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toInt128OrNull('-128'): -128
toInt128OrNull('abc'):  \N
```

","20.8","Type Conversion"
"25.9.2.1","UUIDv7ToDateTime",0,0,"","","System","
Returns the timestamp component of a UUID version 7.
    ","UUIDv7ToDateTime(uuid[, timezone])","- `uuid` — A UUID version 7. [`String`](/sql-reference/data-types/string)
- `timezone` — Optional. [Timezone name](../../operations/server-configuration-parameters/settings.md#timezone) for the returned value. [`String`](/sql-reference/data-types/string)
","","Returns a timestamp with milliseconds precision. If the UUID is not a valid version 7 UUID, it returns `1970-01-01 00:00:00.000`. [`DateTime64(3)`](/sql-reference/data-types/datetime64)","**Usage example**

```sql title=Query
SELECT UUIDv7ToDateTime(toUUID('018f05c9-4ab8-7b86-b64e-c9f03fbd45d1'))
```

```response title=Response
┌─UUIDv7ToDateTime(toUUID('018f05c9-4ab8-7b86-b64e-c9f03fbd45d1'))─┐
│                                          2024-04-22 15:30:29.048 │
└──────────────────────────────────────────────────────────────────┘
```

**With timezone**

```sql title=Query
SELECT UUIDv7ToDateTime(toUUID('018f05c9-4ab8-7b86-b64e-c9f03fbd45d1'), 'America/New_York')
```

```response title=Response
┌─UUIDv7ToDateTime(toUUID('018f05c9-4ab8-7b86-b64e-c9f03fbd45d1'), 'America/New_York')─┐
│                                                             2024-04-22 11:30:29.048 │
└─────────────────────────────────────────────────────────────────────────────────────┘
```

","24.5","UUID"
"25.9.2.1","toInt64OrNull",0,0,"","","System","
Like [`toInt64`](#toInt64), this function converts an input value to a value of type [Int64](../data-types/int-uint.md) but returns `NULL` in case of an error.

Supported arguments:
- String representations of (U)Int*.

Unsupported arguments (return `NULL`):
- String representations of Float* values, including `NaN` and `Inf`.
- String representations of binary and hexadecimal values, e.g. `SELECT toInt64OrNull('0xc0fe');`.

:::note
If the input value cannot be represented within the bounds of [Int64](../data-types/int-uint.md), overflow or underflow of the result occurs.
This is not considered an error.
:::

See also:
- [`toInt64`](#toInt64).
- [`toInt64OrZero`](#toInt64OrZero).
- [`toInt64OrDefault`](#toInt64OrDefault).
    ","toInt64OrNull(x)","- `x` — A String representation of a number. [`String`](/sql-reference/data-types/string)
","","Returns a value of type Int64, otherwise `NULL` if the conversion is unsuccessful. [`Int64`](/sql-reference/data-types/int-uint) or [`NULL`](/sql-reference/syntax#null)","**Usage example**

```sql title=Query
SELECT
    toInt64OrNull('-64'),
    toInt64OrNull('abc')
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toInt64OrNull('-64'): -64
toInt64OrNull('abc'): \N
```

","1.1","Type Conversion"
"25.9.2.1","parseDateTimeBestEffortUSOrZero",0,0,"","","System","
Same as [`parseDateTimeBestEffortUS`](#parseDateTimeBestEffortUS) function except that it returns zero date (`1970-01-01`) or zero date with time (`1970-01-01 00:00:00`) when it encounters a date format that cannot be processed.

This function behaves like [`parseDateTimeBestEffort`](#parseDateTimeBestEffort) for ISO date formats, but prefers the US date format for ambiguous cases, with zero return on parsing errors.
    ","parseDateTimeBestEffortUSOrZero(time_string[, time_zone])","- `time_string` — String containing a date and time to convert. [`String`](/sql-reference/data-types/string)
- `time_zone` — Optional. Time zone according to which `time_string` is parsed. [`String`](/sql-reference/data-types/string)
","","Returns `time_string` as a `DateTime` using US format preference, or zero date/datetime (`1970-01-01` or `1970-01-01 00:00:00`) if the input cannot be parsed. [`DateTime`](/sql-reference/data-types/datetime)","**Usage example**

```sql title=Query
SELECT parseDateTimeBestEffortUSOrZero('02/10/2025') AS valid_us,
       parseDateTimeBestEffortUSOrZero('invalid') AS invalid
```

```response title=Response
┌─valid_us────────────┬─invalid─────────────┐
│ 2025-02-10 00:00:00 │ 1970-01-01 00:00:00 │
└─────────────────────┴─────────────────────┘
```

","1.1","Type Conversion"
"25.9.2.1","toInt32OrNull",0,0,"","","System","
Like [`toInt32`](#toInt32), this function converts an input value to a value of type [Int32](../data-types/int-uint.md) but returns `NULL` in case of an error.

Supported arguments:
- String representations of (U)Int*.

Unsupported arguments (return `NULL`):
- String representations of Float* values, including `NaN` and `Inf`.
- String representations of binary and hexadecimal values, e.g. `SELECT toInt32OrNull('0xc0fe');`.

:::note
If the input value cannot be represented within the bounds of [Int32](../data-types/int-uint.md), overflow or underflow of the result occurs.
This is not considered an error.
:::

See also:
- [`toInt32`](#toInt32).
- [`toInt32OrZero`](#toInt32OrZero).
- [`toInt32OrDefault`](#toInt32OrDefault).
    ","toInt32OrNull(x)","- `x` — A String representation of a number. [`String`](/sql-reference/data-types/string)
","","Returns a value of type Int32, otherwise `NULL` if the conversion is unsuccessful. [`Int32`](/sql-reference/data-types/int-uint) or [`NULL`](/sql-reference/syntax#null)","**Usage example**

```sql title=Query
SELECT
    toInt32OrNull('-32'),
    toInt32OrNull('abc')
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toInt32OrNull('-32'): -32
toInt32OrNull('abc'): \N
```

","1.1","Type Conversion"
"25.9.2.1","toUInt128OrNull",0,0,"","","System","
Like [`toUInt128`](#toUInt128), this function converts an input value to a value of type [`UInt128`](../data-types/int-uint.md) but returns `NULL` in case of an error.

Supported arguments:
- String representations of (U)Int*.

Unsupported arguments (return `NULL`):
- String representations of Float* values, including `NaN` and `Inf`.
- String representations of binary and hexadecimal values, e.g. `SELECT toUInt128OrNull('0xc0fe');`.

:::note
If the input value cannot be represented within the bounds of [`UInt128`](../data-types/int-uint.md), overflow or underflow of the result occurs.
This is not considered an error.
:::

See also:
- [`toUInt128`](#toUInt128).
- [`toUInt128OrZero`](#toUInt128OrZero).
- [`toUInt128OrDefault`](#toUInt128OrDefault).
    ","toUInt128OrNull(x)","- `x` — A String representation of a number. [`String`](/sql-reference/data-types/string)
","","Returns a value of type UInt128, otherwise `NULL` if the conversion is unsuccessful. [`UInt128`](/sql-reference/data-types/int-uint) or [`NULL`](/sql-reference/syntax#null)","**Usage example**

```sql title=Query
SELECT
    toUInt128OrNull('128'),
    toUInt128OrNull('abc')
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toUInt128OrNull('128'): 128
toUInt128OrNull('abc'): \N
```

","21.6","Type Conversion"
"25.9.2.1","toUInt64OrNull",0,0,"","","System","
Like [`toUInt64`](#toUInt64), this function converts an input value to a value of type [`UInt64`](../data-types/int-uint.md) but returns `NULL` in case of an error.

Supported arguments:
- String representations of (U)Int*.

Unsupported arguments (return `NULL`):
- String representations of Float* values, including `NaN` and `Inf`.
- String representations of binary and hexadecimal values, e.g. `SELECT toUInt64OrNull('0xc0fe');`.

:::note
If the input value cannot be represented within the bounds of [`UInt64`](../data-types/int-uint.md), overflow or underflow of the result occurs.
This is not considered an error.
:::

See also:
- [`toUInt64`](#toUInt64).
- [`toUInt64OrZero`](#toUInt64OrZero).
- [`toUInt64OrDefault`](#toUInt64OrDefault).
    ","toUInt64OrNull(x)","- `x` — A String representation of a number. [`String`](/sql-reference/data-types/string)
","","Returns a value of type UInt64, otherwise `NULL` if the conversion is unsuccessful. [`UInt64`](/sql-reference/data-types/int-uint) or [`NULL`](/sql-reference/syntax#null)","**Usage example**

```sql title=Query
SELECT
    toUInt64OrNull('64'),
    toUInt64OrNull('abc')
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toUInt64OrNull('64'):  64
toUInt64OrNull('abc'): \N
```

","1.1","Type Conversion"
"25.9.2.1","toDecimal256OrZero",0,0,"","","System","
Converts an input value to a value of type [Decimal(76, S)](../data-types/decimal.md) but returns `0` in case of an error.
Like [`toDecimal256`](#todecimal256) but returns `0` instead of throwing an exception on conversion errors.

Supported arguments:
- Values or string representations of type (U)Int*.
- Values or string representations of type Float*.

Unsupported arguments (return `0`):
- Values or string representations of Float* values `NaN` and `Inf` (case-insensitive).
- String representations of binary and hexadecimal values.

:::note
If the input value exceeds the bounds of `Decimal256`:`(-1*10^(76 - S), 1*10^(76 - S))`, the function returns `0`.
:::

See also:
- [`toDecimal256`](#toDecimal256).
- [`toDecimal256OrNull`](#toDecimal256OrNull).
- [`toDecimal256OrDefault`](#toDecimal256OrDefault).
    ","toDecimal256OrZero(expr, S)","- `expr` — Expression returning a number or a string representation of a number. [`Expression`](/sql-reference/data-types/special-data-types/expression)
- `S` — Scale parameter between 0 and 76, specifying how many digits the fractional part of a number can have. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns a Decimal(76, S) value if successful, otherwise `0`. [`Decimal256(S)`](/sql-reference/data-types/decimal)","**Usage example**

```sql title=Query
SELECT toDecimal256OrZero('42.7', 2), toDecimal256OrZero('invalid', 2)
```

```response title=Response
┌─toDecimal256OrZero('42.7', 2)─┬─toDecimal256OrZero('invalid', 2)─┐
│                         42.70 │                             0.00 │
└───────────────────────────────┴──────────────────────────────────┘
```

","20.8","Type Conversion"
"25.9.2.1","toDecimal64OrZero",0,0,"","","System","
Converts an input value to a value of type [Decimal(18, S)](../data-types/decimal.md) but returns `0` in case of an error.
Like [`toDecimal64`](#todecimal64) but returns `0` instead of throwing an exception on conversion errors.

Supported arguments:
- Values or string representations of type (U)Int*.
- Values or string representations of type Float*.

Unsupported arguments (return `0`):
- Values or string representations of Float* values `NaN` and `Inf` (case-insensitive).
- String representations of binary and hexadecimal values.

:::note
If the input value exceeds the bounds of `Decimal64`:`(-1*10^(18 - S), 1*10^(18 - S))`, the function returns `0`.
:::

See also:
- [`toDecimal64`](#toDecimal64).
- [`toDecimal64OrNull`](#toDecimal64OrNull).
- [`toDecimal64OrDefault`](#toDecimal64OrDefault).
    ","toDecimal64OrZero(expr, S)","- `expr` — Expression returning a number or a string representation of a number. [`Expression`](/sql-reference/data-types/special-data-types/expression)
- `S` — Scale parameter between 0 and 18, specifying how many digits the fractional part of a number can have. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns a Decimal(18, S) value if successful, otherwise `0`. [`Decimal64(S)`](/sql-reference/data-types/decimal)","**Usage example**

```sql title=Query
SELECT toDecimal64OrZero('42.7', 2), toDecimal64OrZero('invalid', 2)
```

```response title=Response
┌─toDecimal64OrZero('42.7', 2)─┬─toDecimal64OrZero('invalid', 2)─┐
│                        42.70 │                            0.00 │
└──────────────────────────────┴─────────────────────────────────┘
```

","20.1","Type Conversion"
"25.9.2.1","toDecimal32OrZero",0,0,"","","System","
Converts an input value to a value of type [Decimal(9, S)](../data-types/decimal.md) but returns `0` in case of an error.
Like [`toDecimal32`](#todecimal32) but returns `0` instead of throwing an exception on conversion errors.

Supported arguments:
- Values or string representations of type (U)Int*.
- Values or string representations of type Float*.

Unsupported arguments (return `0`):
- Values or string representations of Float* values `NaN` and `Inf` (case-insensitive).
- String representations of binary and hexadecimal values.

:::note
If the input value exceeds the bounds of `Decimal32`:`(-1*10^(9 - S), 1*10^(9 - S))`, the function returns `0`.
:::
    ","toDecimal32OrZero(expr, S)","- `expr` — Expression returning a number or a string representation of a number. [`Expression`](/sql-reference/data-types/special-data-types/expression)
- `S` — Scale parameter between 0 and 9, specifying how many digits the fractional part of a number can have. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns a Decimal(9, S) value if successful, otherwise `0`. [`Decimal32(S)`](/sql-reference/data-types/decimal)","**Usage example**

```sql title=Query
SELECT toDecimal32OrZero('42.7', 2), toDecimal32OrZero('invalid', 2)
```

```response title=Response
┌─toDecimal32OrZero('42.7', 2)─┬─toDecimal32OrZero('invalid', 2)─┐
│                        42.70 │                            0.00 │
└──────────────────────────────┴─────────────────────────────────┘
```

","20.1","Type Conversion"
"25.9.2.1","toDateTimeOrZero",0,0,"","","System","
Converts an input value to a value of type [DateTime](../data-types/datetime.md) but returns the lower boundary of [DateTime](../data-types/datetime.md) if an invalid argument is received.
The same as [toDateTime](#todatetime) but returns lower boundary of [DateTime](../data-types/datetime.md) if an invalid argument is received.
    ","toDateTimeOrZero(x)","- `x` — A string representation of a date with time. [`String`](/sql-reference/data-types/string)
","","Returns a DateTime value if successful, otherwise the lower boundary of DateTime (`1970-01-01 00:00:00`). [`DateTime`](/sql-reference/data-types/datetime)","**Usage example**

```sql title=Query
SELECT toDateTimeOrZero('2025-12-30 13:44:17'), toDateTimeOrZero('invalid')
```

```response title=Response
┌─toDateTimeOrZero('2025-12-30 13:44:17')─┬─toDateTimeOrZero('invalid')─┐
│                     2025-12-30 13:44:17 │         1970-01-01 00:00:00 │
└─────────────────────────────────────────┴─────────────────────────────┘
```

","1.1","Type Conversion"
"25.9.2.1","toTime64OrZero",0,0,"","","System","
Converts an input value to a value of type Time64 but returns `00:00:00.000` in case of an error.
Like [`toTime64`](#toTime54) but returns `00:00:00.000` instead of throwing an exception on conversion errors.
","toTime64OrZero(x)","- `x` — A string representation of a time with subsecond precision. [`String`](/sql-reference/data-types/string)
","","Returns a Time64 value if successful, otherwise `00:00:00.000`. [`Time64`](/sql-reference/data-types/time64)","**Usage example**

```sql title=Query
SELECT toTime64OrZero('12:30:45.123'), toTime64OrZero('invalid')
```

```response title=Response
┌─toTime64OrZero('12:30:45.123')─┬─toTime64OrZero('invalid')─┐
│                   12:30:45.123 │             00:00:00.000 │
└────────────────────────────────┴──────────────────────────┘
```

","25.6","Type Conversion"
"25.9.2.1","toDate32OrZero",0,0,"","","System","
Converts an input value to a value of type [Date32](../data-types/date32.md) but returns the lower boundary of [Date32](../data-types/date32.md) if an invalid argument is received.
The same as [toDate32](#toDate32) but returns lower boundary of [Date32](../data-types/date32.md) if an invalid argument is received.

See also:
- [`toDate32`](#toDate32)
- [`toDate32OrNull`](#toDate32OrNull)
- [`toDate32OrDefault`](#toDate32OrDefault)
    ","toDate32OrZero(x)","- `x` — A string representation of a date. [`String`](/sql-reference/data-types/string)
","","Returns a Date32 value if successful, otherwise the lower boundary of Date32 (`1900-01-01`). [`Date32`](/sql-reference/data-types/date32)","**Usage example**

```sql title=Query
SELECT toDate32OrZero('2025-01-01'), toDate32OrZero('')
```

```response title=Response
┌─toDate32OrZero('2025-01-01')─┬─toDate32OrZero('')─┐
│                   2025-01-01 │         1900-01-01 │
└──────────────────────────────┴────────────────────┘
```

","21.9","Type Conversion"
"25.9.2.1","toDateOrZero",0,0,"","","System","
Converts an input value to a value of type [`Date`](../data-types/date.md) but returns the lower boundary of [`Date`](../data-types/date.md) if an invalid argument is received.
The same as [toDate](#todate) but returns lower boundary of [`Date`](../data-types/date.md) if an invalid argument is received.

See also:
- [`toDate`](#toDate)
- [`toDateOrNull`](#toDateOrNull)
- [`toDateOrDefault`](#toDateOrDefault)
    ","toDateOrZero(x)","- `x` — A string representation of a date. [`String`](/sql-reference/data-types/string)
","","Returns a Date value if successful, otherwise the lower boundary of Date (`1970-01-01`). [`Date`](/sql-reference/data-types/date)","**Usage example**

```sql title=Query
SELECT toDateOrZero('2025-12-30'), toDateOrZero('')
```

```response title=Response
┌─toDateOrZero('2025-12-30')─┬─toDateOrZero('')─┐
│                 2025-12-30 │       1970-01-01 │
└────────────────────────────┴──────────────────┘
```

","1.1","Type Conversion"
"25.9.2.1","toFloat64OrZero",0,0,"","","System","
Converts an input value to a value of type [Float64](../data-types/float.md) but returns `0` in case of an error.
Like [`toFloat64`](#toFloat64) but returns `0` instead of throwing an exception on conversion errors.

See also:
- [`toFloat64`](#toFloat64).
- [`toFloat64OrNull`](#toFloat64OrNull).
- [`toFloat64OrDefault`](#toFloat64OrDefault).
    ","toFloat64OrZero(x)","- `x` — A string representation of a number. [`String`](/sql-reference/data-types/string)
","","Returns a 64-bit Float value if successful, otherwise `0`. [`Float64`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT
    toFloat64OrZero('42.7'),
    toFloat64OrZero('abc')
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toFloat64OrZero('42.7'): 42.7
toFloat64OrZero('abc'):  0
```

","1.1","Type Conversion"
"25.9.2.1","toBFloat16OrZero",0,0,"","","System","
Converts a String input value to a value of type BFloat16.
If the string does not represent a floating point value, the function returns zero.

Supported arguments:
- String representations of numeric values.

Unsupported arguments (return `0`):
- String representations of binary and hexadecimal values.
- Numeric values.

:::note
The function allows a silent loss of precision while converting from the string representation.
:::

See also:
- [`toBFloat16`](#toBFloat16).
- [`toBFloat16OrNull`](#toBFloat16OrNull).
    ","toBFloat16OrZero(x)","- `x` — A String representation of a number. [`String`](/sql-reference/data-types/string)
","","Returns a 16-bit brain-float value, otherwise `0`. [`BFloat16`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT toBFloat16OrZero('0x5E'), -- unsupported arguments
       toBFloat16OrZero('12.3'), -- typical use
       toBFloat16OrZero('12.3456789') -- silent loss of precision
```

```response title=Response
0
12.25
12.3125
```

","1.1","Type Conversion"
"25.9.2.1","toInt128OrZero",0,0,"","","System","
Converts an input value to type [Int128](/en/sql-reference/data-types/int-uint) but returns `0` in case of an error.
Like [`toInt128`](#toint128) but returns `0` instead of throwing an exception.

See also:
- [`toInt128`](#toInt128).
- [`toInt128OrNull`](#toInt128OrNull).
- [`toInt128OrDefault`](#toInt128OrDefault).
    ","toInt128OrZero(x)","- `x` — Input value to convert. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal) or [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Date`](/sql-reference/data-types/date) or [`DateTime`](/sql-reference/data-types/datetime)
","","Returns the converted input value, otherwise `0` if conversion fails. [`Int128`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT toInt128OrZero('123')
```

```response title=Response
123
```

**Failed conversion returns zero**

```sql title=Query
SELECT toInt128OrZero('abc')
```

```response title=Response
0
```

","20.8","Type Conversion"
"25.9.2.1","toInt8OrZero",0,0,"","","System","
Like [`toInt8`](#toInt8), this function converts an input value to a value of type [Int8](../data-types/int-uint.md) but returns `0` in case of an error.

Supported arguments:
- String representations of (U)Int*.

Unsupported arguments (return `0`):
- String representations of Float* values, including `NaN` and `Inf`.
- String representations of binary and hexadecimal values, e.g. `SELECT toInt8OrZero('0xc0fe');`.

:::note
If the input value cannot be represented within the bounds of [Int8](../data-types/int-uint.md), overflow or underflow of the result occurs.
This is not considered an error.
:::

See also:
- [`toInt8`](#toInt8).
- [`toInt8OrNull`](#toInt8OrNull).
- [`toInt8OrDefault`](#toInt8OrDefault).
    ","toInt8OrZero(x)","- `x` — A String representation of a number. [`String`](/sql-reference/data-types/string)
","","Returns a value of type Int8, otherwise `0` if the conversion is unsuccessful. [`Int8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT
    toInt8OrZero('8'),
    toInt8OrZero('abc')
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toInt8OrZero('8'): 8
toInt8OrZero('abc'): 0
```

","1.1","Type Conversion"
"25.9.2.1","toUInt128OrZero",0,0,"","","System","
Like [`toUInt128`](#toUInt128), this function converts an input value to a value of type [`UInt128`](../data-types/int-uint.md) but returns `0` in case of an error.

Supported arguments:
- String representations of (U)Int*.

Unsupported arguments (return `0`):
- String representations of Float* values, including `NaN` and `Inf`.
- String representations of binary and hexadecimal values, e.g. `SELECT toUInt128OrZero('0xc0fe');`.

:::note
If the input value cannot be represented within the bounds of [`UInt128`](../data-types/int-uint.md), overflow or underflow of the result occurs.
This is not considered an error.
:::

See also:
- [`toUInt128`](#toUInt128).
- [`toUInt128OrNull`](#toUInt128OrNull).
- [`toUInt128OrDefault`](#toUInt128OrDefault).
    ","toUInt128OrZero(x)","- `x` — A String representation of a number. [`String`](/sql-reference/data-types/string)
","","Returns a value of type UInt128, otherwise `0` if the conversion is unsuccessful. [`UInt128`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT
    toUInt128OrZero('128'),
    toUInt128OrZero('abc')
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toUInt128OrZero('128'): 128
toUInt128OrZero('abc'): 0
```

","1.1","Type Conversion"
"25.9.2.1","toUInt32OrZero",0,0,"","","System","
Like [`toUInt32`](#toUInt32), this function converts an input value to a value of type [`UInt32`](../data-types/int-uint.md) but returns `0` in case of an error.

Supported arguments:
- String representations of (U)Int8/16/32/128/256.

Unsupported arguments (return `0`):
- String representations of Float* values, including `NaN` and `Inf`.
- String representations of binary and hexadecimal values, e.g. `SELECT toUInt32OrZero('0xc0fe');`.

:::note
If the input value cannot be represented within the bounds of [`UInt32`](../data-types/int-uint.md), overflow or underflow of the result occurs.
This is not considered an error.
:::

See also:
- [`toUInt32`](#toUInt32).
- [`toUInt32OrNull`](#toUInt32OrNull).
- [`toUInt32OrDefault`](#toUInt32OrDefault).
    ","toUInt32OrZero(x)","- `x` — A String representation of a number. [`String`](/sql-reference/data-types/string)
","","Returns a value of type UInt32, otherwise `0` if the conversion is unsuccessful. [`UInt32`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT
    toUInt32OrZero('32'),
    toUInt32OrZero('abc')
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toUInt32OrZero('32'):  32
toUInt32OrZero('abc'): 0
```

","1.1","Type Conversion"
"25.9.2.1","toIPv6",0,0,"","","System","
onverts a string or a `UInt128` form of IPv6 address to [`IPv6`](../data-types/ipv6.md) type.
For strings, if the IPv6 address has an invalid format, returns an empty value.
Similar to [`IPv6StringToNum`](/sql-reference/functions/ip-address-functions#IPv6StringToNum) and [`IPv6NumToString`](/sql-reference/functions/ip-address-functions#IPv6NumToString) functions, which convert IPv6 address to and from binary format (i.e. `FixedString(16)`).

If the input string contains a valid IPv4 address, then the IPv6 equivalent of the IPv4 address is returned.
","toIPv6(x)","- `x` — An IP address. [`String`](/sql-reference/data-types/string) or [`UInt128`](/sql-reference/data-types/int-uint)
","","Returns an IPv6 address. [`IPv6`](/sql-reference/data-types/ipv6)","**Usage example**

```sql title=Query
WITH '2001:438:ffff::407d:1bc1' AS IPv6_string
SELECT
    hex(IPv6StringToNum(IPv6_string)),
    hex(toIPv6(IPv6_string));
```

```response title=Response
┌─hex(IPv6StringToNum(IPv6_string))─┬─hex(toIPv6(IPv6_string))─────────┐
│ 20010438FFFF000000000000407D1BC1  │ 20010438FFFF000000000000407D1BC1 │
└───────────────────────────────────┴──────────────────────────────────┘
```

**IPv4-to-IPv6 mapping**

```sql title=Query
SELECT toIPv6('127.0.0.1');
```

```response title=Response
┌─toIPv6('127.0.0.1')─┐
│ ::ffff:127.0.0.1    │
└─────────────────────┘
```

","20.1","Type Conversion"
"25.9.2.1","toIPv4",0,0,"","","System","
Converts a string or a UInt32 form of IPv4 address to type IPv4.
It is similar to [`IPv4StringToNum`](/sql-reference/functions/ip-address-functions#IPv4StringToNum) and [`IPv4NumToString`](/sql-reference/functions/ip-address-functions#IPv4NumToString) functions but it supports both string and unsigned integer data types as input arguments.
","toIPv4(x)","- `x` — An IPv4 address [`String`](/sql-reference/data-types/string) or [`UInt8/16/32`](/sql-reference/data-types/int-uint)
","","Returns an IPv4 address. [`IPv4`](/sql-reference/data-types/ipv4)","**Usage example**

```sql title=Query
SELECT toIPv4('171.225.130.45');
```

```response title=Response
┌─toIPv4('171.225.130.45')─┐
│ 171.225.130.45           │
└──────────────────────────┘
```

**Comparison with IPv4StringToNum and IPv4NumToString functions.**

```sql title=Query
WITH
    '171.225.130.45' AS IPv4_string
SELECT
    hex(IPv4StringToNum(IPv4_string)),
    hex(toIPv4(IPv4_string))
```

```response title=Response
┌─hex(IPv4StringToNum(IPv4_string))─┬─hex(toIPv4(IPv4_string))─┐
│ ABE1822D                          │ ABE1822D                 │
└───────────────────────────────────┴──────────────────────────┘
```

**Conversion from an integer**

```sql title=Query
SELECT toIPv4(2130706433);
```

```response title=Response
┌─toIPv4(2130706433)─┐
│ 127.0.0.1          │
└────────────────────┘
```

","20.1","IP Address"
"25.9.2.1","toDateTime",0,0,"","","System","
Converts an input value to type [DateTime](../data-types/datetime.md).

:::note
If `expr` is a number, it is interpreted as the number of seconds since the beginning of the Unix Epoch (as Unix timestamp).
If `expr` is a [String](../data-types/string.md), it may be interpreted as a Unix timestamp or as a string representation of date / date with time.
Thus, parsing of short numbers' string representations (up to 4 digits) is explicitly disabled due to ambiguity, e.g. a string `'1999'` may be both a year (an incomplete string representation of Date / DateTime) or a unix timestamp. Longer numeric strings are allowed.
:::
    ","toDateTime(expr[, time_zone])","- `expr` — The value. [`String`](/sql-reference/data-types/string) or [`Int`](/sql-reference/data-types/int-uint) or [`Date`](/sql-reference/data-types/date) or [`DateTime`](/sql-reference/data-types/datetime)
- `time_zone` — Time zone. [`String`](/sql-reference/data-types/string)
","","Returns a date time. [`DateTime`](/sql-reference/data-types/datetime)","**Usage example**

```sql title=Query
SELECT toDateTime('2025-01-01 00:00:00'), toDateTime(1735689600, 'UTC')
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toDateTime('2025-01-01 00:00:00'): 2025-01-01 00:00:00
toDateTime(1735689600, 'UTC'):     2025-01-01 00:00:00
```

","1.1","Type Conversion"
"25.9.2.1","toTime",0,0,"","","System","
Converts an input value to type [Time](/en/sql-reference/data-types/time).
Supports conversion from String, FixedString, DateTime, or numeric types representing seconds since midnight.
    ","toTime(x)","- `x` — Input value to convert. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring) or [`DateTime`](/sql-reference/data-types/datetime) or [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns the converted value. [`Time`](/sql-reference/data-types/time)","**String to Time conversion**

```sql title=Query
SELECT toTime('14:30:25')
```

```response title=Response
14:30:25
```

**DateTime to Time conversion**

```sql title=Query
SELECT toTime(toDateTime('2025-04-15 14:30:25'))
```

```response title=Response
14:30:25
```

**Integer to Time conversion**

```sql title=Query
SELECT toTime(52225)
```

```response title=Response
14:30:25
```

","1.1","Type Conversion"
"25.9.2.1","toDate32",0,0,"","","System","
Converts the argument to the [Date32](../data-types/date32.md) data type.
If the value is outside the range, `toDate32` returns the border values supported by [Date32](../data-types/date32.md).
If the argument is of type [`Date`](../data-types/date.md), it's bounds are taken into account.
    ","toDate32(expr)","- `expr` — The value to convert. [`String`](/sql-reference/data-types/string) or [`UInt32`](/sql-reference/data-types/int-uint) or [`Date`](/sql-reference/data-types/date)
","","Returns a calendar date. [`Date32`](/sql-reference/data-types/date32)","**Within range**

```sql title=Query
SELECT toDate32('2025-01-01') AS value, toTypeName(value)
FORMAT Vertical
```

```response title=Response
Row 1:
──────
value:           2025-01-01
toTypeName(value): Date32
```

**Outside range**

```sql title=Query
SELECT toDate32('1899-01-01') AS value, toTypeName(value)
FORMAT Vertical
```

```response title=Response
Row 1:
──────
value:           1900-01-01
toTypeName(value): Date32
```

","21.9","Type Conversion"
"25.9.2.1","DATE",0,1,"","","System","","","","","","","",""
"25.9.2.1","toDate",0,0,"","","System","
Converts an input value to type [`Date`](/en/sql-reference/data-types/date).
Supports conversion from String, FixedString, DateTime, or numeric types.
    ","toDate(x)","- `x` — Input value to convert. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring) or [`DateTime`](/sql-reference/data-types/datetime) or [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns the converted input value. [`Date`](/sql-reference/data-types/date)","**String to Date conversion**

```sql title=Query
SELECT toDate('2025-04-15')
```

```response title=Response
2025-04-15
```

**DateTime to Date conversion**

```sql title=Query
SELECT toDate(toDateTime('2025-04-15 10:30:00'))
```

```response title=Response
2025-04-15
```

**Integer to Date conversion**

```sql title=Query
SELECT toDate(20297)
```

```response title=Response
2025-07-28
```

","1.1","Type Conversion"
"25.9.2.1","toDecimal128",0,0,"","","System","
Converts an input value to a value of type [`Decimal(38, S)`](../data-types/decimal.md) with scale of `S`.
Throws an exception in case of an error.

Supported arguments:
- Values or string representations of type (U)Int*.
- Values or string representations of type Float*.

Unsupported arguments:
- Values or string representations of Float* values `NaN` and `Inf` (case-insensitive).
- String representations of binary and hexadecimal values, e.g. `SELECT toDecimal128('0xc0fe', 1);`.

:::note
An overflow can occur if the value of `expr` exceeds the bounds of `Decimal128`:`(-1*10^(38 - S), 1*10^(38 - S))`.
Excessive digits in a fraction are discarded (not rounded).
Excessive digits in the integer part will lead to an exception.
:::

:::warning
Conversions drop extra digits and could operate in an unexpected way when working with Float32/Float64 inputs as the operations are performed using floating point instructions.
For example: `toDecimal128(1.15, 2)` is equal to `1.14` because 1.15 * 100 in floating point is 114.99.
You can use a String input so the operations use the underlying integer type: `toDecimal128('1.15', 2) = 1.15`
:::
    ","toDecimal128(expr, S)","- `expr` — Expression returning a number or a string representation of a number. [`Expression`](/sql-reference/data-types/special-data-types/expression)
- `S` — Scale parameter between 0 and 38, specifying how many digits the fractional part of a number can have. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns a value of type `Decimal(38, S)` [`Decimal128(S)`](/sql-reference/data-types/decimal)","**Usage example**

```sql title=Query
SELECT
    toDecimal128(99, 1) AS a, toTypeName(a) AS type_a,
    toDecimal128(99.67, 2) AS b, toTypeName(b) AS type_b,
    toDecimal128('99.67', 3) AS c, toTypeName(c) AS type_c
FORMAT Vertical
```

```response title=Response
Row 1:
──────
a:      99
type_a: Decimal(38, 1)
b:      99.67
type_b: Decimal(38, 2)
c:      99.67
type_c: Decimal(38, 3)
```

","18.12","Type Conversion"
"25.9.2.1","toDecimal32",0,0,"","","System","
Converts an input value to a value of type [`Decimal(9, S)`](../data-types/decimal.md) with scale of `S`. Throws an exception in case of an error.

Supported arguments:
- Values or string representations of type (U)Int*.
- Values or string representations of type Float*.

Unsupported arguments:
- Values or string representations of Float* values `NaN` and `Inf` (case-insensitive).
- String representations of binary and hexadecimal values, e.g. `SELECT toDecimal32('0xc0fe', 1);`.

:::note
An overflow can occur if the value of `expr` exceeds the bounds of `Decimal32`:`(-1*10^(9 - S), 1*10^(9 - S))`.
Excessive digits in a fraction are discarded (not rounded).
Excessive digits in the integer part will lead to an exception.
:::

:::warning
Conversions drop extra digits and could operate in an unexpected way when working with Float32/Float64 inputs as the operations are performed using floating point instructions.
For example: `toDecimal32(1.15, 2)` is equal to `1.14` because 1.15 * 100 in floating point is 114.99.
You can use a String input so the operations use the underlying integer type: `toDecimal32('1.15', 2) = 1.15`
:::
    ","toDecimal32(expr, S)","- `expr` — Expression returning a number or a string representation of a number. [`Expression`](/sql-reference/data-types/special-data-types/expression)
- `S` — Scale parameter between 0 and 9, specifying how many digits the fractional part of a number can have. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns a value of type `Decimal(9, S)` [`Decimal32(S)`](/sql-reference/data-types/decimal)","**Usage example**

```sql title=Query
SELECT
    toDecimal32(2, 1) AS a, toTypeName(a) AS type_a,
    toDecimal32(4.2, 2) AS b, toTypeName(b) AS type_b,
    toDecimal32('4.2', 3) AS c, toTypeName(c) AS type_c
FORMAT Vertical
```

```response title=Response
Row 1:
──────
a:      2
type_a: Decimal(9, 1)
b:      4.2
type_b: Decimal(9, 2)
c:      4.2
type_c: Decimal(9, 3)
```

","18.12","Type Conversion"
"25.9.2.1","toFloat64",0,0,"","","System","
Converts an input value to a value of type [`Float64`](../data-types/float.md).
Throws an exception in case of an error.

Supported arguments:
- Values of type (U)Int*.
- String representations of (U)Int8/16/32/128/256.
- Values of type Float*, including `NaN` and `Inf`.
- String representations of type Float*, including `NaN` and `Inf` (case-insensitive).

Unsupported arguments:
- String representations of binary and hexadecimal values, e.g. `SELECT toFloat64('0xc0fe');`.

See also:
- [`toFloat64OrZero`](#toFloat64OrZero).
- [`toFloat64OrNull`](#toFloat64OrNull).
- [`toFloat64OrDefault`](#toFloat64OrDefault).
    ","toFloat64(expr)","- `expr` — Expression returning a number or a string representation of a number. [`Expression`](/sql-reference/data-types/special-data-types/expression)
","","Returns a 64-bit floating point value. [`Float64`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT
    toFloat64(42.7),
    toFloat64('42.7'),
    toFloat64('NaN')
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toFloat64(42.7):   42.7
toFloat64('42.7'): 42.7
toFloat64('NaN'):  nan
```

","1.1","Type Conversion"
"25.9.2.1","toFloat32",0,0,"","","System","
Converts an input value to a value of type [Float32](/sql-reference/data-types/float).
Throws an exception in case of an error.

Supported arguments:
- Values of type (U)Int*.
- String representations of (U)Int8/16/32/128/256.
- Values of type Float*, including `NaN` and `Inf`.
- String representations of Float*, including `NaN` and `Inf` (case-insensitive).

Unsupported arguments:
- String representations of binary and hexadecimal values, e.g. `SELECT toFloat32('0xc0fe');`.

See also:
- [`toFloat32OrZero`](#toFloat32OrZero).
- [`toFloat32OrNull`](#toFloat32OrNull).
- [`toFloat32OrDefault`](#toFloat32OrDefault).
    ","toFloat32(expr)","- `expr` — Expression returning a number or a string representation of a number. [`Expression`](/sql-reference/data-types/special-data-types/expression)
","","Returns a 32-bit floating point value. [`Float32`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT
    toFloat32(42.7),
    toFloat32('42.7'),
    toFloat32('NaN')
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toFloat32(42.7):   42.7
toFloat32('42.7'): 42.7
toFloat32('NaN'):  nan
```

","1.1","Type Conversion"
"25.9.2.1","toBFloat16",0,0,"","","System","
Converts an input value to a value of type BFloat16.
Throws an exception in case of an error.

See also:
- [`toBFloat16OrZero`](#toBFloat16OrZero).
- [`toBFloat16OrNull`](#toBFloat16OrNull).
    ","toBFloat16(expr)","- `expr` — Expression returning a number or a string representation of a number. [`Expression`](/sql-reference/data-types/special-data-types/expression)
","","Returns a 16-bit brain-float value. [`BFloat16`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT
toBFloat16(toFloat32(42.7)),
toBFloat16(toFloat32('42.7')),
toBFloat16('42.7')
FORMAT Vertical;
```

```response title=Response
toBFloat16(toFloat32(42.7)): 42.5
toBFloat16(t⋯32('42.7')):    42.5
toBFloat16('42.7'):          42.5
```

","1.1","Type Conversion"
"25.9.2.1","toInt128",0,0,"","","System","
Converts an input value to a value of type [Int128](/sql-reference/data-types/int-uint).
Throws an exception in case of an error.
The function uses rounding towards zero, meaning it truncates fractional digits of numbers.

Supported arguments:
- Values or string representations of type (U)Int*.
- Values of type Float*.

Unsupported arguments:
- String representations of Float* values, including `NaN` and `Inf`.
- String representations of binary and hexadecimal values, e.g. `SELECT toInt128('0xc0fe');`.

:::note
If the input value cannot be represented within the bounds of Int128, the result over or under flows.
This is not considered an error.
:::

See also:
- [`toInt128OrZero`](#toInt128OrZero).
- [`toInt128OrNull`](#toInt128OrNull).
- [`toInt128OrDefault`](#toInt128OrDefault).
    ","toInt128(expr)","- `expr` — Expression returning a number or a string representation of a number. [`Expression`](/sql-reference/data-types/special-data-types/expression)
","","Returns a 128-bit integer value. [`Int128`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT
    toInt128(-128),
    toInt128(-128.8),
    toInt128('-128')
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toInt128(-128):   -128
toInt128(-128.8): -128
toInt128('-128'): -128
```

","1.1","Type Conversion"
"25.9.2.1","toInt64",0,0,"","","System","
Converts an input value to a value of type [`Int64`](../data-types/int-uint.md).
Throws an exception in case of an error.

Supported arguments:
- Values or string representations of type (U)Int*.
- Values of type Float*.

Unsupported arguments:
- String representations of Float* values, including `NaN` and `Inf`.
- String representations of binary and hexadecimal values, e.g. `SELECT toInt64('0xc0fe');`.

:::note
If the input value cannot be represented within the bounds of [Int64](../data-types/int-uint.md), the result over or under flows.
This is not considered an error.
For example: `SELECT toInt64(9223372036854775808) == -9223372036854775808;`
:::

:::note
The function uses [rounding towards zero](https://en.wikipedia.org/wiki/Rounding#Rounding_towards_zero), meaning it truncates fractional digits of numbers.
:::

See also:
- [`toInt64OrZero`](#toInt64OrZero).
- [`toInt64OrNull`](#toInt64OrNull).
- [`toInt64OrDefault`](#toInt64OrDefault).
    ","toInt64(expr)","- `expr` — Expression returning a number or a string representation of a number. Supported: values or string representations of type (U)Int*, values of type Float*. Unsupported: string representations of Float* values including NaN and Inf, string representations of binary and hexadecimal values. [`Expression`](/sql-reference/data-types/special-data-types/expression)
","","Returns a 64-bit integer value. [`Int64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT
    toInt64(-64),
    toInt64(-64.64),
    toInt64('-64')
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toInt64(-64):    -64
toInt64(-64.64): -64
toInt64('-64'):  -64
```

","1.1","Type Conversion"
"25.9.2.1","toInt32",0,0,"","","System","
Converts an input value to a value of type [`Int32`](../data-types/int-uint.md).
Throws an exception in case of an error.

Supported arguments:
- Values or string representations of type (U)Int*.
- Values of type Float*.

Unsupported arguments:
- String representations of Float* values, including `NaN` and `Inf`.
- String representations of binary and hexadecimal values, e.g. `SELECT toInt32('0xc0fe');`.

:::note
If the input value cannot be represented within the bounds of [Int32](../data-types/int-uint.md), the result over or under flows.
This is not considered an error.
For example: `SELECT toInt32(2147483648) == -2147483648;`
:::

:::note
The function uses [rounding towards zero](https://en.wikipedia.org/wiki/Rounding#Rounding_towards_zero), meaning it truncates fractional digits of numbers.
:::

See also:
- [`toInt32OrZero`](#toInt32OrZero).
- [`toInt32OrNull`](#toInt32OrNull).
- [`toInt32OrDefault`](#toInt32OrDefault).
    ","toInt32(expr)","- `expr` — Expression returning a number or a string representation of a number. [`Expression`](/sql-reference/data-types/special-data-types/expression)
","","Returns a 32-bit integer value. [`Int32`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT
    toInt32(-32),
    toInt32(-32.32),
    toInt32('-32')
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toInt32(-32):    -32
toInt32(-32.32): -32
toInt32('-32'):  -32
```

","1.1","Type Conversion"
"25.9.2.1","toInt16",0,0,"","","System","
Converts an input value to a value of type [`Int16`](../data-types/int-uint.md).
Throws an exception in case of an error.

Supported arguments:
- Values or string representations of type (U)Int*.
- Values of type Float*.

Unsupported arguments:
- String representations of Float* values, including `NaN` and `Inf`.
- String representations of binary and hexadecimal values, e.g. `SELECT toInt16('0xc0fe');`.

:::note
If the input value cannot be represented within the bounds of [Int16](../data-types/int-uint.md), overflow or underflow of the result occurs.
This is not considered an error.
For example: `SELECT toInt16(32768) == -32768;`.
:::

:::note
The function uses [rounding towards zero](https://en.wikipedia.org/wiki/Rounding#Rounding_towards_zero), meaning it truncates fractional digits of numbers.
:::

See also:
- [`toInt16OrZero`](#toInt16OrZero).
- [`toInt16OrNull`](#toInt16OrNull).
- [`toInt16OrDefault`](#toInt16OrDefault).
    ","toInt16(expr)","- `expr` — Expression returning a number or a string representation of a number. [`Expression`](/sql-reference/data-types/special-data-types/expression)
","","Returns a 16-bit integer value. [`Int16`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT
    toInt16(-16),
    toInt16(-16.16),
    toInt16('-16')
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toInt16(-16):    -16
toInt16(-16.16): -16
toInt16('-16'):  -16
```

","1.1","Type Conversion"
"25.9.2.1","toUInt64",0,0,"","","System","
Converts an input value to a value of type [`UInt64`](../data-types/int-uint.md).
Throws an exception in case of an error.

Supported arguments:
- Values or string representations of type (U)Int*.
- Values of type Float*.

Unsupported types:
- String representations of Float* values, including `NaN` and `Inf`.
- String representations of binary and hexadecimal values, e.g. `SELECT toUInt64('0xc0fe');`.

:::note
If the input value cannot be represented within the bounds of [`UInt64`](../data-types/int-uint.md), the result over or under flows.
This is not considered an error.
For example: `SELECT toUInt64(18446744073709551616) == 0;`
:::

:::note
The function uses [rounding towards zero](https://en.wikipedia.org/wiki/Rounding#Rounding_towards_zero), meaning it truncates fractional digits of numbers.
:::

See also:
- [`toUInt64OrZero`](#toUInt64OrZero).
- [`toUInt64OrNull`](#toUInt64OrNull).
- [`toUInt64OrDefault`](#toUInt64OrDefault).
    ","toUInt64(expr)","- `expr` — Expression returning a number or a string representation of a number. [`Expression`](/sql-reference/data-types/special-data-types/expression)
","","Returns a 64-bit unsigned integer value. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT
    toUInt64(64),
    toUInt64(64.64),
    toUInt64('64')
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toUInt64(64):    64
toUInt64(64.64): 64
toUInt64('64'):  64
```

","1.1","Type Conversion"
"25.9.2.1","financialNetPresentValueExtended",0,0,"","","System","
Calculates the Extended Net Present Value (XNPV) for a series of cash flows occurring at irregular intervals. XNPV considers the specific timing of each cash flow when calculating present value.

XNPV equation for `ACT_365F`:

$$
XNPV=\sum_{i=1}^n \frac{cashflow_i}{(1 + rate)^{(date_i - date_0)/365}}
$$

Arrays should be sorted by date in ascending order. Dates need to be unique.
    ","financialNetPresentValueExtended(rate, cashflows, dates[, daycount])","- `rate` — The discount rate to apply. [`Float*`](/sql-reference/data-types/float)
- `cashflows` — Array of cash flows. Each value represents a payment (negative value) or income (positive value). Must contain at least one positive and one negative value. [`Array(Int8/16/32/64)`](/sql-reference/data-types/array) or [`Array(Float*)`](/sql-reference/data-types/array)
- `dates` — Array of dates corresponding to each cash flow. Must have the same size as cashflows array. [`Array(Date)`](/sql-reference/data-types/array) or [`Array(Date32)`](/sql-reference/data-types/array)
- `[, daycount]` — Optional day count convention. Supported values: `'ACT_365F'` (default) — Actual/365 Fixed, `'ACT_365_25'` — Actual/365.25. [`String`](/sql-reference/data-types/string)
","","Returns the net present value as a Float64 value. [`Float64`](/sql-reference/data-types/float)","**Basic usage**

```sql title=Query
SELECT financialNetPresentValueExtended(0.1, [-10000., 5750., 4250., 3250.], [toDate('2020-01-01'), toDate('2020-03-01'), toDate('2020-10-30'), toDate('2021-02-15')])
```

```response title=Response
2506.579458169746
```

**Using different day count convention**

```sql title=Query
SELECT financialNetPresentValueExtended(0.1, [-10000., 5750., 4250., 3250.], [toDate('2020-01-01'), toDate('2020-03-01'), toDate('2020-10-30'), toDate('2021-02-15')], 'ACT_365_25')
```

```response title=Response
2507.067268742502
```

","25.7","Financial"
"25.9.2.1","toTimeOrZero",0,0,"","","System","
Converts an input value to a value of type Time but returns `00:00:00` in case of an error.
Like toTime but returns `00:00:00` instead of throwing an exception on conversion errors.
    ","toTimeOrZero(x)","- `x` — A string representation of a time. [`String`](/sql-reference/data-types/string)
","","Returns a Time value if successful, otherwise `00:00:00`. [`Time`](/sql-reference/data-types/time)","**Usage example**

```sql title=Query
SELECT toTimeOrZero('12:30:45'), toTimeOrZero('invalid')
```

```response title=Response
┌─toTimeOrZero('12:30:45')─┬─toTimeOrZero('invalid')─┐
│                 12:30:45 │                00:00:00 │
└──────────────────────────┴─────────────────────────┘
```

","1.1","Type Conversion"
"25.9.2.1","sin",0,1,"","","System","Returns the sine of the argument.","sin(x)","- `x` — The number whose sine will be returned. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal*`](/sql-reference/data-types/decimal)
","","Returns the sine of x.","**simple**

```sql title=Query
SELECT sin(1.23)
```

```response title=Response
0.9424888019316975
```

","","Mathematical"
"25.9.2.1","idnaDecode",0,0,"","","System","
Returns the Unicode (UTF-8) representation (ToUnicode algorithm) of a domain name according to the [Internationalized Domain Names in Applications](https://en.wikipedia.org/wiki/Internationalized_domain_name#Internationalizing_Domain_Names_in_Applications) (IDNA) mechanism.
In case of an error (e.g. because the input is invalid), the input string is returned.
Note that repeated application of [`idnaEncode()`](#idnaEncode) and [`idnaDecode()`](#idnaDecode) does not necessarily return the original string due to case normalization.
","idnaDecode(s)","- `s` — Input string. [`String`](/sql-reference/data-types/string)
","","Returns a Unicode (UTF-8) representation of the input string according to the IDNA mechanism of the input value. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT idnaDecode('xn--strae-oqa.xn--mnchen-3ya.de')
```

```response title=Response
┌─idnaDecode('xn--strae-oqa.xn--mnchen-3ya.de')─┐
│ straße.münchen.de                             │
└───────────────────────────────────────────────┘
```

","24.1","String"
"25.9.2.1","formatDateTimeInJodaSyntax",0,0,"","","System","
Similar to `formatDateTime`, except that it formats datetime in Joda style instead of MySQL style. Refer to [Joda Time documentation](https://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html).

The opposite operation of this function is [`parseDateTimeInJodaSyntax`](/sql-reference/functions/type-conversion-functions#parsedatetimeinjodasyntax).

Using replacement fields, you can define a pattern for the resulting string.

**Replacement fields:**

| Placeholder | Description | Presentation | Examples |
|-------------|-------------|-------------|----------|
| G | era | text | AD |
| C | century of era (>=0) | number | 20 |
| Y | year of era (>=0) | year | 1996 |
| x | weekyear (not supported yet) | year | 1996 |
| w | week of weekyear (not supported yet) | number | 27 |
| e | day of week | number | 2 |
| E | day of week | text | Tuesday; Tue |
| y | year | year | 1996 |
| D | day of year | number | 189 |
| M | month of year | month | July; Jul; 07 |
| d | day of month | number | 10 |
| a | halfday of day | text | PM |
| K | hour of halfday (0~11) | number | 0 |
| h | clockhour of halfday (1~12) | number | 12 |
| H | hour of day (0~23) | number | 0 |
| k | clockhour of day (1~24) | number | 24 |
| m | minute of hour | number | 30 |
| s | second of minute | number | 55 |
| S | fraction of second | number | 978 |
| z | time zone | text | Eastern Standard Time; EST |
| Z | time zone offset | zone | -0800; -0812 |
| ' | escape for text | delimiter | |
| '' | single quote | literal | ' |
    ","formatDateTimeInJodaSyntax(datetime, format[, timezone])","- `datetime` — A date or date time to format. [`DateTime`](/sql-reference/data-types/datetime) or [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime64`](/sql-reference/data-types/datetime64)
- `format` — Format string with Joda-style replacement fields. [`String`](/sql-reference/data-types/string)
- `timezone` — Optional. Timezone name for the formatted time. [`String`](/sql-reference/data-types/string)
","","Returns time and date values according to the determined format. [`String`](/sql-reference/data-types/string)","**Format datetime using Joda syntax**

```sql title=Query
SELECT formatDateTimeInJodaSyntax(toDateTime('2010-01-04 12:34:56'), 'yyyy-MM-dd HH:mm:ss')
```

```response title=Response
┌─formatDateTimeInJodaSyntax(toDateTime('2010-01-04 12:34:56'), 'yyyy-MM-dd HH:mm:ss')─┐
│ 2010-01-04 12:34:56                                                                     │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```

","20.1","Dates and Times"
"25.9.2.1","halfMD5",0,0,"","","System","
[Interprets](/sql-reference/functions/type-conversion-functions#reinterpretasstring) all the input
parameters as strings and calculates the MD5 hash value for each of them. Then combines hashes, takes the first 8 bytes of the hash of the
resulting string, and interprets them as [UInt64](/sql-reference/data-types/int-uint) in big-endian byte order. The function is
relatively slow (5 million short strings per second per processor core).

Consider using the [`sipHash64`](#sipHash64) function instead.

The function takes a variable number of input parameters.
Arguments can be any of the supported data types.
For some data types calculated value of hash function may be the same for the same values even if types of arguments differ (integers of different size, named and unnamed Tuple with the same data, Map and the corresponding Array(Tuple(key, value)) type with the same data).
    ","halfMD5(arg1[, arg2, ..., argN])","- `arg1[, arg2, ..., argN]` — Variable number of arguments for which to compute the hash. [`Any`](/sql-reference/data-types)
","","Returns the computed half MD5 hash of the given input params returned as a `UInt64` in big-endian byte order. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT HEX(halfMD5('abc', 'cde', 'fgh'));
```

```response title=Response
┌─hex(halfMD5('abc', 'cde', 'fgh'))─┐
│ 2C9506B7374CFAF4                  │
└───────────────────────────────────┘
```

","1.1","Hash"
"25.9.2.1","wyHash64",0,0,"","","System","Computes a 64-bit [wyHash64](https://github.com/wangyi-fudan/wyhash) hash value.","wyHash64(arg)","- `arg` — String argument for which to compute the hash. [`String`](/sql-reference/data-types/string)
","","Returns the computed 64-bit hash value [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT wyHash64('ClickHouse') AS Hash;
```

```response title=Response
12336419557878201794
```

","22.7","Hash"
"25.9.2.1","xxHash64",0,0,"","","System","
Calculates a [xxHash](http://cyan4973.github.io/xxHash/) from a string.

For the 32-bit version see [`xxHash32`](#xxHash32)
","xxHash64(arg)","- `arg` — Input string to hash. [`String`](/sql-reference/data-types/string)
","","Returns the computed 64-bit hash of the input string. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT xxHash64('Hello, world!');
```

```response title=Response
┌─xxHash64('Hello, world!')─┐
│      17691043854468224118 │
└───────────────────────────┘
```

","20.1","Hash"
"25.9.2.1","toUInt8OrNull",0,0,"","","System","
Like [`toUInt8`](#toUInt8), this function converts an input value to a value of type [`UInt8`](../data-types/int-uint.md) but returns `NULL` in case of an error.

Supported arguments:
- String representations of (U)Int8/16/32/128/256.

Unsupported arguments (return `NULL`):
- String representations of ordinary Float* values, including `NaN` and `Inf`.
- String representations of binary and hexadecimal values, e.g. `SELECT toUInt8OrNull('0xc0fe');`.

:::note
If the input value cannot be represented within the bounds of [`UInt8`](../data-types/int-uint.md), overflow or underflow of the result occurs.
This is not considered an error.
:::

See also:
- [`toUInt8`](#toUInt8).
- [`toUInt8OrZero`](#toUInt8OrZero).
- [`toUInt8OrDefault`](#toUInt8OrDefault).
    ","toUInt8OrNull(x)","- `x` — A String representation of a number. [`String`](/sql-reference/data-types/string)
","","Returns a value of type UInt8, otherwise `NULL` if the conversion is unsuccessful. [`UInt8`](/sql-reference/data-types/int-uint) or [`NULL`](/sql-reference/syntax#null)","**Usage example**

```sql title=Query
SELECT
    toUInt8OrNull('42'),
    toUInt8OrNull('abc')
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toUInt8OrNull('42'):  42
toUInt8OrNull('abc'): \N
```

","1.1","Type Conversion"
"25.9.2.1","hiveHash",0,0,"","","System","
Calculates a ""HiveHash"" from a string.
This is just [`JavaHash`](#javaHash) with zeroed out sign bits.
This function is used in [Apache Hive](https://en.wikipedia.org/wiki/Apache_Hive) for versions before 3.0.

::caution
This hash function is unperformant.
Use it only when this algorithm is already used in another system and you need to calculate the same result.
:::
","hiveHash(arg)","- `arg` — Input string to hash. [`String`](/sql-reference/data-types/string)
","","Returns the computed ""hive hash"" of the input string. [`Int32`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT hiveHash('Hello, world!');
```

```response title=Response
┌─hiveHash('Hello, world!')─┐
│                 267439093 │
└───────────────────────────┘
```

","20.1","Hash"
"25.9.2.1","javaHash",0,0,"","","System","
Calculates JavaHash from:
- [string](http://hg.openjdk.java.net/jdk8u/jdk8u/jdk/file/478a4add975b/src/share/classes/java/lang/String.java#l1452),
- [Byte](https://hg.openjdk.java.net/jdk8u/jdk8u/jdk/file/478a4add975b/src/share/classes/java/lang/Byte.java#l405),
- [Short](https://hg.openjdk.java.net/jdk8u/jdk8u/jdk/file/478a4add975b/src/share/classes/java/lang/Short.java#l410),
- [Integer](https://hg.openjdk.java.net/jdk8u/jdk8u/jdk/file/478a4add975b/src/share/classes/java/lang/Integer.java#l959),
- [Long](https://hg.openjdk.java.net/jdk8u/jdk8u/jdk/file/478a4add975b/src/share/classes/java/lang/Long.java#l1060).

:::caution
This hash function is unperformant.
Use it only when this algorithm is already in use in another system and you need to calculate the same result.
:::

:::note
Java only supports calculating the hash of signed integers,
so if you want to calculate a hash of unsigned integers you must cast them to the proper signed ClickHouse types.
:::
","javaHash(arg)","- `arg` — Input value to hash. [`Any`](/sql-reference/data-types)
","","Returns the computed hash of `arg` [`Int32`](/sql-reference/data-types/int-uint)","**Usage example 1**

```sql title=Query
SELECT javaHash(toInt32(123));
```

```response title=Response
┌─javaHash(toInt32(123))─┐
│               123      │
└────────────────────────┘
```

**Usage example 2**

```sql title=Query
SELECT javaHash('Hello, world!');
```

```response title=Response
┌─javaHash('Hello, world!')─┐
│               -1880044555 │
└───────────────────────────┘
```

","20.1","Hash"
"25.9.2.1","metroHash64",0,0,"","","System","
Produces a 64-bit [MetroHash](http://www.jandrewrogers.com/2015/05/27/metrohash/) hash value.

:::note
The calculated hash values may be equal for the same input values of different argument types.
This affects for example integer types of different size, named and unnamed `Tuple` with the same data, `Map` and the corresponding `Array(Tuple(key, value))` type with the same data.
:::
","metroHash64(arg1[, arg2, ...])","- `arg1[, arg2, ...]` — A variable number of input arguments for which to compute the hash. [`Any`](/sql-reference/data-types)
","","Returns the computed hash of the input arguments. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT metroHash64(array('e','x','a'), 'mple', 10, toDateTime('2019-06-15 23:00:00')) AS MetroHash, toTypeName(MetroHash) AS type;
```

```response title=Response
┌────────────MetroHash─┬─type───┐
│ 14235658766382344533 │ UInt64 │
└──────────────────────┴────────┘
```

","1.1","Hash"
"25.9.2.1","farmFingerprint64",0,0,"","","System","
Produces a 64-bit [FarmHash](https://github.com/google/farmhash) value using the `Fingerprint64` method.

:::tip
`farmFingerprint64` is preferred for a stable and portable value over [`farmHash64`](#farmHash64).
:::

:::note
The calculated hash values may be equal for the same input values of different argument types.
This affects for example integer types of different size, named and unnamed `Tuple` with the same data, `Map` and the corresponding `Array(Tuple(key, value))` type with the same data.
:::
","farmFingerprint64(arg1[, arg2, ...])","- `arg1[, arg2, ...]` — A variable number of input arguments for which to compute the hash. [`Any`](/sql-reference/data-types)
","","Returns the computed hash value of the input arguments. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT farmFingerprint64(array('e','x','a'), 'mple', 10, toDateTime('2019-06-15 23:00:00')) AS FarmFingerprint, toTypeName(FarmFingerprint) AS type;
```

```response title=Response
┌─────FarmFingerprint─┬─type───┐
│ 5752020380710916328 │ UInt64 │
└─────────────────────┴────────┘
```

","20.12","Hash"
"25.9.2.1","sipHash128",0,0,"","","System","
Like [`sipHash64`](#sipHash64) but produces a 128-bit hash value, i.e. the final xor-folding state is done up to 128 bits.

:::tip use sipHash128Reference for new projects
This 128-bit variant differs from the reference implementation and is weaker.
This version exists because, when it was written, there was no official 128-bit extension for SipHash.
New projects are advised to use [`sipHash128Reference`](#sipHash128Reference).
:::
","sipHash128(arg1[, arg2, ...])","- `arg1[, arg2, ...]` — A variable number of input arguments for which to compute the hash. [`Any`](/sql-reference/data-types)
","","Returns a 128-bit `SipHash` hash value. [`FixedString(16)`](/sql-reference/data-types/fixedstring)","**Usage example**

```sql title=Query
SELECT hex(sipHash128('foo', '\x01', 3));
```

```response title=Response
┌─hex(sipHash128('foo', '', 3))────┐
│ 9DE516A64A414D4B1B609415E4523F24 │
└──────────────────────────────────┘
```

","1.1","Hash"
"25.9.2.1","log2",0,1,"","","System","
Returns the binary logarithm of the argument.
","log2(x)","- `x` — The number for which to compute the binary logarithm of. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal*`](/sql-reference/data-types/decimal)
","","Returns the binary logarithm of `x`. [`Float*`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT log2(8);
```

```response title=Response
3
```

","1.1","Mathematical"
"25.9.2.1","regionToName",0,0,"","","System","","","","","","","",""
"25.9.2.1","regionIn",0,0,"","","System","","","","","","","",""
"25.9.2.1","cityHash64",0,0,"","","System","
Produces a 64-bit [CityHash](https://github.com/google/cityhash) hash value.

This is a fast non-cryptographic hash function.
It uses the CityHash algorithm for string parameters and implementation-specific fast non-cryptographic hash function for parameters with other data types.
The function uses the CityHash combinator to get the final results.

:::info
Google changed the algorithm of CityHash after it was added to ClickHouse.
In other words, ClickHouse's cityHash64 and Google's upstream CityHash now produce different results.
ClickHouse cityHash64 corresponds to CityHash v1.0.2.
:::

:::note
The calculated hash values may be equal for the same input values of different argument types.
This affects for example integer types of different size, named and unnamed `Tuple` with the same data, `Map` and the corresponding `Array(Tuple(key, value))` type with the same data.
:::
","cityHash64(arg1[, arg2, ...])","- `arg1[, arg2, ...]` — A variable number of input arguments for which to compute the hash. [`Any`](/sql-reference/data-types)
","","Returns the computed hash of the input arguments. [`UInt64`](/sql-reference/data-types/int-uint)","**Call example**

```sql title=Query
SELECT cityHash64(array('e','x','a'), 'mple', 10, toDateTime('2019-06-15 23:00:00')) AS CityHash, toTypeName(CityHash) AS type;
```

```response title=Response
┌─────────────CityHash─┬─type───┐
│ 12072650598913549138 │ UInt64 │
└──────────────────────┴────────┘
```

**Computing the checksum of the entire table with accuracy up to the row order**

```sql title=Query
CREATE TABLE users (
    id UInt32,
    name String,
    age UInt8,
    city String
)
ENGINE = MergeTree
ORDER BY tuple();

INSERT INTO users VALUES
(1, 'Alice', 25, 'New York'),
(2, 'Bob', 30, 'London'),
(3, 'Charlie', 35, 'Tokyo');

SELECT groupBitXor(cityHash64(*)) FROM users;
```

```response title=Response
┌─groupBitXor(⋯age, city))─┐
│     11639977218258521182 │
└──────────────────────────┘
```

","1.1","Hash"
"25.9.2.1","regionToTopContinent",0,0,"","","System","","","","","","","",""
"25.9.2.1","regionToArea",0,0,"","","System","","","","","","","",""
"25.9.2.1","regionToCity",0,0,"","","System","","","","","","","",""
"25.9.2.1","cutQueryString",0,0,"","","System","
Removes the query string, including the question mark from a URL.
    ","cutQueryString(url)","- `url` — URL. [`String`](/sql-reference/data-types/string)
","","Returns the URL with query string removed. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT cutQueryString('http://example.com/path?query=value&param=123#fragment');
```

```response title=Response
┌─cutQueryString('http://example.com/path?query=value&param=123#fragment')─┐
│ http://example.com/path#fragment                                         │
└──────────────────────────────────────────────────────────────────────────┘
```

","1.1","URL"
"25.9.2.1","exp",0,1,"","","System","
Returns e raised to the power of `x`, where `x` is the given argument to the function.
","exp(x)","- `x` — The exponent. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal*`](/sql-reference/data-types/decimal)
","","Returns `e^x` [`Float*`](/sql-reference/data-types/float)","**Basic usage**

```sql title=Query
SELECT round(exp(-1), 4)
```

```response title=Response
┌─round(exp(-1), 4)─┐
│            0.3679 │
└───────────────────┘
```

","1.1","Mathematical"
"25.9.2.1","replaceRegexpAll",0,0,"","","System","
Like `replaceRegexpOne` but replaces all occurrences of the pattern.
As an exception, if a regular expression worked on an empty substring, the replacement is not made more than once.
","replaceRegexpAll(haystack, pattern, replacement)","- `haystack` — The input string to search in. [`String`](/sql-reference/data-types/string)
- `pattern` — The regular expression pattern to find. [`const String`](/sql-reference/data-types/string)
- `replacement` — The string to replace the pattern with, may contain substitutions. [`const String`](/sql-reference/data-types/string)
","","Returns a string with all regex matches replaced. [`String`](/sql-reference/data-types/string)","**Replace all characters with doubled version**

```sql title=Query
SELECT replaceRegexpAll('Hello123', '.', '\\\\0\\\\0') AS res
```

```response title=Response
┌─res──────────────────┐
│ HHeelllloo112233     │
└──────────────────────┘
```

**Empty substring replacement example**

```sql title=Query
SELECT replaceRegexpAll('Hello, World!', '^', 'here: ') AS res
```

```response title=Response
┌─res─────────────────┐
│ here: Hello, World! │
└─────────────────────┘
```

","1.1","String Replacement"
"25.9.2.1","toDayOfMonth",0,0,"","","System","
Returns the day of the month (1-31) of a `Date` or `DateTime`.
        ","toDayOfMonth(datetime)","- `datetime` — Date or date with time to get the day of month from. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
","","Returns the day of the month of the given date/time [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT toDayOfMonth(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toDayOfMonth(toDateTime('2023-04-21 10:20:30'))─┐
│                                              21 │
└─────────────────────────────────────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","icebergBucket",0,0,"","","System","Implements logic of iceberg bucket transform: https://iceberg.apache.org/spec/#bucket-transform-details.","icebergBucket(N, value)","- `N` — modulo, positive integer, always constant. - `value` — Integer, bool, decimal, float, string, fixed_string, uuid, date, time or datetime value. ","","Int32","**Example**

```sql title=Query
SELECT icebergBucket(5, 1.0 :: Float32)
```

```response title=Response
4
```

","25.5","Other"
"25.9.2.1","toInt256",0,0,"","","System","
Converts an input value to a value of type [Int256](/sql-reference/data-types/int-uint).
Throws an exception in case of an error.
The function uses rounding towards zero, meaning it truncates fractional digits of numbers.

Supported arguments:
- Values or string representations of type (U)Int*.
- Values of type Float*.

Unsupported arguments:
- String representations of Float* values, including `NaN` and `Inf`.
- String representations of binary and hexadecimal values, e.g. `SELECT toInt256('0xc0fe');`.

:::note
If the input value cannot be represented within the bounds of Int256, the result over or under flows.
This is not considered an error.
:::

See also:
- [`toInt256OrZero`](#toInt256OrZero).
- [`toInt256OrNull`](#toInt256OrNull).
- [`toInt256OrDefault`](#toInt256OrDefault).
    ","toInt256(expr)","- `expr` — Expression returning a number or a string representation of a number. [`Expression`](/sql-reference/data-types/special-data-types/expression)
","","Returns a 256-bit integer value. [`Int256`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT
    toInt256(-256),
    toInt256(-256.256),
    toInt256('-256')
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toInt256(-256):     -256
toInt256(-256.256): -256
toInt256('-256'):   -256
```

","1.1","Type Conversion"
"25.9.2.1","formatReadableDecimalSize",0,0,"","","System","
Given a size (number of bytes), this function returns a readable, rounded size with suffix (KB, MB, etc.) as a string.

The opposite operations of this function are [`parseReadableSize`](#parseReadableSize).
    ","formatReadableDecimalSize(x)","- `x` — Size in bytes. [`UInt64`](/sql-reference/data-types/int-uint)
","","Returns a readable, rounded size with suffix as a string. [`String`](/sql-reference/data-types/string)","**Format file sizes**

```sql title=Query
SELECT
    arrayJoin([1, 1024, 1024*1024, 192851925]) AS filesize_bytes,
    formatReadableDecimalSize(filesize_bytes) AS filesize
```

```response title=Response
┌─filesize_bytes─┬─filesize───┐
│              1 │ 1.00 B     │
│           1024 │ 1.02 KB    │
│        1048576 │ 1.05 MB    │
│      192851925 │ 192.85 MB  │
└────────────────┴────────────┘
```

","22.11","Other"
"25.9.2.1","base64URLEncode",0,0,"","","System","
Encodes a string using [Base64](https://datatracker.ietf.org/doc/html/rfc4648#section-4) (RFC 4648) representation using URL-safe alphabet.
","base64URLEncode(plaintext)","- `plaintext` — Plaintext column or constant to encode. [`String`](/sql-reference/data-types/string)
","","Returns a string containing the encoded value of the argument. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT base64URLEncode('https://clickhouse.com')
```

```response title=Response
┌─base64URLEncode('https://clickhouse.com')─┐
│ aHR0cHM6Ly9jbGlja2hvdXNlLmNvbQ            │
└───────────────────────────────────────────┘
```

","18.16","String"
"25.9.2.1","parseDateTimeBestEffortUSOrNull",0,0,"","","System","
Same as [`parseDateTimeBestEffortUS`](#parseDateTimeBestEffortUS) function except that it returns `NULL` when it encounters a date format that cannot be processed.

This function behaves like [`parseDateTimeBestEffort`](#parseDateTimeBestEffort) for ISO date formats, but prefers the US date format for ambiguous cases, with `NULL` return on parsing errors.
    ","parseDateTimeBestEffortUSOrNull(time_string[, time_zone])","- `time_string` — String containing a date and time to convert. [`String`](/sql-reference/data-types/string)
- `time_zone` — Optional. Time zone according to which `time_string` is parsed. [`String`](/sql-reference/data-types/string)
","","Returns `time_string` as a DateTime using US format preference, or `NULL` if the input cannot be parsed. [`DateTime`](/sql-reference/data-types/datetime) or [`NULL`](/sql-reference/syntax#null)","**Usage example**

```sql title=Query
SELECT parseDateTimeBestEffortUSOrNull('02/10/2025') AS valid_us,
       parseDateTimeBestEffortUSOrNull('invalid') AS invalid
```

```response title=Response
┌─valid_us────────────┬─invalid─┐
│ 2025-02-10 00:00:00 │    ᴺᵁᴸᴸ │
└─────────────────────┴─────────┘
```

","1.1","Type Conversion"
"25.9.2.1","detectProgrammingLanguage",0,0,"","","System","","","","","","","",""
"25.9.2.1","JSONDynamicPathsWithTypes",0,0,"","","System","
Returns the list of dynamic paths that are stored as separate subcolumns and their types in each row in JSON column.
        ","JSONDynamicPathsWithTypes(json)","- `json` — JSON column. [`JSON`](/sql-reference/data-types/newjson)
","","Returns a map of dynamic paths and their data types in the JSON column. [`Map(String, String)`](/sql-reference/data-types/map)","**Usage example**

```sql title=Query
CREATE TABLE test (json JSON(max_dynamic_paths=1)) ENGINE = Memory;
INSERT INTO test FORMAT JSONEachRow {""json"" : {""a"" : 42}}, {""json"" : {""b"" : ""Hello""}}, {""json"" : {""a"" : [1, 2, 3], ""c"" : ""2020-01-01""}}
SELECT json, JSONDynamicPathsWithTypes(json) FROM test;
```

```response title=Response
┌─json─────────────────────────────────┬─JSONDynamicPathsWithTypes(json)─┐
│ {""a"":""42""}                           │ {'a':'Int64'}                   │
│ {""b"":""Hello""}                        │ {}                              │
│ {""a"":[""1"",""2"",""3""],""c"":""2020-01-01""} │ {'a':'Array(Nullable(Int64))'}  │
└──────────────────────────────────────┴─────────────────────────────────┘
```

","24.8","JSON"
"25.9.2.1","JSONDynamicPaths",0,0,"","","System","
Returns the list of dynamic paths that are stored as separate subcolumns in JSON column.
        ","JSONDynamicPaths(json)","- `json` — JSON column. [`JSON`](/sql-reference/data-types/newjson)
","","Returns an array of dynamic paths in the JSON column. [`Array(String)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
CREATE TABLE test (json JSON(max_dynamic_paths=1)) ENGINE = Memory;
INSERT INTO test FORMAT JSONEachRow {""json"" : {""a"" : 42}}, {""json"" : {""b"" : ""Hello""}}, {""json"" : {""a"" : [1, 2, 3], ""c"" : ""2020-01-01""}}
SELECT json, JSONDynamicPaths(json) FROM test;
```

```response title=Response
┌─json─────────────────────────────────┬─JSONDynamicPaths(json)─┐
│ {""a"":""42""}                           │ ['a']                  │
│ {""b"":""Hello""}                        │ []                     │
│ {""a"":[""1"",""2"",""3""],""c"":""2020-01-01""} │ ['a']                  │
└──────────────────────────────────────┴────────────────────────┘
```

","24.8","JSON"
"25.9.2.1","JSONAllPathsWithTypes",0,0,"","","System","
Returns the list of all paths and their data types stored in each row in JSON column.
        ","JSONAllPathsWithTypes(json)","- `json` — JSON column. [`JSON`](/sql-reference/data-types/newjson)
","","Returns a map of all paths and their data types in the JSON column. [`Map(String, String)`](/sql-reference/data-types/map)","**Usage example**

```sql title=Query
CREATE TABLE test (json JSON(max_dynamic_paths=1)) ENGINE = Memory;
INSERT INTO test FORMAT JSONEachRow {""json"" : {""a"" : 42}}, {""json"" : {""b"" : ""Hello""}}, {""json"" : {""a"" : [1, 2, 3], ""c"" : ""2020-01-01""}}
SELECT json, JSONAllPathsWithTypes(json) FROM test;
```

```response title=Response
┌─json─────────────────────────────────┬─JSONAllPathsWithTypes(json)───────────────┐
│ {""a"":""42""}                           │ {'a':'Int64'}                             │
│ {""b"":""Hello""}                        │ {'b':'String'}                            │
│ {""a"":[""1"",""2"",""3""],""c"":""2020-01-01""} │ {'a':'Array(Nullable(Int64))','c':'Date'} │
└──────────────────────────────────────┴───────────────────────────────────────────┘
```

","24.8","JSON"
"25.9.2.1","JSONAllPaths",0,0,"","","System","
Returns the list of all paths stored in each row in JSON column.
        ","JSONAllPaths(json)","- `json` — JSON column. [`JSON`](/sql-reference/data-types/newjson)
","","Returns an array of all paths in the JSON column. [`Array(String)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
CREATE TABLE test (json JSON(max_dynamic_paths=1)) ENGINE = Memory;
INSERT INTO test FORMAT JSONEachRow {""json"" : {""a"" : 42}}, {""json"" : {""b"" : ""Hello""}}, {""json"" : {""a"" : [1, 2, 3], ""c"" : ""2020-01-01""}}
SELECT json, JSONAllPaths(json) FROM test;
```

```response title=Response
┌─json─────────────────────────────────┬─JSONAllPaths(json)─┐
│ {""a"":""42""}                           │ ['a']              │
│ {""b"":""Hello""}                        │ ['b']              │
│ {""a"":[""1"",""2"",""3""],""c"":""2020-01-01""} │ ['a','c']          │
└──────────────────────────────────────┴────────────────────┘
```

","24.8","JSON"
"25.9.2.1","blockSerializedSize",0,0,"","","System","
Returns the uncompressed size in bytes of a block of values on disk.
","blockSerializedSize(x1[, x2[, ...]])","- `x1[, x2, ...]` — Any number of values for which to get the uncompressed size of the block. [`Any`](/sql-reference/data-types)
","","Returns the number of bytes that will be written to disk for a block of values without compression. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT blockSerializedSize(maxState(1)) AS x;
```

```response title=Response
┌─x─┐
│ 2 │
└───┘
```

","20.3","Other"
"25.9.2.1","multiFuzzyMatchAnyIndex",0,0,"","","System","","","","","","","",""
"25.9.2.1","ngramSearchCaseInsensitiveUTF8",0,0,"","","System","
Provides a case-insensitive UTF-8 variant of [`ngramSearch`](#ngramSearch).
Assumes `haystack` and `needle` to be UTF-8 strings and ignores case.
Checks if the 3-gram distance between two UTF-8 strings is less than or equal to a given threshold, ignoring case.
    ","ngramSearchCaseInsensitiveUTF8(haystack, needle)","- `haystack` — UTF-8 string for comparison. [`String`](/sql-reference/data-types/string)
- `needle` — UTF-8 string for comparison. [`String`](/sql-reference/data-types/string)
","","Returns `1` if the 3-gram distance between the strings is less than or equal to a threshold (`1.0` by default), `0` otherwise. [`UInt8`](/sql-reference/data-types/int-uint)","**Case-insensitive UTF-8 search using 3-grams**

```sql title=Query
SELECT ngramSearchCaseInsensitiveUTF8('абвГДЕёжз', 'АбвгдЕЁжз')
```

```response title=Response
┌─ngramSearchCaseInsensitiveUTF8('абвГДЕёжз', 'АбвгдЕЁжз')─┐
│                                                        1 │
└──────────────────────────────────────────────────────────┘
```

","20.1","String Search"
"25.9.2.1","ngramSearchCaseInsensitive",0,0,"","","System","
Provides a case-insensitive variant of [`ngramSearch`](#ngramSearch).
Calculates the non-symmetric difference between a needle string and a haystack string, i.e. the number of n-grams from the needle minus the common number of n-grams normalized by the number of needle n-grams.
Checks if the 4-gram distance between two strings is less than or equal to a given threshold, ignoring case.
    ","ngramSearchCaseInsensitive(haystack, needle)","- `haystack` — String for comparison. [`String`](/sql-reference/data-types/string)
- `needle` — String for comparison. [`String`](/sql-reference/data-types/string)
","","Returns `1` if the 4-gram distance between the strings is less than or equal to a threshold (`1.0` by default), `0` otherwise. [`UInt8`](/sql-reference/data-types/int-uint)","**Case-insensitive search using 4-grams**

```sql title=Query
SELECT ngramSearchCaseInsensitive('Hello World','hello')
```

```response title=Response
┌─ngramSearchCaseInsensitive('Hello World','hello')─┐
│                                                  1 │
└────────────────────────────────────────────────────┘
```

","20.1","String Search"
"25.9.2.1","ngramDistance",0,0,"","","System","
Calculates the 4-gram distance between two strings.
For this, it counts the symmetric difference between two multisets of 4-grams and normalizes it by the sum of their cardinalities.
The smaller the returned value, the more similar the strings are.

For case-insensitive search or/and in UTF8 format use functions [`ngramDistanceCaseInsensitive`](#ngramDistanceCaseInsensitive), [`ngramDistanceUTF8`](ngramDistanceUTF8), [`ngramDistanceCaseInsensitiveUTF8`](ngramDistanceCaseInsensitiveUTF8).
    ","ngramDistance(haystack, needle)","- `haystack` — String for comparison. [`String`](/sql-reference/data-types/string)
- `needle` — String for comparison. [`String`](/sql-reference/data-types/string)
","","Returns a Float32 number between `0` and `1`. The smaller the returned value, the more similar the strings are. [`Float32`](/sql-reference/data-types/float)","**Calculate 4-gram distance**

```sql title=Query
SELECT ngramDistance('ClickHouse', 'ClickHouses')
```

```response title=Response
┌─ngramDistance('ClickHouse', 'ClickHouses')─┐
│                                        0.1 │
└────────────────────────────────────────────┘
```

","20.1","String Search"
"25.9.2.1","__bitBoolMaskOr",0,0,"","","System","","","","","","","",""
"25.9.2.1","extractAllGroupsVertical",0,0,"","","System","
Matches all groups of a string using a regular expression and returns an array of arrays, where each array includes matching fragments from every group, grouped in order of appearance in the input string.
","extractAllGroupsVertical(s, regexp)","- `s` — Input string to extract from. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring)
- `regexp` — Regular expression to match by. [`const String`](/sql-reference/data-types/string) or [`const FixedString`](/sql-reference/data-types/fixedstring)
","","Returns an array of arrays, where each inner array contains the captured groups from one match. Each match produces an array with elements corresponding to the capturing groups in the regular expression (group 1, group 2, etc.). If no matches are found, returns an empty array. [`Array(Array(String))`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
WITH '< Server: nginx
< Date: Tue, 22 Jan 2019 00:26:14 GMT
< Content-Type: text/html; charset=UTF-8
< Connection: keep-alive
' AS s
SELECT extractAllGroupsVertical(s, '< ([\\w\\-]+): ([^\\r\\n]+)');
```

```response title=Response
[['Server','nginx'],['Date','Tue, 22 Jan 2019 00:26:14 GMT'],['Content-Type','text/html; charset=UTF-8'],['Connection','keep-alive']]
```

","20.5","String Splitting"
"25.9.2.1","bitmapContains",0,0,"","","System","Checks if the bitmap contains a specific element.","bitmapContains(bitmap, value)","- `bitmap` — Bitmap object. [`AggregateFunction(groupBitmap, T)`](/sql-reference/data-types/aggregatefunction). - `value` — Element to check for. [(U)Int8/16/32/64](/sql-reference/data-types/int-uint/) ","","Returns `1` if the bitmap contains the specified value, otherwise `0` [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT bitmapContains(bitmapBuild([1, 2, 3]), 2) AS res;
```

```response title=Response
┌─res─┐
│  1  │
└─────┘
```

","20.1","Bitmap"
"25.9.2.1","bitmapXor",0,0,"","","System","Computes the symmetric difference (XOR) of two bitmaps.","bitmapXor(bitmap1, bitmap2)","- `bitmap1` — First bitmap object. [`AggregateFunction(groupBitmap, T)`](/sql-reference/data-types/aggregatefunction). - `bitmap2` — Second bitmap object. [`AggregateFunction(groupBitmap, T)`](/sql-reference/data-types/aggregatefunction). ","","Returns a bitmap containing set bits present in either input bitmap, but not in both [`AggregateFunction(groupBitmap, T)`](/sql-reference/data-types/aggregatefunction)","**Usage example**

```sql title=Query
SELECT bitmapToArray(bitmapXor(bitmapBuild([1, 2, 3]), bitmapBuild([3, 4, 5]))) AS res;
```

```response title=Response
┌─res──────────┐
│ [1, 2, 4, 5] │
└──────────────┘
```

","20.1","Bitmap"
"25.9.2.1","bitmapOr",0,0,"","","System","Computes the logical disjunction (OR) of two bitmaps.","bitmapOr(bitmap1, bitmap2)","- `bitmap1` — First bitmap object. [`AggregateFunction(groupBitmap, T)`](/sql-reference/data-types/aggregatefunction). - `bitmap2` — Second bitmap object. [`AggregateFunction(groupBitmap, T)`](/sql-reference/data-types/aggregatefunction). ","","Returns a bitmap containing set bits present in either input bitmap [`AggregateFunction(groupBitmap, T)`](/sql-reference/data-types/aggregatefunction)","**Usage example**

```sql title=Query
SELECT bitmapToArray(bitmapOr(bitmapBuild([1, 2, 3]), bitmapBuild([3, 4, 5]))) AS res;
```

```response title=Response
┌─res─────────────┐
│ [1, 2, 3, 4, 5] │
└─────────────────┘
```

","20.1","Bitmap"
"25.9.2.1","bitmapAnd",0,0,"","","System","Computes the logical conjunction (AND) of two bitmaps.","bitmapAnd(bitmap1, bitmap2)","- `bitmap1` — First bitmap object. [`AggregateFunction(groupBitmap, T)`](/sql-reference/data-types/aggregatefunction). - `bitmap2` — Second bitmap object. [`AggregateFunction(groupBitmap, T)`](/sql-reference/data-types/aggregatefunction). ","","Returns a bitmap containing bits present in both input bitmaps [`AggregateFunction(groupBitmap, T)`](/sql-reference/data-types/aggregatefunction)","**Usage example**

```sql title=Query
SELECT bitmapToArray(bitmapAnd(bitmapBuild([1, 2, 3]), bitmapBuild([3, 4, 5]))) AS res;
```

```response title=Response
┌─res─┐
│ [3] │
└─────┘
```

","20.1","Bitmap"
"25.9.2.1","bitmapAndnotCardinality",0,0,"","","System","Returns the cardinality of the AND-NOT operation of two bitmaps.","bitmapAndnotCardinality(bitmap1, bitmap2)","- `bitmap1` — First bitmap object. [`AggregateFunction(groupBitmap, T)`](/sql-reference/data-types/aggregatefunction). - `bitmap2` — Second bitmap object. [`AggregateFunction(groupBitmap, T)`](/sql-reference/data-types/aggregatefunction). ","","Returns the number of set bits in the result of `bitmap1 AND-NOT bitmap2` [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT bitmapAndnotCardinality(bitmapBuild([1,2,3]), bitmapBuild([3,4,5])) AS res;
```

```response title=Response
┌─res─┐
│   2 │
└─────┘
```

","20.1","Bitmap"
"25.9.2.1","bitmapOrCardinality",0,0,"","","System","Returns the cardinality of the logical disjunction (OR) of two bitmaps.","bitmapOrCardinality(bitmap1, bitmap2)","- `bitmap1` — First bitmap object. [`AggregateFunction(groupBitmap, T)`](/sql-reference/data-types/aggregatefunction). - `bitmap2` — Second bitmap object. [`AggregateFunction(groupBitmap, T)`](/sql-reference/data-types/aggregatefunction). ","","Returns the number of set bits in the union of the two bitmaps [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT bitmapOrCardinality(bitmapBuild([1,2,3]), bitmapBuild([3,4,5])) AS res;
```

```response title=Response
┌─res─┐
│   5 │
└─────┘
```

","20.1","Bitmap"
"25.9.2.1","bitmapCardinality",0,0,"","","System","Returns the number of bits set (the cardinality) in the bitmap.","bitmapCardinality(bitmap)","- `bitmap` — Bitmap object. [`AggregateFunction(groupBitmap, T)`](/sql-reference/data-types/aggregatefunction). ","","Returns the number of bits set in the bitmap [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT bitmapCardinality(bitmapBuild([1, 3, 3, 5, 7, 7])) AS res
```

```response title=Response
┌─res─┐
│   4 │
└─────┘
```

","20.1","Bitmap"
"25.9.2.1","bitmapBuild",0,0,"","","System","Builds a bitmap from an unsigned integer array. It is the opposite of function [`bitmapToArray`](/sql-reference/functions/bitmap-functions#bitmapToArray).","bitmapBuild(array)","- `array` — Unsigned integer array. [`Array(UInt*)`](/sql-reference/data-types/array)
","","Returns a bitmap from the provided array [`AggregateFunction(groupBitmap, T)`](/sql-reference/data-types/aggregatefunction)","**Usage example**

```sql title=Query
SELECT bitmapBuild([1, 2, 3, 4, 5]) AS res, toTypeName(res);
```

```response title=Response
┌─res─┬─toTypeName(bitmapBuild([1, 2, 3, 4, 5]))─────┐
│     │ AggregateFunction(groupBitmap, UInt8)        │
└─────┴──────────────────────────────────────────────┘
```

","20.1","Bitmap"
"25.9.2.1","alphaTokens",0,0,"","","System","
Selects substrings of consecutive bytes from the ranges `a-z` and `A-Z` and returns an array of the selected substrings.
","alphaTokens(s[, max_substrings])","- `s` — The string to split. [`String`](/sql-reference/data-types/string)
- `max_substrings` — Optional. When `max_substrings > 0`, the number of returned substrings will be no more than `max_substrings`, otherwise the function will return as many substrings as possible. [`Int64`](/sql-reference/data-types/int-uint)
","","Returns an array of selected substrings of `s`. [`Array(String)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT alphaTokens('abca1abc');
```

```response title=Response
┌─alphaTokens('abca1abc')─┐
│ ['abca','abc']          │
└─────────────────────────┘
```

","1.1","String Splitting"
"25.9.2.1","toIPv6OrZero",0,0,"","","System","
Converts an input value to a value of type [IPv6](../data-types/ipv6.md) but returns zero IPv6 address in case of an error.
Like [`toIPv6`](#toipv6) but returns zero IPv6 address (`::`) instead of throwing an exception on conversion errors.

Supported arguments:
- String representations of IPv6 addresses in standard notation.
- String representations of IPv4 addresses (converted to IPv4-mapped IPv6).
- Binary representations of IPv6 addresses.

Unsupported arguments (return zero IPv6):
- Invalid IP address formats.
- Malformed IPv6 addresses.
- Out-of-range values.
    ","toIPv6OrZero(x)","- `x` — A string representation of an IPv6 or IPv4 address. [`String`](/sql-reference/data-types/string)
","","Returns an IPv6 address if successful, otherwise zero IPv6 address (`::`).  [`IPv6`](/sql-reference/data-types/ipv6)","**Usage example**

```sql title=Query
SELECT
    toIPv6OrZero('2001:0db8:85a3:0000:0000:8a2e:0370:7334') AS valid_ipv6,
    toIPv6OrZero('invalid::ip') AS invalid_ipv6
```

```response title=Response
┌─valid_ipv6──────────────────────────┬─invalid_ipv6─┐
│ 2001:db8:85a3::8a2e:370:7334        │ ::           │
└─────────────────────────────────────┴──────────────┘
```

","23.1","Type Conversion"
"25.9.2.1","sparseGramsHashesUTF8",0,0,"","","System","
Finds hashes of all substrings of a given UTF-8 string that have a length of at least `n`, where the hashes of the (n-1)-grams at the borders of the substring are strictly greater than those of any (n-1)-gram inside the substring.
Expects UTF-8 string, throws an exception in case of invalid UTF-8 sequence.
Uses `CRC32` as a hash function.
","sparseGramsHashesUTF8(s[, min_ngram_length, max_ngram_length])","- `s` — An input string. [`String`](/sql-reference/data-types/string)
- `min_ngram_length` — Optional. The minimum length of extracted ngram. The default and minimal value is 3. [`UInt*`](/sql-reference/data-types/int-uint)
- `max_ngram_length` — Optional. The maximum length of extracted ngram. The default value is 100. Should be not less than `min_ngram_length`. [`UInt*`](/sql-reference/data-types/int-uint)
","","Returns an array of selected UTF-8 substrings CRC32 hashes. [`Array(UInt32)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT sparseGramsHashesUTF8('алиса', 3)
```

```response title=Response
┌─sparseGramsHashesUTF8('алиса', 3)─┐
│ [4178533925,3855635300,561830861] │
└───────────────────────────────────┘
```

","25.5","String"
"25.9.2.1","sparseGramsHashes",0,0,"","","System","
Finds hashes of all substrings of a given string that have a length of at least `n`,
where the hashes of the (n-1)-grams at the borders of the substring
are strictly greater than those of any (n-1)-gram inside the substring.
Uses `CRC32` as a hash function.
","sparseGramsHashes(s[, min_ngram_length, max_ngram_length])","- `s` — An input string. [`String`](/sql-reference/data-types/string)
- `min_ngram_length` — Optional. The minimum length of extracted ngram. The default and minimal value is 3. [`UInt*`](/sql-reference/data-types/int-uint)
- `max_ngram_length` — Optional. The maximum length of extracted ngram. The default value is 100. Should be not less than `min_ngram_length`. [`UInt*`](/sql-reference/data-types/int-uint)
","","Returns an array of selected substrings CRC32 hashes. [`Array(UInt32)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT sparseGramsHashes('alice', 3)
```

```response title=Response
┌─sparseGramsHashes('alice', 3)──────────────────────┐
│ [1481062250,2450405249,4012725991,1918774096]      │
└────────────────────────────────────────────────────┘
```

","25.5","String"
"25.9.2.1","sparseGramsUTF8",0,0,"","","System","
Finds all substrings of a given UTF-8 string that have a length of at least `n`, where the hashes of the (n-1)-grams at the borders of the substring are strictly greater than those of any (n-1)-gram inside the substring.
Expects a UTF-8 string, throws an exception in case of an invalid UTF-8 sequence.
Uses `CRC32` as a hash function.
","sparseGramsUTF8(s[, min_ngram_length, max_ngram_length])","- `s` — An input string. [`String`](/sql-reference/data-types/string)
- `min_ngram_length` — Optional. The minimum length of extracted ngram. The default and minimal value is 3. [`UInt*`](/sql-reference/data-types/int-uint)
- `max_ngram_length` — Optional. The maximum length of extracted ngram. The default value is 100. Should be not less than `min_ngram_length`. [`UInt*`](/sql-reference/data-types/int-uint)
","","Returns an array of selected UTF-8 substrings. [`Array(String)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT sparseGramsUTF8('алиса', 3)
```

```response title=Response
┌─sparseGramsUTF8('алиса', 3)─┐
│ ['али','лис','иса']         │
└─────────────────────────────┘
```

","25.5","String"
"25.9.2.1","JSONExtractKeys",0,0,"","","System","
Parses a JSON string and extracts the keys.
        ","JSONExtractKeys(json[, indices_or_keys, ...])","- `json` — JSON string to parse. [`String`](/sql-reference/data-types/string)
- `indices_or_keys` — A list of zero or more arguments each of which can be either string or integer. [`String`](/sql-reference/data-types/string) or [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns an array with the keys of the JSON object. [`Array(String)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT JSONExtractKeys('{""a"": ""hello"", ""b"": [-100, 200.0, 300]}') AS res;
```

```response title=Response
┌─res─────────┐
│ ['a','b']   │
└─────────────┘
```

","21.11","JSON"
"25.9.2.1","JSONExtractKeysAndValuesRaw",0,0,"","","System","
Returns an array of tuples with keys and values from a JSON object. All values are represented as unparsed strings.
        ","JSONExtractKeysAndValuesRaw(json[, indices_or_keys, ...])","- `json` — JSON string to parse. [`String`](/sql-reference/data-types/string)
- `indices_or_keys` — A list of zero or more arguments each of which can be either string or integer. [`String`](/sql-reference/data-types/string) or [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns an array of tuples with parsed key-value pairs where values are unparsed strings. [`Array(Tuple(String, String))`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT JSONExtractKeysAndValuesRaw('{""a"": [-100, 200.0], ""b"": ""hello""}') AS res;
```

```response title=Response
┌─res──────────────────────────────────┐
│ [('a','[-100,200.0]'),('b','""hello""')] │
└──────────────────────────────────────┘
```

","20.4","JSON"
"25.9.2.1","toUInt16OrNull",0,0,"","","System","
Like [`toUInt16`](#toUInt16), this function converts an input value to a value of type [`UInt16`](../data-types/int-uint.md) but returns `NULL` in case of an error.

Supported arguments:
- String representations of (U)Int8/16/32/128/256.

Unsupported arguments (return `NULL`):
- String representations of Float* values, including `NaN` and `Inf`.
- String representations of binary and hexadecimal values, e.g. `SELECT toUInt16OrNull('0xc0fe');`.

:::note
If the input value cannot be represented within the bounds of [`UInt16`](../data-types/int-uint.md), overflow or underflow of the result occurs.
This is not considered an error.
:::

See also:
- [`toUInt16`](#toUInt16).
- [`toUInt16OrZero`](#toUInt16OrZero).
- [`toUInt16OrDefault`](#toUInt16OrDefault).
    ","toUInt16OrNull(x)","- `x` — A String representation of a number. [`String`](/sql-reference/data-types/string)
","","Returns a value of type `UInt16`, otherwise `NULL` if the conversion is unsuccessful. [`UInt16`](/sql-reference/data-types/int-uint) or [`NULL`](/sql-reference/syntax#null)","**Usage example**

```sql title=Query
SELECT
    toUInt16OrNull('16'),
    toUInt16OrNull('abc')
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toUInt16OrNull('16'):  16
toUInt16OrNull('abc'): \N
```

","1.1","Type Conversion"
"25.9.2.1","JSONExtractRaw",0,0,"","","System","
Returns a part of JSON as unparsed string.
        ","JSONExtractRaw(json[, indices_or_keys, ...])","- `json` — JSON string to parse. [`String`](/sql-reference/data-types/string)
- `indices_or_keys` — A list of zero or more arguments each of which can be either string or integer. [`String`](/sql-reference/data-types/string) or [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns the part of JSON as an unparsed string. If the part does not exist or has a wrong type, an empty string will be returned. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT JSONExtractRaw('{""a"": ""hello"", ""b"": [-100, 200.0, 300]}', 'b') AS res;
```

```response title=Response
┌─res──────────────┐
│ [-100,200.0,300] │
└──────────────────┘
```

","20.1","JSON"
"25.9.2.1","JSONExtractString",0,0,"","","System","
Parses JSON and extracts a value of String type.
        ","JSONExtractString(json[, indices_or_keys, ...])","- `json` — JSON string to parse. [`String`](/sql-reference/data-types/string)
- `indices_or_keys` — A list of zero or more arguments each of which can be either string or integer. [`String`](/sql-reference/data-types/string) or [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns a String value if it exists, otherwise returns an empty string. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT JSONExtractString('{""a"": ""hello"", ""b"": [-100, 200.0, 300]}', 'a') AS res;
```

```response title=Response
┌─res───┐
│ hello │
└───────┘
```

","20.1","JSON"
"25.9.2.1","JSONType",0,0,"","","System","
Return the type of a JSON value. If the value does not exist, `Null=0` will be returned.
        ","JSONType(json[, indices_or_keys, ...])","- `json` — JSON string to parse [`String`](/sql-reference/data-types/string)
- `json[, indices_or_keys, ...]` — A list of zero or more arguments, each of which can be either string or integer. [`String`](/sql-reference/data-types/string) or [`(U)Int8/16/32/64`](/sql-reference/data-types/int-uint)
","","Returns the type of a JSON value as a string, otherwise if the value doesn't exist it returns `Null=0` [`Enum`](/sql-reference/data-types/enum)","**Usage example**

```sql title=Query
SELECT JSONType('{""a"": ""hello"", ""b"": [-100, 200.0, 300]}') = 'Object';
SELECT JSONType('{""a"": ""hello"", ""b"": [-100, 200.0, 300]}', 'a') = 'String';
SELECT JSONType('{""a"": ""hello"", ""b"": [-100, 200.0, 300]}', 'b') = 'Array';
```

```response title=Response
1
1
1
```

","20.1","JSON"
"25.9.2.1","bitmapMin",0,0,"","","System","Returns the position of the smallest bit set in a bitmap. If all bits are unset, or `UINT32_MAX` (`UINT64_MAX` if the bitmap contains more than `2^64` bits).","bitmapMin(bitmap)","- `bitmap` — Bitmap object. [`AggregateFunction(groupBitmap, T)`](/sql-reference/data-types/aggregatefunction). ","","Returns the position of the smallest bit set in the bitmap, or `UINT32_MAX`/`UINT64_MAX` [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT bitmapMin(bitmapBuild([3, 5, 2, 6])) AS res;
```

```response title=Response
┌─res─┐
│   2 │
└─────┘
```

","20.1","Bitmap"
"25.9.2.1","JSONKey",0,0,"","","System","","","","","","","",""
"25.9.2.1","isValidJSON",0,0,"","","System","
Checks that the string passed is valid JSON.
        ","isValidJSON(json)","- `json` — JSON string to validate [`String`](/sql-reference/data-types/string)
","","Returns `1` if the string is valid JSON, otherwise `0`. [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT isValidJSON('{""a"": ""hello"", ""b"": [-100, 200.0, 300]}') = 1;
SELECT isValidJSON('not JSON') = 0;
```

```response title=Response
1
0
```

**Using integers to access both JSON arrays and JSON objects**

```sql title=Query
SELECT JSONHas('{""a"": ""hello"", ""b"": [-100, 200.0, 300]}', 0);
SELECT JSONHas('{""a"": ""hello"", ""b"": [-100, 200.0, 300]}', 1);
SELECT JSONHas('{""a"": ""hello"", ""b"": [-100, 200.0, 300]}', 2);
SELECT JSONHas('{""a"": ""hello"", ""b"": [-100, 200.0, 300]}', -1);
SELECT JSONHas('{""a"": ""hello"", ""b"": [-100, 200.0, 300]}', -2);
SELECT JSONHas('{""a"": ""hello"", ""b"": [-100, 200.0, 300]}', 3);
```

```response title=Response
0
1
1
1
1
1
0
```

","20.1","JSON"
"25.9.2.1","JSONHas",0,0,"","","System","
Checks for the existence of the provided value(s) in the JSON document.
        ","JSONHas(json[ ,indices_or_keys, ...])","- `json` — JSON string to parse [`String`](/sql-reference/data-types/string)
- `[ ,indices_or_keys, ...]` — A list of zero or more arguments. [`String`](/sql-reference/data-types/string) or [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns `1` if the value exists in `json`, otherwise `0` [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT JSONHas('{""a"": ""hello"", ""b"": [-100, 200.0, 300]}', 'b') = 1;
SELECT JSONHas('{""a"": ""hello"", ""b"": [-100, 200.0, 300]}', 'b', 4) = 0;
```

```response title=Response
1
0
```

","20.1","JSON"
"25.9.2.1","multiSearchAllPositionsCaseInsensitiveUTF8",0,0,"","","System","","","","","","","",""
"25.9.2.1","javaHashUTF16LE",0,0,"","","System","
Calculates [JavaHash](http://hg.openjdk.java.net/jdk8u/jdk8u/jdk/file/478a4add975b/src/share/classes/java/lang/String.java#l1452) from a string, assuming it contains bytes representing a string in UTF-16LE encoding.
","javaHashUTF16LE(arg)","- `arg` — A string in UTF-16LE encoding. [`String`](/sql-reference/data-types/string)
","","Returns the computed hash of the UTF-16LE encoded string. [`Int32`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT javaHashUTF16LE(convertCharset('test', 'utf-8', 'utf-16le'));
```

```response title=Response
┌─javaHashUTF16LE(convertCharset('test', 'utf-8', 'utf-16le'))─┐
│                                                      3556498 │
└──────────────────────────────────────────────────────────────┘
```

","20.1","Hash"
"25.9.2.1","mergeTreePartInfo",0,1,"","","System","
Function that helps to cut the useful values out of the `MergeTree` part name.
    ","mergeTreePartInfo(part_name)","- `part_name` — Name of part to unpack. [`String`](/sql-reference/data-types/string)
","","Returns a Tuple with subcolumns: `partition_id`, `min_block`, `max_block`, `level`, `mutation`. [`Tuple`](/sql-reference/data-types/tuple)","**Basic example**

```sql title=Query
WITH mergeTreePartInfo('all_12_25_7_4') AS info
SELECT info.partition_id, info.min_block, info.max_block, info.level, info.mutation;
```

```response title=Response
┌─info.partition_id─┬─info.min_block─┬─info.max_block─┬─info.level─┬─info.mutation─┐
│ all               │             12 │             25 │          7 │             4 │
└───────────────────┴────────────────┴────────────────┴────────────┴───────────────┘
```

","25.6","Introspection"
"25.9.2.1","polygonsDistanceCartesian",0,0,"","","System","","","","","","","",""
"25.9.2.1","unbin",0,1,"","","System","
Interprets each pair of binary digits (in the argument) as a number and converts it to the byte represented by the number. The functions performs the opposite operation to bin.

For a numeric argument `unbin()` does not return the inverse of `bin()`. If you want to convert the result to a number, you can use the reverse and `reinterpretAs<Type>` functions.

:::note
If `unbin` is invoked from within the `clickhouse-client`, binary strings are displayed using UTF-8.
:::

Supports binary digits `0` and `1`. The number of binary digits does not have to be multiples of eight. If the argument string contains anything other than binary digits,
the result is undefined (no exception is thrown).
    ","unbin(arg)","- `arg` — A string containing any number of binary digits. [`String`](/sql-reference/data-types/string)
","","Returns a binary string (BLOB). [`String`](/sql-reference/data-types/string)","**Basic usage**

```sql title=Query
SELECT UNBIN('001100000011000100110010'), UNBIN('0100110101111001010100110101000101001100')
```

```response title=Response
┌─unbin('001100000011000100110010')─┬─unbin('0100110101111001010100110101000101001100')─┐
│ 012                               │ MySQL                                             │
└───────────────────────────────────┴───────────────────────────────────────────────────┘
```

**Convert to number**

```sql title=Query
SELECT reinterpretAsUInt64(reverse(unbin('1110'))) AS num
```

```response title=Response
┌─num─┐
│  14 │
└─────┘
```

","21.8","Encoding"
"25.9.2.1","unhex",0,1,"","","System","
Performs the opposite operation of [`hex`](#hex). It interprets each pair of hexadecimal digits (in the argument) as a number and converts
it to the byte represented by the number. The returned value is a binary string (BLOB).

If you want to convert the result to a number, you can use the `reverse` and `reinterpretAs<Type>` functions.

:::note
`clickhouse-client` interprets strings as UTF-8.
This may cause that values returned by `hex` to be displayed surprisingly.
:::

Supports both uppercase and lowercase letters `A-F`.
The number of hexadecimal digits does not have to be even.
If it is odd, the last digit is interpreted as the least significant half of the `00-0F` byte.
If the argument string contains anything other than hexadecimal digits, some implementation-defined result is returned (an exception isn't thrown).
For a numeric argument the inverse of hex(N) is not performed by unhex().
","unhex(arg)","- `arg` — A string containing any number of hexadecimal digits. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring)
","","Returns a binary string (BLOB). [`String`](/sql-reference/data-types/string)","**Basic usage**

```sql title=Query
SELECT unhex('303132'), UNHEX('4D7953514C')
```

```response title=Response
┌─unhex('303132')─┬─unhex('4D7953514C')─┐
│ 012             │ MySQL               │
└─────────────────┴─────────────────────┘
```

**Convert to number**

```sql title=Query
SELECT reinterpretAsUInt64(reverse(unhex('FFF'))) AS num
```

```response title=Response
┌──num─┐
│ 4095 │
└──────┘
```

","1.1","Encoding"
"25.9.2.1","hex",0,1,"","","System","
Returns a string containing the argument's hexadecimal representation according
to the following logic for different types:

| Type                       | Description                                                                                                                                                                                                                                                                            |
|----------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `(U)Int*`                  | Prints hex digits (""nibbles"") from the most significant to least significant (big-endian or ""human-readable"" order). It starts with the most significant non-zero byte (leading zero bytes are omitted) but always prints both digits of every byte even if the leading digit is zero. |
| `Date` and `DateTime`      | Formatted as corresponding integers (the number of days since epoch for Date and the value of unix timestamp for DateTime).                                                                                                                                                            |
| `String` and `FixedString` | All bytes are simply encoded as two hexadecimal numbers. Zero bytes are not omitted.                                                                                                                                                                                                   |
| `Float*` and `Decimal`     | Encoded as their representation in memory. ClickHouse represents the values internally always as little endian, therefore they are encoded as such. Zero leading/trailing bytes are not omitted.                                                                                                                   |
| `UUID`                     | Encoded as big-endian order string.                                                                                                                                                                                                                                                    |

The function uses uppercase letters `A-F` and not using any prefixes (like `0x`) or suffixes (like `h`).
    ","hex(arg)","- `arg` — A value to convert to hexadecimal. [`String`](/sql-reference/data-types/string) or [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal) or [`Date`](/sql-reference/data-types/date) or [`DateTime`](/sql-reference/data-types/datetime)
","","Returns a string with the hexadecimal representation of the argument. [`String`](/sql-reference/data-types/string)","**Simple integer**

```sql title=Query
SELECT hex(1)
```

```response title=Response
01
```

**Float32 numbers**

```sql title=Query
SELECT hex(toFloat32(number)) AS hex_presentation FROM numbers(15, 2)
```

```response title=Response
┌─hex_presentation─┐
│ 00007041         │
│ 00008041         │
└──────────────────┘
```

**Float64 numbers**

```sql title=Query
SELECT hex(toFloat64(number)) AS hex_presentation FROM numbers(15, 2)
```

```response title=Response
┌─hex_presentation─┐
│ 0000000000002E40 │
│ 0000000000003040 │
└──────────────────┘
```

**UUID conversion**

```sql title=Query
SELECT lower(hex(toUUID('61f0c404-5cb3-11e7-907b-a6006ad3dba0'))) AS uuid_hex
```

```response title=Response
┌─uuid_hex─────────────────────────┐
│ 61f0c4045cb311e7907ba6006ad3dba0 │
└──────────────────────────────────┘
```

","1.1","Encoding"
"25.9.2.1","detectTonality",0,0,"","","System","","","","","","","",""
"25.9.2.1","extractAllGroupsHorizontal",0,0,"","","System","
Matches all groups of a string using the provided regular expression and returns an array of arrays, where each array contains all captures from the same capturing group, organized by group number.
","extractAllGroupsHorizontal(s, regexp)","- `s` — Input string to extract from. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring)
- `regexp` — Regular expression to match by. [`const String`](/sql-reference/data-types/string) or [`const FixedString`](/sql-reference/data-types/fixedstring)
","","Returns an array of arrays, where each inner array contains all captures from one capturing group across all matches. The first inner array contains all captures from group 1, the second from group 2, etc. If no matches are found, returns an empty array. [`Array(Array(String))`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
WITH '< Server: nginx
< Date: Tue, 22 Jan 2019 00:26:14 GMT
< Content-Type: text/html; charset=UTF-8
< Connection: keep-alive
' AS s
SELECT extractAllGroupsHorizontal(s, '< ([\\w\\-]+): ([^\\r\\n]+)');
```

```response title=Response
[['Server','Date','Content-Type','Connection'],['nginx','Tue, 22 Jan 2019 00:26:14 GMT','text/html; charset=UTF-8','keep-alive']]
```

","20.5","String Splitting"
"25.9.2.1","lcm",0,0,"","","System","
Returns the least common multiple of two values `x` and `y`.

An exception is thrown when dividing by zero or when dividing a minimal negative number by minus one.
    ","lcm(x, y)","- `x` — First integer. [`(U)Int*`](/sql-reference/data-types/int-uint)
- `y` — Second integer. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns the least common multiple of `x` and `y`. [`(U)Int*`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT lcm(6, 8)
```

```response title=Response
24
```

","1.1","Arithmetic"
"25.9.2.1","FQDN",0,1,"","","System","
Returns the fully qualified domain name of the ClickHouse server.
    ","fqdn()","","","Returns the fully qualified domain name of the ClickHouse server. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT fqdn()
```

```response title=Response
┌─FQDN()──────────────────────────┐
│ clickhouse.us-east-2.internal │
└─────────────────────────────────┘
```

","20.1","Other"
"25.9.2.1","h3GetIndexesFromUnidirectionalEdge",0,0,"","","System","","","","","","","",""
"25.9.2.1","JSONLength",0,0,"","","System","
Return the length of a JSON array or a JSON object.
If the value does not exist or has the wrong type, `0` will be returned.
        ","JSONLength(json [, indices_or_keys, ...])","- `json` — JSON string to parse [`String`](/sql-reference/data-types/string)
- `[, indices_or_keys, ...]` — Optional. A list of zero or more arguments. [`String`](/sql-reference/data-types/string) or [`(U)Int8/16/32/64`](/sql-reference/data-types/int-uint)
","","Returns the length of the JSON array or JSON object, otherwise returns `0` if the value does not exist or has the wrong type. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT JSONLength('{""a"": ""hello"", ""b"": [-100, 200.0, 300]}', 'b') = 3;
SELECT JSONLength('{""a"": ""hello"", ""b"": [-100, 200.0, 300]}') = 2;
```

```response title=Response
1
1
```

","20.1","JSON"
"25.9.2.1","extract",0,0,"","","System","
Extracts the first match of a regular expression in a string.
If 'haystack' doesn't match 'pattern', an empty string is returned.

This function uses the RE2 regular expression library. Please refer to [re2](https://github.com/google/re2/wiki/Syntax) for supported syntax.

If the regular expression has capturing groups (sub-patterns), the function matches the input string against the first capturing group.
    ","extract(haystack, pattern)","- `haystack` — String from which to extract. [`String`](/sql-reference/data-types/string)
- `pattern` — Regular expression, typically containing a capturing group. [`const String`](/sql-reference/data-types/string)
","","Returns extracted fragment as a string. [`String`](/sql-reference/data-types/string)","**Extract domain from email**

```sql title=Query
SELECT extract('test@clickhouse.com', '.*@(.*)$')
```

```response title=Response
┌─extract('test@clickhouse.com', '.*@(.*)$')─┐
│ clickhouse.com                            │
└───────────────────────────────────────────┘
```

**No match returns empty string**

```sql title=Query
SELECT extract('test@clickhouse.com', 'no_match')
```

```response title=Response
┌─extract('test@clickhouse.com', 'no_match')─┐
│                                            │
└────────────────────────────────────────────┘
```

","1.1","String Search"
"25.9.2.1","extractGroups",0,0,"","","System","
Extracts all groups from non-overlapping substrings matched by a regular expression.
    ","extractAllGroups(s, regexp)","- `s` — Input string to extract from. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring)
- `regexp` — Regular expression. Constant. [`const String`](/sql-reference/data-types/string) or [`const FixedString`](/sql-reference/data-types/fixedstring)
","","If the function finds at least one matching group, it returns Array(Array(String)) column, clustered by group_id (`1` to `N`, where `N` is number of capturing groups in regexp). If there is no matching group, it returns an empty array. [`Array(Array(String))`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
WITH '< Server: nginx
< Date: Tue, 22 Jan 2019 00:26:14 GMT
< Content-Type: text/html; charset=UTF-8
< Connection: keep-alive
' AS s
SELECT extractAllGroups(s, '< ([\\w\\-]+): ([^\\r\\n]+)');
```

```response title=Response
[['Server','nginx'],['Date','Tue, 22 Jan 2019 00:26:14 GMT'],['Content-Type','text/html; charset=UTF-8'],['Connection','keep-alive']]
```

","20.5","String Splitting"
"25.9.2.1","transactionLatestSnapshot",0,0,"","","System","","","","","","","",""
"25.9.2.1","transactionID",0,0,"","","System","
<ExperimentalBadge/>
<CloudNotSupportedBadge/>

Returns the ID of a transaction.

:::note
This function is part of an experimental feature set.
Enable experimental transaction support by adding this setting to your [configuration](/operations/configuration-files):

```xml
<clickhouse>
    <allow_experimental_transactions>1</allow_experimental_transactions>
</clickhouse>
```

For more information see the page [Transactional (ACID) support](/guides/developer/transactional#transactions-commit-and-rollback).
:::
    ","transactionID()","","","Returns a tuple consisting of `start_csn`, `local_tid` and `host_id`.
- `start_csn`: Global sequential number, the newest commit timestamp that was seen when this transaction began.
- `local_tid`: Local sequential number that is unique for each transaction started by this host within a specific start_csn.
- `host_id`: UUID of the host that has started this transaction.
     [`Tuple(UInt64, UInt64, UUID)`](/sql-reference/data-types/tuple)","**Usage example**

```sql title=Query
BEGIN TRANSACTION;
SELECT transactionID();
ROLLBACK;
```

```response title=Response
┌─transactionID()────────────────────────────────┐
│ (32,34,'0ee8b069-f2bb-4748-9eae-069c85b5252b') │
└────────────────────────────────────────────────┘
```

","22.6","Other"
"25.9.2.1","bitCount",0,0,"","","System","Calculates the number of bits set to one in the binary representation of a number.","bitCount(x)","- `x` — An integer or float value. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns the number of bits set to one in `x`. [`UInt8`](../data-types/int-uint.md).

:::note
The function does not convert the input value to a larger type ([sign extension](https://en.wikipedia.org/wiki/Sign_extension)).
For example: `bitCount(toUInt8(-1)) = 8`.
:::","**Usage example**

```sql title=Query
SELECT bin(333), bitCount(333);
```

```response title=Response
┌─bin(333)─────────┬─bitCount(333)─┐
│ 0000000101001101 │             5 │
└──────────────────┴───────────────┘
```

","20.3","Bit"
"25.9.2.1","SHA512_256",0,0,"","","System","
Calculates the SHA512_256 hash of the given string.
    ","SHA512_256(s)","- `s` — The input string to hash. [`String`](/sql-reference/data-types/string)
","","Returns the SHA512_256 hash of the given input string as a fixed-length string. [`FixedString(32)`](/sql-reference/data-types/fixedstring)","**Usage example**

```sql title=Query
SELECT HEX(SHA512_256('abc'));
```

```response title=Response
┌─hex(SHA512_256('abc'))───────────────────────────────────────────┐
│ 53048E2681941EF99B2E29B76B4C7DABE4C2D0C634FC6D46E0E2F13107E7AF23 │
└──────────────────────────────────────────────────────────────────┘
```

","1.1","Hash"
"25.9.2.1","SHA384",0,0,"","","System","
Calculates the SHA384 hash of the given string.
    ","SHA384(s)","- `s` — The input string to hash. [`String`](/sql-reference/data-types/string)
","","Returns the SHA384 hash of the given input string as a fixed-length string. [`FixedString(48)`](/sql-reference/data-types/fixedstring)","**Usage example**

```sql title=Query
SELECT HEX(SHA384('abc'));
```

```response title=Response
┌─hex(SHA384('abc'))───────────────────────────────────────────────────────────────────────────────┐
│ CB00753F45A35E8BB5A03D699AC65007272C32AB0EDED1631A8B605A43FF5BED8086072BA1E7CC2358BAECA134C825A7 │
└──────────────────────────────────────────────────────────────────────────────────────────────────┘
```

","1.1","Hash"
"25.9.2.1","h3Distance",0,0,"","","System","","","","","","","",""
"25.9.2.1","SHA256",0,0,"","","System","
Calculates the SHA256 hash of the given string.
    ","SHA256(s)","- `s` — The input string to hash. [`String`](/sql-reference/data-types/string)
","","Returns the SHA256 hash of the given input string as a fixed-length string. [`FixedString(32)`](/sql-reference/data-types/fixedstring)","**Usage example**

```sql title=Query
SELECT HEX(SHA256('abc'));
```

```response title=Response
┌─hex(SHA256('abc'))───────────────────────────────────────────────┐
│ BA7816BF8F01CFEA414140DE5DAE2223B00361A396177A9CB410FF61F20015AD │
└──────────────────────────────────────────────────────────────────┘
```

","1.1","Hash"
"25.9.2.1","MD5",0,0,"","","System","
Calculates the MD5 hash of the given string.
    ","MD5(s)","- `s` — The input string to hash. [`String`](/sql-reference/data-types/string)
","","Returns the MD5 hash of the given input string as a fixed-length string. [`FixedString(16)`](/sql-reference/data-types/fixedstring)","**Usage example**

```sql title=Query
SELECT HEX(MD5('abc'));
```

```response title=Response
┌─hex(MD5('abc'))──────────────────┐
│ 900150983CD24FB0D6963F7D28E17F72 │
└──────────────────────────────────┘
```

","1.1","Hash"
"25.9.2.1","geoToH3",0,0,"","","System","
Returns [H3](https://h3geo.org/docs/core-library/h3Indexing/) point index for the given latitude, longitude, and resolution.

:::note
In ClickHouse v25.4 or older, `geoToH3()` arguments are in the order `(lon, lat)`. As per ClickHouse v25.5, the input values are ordered `(lat, lon)`.
The previous behavior can be restored using setting `geotoh3_argument_order = 'lon_lat'`.
    ","geoToH3(lat, lon, resolution)","- `lat` — Latitude in degrees. [`Float64`](/sql-reference/data-types/float)
- `lon` — Longitude in degrees. [`Float64`](/sql-reference/data-types/float)
- `resolution` — Index resolution with range `[0, 15]`. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns the H3 index number, or `0` in case of error. [`UInt64`](/sql-reference/data-types/int-uint)","**Convert coordinates to H3 index**

```sql title=Query
SELECT geoToH3(55.71290588, 37.79506683, 15) AS h3Index
```

```response title=Response
┌────────────h3Index─┐
│ 644325524701193974 │
└────────────────────┘
```

","20.1","Geo"
"25.9.2.1","intExp10",0,0,"","","System","
Like [exp10](#exp10) but returns a `UInt64` number.
","intExp10(x)","- `x` — The exponent. [`Int*`](/sql-reference/data-types/int-uint) or [`UInt*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns 10^x. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT intExp10(2);
```

```response title=Response
100
```

","1.1","Mathematical"
"25.9.2.1","toInt16OrNull",0,0,"","","System","
Like [`toInt16`](#toInt16), this function converts an input value to a value of type [Int16](../data-types/int-uint.md) but returns `NULL` in case of an error.

Supported arguments:
- String representations of (U)Int*.

Unsupported arguments (return `NULL`):
- String representations of Float* values, including `NaN` and `Inf`.
- String representations of binary and hexadecimal values, e.g. `SELECT toInt16OrNull('0xc0fe');`.

:::note
If the input value cannot be represented within the bounds of [Int16](../data-types/int-uint.md), overflow or underflow of the result occurs.
This is not considered an error.
:::

See also:
- [`toInt16`](#toInt16).
- [`toInt16OrZero`](#toInt16OrZero).
- [`toInt16OrDefault`](#toInt16OrDefault).
    ","toInt16OrNull(x)","- `x` — A String representation of a number. [`String`](/sql-reference/data-types/string)
","","Returns a value of type `Int16`, otherwise `NULL` if the conversion is unsuccessful. [`Int16`](/sql-reference/data-types/int-uint) or [`NULL`](/sql-reference/syntax#null)","**Usage example**

```sql title=Query
SELECT
    toInt16OrNull('-16'),
    toInt16OrNull('abc')
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toInt16OrNull('-16'): -16
toInt16OrNull('abc'): \N
```

","1.1","Type Conversion"
"25.9.2.1","timeSlots",0,0,"","","System","
For a time interval starting at `StartTime` and continuing for `Duration` seconds, it returns an array of moments in time, consisting of points from this interval rounded down to the `Size` in seconds. `Size` is an optional parameter set to 1800 (30 minutes) by default.

This is necessary, for example, when searching for pageviews in the corresponding session.

For `DateTime64`, the return value's scale can differ from the scale of `StartTime`. The highest scale among all given arguments is taken.
    ","timeSlots(StartTime, Duration[, Size])","- `StartTime` — Starting time for the interval. [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
- `Duration` — Duration of the interval in seconds. [`UInt32`](/sql-reference/data-types/int-uint) or [`DateTime64`](/sql-reference/data-types/datetime64)
- `Size` — Optional. Size of time slots in seconds. Default is 1800 (30 minutes). [`UInt32`](/sql-reference/data-types/int-uint) or [`DateTime64`](/sql-reference/data-types/datetime64)
","","Returns an array of DateTime/DateTime64 (return type matches the type of `StartTime`). For DateTime64, the return value's scale can differ from the scale of `StartTime` - the highest scale among all given arguments is taken. [`Array(DateTime)`](/sql-reference/data-types/array) or [`Array(DateTime64)`](/sql-reference/data-types/array)","**Generate time slots for an interval**

```sql title=Query
SELECT timeSlots(toDateTime('2012-01-01 12:20:00'), toUInt32(600));
SELECT timeSlots(toDateTime('1980-12-12 21:01:02', 'UTC'), toUInt32(600), 299);
SELECT timeSlots(toDateTime64('1980-12-12 21:01:02.1234', 4, 'UTC'), toDecimal64(600.1, 1), toDecimal64(299, 0))
```

```response title=Response
┌─timeSlots(toDateTime('2012-01-01 12:20:00'), toUInt32(600))─┐
│ ['2012-01-01 12:00:00','2012-01-01 12:30:00']               │
└─────────────────────────────────────────────────────────────┘
┌─timeSlots(toDateTime('1980-12-12 21:01:02', 'UTC'), toUInt32(600), 299)─┐
│ ['1980-12-12 20:56:13','1980-12-12 21:01:12','1980-12-12 21:06:11']     │
└─────────────────────────────────────────────────────────────────────────┘
┌─timeSlots(toDateTime64('1980-12-12 21:01:02.1234', 4, 'UTC'), toDecimal64(600.1, 1), toDecimal64(299, 0))─┐
│ ['1980-12-12 20:56:13.0000','1980-12-12 21:01:12.0000','1980-12-12 21:06:11.0000']                        │
└───────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","char",0,1,"","","System","
Returns a string with length equal to the number of arguments passed where each byte
has the value of the corresponding argument. Accepts multiple arguments of numeric types.

If the value of the argument is out of range of the `UInt8` data type, then it is converted
to `UInt8` with potential rounding and overflow.
        ","char(num1[, num2[, ...]])","- `num1[, num2[, num3 ...]]` — Numerical arguments interpreted as integers. [`(U)Int8/16/32/64`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns a string of the given bytes. [`String`](/sql-reference/data-types/string)","**Basic example**

```sql title=Query
SELECT char(104.1, 101, 108.9, 108.9, 111) AS hello;
```

```response title=Response
┌─hello─┐
│ hello │
└───────┘
```

**Constructing arbitrary encodings**

```sql title=Query
-- You can construct a string of arbitrary encoding by passing the corresponding bytes.
-- for example UTF8
SELECT char(0xD0, 0xBF, 0xD1, 0x80, 0xD0, 0xB8, 0xD0, 0xB2, 0xD0, 0xB5, 0xD1, 0x82) AS hello;
```

```response title=Response
┌─hello──┐
│ привет │
└────────┘
```

","20.1","Encoding"
"25.9.2.1","addDays",0,0,"","","System","
Adds a specified number of days to a date, a date with time or a string-encoded date or date with time.
    ","addDays(datetime, num)","- `datetime` — Date or date with time to add specified number of days to. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64) or [`String`](/sql-reference/data-types/string)
- `num` — Number of days to add. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns `datetime` plus `num` days. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)","**Add days to different date types**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addDays(date, 5) AS add_days_with_date,
    addDays(date_time, 5) AS add_days_with_date_time,
    addDays(date_time_string, 5) AS add_days_with_date_time_string
```

```response title=Response
┌─add_days_with_date─┬─add_days_with_date_time─┬─add_days_with_date_time_string─┐
│         2024-01-06 │     2024-01-06 00:00:00 │        2024-01-06 00:00:00.000 │
└────────────────────┴─────────────────────────┴────────────────────────────────┘
```

**Using alternative INTERVAL syntax**

```sql title=Query
SELECT dateAdd('1998-06-16'::Date, INTERVAL 10 day)
```

```response title=Response
┌─plus(CAST('1⋯valDay(10))─┐
│               1998-06-26 │
└──────────────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","blockSize",0,0,"","","System","
In ClickHouse, queries are processed in [blocks](/development/architecture#block) (chunks).
This function returns the size (row count) of the block the function is called on.
    ","blockSize()","","","Returns the number of rows in the current block. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT blockSize()
FROM system.numbers LIMIT 5
```

```response title=Response
┌─blockSize()─┐
│           5 │
│           5 │
│           5 │
│           5 │
│           5 │
└─────────────┘
```

","1.1","Other"
"25.9.2.1","isNotNull",0,0,"","","System","
Checks if the argument is not `NULL`.

Also see: operator [`IS NOT NULL`](/sql-reference/operators#is_not_null).
    ","isNotNull(x)","- `x` — A value of non-compound data type. [`Any`](/sql-reference/data-types)
","","Returns `1` if `x` is not `NULL`, otherwise `0`. [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
CREATE TABLE t_null
(
  x Int32,
  y Nullable(Int32)
)
ENGINE = MergeTree
ORDER BY tuple();

INSERT INTO t_null VALUES (1, NULL), (2, 3);

SELECT x FROM t_null WHERE isNotNull(y);
```

```response title=Response
┌─x─┐
│ 2 │
└───┘
```

","1.1","Null"
"25.9.2.1","toUTCTimestamp",0,0,"","","System","
Converts a date or date with time value from one time zone to UTC timezone timestamp. This function is mainly included for compatibility with Apache Spark and similar frameworks.
    ","toUTCTimestamp(datetime, time_zone)","- `datetime` — A date or date with time type const value or an expression. [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
- `time_zone` — A String type const value or an expression representing the time zone. [`String`](/sql-reference/data-types/string)
","","Returns a date or date with time in UTC timezone. [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)","**Convert timezone to UTC**

```sql title=Query
SELECT toUTCTimestamp(toDateTime('2023-03-16'), 'Asia/Shanghai')
```

```response title=Response
┌─toUTCTimestamp(toDateTime('2023-03-16'), 'Asia/Shanghai')─┐
│                                     2023-03-15 16:00:00 │
└─────────────────────────────────────────────────────────┘
```

","23.8","Dates and Times"
"25.9.2.1","colorSRGBToOKLCH",0,0,"","","System","
Converts a colour encoded in the **sRGB** colour space to the perceptually uniform **OKLCH** colour space.

If any input channel is outside `[0...255]` or the gamma value is non-positive, the behaviour is implementation-defined.

:::note
**OKLCH** is a cylindrical version of the OKLab colour space.
It's three coordinates are `L` (the lightness in the range `[0...1]`), `C` (chroma `>= 0`) and `H` (the hue in degrees from `[0...360]`).
OKLab/OKLCH is designed to be perceptually uniform while remaining cheap to compute.
:::

The conversion consists of three stages:
1) sRGB to Linear sRGB
2) Linear sRGB to OKLab
3) OKLab to OKLCH.


For references of colors in the OKLCH space, and how they correspond to sRGB colors, please see [https://OKLCH.com/](https://OKLCH.com/).
    ","colorSRGBToOKLCH(tuple[, gamma])","- `tuple` — Tuple of three values R, G, B in the range `[0...255]`. [`Tuple(UInt8, UInt8, UInt8)`](/sql-reference/data-types/tuple)
- `gamma` — Optional. Exponent that is used to linearize sRGB by applying `(x / 255)^gamma` to each channel `x`. Defaults to `2.2`. [`Float64`](/sql-reference/data-types/float)
","","Returns a tuple (L, C, H) representing the OKLCH color space values. [`Tuple(Float64, Float64, Float64)`](/sql-reference/data-types/tuple)","**Convert sRGB to OKLCH**

```sql title=Query
SELECT colorSRGBToOKLCH((128, 64, 32), 2.2) AS lch
```

```response title=Response
┌─lch─────────────────────────────────────────────────────────┐
│ (0.4436238384931984,0.10442699545678624,45.907345481930236) │
└─────────────────────────────────────────────────────────────┘
```

","25.7","Other"
"25.9.2.1","arrayLastIndex",0,0,"","","System","
Returns the index of the last element in the source array for which `func(x[, y1, y2, ... yN])` returns true, otherwise it returns '0'.
","arrayLastIndex(func(x[, y1, ..., yN]), source_arr[, cond1_arr, ... , condN_arr])","- `func(x[, y1, ..., yN])` — A lambda function which operates on elements of the source array (`x`) and condition arrays (`y`). [`Lambda function`](/sql-reference/functions/overview#arrow-operator-and-lambda)
- `source_arr` — The source array to process. [`Array(T)`](/sql-reference/data-types/array)
- `[, cond1_arr, ... , condN_arr]` — Optional. N condition arrays providing additional arguments to the lambda function. [`Array(T)`](/sql-reference/data-types/array)
","","Returns the index of the last element of the source array for which `func` is true, otherwise returns `0` [`UInt32`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT arrayLastIndex(x, y -> x=y, ['a', 'b', 'c'], ['a', 'b', 'c']);
```

```response title=Response
3
```

**No match**

```sql title=Query
SELECT arrayLastIndex(x, y -> x=y, ['a', 'b', 'c'], ['d', 'e', 'f']);
```

```response title=Response
0
```

","1.1","Arrays"
"25.9.2.1","reverse",0,1,"","","System","Reverses the order of the elements in the input array or the characters in the input string.","reverse(arr | str)","- `arr | str` — The source array or string. [`Array(T)`](/sql-reference/data-types/array) or [`String`](/sql-reference/data-types/string)
","","Returns an array or string with the order of elements or characters reversed.","**Reverse array**

```sql title=Query
SELECT reverse([1, 2, 3, 4]);
```

```response title=Response
[4, 3, 2, 1]
```

**Reverse string**

```sql title=Query
SELECT reverse('abcd');
```

```response title=Response
'dcba'
```

","1.1","Arrays"
"25.9.2.1","simpleJSONHas",0,0,"","","System","
Checks whether there is a field named `field_name`.
","simpleJSONHas(json, field_name)","- `json` — The JSON in which the field is searched for. [`String`](/sql-reference/data-types/string)
- `field_name` — The name of the field to search for. [`const String`](/sql-reference/data-types/string)
","","Returns `1` if the field exists, `0` otherwise [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
CREATE TABLE jsons
(
    `json` String
)
ENGINE = MergeTree
ORDER BY tuple();

INSERT INTO jsons VALUES ('{""foo"":""true"",""qux"":1}');

SELECT simpleJSONHas(json, 'foo') FROM jsons;
SELECT simpleJSONHas(json, 'bar') FROM jsons;
```

```response title=Response
1
0
```

","21.4","JSON"
"25.9.2.1","arrayPartialReverseSort",0,0,"","","System","
This function is the same as `arrayReverseSort` but with an additional `limit` argument allowing partial sorting.

:::tip
To retain only the sorted elements use `arrayResize`.
:::
    ","arrayPartialReverseSort([f,] arr [, arr1, ... ,arrN], limit)","- `f(arr[, arr1, ... ,arrN])` — The lambda function to apply to elements of array `x`. [`Lambda function`](/sql-reference/functions/overview#arrow-operator-and-lambda)
- `arr` — Array to be sorted. [`Array(T)`](/sql-reference/data-types/array)
- `arr1, ... ,arrN` — N additional arrays, in the case when `f` accepts multiple arguments. [`Array(T)`](/sql-reference/data-types/array)
- `limit` — Index value up until which sorting will occur. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns an array of the same size as the original array where elements in the range `[1..limit]` are sorted
in descending order. The remaining elements `(limit..N]` are in an unspecified order.","**simple_int**

```sql title=Query
SELECT arrayPartialReverseSort(2, [5, 9, 1, 3])
```

```response title=Response
[9, 5, 1, 3]
```

**simple_string**

```sql title=Query
SELECT arrayPartialReverseSort(2, ['expenses','lasso','embolism','gladly'])
```

```response title=Response
['lasso','gladly','expenses','embolism']
```

**retain_sorted**

```sql title=Query
SELECT arrayResize(arrayPartialReverseSort(2, [5, 9, 1, 3]), 2)
```

```response title=Response
[9, 5]
```

**lambda_simple**

```sql title=Query
SELECT arrayPartialReverseSort((x) -> -x, 2, [5, 9, 1, 3])
```

```response title=Response
[1, 3, 5, 9]
```

**lambda_complex**

```sql title=Query
SELECT arrayPartialReverseSort((x, y) -> -y, 1, [0, 1, 2], [1, 2, 3]) as res
```

```response title=Response
[0, 1, 2]
```

","23.2","Arrays"
"25.9.2.1","toHour",0,0,"","","System","
Returns the hour component (0-23) of a `DateTime` or `DateTime64` value.
    ","toHour(datetime)","- `datetime` — Date with time to get the hour from. [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
","","Returns the hour (0-23) of `datetime`. [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT toHour(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toHour(toDateTime('2023-04-21 10:20:30'))─┐
│                                        10 │
└───────────────────────────────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","arrayPartialSort",0,0,"","","System","
This function is the same as `arraySort` but with an additional `limit` argument allowing partial sorting.

:::tip
To retain only the sorted elements use `arrayResize`.
:::
    ","arrayPartialSort([f,] arr [, arr1, ... ,arrN], limit)","- `f(arr[, arr1, ... ,arrN])` — The lambda function to apply to elements of array `x`. [`Lambda function`](/sql-reference/functions/overview#arrow-operator-and-lambda)
- `arr` — Array to be sorted. [`Array(T)`](/sql-reference/data-types/array)
- `arr1, ... ,arrN` — N additional arrays, in the case when `f` accepts multiple arguments. [`Array(T)`](/sql-reference/data-types/array)
- `limit` — Index value up until which sorting will occur. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns an array of the same size as the original array where elements in the range `[1..limit]` are sorted
in ascending order. The remaining elements `(limit..N]` are in an unspecified order.","**simple_int**

```sql title=Query
SELECT arrayPartialSort(2, [5, 9, 1, 3])
```

```response title=Response
[1, 3, 5, 9]
```

**simple_string**

```sql title=Query
SELECT arrayPartialSort(2, ['expenses', 'lasso', 'embolism', 'gladly'])
```

```response title=Response
['embolism', 'expenses', 'gladly', 'lasso']
```

**retain_sorted**

```sql title=Query
SELECT arrayResize(arrayPartialSort(2, [5, 9, 1, 3]), 2)
```

```response title=Response
[1, 3]
```

**lambda_simple**

```sql title=Query
SELECT arrayPartialSort((x) -> -x, 2, [5, 9, 1, 3])
```

```response title=Response
[9, 5, 1, 3]
```

**lambda_complex**

```sql title=Query
SELECT arrayPartialSort((x, y) -> -y, 1, [0, 1, 2], [1, 2, 3]) as res
```

```response title=Response
[2, 1, 0]
```

","23.2","Arrays"
"25.9.2.1","bitRotateRight",0,0,"","","System","Rotate bits right by a certain number of positions. Bits that fall off wrap around to the left.","bitRotateRight(a, N)","- `a` — A value to rotate. [`(U)Int8/16/32/64`](/sql-reference/data-types/int-uint)
- `N` — The number of positions to rotate right. [`UInt8/16/32/64`](/sql-reference/data-types/int-uint)
","","Returns the rotated value with type equal to that of `a`. [`(U)Int8/16/32/64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT 99 AS a, bin(a), bitRotateRight(a, 2) AS a_rotated, bin(a_rotated);
```

```response title=Response
┌──a─┬─bin(a)───┬─a_rotated─┬─bin(a_rotated)─┐
│ 99 │ 01100011 │       216 │ 11011000       │
└────┴──────────┴───────────┴────────────────┘
```

","1.1","Bit"
"25.9.2.1","arrayReverseSort",0,0,"","","System","
Sorts the elements of an array in descending order.
If a function `f` is specified, the provided array is sorted according to the result
of the function applied to the elements of the array, and then the sorted array is reversed.
If `f` accepts multiple arguments, the `arrayReverseSort` function is passed several arrays that
the arguments of `func` will correspond to.

If the array to sort contains `-Inf`, `NULL`, `NaN`, or `Inf` they will be sorted in the following order:

1. `-Inf`
2. `Inf`
3. `NaN`
4. `NULL`

`arrayReverseSort` is a [higher-order function](/sql-reference/functions/overview#higher-order-functions).
    ","arrayReverseSort([f,] arr [, arr1, ... ,arrN)","- `f(y1[, y2 ... yN])` — The lambda function to apply to elements of array `x`. - `arr` — An array to be sorted. [`Array(T)`](/sql-reference/data-types/array) - `arr1, ..., yN` — Optional. N additional arrays, in the case when `f` accepts multiple arguments. ","","Returns the array `x` sorted in descending order if no lambda function is provided, otherwise
it returns an array sorted according to the logic of the provided lambda function, and then reversed. [`Array(T)`](/sql-reference/data-types/array).","**Example 1**

```sql title=Query
SELECT arrayReverseSort((x, y) -> y, [4, 3, 5], ['a', 'b', 'c']) AS res;
```

```response title=Response
[5,3,4]
```

**Example 2**

```sql title=Query
SELECT arrayReverseSort((x, y) -> -y, [4, 3, 5], [1, 2, 3]) AS res;
```

```response title=Response
[4,3,5]
```

","1.1","Arrays"
"25.9.2.1","arraySort",0,0,"","","System","
Sorts the elements of the provided array in ascending order.
If a lambda function `f` is specified, sorting order is determined by the result of
the lambda applied to each element of the array.
If the lambda accepts multiple arguments, the `arraySort` function is passed several
arrays that the arguments of `f` will correspond to.

If the array to sort contains `-Inf`, `NULL`, `NaN`, or `Inf` they will be sorted in the following order:

1. `-Inf`
2. `Inf`
3. `NaN`
4. `NULL`

`arraySort` is a [higher-order function](/sql-reference/functions/overview#higher-order-functions).
","arraySort([f,] arr [, arr1, ... ,arrN])","- `f(y1[, y2 ... yN])` — The lambda function to apply to elements of array `x`. - `arr` — An array to be sorted. [`Array(T)`](/sql-reference/data-types/array) - `arr1, ..., yN` — Optional. N additional arrays, in the case when `f` accepts multiple arguments. ","","Returns the array `arr` sorted in ascending order if no lambda function is provided, otherwise
it returns an array sorted according to the logic of the provided lambda function. [`Array(T)`](/sql-reference/data-types/array).","**Example 1**

```sql title=Query
SELECT arraySort([1, 3, 3, 0]);
```

```response title=Response
[0,1,3,3]
```

**Example 2**

```sql title=Query
SELECT arraySort(['hello', 'world', '!']);
```

```response title=Response
['!','hello','world']
```

**Example 3**

```sql title=Query
SELECT arraySort([1, nan, 2, NULL, 3, nan, -4, NULL, inf, -inf]);
```

```response title=Response
[-inf,-4,1,2,3,inf,nan,nan,NULL,NULL]
```

","1.1","Arrays"
"25.9.2.1","bar",0,0,"","","System","
Builds a bar chart.
Draws a band with width proportional to (x - min) and equal to width characters when x = max.
The band is drawn with accuracy to one eighth of a symbol.
","bar(x, min, max[, width])","- `x` — Size to display. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
- `min` — The minimum value. [`const Int64`](/sql-reference/data-types/int-uint)
- `max` — The maximum value. [`const Int64`](/sql-reference/data-types/int-uint)
- `width` — Optional. The width of the bar in characters. The default is `80`. [`const (U)Int*`](/sql-reference/data-types/int-uint) or [`const Float*`](/sql-reference/data-types/float) or [`const Decimal`](/sql-reference/data-types/decimal)
","","Returns a unicode-art bar string. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT
toHour(EventTime) AS h,
count() AS c,
bar(c, 0, 600000, 20) AS bar
FROM test.hits
GROUP BY h
ORDER BY h ASC
```

```response title=Response
┌──h─┬──────c─┬─bar────────────────┐
│  0 │ 292907 │ █████████▋         │
│  1 │ 180563 │ ██████             │
│  2 │ 114861 │ ███▋               │
│  3 │  85069 │ ██▋                │
│  4 │  68543 │ ██▎                │
│  5 │  78116 │ ██▌                │
│  6 │ 113474 │ ███▋               │
│  7 │ 170678 │ █████▋             │
│  8 │ 278380 │ █████████▎         │
│  9 │ 391053 │ █████████████      │
│ 10 │ 457681 │ ███████████████▎   │
│ 11 │ 493667 │ ████████████████▍  │
│ 12 │ 509641 │ ████████████████▊  │
│ 13 │ 522947 │ █████████████████▍ │
│ 14 │ 539954 │ █████████████████▊ │
│ 15 │ 528460 │ █████████████████▌ │
│ 16 │ 539201 │ █████████████████▊ │
│ 17 │ 523539 │ █████████████████▍ │
│ 18 │ 506467 │ ████████████████▊  │
│ 19 │ 520915 │ █████████████████▎ │
│ 20 │ 521665 │ █████████████████▍ │
│ 21 │ 542078 │ ██████████████████ │
│ 22 │ 493642 │ ████████████████▍  │
│ 23 │ 400397 │ █████████████▎     │
└────┴────────┴────────────────────┘
```

","1.1","Other"
"25.9.2.1","searchAny",0,0,"","","System","
Returns 1, if at least one string needle_i matches the `input` column and 0 otherwise.

:::note
This function can only be used if setting `allow_experimental_full_text_index` is enabled.
:::

The `input` column must have a text index defined. When searching, the `input` string is tokenized according to the tokenizer specified in the index definition.
Each element in the `needle` array is treated as a complete, individual token — no additional tokenization is performed on the needle elements themselves.

**Example**

To search for ""ClickHouse"" in a column with an ngram tokenizer (`tokenizer = 'ngram', ngram_size = 5`), you would provide an array of all the 5-character ngrams:

```sql
['Click', 'lickH', 'ickHo', 'ckHou', 'kHous', 'House']
```

:::note
Duplicate tokens in the needle array are automatically ignored.
For example, ['ClickHouse', 'ClickHouse'] is treated the same as ['ClickHouse'].
:::
    ","searchAny(input, ['needle1', 'needle2', ..., 'needleN'])","- `input` — The input column. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring)
- `needles` — Tokens to be searched. Supports at most 64 tokens. [`Array`](/sql-reference/data-types/array)
","","Returns `1`, if there was at least one match. `0`, otherwise. [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
CREATE TABLE table (
    id UInt32,
    msg String,
    INDEX idx(msg) TYPE text(tokenizer = 'split', separators = ['()', '\\'])
)
ENGINE = MergeTree
ORDER BY id;

INSERT INTO table VALUES (1, '()a,\\bc()d'), (2, '()\\a()bc\\d'), (3, ',()a\\,bc,(),d,');

SELECT count() FROM table WHERE searchAny(msg, ['a', 'd']
```

```response title=Response
┌─count()─┐
│       3 │
└─────────┘
```

**Generate needles using the `tokens` function**

```sql title=Query
SELECT count() FROM table WHERE searchAny(msg, tokens('a()d', 'split', ['()', '\\']));
```

```response title=Response
┌─count()─┐
│       3 │
└─────────┘
```

","25.7","String Search"
"25.9.2.1","formatDateTime",0,0,"","","System","
Formats a date or date with time according to the given format string. `format` is a constant expression, so you cannot have multiple formats for a single result column.

`formatDateTime` uses MySQL datetime format style, refer to the [mysql docs](https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_date-format).

The opposite operation of this function is [`parseDateTime`](/sql-reference/functions/type-conversion-functions#parsedatetime).

Using replacement fields, you can define a pattern for the resulting string.
The example column in the table below shows formatting result for `2018-01-02 22:33:44`.

**Replacement fields:**

| Placeholder | Description | Example |
|-------------|-------------|---------|
| %a | abbreviated weekday name (Mon-Sun) | Mon |
| %b | abbreviated month name (Jan-Dec) | Jan |
| %c | month as an integer number (01-12) | 01 |
| %C | year divided by 100 and truncated to integer (00-99) | 20 |
| %d | day of the month, zero-padded (01-31) | 02 |
| %D | Short MM/DD/YY date, equivalent to %m/%d/%y | 01/02/18 |
| %e | day of the month, space-padded (1-31) | 2 |
| %f | fractional second | 123456 |
| %F | short YYYY-MM-DD date, equivalent to %Y-%m-%d | 2018-01-02 |
| %g | two-digit year format, aligned to ISO 8601 | 18 |
| %G | four-digit year format for ISO week number | 2018 |
| %h | hour in 12h format (01-12) | 09 |
| %H | hour in 24h format (00-23) | 22 |
| %i | minute (00-59) | 33 |
| %I | hour in 12h format (01-12) | 10 |
| %j | day of the year (001-366) | 002 |
| %k | hour in 24h format (00-23) | 14 |
| %l | hour in 12h format (01-12) | 09 |
| %m | month as an integer number (01-12) | 01 |
| %M | full month name (January-December) | January |
| %n | new-line character | |
| %p | AM or PM designation | PM |
| %Q | Quarter (1-4) | 1 |
| %r | 12-hour HH:MM AM/PM time, equivalent to %h:%i %p | 10:30 PM |
| %R | 24-hour HH:MM time, equivalent to %H:%i | 22:33 |
| %s | second (00-59) | 44 |
| %S | second (00-59) | 44 |
| %t | horizontal-tab character | |
| %T | ISO 8601 time format (HH:MM:SS), equivalent to %H:%i:%S | 22:33:44 |
| %u | ISO 8601 weekday as number with Monday as 1 (1-7) | 2 |
| %V | ISO 8601 week number (01-53) | 01 |
| %w | weekday as a integer number with Sunday as 0 (0-6) | 2 |
| %W | full weekday name (Monday-Sunday) | Monday |
| %y | Year, last two digits (00-99) | 18 |
| %Y | Year | 2018 |
| %z | Time offset from UTC as +HHMM or -HHMM | -0500 |
| %% | a % sign | % |

- In ClickHouse versions earlier than v23.4, `%f` prints a single zero (0) if the formatted value is a Date, Date32 or DateTime (which have no fractional seconds) or a DateTime64 with a precision of 0.
- In ClickHouse versions earlier than v25.1, `%f` prints as many digits as specified by the scale of the DateTime64 instead of fixed 6 digits.
- In ClickHouse versions earlier than v23.4, `%M` prints the minute (00-59) instead of the full month name (January-December).
    ","formatDateTime(datetime, format[, timezone])","- `datetime` — A date or date time to format. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
- `format` — Format string with replacement fields. [`String`](/sql-reference/data-types/string)
- `timezone` — Optional. Timezone name for the formatted time. [`String`](/sql-reference/data-types/string)
","","Returns time and date values according to the determined format. [`String`](/sql-reference/data-types/string)","**Format date with year placeholder**

```sql title=Query
SELECT formatDateTime(toDate('2010-01-04'), '%g')
```

```response title=Response
┌─formatDateTime(toDate('2010-01-04'), '%g')─┐
│ 10                                         │
└────────────────────────────────────────────┘
```

**Format DateTime64 with fractional seconds**

```sql title=Query
SELECT formatDateTime(toDateTime64('2010-01-04 12:34:56.123456', 7), '%f')
```

```response title=Response
┌─formatDateTime(toDateTime64('2010-01-04 12:34:56.123456', 7), '%f')─┐
│ 1234560                                                             │
└─────────────────────────────────────────────────────────────────────┘
```

**Format with timezone**

```sql title=Query
SELECT
    now() AS ts,
    time_zone,
    formatDateTime(ts, '%T', time_zone) AS str_tz_time
FROM system.time_zones
WHERE time_zone LIKE 'Europe%'
LIMIT 10
```

```response title=Response
┌──────────────────ts─┬─time_zone─────────┬─str_tz_time─┐
│ 2023-09-08 19:13:40 │ Europe/Amsterdam  │ 21:13:40    │
│ 2023-09-08 19:13:40 │ Europe/Andorra    │ 21:13:40    │
│ 2023-09-08 19:13:40 │ Europe/Astrakhan  │ 23:13:40    │
│ 2023-09-08 19:13:40 │ Europe/Athens     │ 22:13:40    │
│ 2023-09-08 19:13:40 │ Europe/Belfast    │ 20:13:40    │
│ 2023-09-08 19:13:40 │ Europe/Belgrade   │ 21:13:40    │
│ 2023-09-08 19:13:40 │ Europe/Berlin     │ 21:13:40    │
│ 2023-09-08 19:13:40 │ Europe/Bratislava │ 21:13:40    │
│ 2023-09-08 19:13:40 │ Europe/Brussels   │ 21:13:40    │
│ 2023-09-08 19:13:40 │ Europe/Bucharest  │ 22:13:40    │
└─────────────────────┴───────────────────┴─────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","sipHash128Keyed",0,0,"","","System","
Same as [`sipHash128`](#sipHash128) but additionally takes an explicit key argument instead of using a fixed key.

:::tip use sipHash128ReferenceKeyed for new projects
This 128-bit variant differs from the reference implementation and it's weaker.
This version exists because, when it was written, there was no official 128-bit extension for SipHash.
New projects should probably use [`sipHash128ReferenceKeyed`](#sipHash128ReferenceKeyed).
:::
","sipHash128Keyed((k0, k1), [arg1, arg2, ...])","- `(k0, k1)` — A tuple of two UInt64 values representing the key. [`Tuple(UInt64, UInt64)`](/sql-reference/data-types/tuple)
- `arg1[, arg2, ...]` — A variable number of input arguments for which to compute the hash. [`Any`](/sql-reference/data-types)
","","A 128-bit `SipHash` hash value of type [FixedString(16)](../data-types/fixedstring.md). [`FixedString(16)`](/sql-reference/data-types/fixedstring)","**Usage example**

```sql title=Query
SELECT hex(sipHash128Keyed((506097522914230528, 1084818905618843912),'foo', '\x01', 3));
```

```response title=Response
┌─hex(sipHash128Keyed((506097522914230528, 1084818905618843912), 'foo', '', 3))─┐
│ B8467F65C8B4CFD9A5F8BD733917D9BF                                              │
└───────────────────────────────────────────────────────────────────────────────┘
```

","23.2","Hash"
"25.9.2.1","addMicroseconds",0,0,"","","System","
Adds a specified number of microseconds to a date with time or a string-encoded date with time.
    ","addMicroseconds(datetime, num)","- `datetime` — Date with time to add specified number of microseconds to. [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64) or [`String`](/sql-reference/data-types/string)
- `num` — Number of microseconds to add. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns `date_time` plus `num` microseconds [`DateTime64`](/sql-reference/data-types/datetime64)","**Add microseconds to different date time types**

```sql title=Query
WITH
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addMicroseconds(date_time, 1000000) AS add_microseconds_with_date_time,
    addMicroseconds(date_time_string, 1000000) AS add_microseconds_with_date_time_string
```

```response title=Response
┌─add_microseconds_with_date_time─┬─add_microseconds_with_date_time_string─┐
│      2024-01-01 00:00:01.000000 │             2024-01-01 00:00:01.000000 │
└─────────────────────────────────┴────────────────────────────────────────┘
```

**Using alternative INTERVAL syntax**

```sql title=Query
SELECT dateAdd('1998-06-16'::DateTime, INTERVAL 10 microsecond)
```

```response title=Response
┌─plus(CAST('19⋯osecond(10))─┐
│ 1998-06-16 00:00:00.000010 │
└────────────────────────────┘
```

","22.6","Dates and Times"
"25.9.2.1","toIntervalQuarter",0,0,"","","System","
Returns an interval of `n` quarters of data type [`IntervalQuarter`](../../sql-reference/data-types/special-data-types/interval.md).
    ","toIntervalQuarter(n)","- `n` — Number of quarters. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`String`](/sql-reference/data-types/string)
","","Returns an interval of `n` quarters. [`Interval`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
WITH
    toDate('2025-06-15') AS date,
    toIntervalQuarter(1) AS interval_to_quarter
SELECT date + interval_to_quarter AS result
```

```response title=Response
┌─────result─┐
│ 2025-09-15 │
└────────────┘
```

","1.1","Type Conversion"
"25.9.2.1","multiSearchAny",0,0,"","","System","
Checks if at least one of a number of needle strings matches the haystack string.

Functions [`multiSearchAnyCaseInsensitive`](#multiSearchAnyCaseInsensitive), [`multiSearchAnyUTF8`](#multiSearchAnyUTF8) and [`multiSearchAnyCaseInsensitiveUTF8`](#multiSearchAnyCaseInsensitiveUTF8) provide case-insensitive and/or UTF-8 variants of this function.
    ","multiSearchAny(haystack, needle1[, needle2, ...])","- `haystack` — String in which the search is performed. [`String`](/sql-reference/data-types/string)
- `needle1[, needle2, ...]` — An array of substrings to be searched. [`Array(String)`](/sql-reference/data-types/array)
","","Returns `1`, if there was at least one match, otherwise `0`, if there was not at least one match. [`UInt8`](/sql-reference/data-types/int-uint)","**Any match search**

```sql title=Query
SELECT multiSearchAny('ClickHouse',['C','H'])
```

```response title=Response
┌─multiSearchAny('ClickHouse', ['C', 'H'])─┐
│                                        1 │
└──────────────────────────────────────────┘
```

","20.1","String Search"
"25.9.2.1","regexpQuoteMeta",0,0,"","","System","
Adds a backslash before these characters with special meaning in regular expressions: `\0`, `\\`, `|`, `(`, `)`, `^`, `$`, `.`, `[`, `]`, `?`, `*`, `+`, `{`, `:`, `-`.
This implementation slightly differs from re2::RE2::QuoteMeta.
It escapes zero byte as `\0` instead of `\x00` and it escapes only required characters.
","regexpQuoteMeta(s)","- `s` — The input string containing characters to be escaped for regex. [`String`](/sql-reference/data-types/string)
","","Returns a string with regex special characters escaped. [`String`](/sql-reference/data-types/string)","**Escape regex special characters**

```sql title=Query
SELECT regexpQuoteMeta('Hello. [World]? (Yes)*') AS res
```

```response title=Response
┌─res───────────────────────────┐
│ Hello\. \[World\]\? \(Yes\)\* │
└───────────────────────────────┘
```

","20.1","String"
"25.9.2.1","pointInEllipses",0,0,"","","System","
Checks whether the point belongs to at least one of the ellipses.
Coordinates are geometric in the Cartesian coordinate system.
    ","pointInEllipses(x, y, x₀, y₀, a₀, b₀,...,xₙ, yₙ, aₙ, bₙ)","- `x, y` — Coordinates of a point on the plane. [`Float64`](/sql-reference/data-types/float)
- `xᵢ, yᵢ` — Coordinates of the center of the i-th ellipsis. [`Float64`](/sql-reference/data-types/float)
- `aᵢ, bᵢ` — Axes of the i-th ellipsis in units of x, y coordinates. [`Float64`](/sql-reference/data-types/float)
","","Returns `1` if the point is inside at least one of the ellipses, `0` otherwise [`UInt8`](/sql-reference/data-types/int-uint)","**Basic usage**

```sql title=Query
SELECT pointInEllipses(10., 10., 10., 9.1, 1., 0.9999)
```

```response title=Response
┌─pointInEllipses(10., 10., 10., 9.1, 1., 0.9999)─┐
│                                               1 │
└─────────────────────────────────────────────────┘
```

","1.1","Geo"
"25.9.2.1","wkb",0,0,"","","System","
    Parses a Well-Known Binary (WKB) representation of a Point geometry and returns it in the internal ClickHouse format.
    ","wkb(geometry)","- `geometry` — The input geometry type to convert into WKB. ","","","**first call**

```sql title=Query
CREATE TABLE IF NOT EXISTS geom1 (a Point) ENGINE = Memory();INSERT INTO geom1 VALUES((0, 0));SELECT hex(wkb(a)) FROM geom1;
```

```response title=Response
┌─hex(wkb(a))─-----------------------------------------┐
    │ 010100000000000000000000000000000000003440           │
    └──────────────────────────────────────────────────────┘
```

","25.7","Geo"
"25.9.2.1","right",0,1,"","","System","
Returns a substring of string `s` with a specified `offset` starting from the right.
","right(s, offset)","- `s` — The string to calculate a substring from. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring)
- `offset` — The number of bytes of the offset. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns:
- For positive `offset`, a substring of `s` with `offset` many bytes, starting from the right of the string.
- For negative `offset`, a substring of `s` with `length(s) - |offset|` bytes, starting from the right of the string.
- An empty string if `length` is `0`.
     [`String`](/sql-reference/data-types/string)","**Positive offset**

```sql title=Query
SELECT right('Hello', 3)
```

```response title=Response
llo
```

**Negative offset**

```sql title=Query
SELECT right('Hello', -3)
```

```response title=Response
lo
```

","22.1","String"
"25.9.2.1","searchAll",0,0,"","","System","
Like [`searchAny`](#searchAny), but returns 1 only if all strings `needle_i` matche the `input` column and 0 otherwise.

:::note
This function can only be used if setting `allow_experimental_full_text_index` is enabled.
:::

The `input` column must have a text index defined. When searching, the `input` string is tokenized according to the tokenizer specified in the index definition.
Each element in the `needle` array is treated as a complete, individual token — no additional tokenization is performed on the needle elements themselves.

**Example**

To search for ""ClickHouse"" in a column with an ngram tokenizer (`tokenizer = 'ngram', ngram_size = 5`), you would provide an array of all the 5-character ngrams:

```sql
['Click', 'lickH', 'ickHo', 'ckHou', 'kHous', 'House']
```

:::note
Duplicate tokens in the needle array are automatically ignored.
For example, ['ClickHouse', 'ClickHouse'] is treated the same as ['ClickHouse'].
:::
    ","searchAll(input, ['needle1', 'needle2', ..., 'needleN'])","- `input` — The input column. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring)
- `needles` — Tokens to be searched. Supports at most 64 tokens. [`Array`](/sql-reference/data-types/array)
","","Returns 1, if all needles match. 0, otherwise. [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
CREATE TABLE table (
    id UInt32,
    msg String,
    INDEX idx(msg) TYPE text(tokenizer = 'split', separators = ['()', '\\']) GRANULARITY 1
)
ENGINE = MergeTree
ORDER BY id;

INSERT INTO table VALUES (1, '()a,\\bc()d'), (2, '()\\a()bc\\d'), (3, ',()a\\,bc,(),d,');

SELECT count() FROM table WHERE searchAll(msg, ['a', 'd']);
```

```response title=Response
┌─count()─┐
│       1 │
└─────────┘
```

**Generate needles using the `tokens` function**

```sql title=Query
SELECT count() FROM table WHERE searchAll(msg, tokens('a()d', 'split', ['()', '\\']));
```

```response title=Response
┌─count()─┐
│       1 │
└─────────┘
```

","25.7","String Search"
"25.9.2.1","arrayResize",0,0,"","","System","Changes the length of the array.","arrayResize(arr, size[, extender])","- `arr` — Array to resize. [`Array(T)`](/sql-reference/data-types/array)
- `size` — 
-The new length of the array.
If `size` is less than the original size of the array, the array is truncated from the right.
If `size` is larger than the initial size of the array, the array is extended to the right with `extender` values or default values for the data type of the array items.
 - `extender` — Value to use for extending the array. Can be `NULL`. ","","An array of length `size`. [`Array(T)`](/sql-reference/data-types/array)","**Example 1**

```sql title=Query
SELECT arrayResize([1], 3);
```

```response title=Response
[1,0,0]
```

**Example 2**

```sql title=Query
SELECT arrayResize([1], 3, NULL);
```

```response title=Response
[1,NULL,NULL]
```

","1.1","Arrays"
"25.9.2.1","IPv6StringToNumOrNull",0,0,"","","System","
Converts an IPv6 address from its standard text representation to binary format (`FixedString(16)`).
Accepts IPv4-mapped IPv6 addresses in the format `::ffff:111.222.33.44.`.
If the IPv6 address has an invalid format, it returns `NULL`.
    ","IPv6StringToNumOrNull(string)","- `string` — IPv6 address string. [`String`](/sql-reference/data-types/string)
","","Returns IPv6 address in binary format, or `NULL` if invalid. [`Nullable(FixedString(16))`](/sql-reference/data-types/nullable)","**Basic example with invalid address**

```sql title=Query
SELECT
    IPv6NumToString(IPv6StringToNumOrNull('2001:db8::1')) AS valid,
    IPv6StringToNumOrNull('invalid') AS invalid;
```

```response title=Response
┌─valid───────┬─invalid─┐
│ 2001:db8::1 │    ᴺᵁᴸᴸ │
└─────────────┴─────────┘
```

","22.3","IP Address"
"25.9.2.1","bitmapAndnot",0,0,"","","System","Computes the logical conjunction of two bitmaps and negates the result (AND-NOT).","bitmapAndnot(bitmap1, bitmap2)","- `bitmap1` — First bitmap object. [`AggregateFunction(groupBitmap, T)`](/sql-reference/data-types/aggregatefunction). - `bitmap2` — Second bitmap object. [`AggregateFunction(groupBitmap, T)`](/sql-reference/data-types/aggregatefunction). ","","Returns a bitmap containing set bits present in the first bitmap but not in the second [`AggregateFunction(groupBitmap, T)`](/sql-reference/data-types/aggregatefunction)","**Usage example**

```sql title=Query
SELECT bitmapToArray(bitmapAndnot(bitmapBuild([1, 2, 3]), bitmapBuild([3, 4, 5]))) AS res;
```

```response title=Response
┌─res────┐
│ [1, 2] │
└────────┘
```

","20.1","Bitmap"
"25.9.2.1","bitmapXorCardinality",0,0,"","","System","Returns the cardinality of the XOR (symmetric difference) of two bitmaps.","bitmapXorCardinality(bitmap1, bitmap2)","- `bitmap1` — First bitmap object. [`AggregateFunction(groupBitmap, T)`](/sql-reference/data-types/aggregatefunction). - `bitmap2` — Second bitmap object. [`AggregateFunction(groupBitmap, T)`](/sql-reference/data-types/aggregatefunction). ","","Returns the number of set bits in the symmetric difference of the two bitmaps [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT bitmapXorCardinality(bitmapBuild([1,2,3]), bitmapBuild([3,4,5])) AS res;
```

```response title=Response
┌─res─┐
│   4 │
└─────┘
```

","20.1","Bitmap"
"25.9.2.1","IPv6StringToNumOrDefault",0,0,"","","System","
Converts an IPv6 address from its standard text representation to binary format (`FixedString(16)`).
Accepts IPv4-mapped IPv6 addresses in the format `::ffff:111.222.33.44.`.
If the IPv6 address has an invalid format, it returns the default value `::`.
    ","IPv6StringToNumOrDefault(string)","- `string` — IPv6 address string. [`String`](/sql-reference/data-types/string)
","","IPv6 address in binary format, or zero-filled FixedString(16) if invalid. [`FixedString(16)`](/sql-reference/data-types/fixedstring)","**Basic example with invalid address**

```sql title=Query
SELECT
    IPv6NumToString(IPv6StringToNumOrDefault('2001:db8::1')) AS valid,
    IPv6NumToString(IPv6StringToNumOrDefault('invalid')) AS invalid;
```

```response title=Response
┌─valid───────┬─invalid─┐
│ 2001:db8::1 │ ::      │
└─────────────┴─────────┘
```

","22.3","IP Address"
"25.9.2.1","IPv6NumToString",0,0,"","","System","
Converts an IPv6 address from binary format (FixedString(16)) to its standard text representation.
IPv4-mapped IPv6 addresses are displayed in the format `::ffff:111.222.33.44`.
    ","IPv6NumToString(x)","- `x` — IPv6 address in binary format. [`FixedString(16)`](/sql-reference/data-types/fixedstring) or [`IPv6`](/sql-reference/data-types/ipv6)
","","Returns the IPv6 address string in text format. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT IPv6NumToString(toFixedString(unhex('2A0206B8000000000000000000000011'), 16)) AS addr;
```

```response title=Response
┌─addr─────────┐
│ 2a02:6b8::11 │
└──────────────┘
```

**IPv6 with hits analysis**

```sql title=Query
SELECT
    IPv6NumToString(ClientIP6 AS k),
    count() AS c
FROM hits_all
WHERE EventDate = today() AND substring(ClientIP6, 1, 12) != unhex('00000000000000000000FFFF')
GROUP BY k
ORDER BY c DESC
LIMIT 10
```

```response title=Response
┌─IPv6NumToString(ClientIP6)──────────────┬─────c─┐
│ 2a02:2168:aaa:bbbb::2                   │ 24695 │
│ 2a02:2698:abcd:abcd:abcd:abcd:8888:5555 │ 22408 │
│ 2a02:6b8:0:fff::ff                      │ 16389 │
│ 2a01:4f8:111:6666::2                    │ 16016 │
│ 2a02:2168:888:222::1                    │ 15896 │
│ 2a01:7e00::ffff:ffff:ffff:222           │ 14774 │
│ 2a02:8109:eee:ee:eeee:eeee:eeee:eeee    │ 14443 │
│ 2a02:810b:8888:888:8888:8888:8888:8888  │ 14345 │
│ 2a02:6b8:0:444:4444:4444:4444:4444      │ 14279 │
│ 2a01:7e00::ffff:ffff:ffff:ffff          │ 13880 │
└─────────────────────────────────────────┴───────┘
```

**IPv6 mapped IPv4 addresses**

```sql title=Query
SELECT
    IPv6NumToString(ClientIP6 AS k),
    count() AS c
FROM hits_all
WHERE EventDate = today()
GROUP BY k
ORDER BY c DESC
LIMIT 10
```

```response title=Response
┌─IPv6NumToString(ClientIP6)─┬──────c─┐
│ ::ffff:94.26.111.111       │ 747440 │
│ ::ffff:37.143.222.4        │ 529483 │
│ ::ffff:5.166.111.99        │ 317707 │
│ ::ffff:46.38.11.77         │ 263086 │
│ ::ffff:79.105.111.111      │ 186611 │
│ ::ffff:93.92.111.88        │ 176773 │
│ ::ffff:84.53.111.33        │ 158709 │
│ ::ffff:217.118.11.22       │ 154004 │
│ ::ffff:217.118.11.33       │ 148449 │
│ ::ffff:217.118.11.44       │ 148243 │
└────────────────────────────┴────────┘
```

","1.1","IP Address"
"25.9.2.1","UUIDNumToString",0,0,"","","System","
Takes a binary representation of a UUID, with its format optionally specified by `variant` (`Big-endian` by default), and returns a string containing 36 characters in text format.
    ","UUIDNumToString(binary[, variant])","- `binary` — Binary representation of a UUID. [`FixedString(16)`](/sql-reference/data-types/fixedstring)
- `variant` — Variant as specified by [RFC4122](https://datatracker.ietf.org/doc/html/rfc4122#section-4.1.1). 1 = `Big-endian` (default), 2 = `Microsoft`. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns the UUID as a string. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT
    'a/<@];!~p{jTj={)' AS bytes,
    UUIDNumToString(toFixedString(bytes, 16)) AS uuid
```

```response title=Response
┌─bytes────────────┬─uuid─────────────────────────────────┐
│ a/<@];!~p{jTj={) │ 612f3c40-5d3b-217e-707b-6a546a3d7b29 │
└──────────────────┴──────────────────────────────────────┘
```

**Microsoft variant**

```sql title=Query
SELECT
    '@</a;]~!p{jTj={)' AS bytes,
    UUIDNumToString(toFixedString(bytes, 16), 2) AS uuid
```

```response title=Response
┌─bytes────────────┬─uuid─────────────────────────────────┐
│ @</a;]~!p{jTj={) │ 612f3c40-5d3b-217e-707b-6a546a3d7b29 │
└──────────────────┴──────────────────────────────────────┘
```

","1.1","UUID"
"25.9.2.1","IPv4StringToNumOrDefault",0,0,"","","System","
Converts an IPv4 address string in dotted decimal notation (A.B.C.D format) to its corresponding 32-bit integer representation but if the IPv4 address has an invalid format, it returns `0`.
    ","IPv4StringToNumOrDefault(string)","- `string` — IPv4 address string. [`String`](/sql-reference/data-types/string)
","","Returns the IPv4 address, or `0` if invalid. [`UInt32`](/sql-reference/data-types/int-uint)","**Example with an invalid address**

```sql title=Query
SELECT
    IPv4StringToNumOrDefault('127.0.0.1') AS valid,
    IPv4StringToNumOrDefault('invalid') AS invalid;
```

```response title=Response
┌──────valid─┬─invalid─┐
│ 2130706433 │       0 │
└────────────┴─────────┘
```

","22.3","IP Address"
"25.9.2.1","IPv4NumToStringClassC",0,0,"","","System","
Converts a 32-bit integer to its IPv4 address string representation in dotted decimal notation (A.B.C.D format),
similar to [`IPv4NumToString`](#IPv4NumToString) but using `xxx` instead of the last octet.
    ","IPv4NumToStringClassC(num)","- `num` — IPv4 address as UInt32 number. [`UInt32`](/sql-reference/data-types/int-uint)
","","Returns the IPv4 address string with xxx replacing the last octet. [`String`](/sql-reference/data-types/string)","**Basic example with aggregation**

```sql title=Query
SELECT
    IPv4NumToStringClassC(ClientIP) AS k,
    count() AS c
FROM test.hits
GROUP BY k
ORDER BY c DESC
LIMIT 10
```

```response title=Response
┌─k──────────────┬─────c─┐
│ 83.149.9.xxx   │ 26238 │
│ 217.118.81.xxx │ 26074 │
│ 213.87.129.xxx │ 25481 │
│ 83.149.8.xxx   │ 24984 │
│ 217.118.83.xxx │ 22797 │
│ 78.25.120.xxx  │ 22354 │
│ 213.87.131.xxx │ 21285 │
│ 78.25.121.xxx  │ 20887 │
│ 188.162.65.xxx │ 19694 │
│ 83.149.48.xxx  │ 17406 │
└────────────────┴───────┘
```

","1.1","IP Address"
"25.9.2.1","IPv4NumToString",0,0,"","","System","
Converts a 32-bit integer to its IPv4 address string representation in dotted decimal notation (A.B.C.D format).
Interprets the input using big-endian byte ordering.
    ","IPv4NumToString(num)","- `num` — IPv4 address as UInt32 number. [`UInt32`](/sql-reference/data-types/int-uint)
","","Returns a number representing the MAC address, or `0` if the format is invalid. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
IPv4NumToString(3232235521)
```

```response title=Response
192.168.0.1
```

","1.1","IP Address"
"25.9.2.1","isIPv6String",0,0,"","","System","
Determines whether the input string is an IPv6 address or not.
For the IPv4 version see [`isIPv4String`](#isIPv4String).
    ","isIPv6String(string)","- `string` — IP address string to check. [`String`](/sql-reference/data-types/string)
","","Returns `1` if `string` is IPv6 address, otherwise `0`. [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT addr, isIPv6String(addr)
FROM(SELECT ['::', '1111::ffff', '::ffff:127.0.0.1', '127.0.0.1'] AS addr)
ARRAY JOIN addr;
```

```response title=Response
┌─addr─────────────┬─isIPv6String(addr)─┐
│ ::               │                  1 │
│ 1111::ffff       │                  1 │
│ ::ffff:127.0.0.1 │                  1 │
│ 127.0.0.1        │                  0 │
└──────────────────┴────────────────────┘
```

","21.1","IP Address"
"25.9.2.1","IPv4CIDRToRange",0,0,"","","System","
Takes an IPv4 address with its Classless Inter-Domain Routing (CIDR) prefix length and returns the subnet's address range as a tuple of two IPv4 values: the first and last addresses in that subnet.
For the IPv6 version see [`IPv6CIDRToRange`](#IPv4CIDRToRange).
    ","IPv4CIDRToRange(ipv4, cidr)","- `ipv4` — IPv4 address. [`IPv4`](/sql-reference/data-types/ipv4) or [`String`](/sql-reference/data-types/string)
- `cidr` — CIDR value. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns a tuple with two IPv4 addresses representing the subnet range. [`Tuple(IPv4, IPv4)`](/sql-reference/data-types/tuple)","**Usage example**

```sql title=Query
SELECT IPv4CIDRToRange(toIPv4('192.168.5.2'), 16);
```

```response title=Response
┌─IPv4CIDRToRange(toIPv4('192.168.5.2'), 16)─┐
│ ('192.168.0.0','192.168.255.255')          │
└────────────────────────────────────────────┘
```

","20.1","IP Address"
"25.9.2.1","IPv6CIDRToRange",0,0,"","","System","
Takes an IPv6 address with its Classless Inter-Domain Routing (CIDR) prefix length and returns the subnet's address range as a tuple of two IPv6 values: the lowest and highest addresses in that subnet.
For the IPv4 version see [`IPv4CIDRToRange`](#IPv4CIDRToRange).
    ","IPv6CIDRToRange(ipv6, cidr)","- `ipv6` — IPv6 address. [`IPv6`](/sql-reference/data-types/ipv6) or [`String`](/sql-reference/data-types/string)
- `cidr` — CIDR value. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns a tuple with two IPv6 addresses representing the subnet range. [`Tuple(IPv6, IPv6)`](/sql-reference/data-types/tuple)","**Usage example**

```sql title=Query
SELECT IPv6CIDRToRange(toIPv6('2001:0db8:0000:85a3:0000:0000:ac1f:8001'), 32);
```

```response title=Response
┌─IPv6CIDRToRange(toIPv6('2001:0db8:0000:85a3:0000:0000:ac1f:8001'), 32)─┐
│ ('2001:db8::','2001:db8:ffff:ffff:ffff:ffff:ffff:ffff')                │
└────────────────────────────────────────────────────────────────────────┘
```

","20.1","IP Address"
"25.9.2.1","MACStringToOUI",0,0,"","","System","","","","","","","",""
"25.9.2.1","MACStringToNum",0,0,"","","System","","","","","","","",""
"25.9.2.1","punycodeDecode",0,0,"","","System","
Returns the UTF8-encoded plaintext of a [Punycode](https://en.wikipedia.org/wiki/Punycode)-encoded string.
If no valid Punycode-encoded string is given, an exception is thrown.
","punycodeDecode(s)","- `s` — Punycode-encoded string. [`String`](/sql-reference/data-types/string)
","","Returns the plaintext of the input value. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT punycodeDecode('Mnchen-3ya')
```

```response title=Response
┌─punycodeDecode('Mnchen-3ya')─┐
│ München                      │
└──────────────────────────────┘
```

","24.1","String"
"25.9.2.1","coalesce",0,1,"","","System","
Returns the leftmost non-`NULL` argument.
    ","coalesce(x[, y, ...])","- `x[, y, ...]` — Any number of parameters of non-compound type. All parameters must be of mutually compatible data types. [`Any`](/sql-reference/data-types)
","","Returns the first non-`NULL` argument, otherwise `NULL`, if all arguments are `NULL`. [`Any`](/sql-reference/data-types) or [`NULL`](/sql-reference/syntax#null)","**Usage example**

```sql title=Query
-- Consider a list of contacts that may specify multiple ways to contact a customer.

CREATE TABLE aBook
(
    name String,
    mail Nullable(String),
    phone Nullable(String),
    telegram Nullable(UInt32)
)
ENGINE = MergeTree
ORDER BY tuple();

INSERT INTO aBook VALUES ('client 1', NULL, '123-45-67', 123), ('client 2', NULL, NULL, NULL);

-- The mail and phone fields are of type String, but the telegram field is UInt32 so it needs to be converted to String.

-- Get the first available contact method for the customer from the contact list

SELECT name, coalesce(mail, phone, CAST(telegram,'Nullable(String)')) FROM aBook;
```

```response title=Response
┌─name─────┬─coalesce(mail, phone, CAST(telegram, 'Nullable(String)'))─┐
│ client 1 │ 123-45-67                                                 │
│ client 2 │ ᴺᵁᴸᴸ                                                      │
└──────────┴───────────────────────────────────────────────────────────┘
```

","1.1","Null"
"25.9.2.1","intHash64",0,0,"","","System","
Calculates a 64-bit hash of an integer.

The hash function is relatively fast (even faster than [`intHash32`](#intHash32)) but not a cryptographic hash function.
","intHash64(int)","- `int` — Integer to hash. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","64-bit hash code. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT intHash64(42);
```

```response title=Response
┌────────intHash64(42)─┐
│ 11490350930367293593 │
└──────────────────────┘
```

","1.1","Hash"
"25.9.2.1","intHash32",0,0,"","","System","
Calculates a 32-bit hash of an integer.

The hash function is relatively fast but not cryptographic hash function.
","intHash32(arg)","- `arg` — Integer to hash. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns the computed 32-bit hash code of the input integer [`UInt32`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT intHash32(42);
```

```response title=Response
┌─intHash32(42)─┐
│    1228623923 │
└───────────────┘
```

","1.1","Hash"
"25.9.2.1","arrayStringConcat",0,0,"","","System","
Concatenates string representations of values listed in the array with the provided separator, which is an optional parameter set to an empty string by default.
","arrayStringConcat(arr[, separator])","- `arr` — The array to concatenate. [`Array(T)`](/sql-reference/data-types/array)
- `separator` — Optional. Separator string. By default an empty string. [`const String`](/sql-reference/data-types/string)
","","Returns the concatenated string. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT arrayStringConcat(['12/05/2021', '12:50:00'], ' ') AS DateString;
```

```response title=Response
┌─DateString──────────┐
│ 12/05/2021 12:50:00 │
└─────────────────────┘
```

","1.1","String Splitting"
"25.9.2.1","splitByNonAlpha",0,0,"","","System","
Splits a string separated by whitespace and punctuation characters into an array of substrings.

:::note
Setting [`splitby_max_substrings_includes_remaining_string`](../../operations/settings/settings.md#splitby_max_substrings_includes_remaining_string) (default: `0`) controls if the remaining string is included in the last element of the result array when argument `max_substrings > 0`.
:::
","splitByNonAlpha(s[, max_substrings])","- `s` — The string to split. [`String`](/sql-reference/data-types/string)
- `max_substrings` — Optional. When `max_substrings > 0`, the returned substrings will be no more than `max_substrings`, otherwise the function will return as many substrings as possible. Default value: `0`. [`Int64`](/sql-reference/data-types/int-uint)
","","Returns an array of selected substrings of `s`. [`Array(String)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT splitByNonAlpha('user@domain.com');
```

```response title=Response
['user','domain','com']
```

","21.9","String Splitting"
"25.9.2.1","parseDateTimeBestEffort",0,0,"","","System","
Converts a date and time in the String representation to DateTime data type.
The function parses [ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html), [RFC 1123 - 5.2.14 RFC-822](https://datatracker.ietf.org/doc/html/rfc822) Date and Time Specification, ClickHouse's and some other date and time formats.

Supported non-standard formats:
- A string containing 9..10 digit unix timestamp.
- A string with a date and a time component: `YYYYMMDDhhmmss`, `DD/MM/YYYY hh:mm:ss`, `DD-MM-YY hh:mm`, `YYYY-MM-DD hh:mm:ss`, etc.
- A string with a date, but no time component: `YYYY`, `YYYYMM`, `YYYY*MM`, `DD/MM/YYYY`, `DD-MM-YY` etc.
- A string with a day and time: `DD`, `DD hh`, `DD hh:mm`. In this case `MM` is substituted by `01`.
- A string that includes the date and time along with time zone offset information: `YYYY-MM-DD hh:mm:ss ±h:mm`, etc.
- A syslog timestamp: `Mmm dd hh:mm:ss`. For example, `Jun  9 14:20:32`.

For all of the formats with separator the function parses months names expressed by their full name or by the first three letters of a month name.
If the year is not specified, it is considered to be equal to the current year.
    ","parseDateTimeBestEffort(time_string[, time_zone])","- `time_string` — String containing a date and time to convert. [`String`](/sql-reference/data-types/string)
- `time_zone` — Optional. Time zone according to which `time_string` is parsed. [`String`](/sql-reference/data-types/string)
","","Returns `time_string` as a `DateTime`. [`DateTime`](/sql-reference/data-types/datetime)","**Usage example**

```sql title=Query
SELECT parseDateTimeBestEffort('23/10/2025 12:12:57') AS parseDateTimeBestEffort
```

```response title=Response
┌─parseDateTimeBestEffort─┐
│     2025-10-23 12:12:57 │
└─────────────────────────┘
```

**With timezone**

```sql title=Query
SELECT parseDateTimeBestEffort('Sat, 18 Aug 2025 07:22:16 GMT', 'Asia/Istanbul') AS parseDateTimeBestEffort
```

```response title=Response
┌─parseDateTimeBestEffort─┐
│     2025-08-18 10:22:16 │
└─────────────────────────┘
```

**Unix timestamp**

```sql title=Query
SELECT parseDateTimeBestEffort('1735689600') AS parseDateTimeBestEffort
```

```response title=Response
┌─parseDateTimeBestEffort─┐
│     2025-01-01 00:00:00 │
└─────────────────────────┘
```

","1.1","Type Conversion"
"25.9.2.1","toDecimal128OrNull",0,0,"","","System","
Converts an input value to a value of type [`Decimal(38, S)`](../data-types/decimal.md) but returns `NULL` in case of an error.
Like [`toDecimal128`](#toDecimal128) but returns `NULL` instead of throwing an exception on conversion errors.

Supported arguments:
- Values or string representations of type (U)Int*.
- Values or string representations of type Float*.

Unsupported arguments (return `NULL`):
- Values or string representations of Float* values `NaN` and `Inf` (case-insensitive).
- String representations of binary and hexadecimal values.
- Values that exceed the bounds of `Decimal128`:`(-1*10^(38 - S), 1*10^(38 - S))`.

See also:
- [`toDecimal128`](#toDecimal128).
- [`toDecimal128OrZero`](#toDecimal128OrZero).
- [`toDecimal128OrDefault`](#toDecimal128OrDefault).
    ","toDecimal128OrNull(expr, S)","- `expr` — Expression returning a number or a string representation of a number. [`Expression`](/sql-reference/data-types/special-data-types/expression)
- `S` — Scale parameter between 0 and 38, specifying how many digits the fractional part of a number can have. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns a Decimal(38, S) value if successful, otherwise `NULL`. [`Decimal128(S)`](/sql-reference/data-types/decimal) or [`NULL`](/sql-reference/syntax#null)","**Usage example**

```sql title=Query
SELECT toDecimal128OrNull('42.7', 2), toDecimal128OrNull('invalid', 2)
```

```response title=Response
┌─toDecimal128OrNull('42.7', 2)─┬─toDecimal128OrNull('invalid', 2)─┐
│                         42.70 │                             ᴺᵁᴸᴸ │
└───────────────────────────────┴──────────────────────────────────┘
```

","20.1","Type Conversion"
"25.9.2.1","locate",0,1,"","","System","
Like [`position`](#position) but with arguments `haystack` and `locate` switched.

:::note Version dependent behavior
The behavior of this function depends on the ClickHouse version:
- in versions < v24.3, `locate` was an alias of function `position` and accepted arguments `(haystack, needle[, start_pos])`.
- in versions >= 24.3, `locate` is an individual function (for better compatibility with MySQL) and accepts arguments `(needle, haystack[, start_pos])`.
The previous behavior can be restored using setting `function_locate_has_mysql_compatible_argument_order = false`.
:::
    ","locate(needle, haystack[, start_pos])","- `needle` — Substring to be searched. [`String`](/sql-reference/data-types/string)
- `haystack` — String in which the search is performed. [`String`](/sql-reference/data-types/string) or [`Enum`](/sql-reference/data-types/enum)
- `start_pos` — Optional. Position (1-based) in `haystack` at which the search starts. [`UInt`](/sql-reference/data-types/int-uint)
","","Returns starting position in bytes and counting from 1, if the substring was found, `0`, if the substring was not found. [`UInt64`](/sql-reference/data-types/int-uint)","**Basic usage**

```sql title=Query
SELECT locate('ca', 'abcabc')
```

```response title=Response
┌─locate('ca', 'abcabc')─┐
│                      3 │
└────────────────────────┘
```

","18.16","String Search"
"25.9.2.1","addressToLineWithInlines",0,0,"","","System","
Similar to `addressToLine`, but returns an Array with all inline functions.
As a result of this, it is slower than `addressToLine`.

To enable this introspection function:

- Install the `clickhouse-common-static-dbg` package.
- Set setting [`allow_introspection_functions`](../../operations/settings/settings.md#allow_introspection_functions) to `1`.
    ","addressToLineWithInlines(address_of_binary_instruction)","- `address_of_binary_instruction` — The address of an instruction in a running process. [`UInt64`](/sql-reference/data-types/int-uint)
","","Returns an array whose first element is the source code filename and line number delimited by a colon. The second, third, etc. element list inline functions' source code filenames, line numbers and function names. If no debug information could be found, then an array with a single element equal to the name of the binary is returned, otherwise an empty array is returned if the address is not valid. [`Array(String)`](/sql-reference/data-types/array)","**Applying the function to an address**

```sql title=Query
SET allow_introspection_functions=1;
SELECT addressToLineWithInlines(531055181::UInt64);
```

```response title=Response
┌─addressToLineWithInlines(CAST('531055181', 'UInt64'))────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│ ['./src/Functions/addressToLineWithInlines.cpp:98','./build_normal_debug/./src/Functions/addressToLineWithInlines.cpp:176:DB::(anonymous namespace)::FunctionAddressToLineWithInlines::implCached(unsigned long) const'] │
└──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

**Applying the function to the whole stack trace**

```sql title=Query
SET allow_introspection_functions=1;

-- The arrayJoin function will split array to rows

SELECT
    ta, addressToLineWithInlines(arrayJoin(trace) AS ta)
FROM system.trace_log
WHERE
    query_id = '5e173544-2020-45de-b645-5deebe2aae54';
```

```response title=Response
┌────────ta─┬─addressToLineWithInlines(arrayJoin(trace))───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│ 365497529 │ ['./build_normal_debug/./contrib/libcxx/include/string_view:252']                                                                                                                                                        │
│ 365593602 │ ['./build_normal_debug/./src/Common/Dwarf.cpp:191']                                                                                                                                                                      │
│ 365593866 │ ['./build_normal_debug/./src/Common/Dwarf.cpp:0']                                                                                                                                                                        │
│ 365592528 │ ['./build_normal_debug/./src/Common/Dwarf.cpp:0']                                                                                                                                                                        │
│ 365591003 │ ['./build_normal_debug/./src/Common/Dwarf.cpp:477']                                                                                                                                                                      │
│ 365590479 │ ['./build_normal_debug/./src/Common/Dwarf.cpp:442']                                                                                                                                                                      │
│ 365590600 │ ['./build_normal_debug/./src/Common/Dwarf.cpp:457']                                                                                                                                                                      │
│ 365598941 │ ['./build_normal_debug/./src/Common/Dwarf.cpp:0']                                                                                                                                                                        │
│ 365607098 │ ['./build_normal_debug/./src/Common/Dwarf.cpp:0']                                                                                                                                                                        │
│ 365590571 │ ['./build_normal_debug/./src/Common/Dwarf.cpp:451']                                                                                                                                                                      │
│ 365598941 │ ['./build_normal_debug/./src/Common/Dwarf.cpp:0']                                                                                                                                                                        │
│ 365607098 │ ['./build_normal_debug/./src/Common/Dwarf.cpp:0']                                                                                                                                                                        │
│ 365590571 │ ['./build_normal_debug/./src/Common/Dwarf.cpp:451']                                                                                                                                                                      │
│ 365598941 │ ['./build_normal_debug/./src/Common/Dwarf.cpp:0']                                                                                                                                                                        │
│ 365607098 │ ['./build_normal_debug/./src/Common/Dwarf.cpp:0']                                                                                                                                                                        │
│ 365590571 │ ['./build_normal_debug/./src/Common/Dwarf.cpp:451']                                                                                                                                                                      │
│ 365598941 │ ['./build_normal_debug/./src/Common/Dwarf.cpp:0']                                                                                                                                                                        │
│ 365597289 │ ['./build_normal_debug/./src/Common/Dwarf.cpp:807']                                                                                                                                                                      │
│ 365599840 │ ['./build_normal_debug/./src/Common/Dwarf.cpp:1118']                                                                                                                                                                     │
│ 531058145 │ ['./build_normal_debug/./src/Functions/addressToLineWithInlines.cpp:152']                                                                                                                                                │
│ 531055181 │ ['./src/Functions/addressToLineWithInlines.cpp:98','./build_normal_debug/./src/Functions/addressToLineWithInlines.cpp:176:DB::(anonymous namespace)::FunctionAddressToLineWithInlines::implCached(unsigned long) const'] │
│ 422333613 │ ['./build_normal_debug/./src/Functions/IFunctionAdaptors.h:21']                                                                                                                                                          │
│ 586866022 │ ['./build_normal_debug/./src/Functions/IFunction.cpp:216']                                                                                                                                                               │
│ 586869053 │ ['./build_normal_debug/./src/Functions/IFunction.cpp:264']                                                                                                                                                               │
│ 586873237 │ ['./build_normal_debug/./src/Functions/IFunction.cpp:334']                                                                                                                                                               │
│ 597901620 │ ['./build_normal_debug/./src/Interpreters/ExpressionActions.cpp:601']                                                                                                                                                    │
│ 597898534 │ ['./build_normal_debug/./src/Interpreters/ExpressionActions.cpp:718']                                                                                                                                                    │
│ 630442912 │ ['./build_normal_debug/./src/Processors/Transforms/ExpressionTransform.cpp:23']                                                                                                                                          │
│ 546354050 │ ['./build_normal_debug/./src/Processors/ISimpleTransform.h:38']                                                                                                                                                          │
│ 626026993 │ ['./build_normal_debug/./src/Processors/ISimpleTransform.cpp:89']                                                                                                                                                        │
│ 626294022 │ ['./build_normal_debug/./src/Processors/Executors/ExecutionThreadContext.cpp:45']                                                                                                                                        │
│ 626293730 │ ['./build_normal_debug/./src/Processors/Executors/ExecutionThreadContext.cpp:63']                                                                                                                                        │
│ 626169525 │ ['./build_normal_debug/./src/Processors/Executors/PipelineExecutor.cpp:213']                                                                                                                                             │
│ 626170308 │ ['./build_normal_debug/./src/Processors/Executors/PipelineExecutor.cpp:178']                                                                                                                                             │
│ 626166348 │ ['./build_normal_debug/./src/Processors/Executors/PipelineExecutor.cpp:329']                                                                                                                                             │
│ 626163461 │ ['./build_normal_debug/./src/Processors/Executors/PipelineExecutor.cpp:84']                                                                                                                                              │
│ 626323536 │ ['./build_normal_debug/./src/Processors/Executors/PullingAsyncPipelineExecutor.cpp:85']                                                                                                                                  │
│ 626323277 │ ['./build_normal_debug/./src/Processors/Executors/PullingAsyncPipelineExecutor.cpp:112']                                                                                                                                 │
│ 626323133 │ ['./build_normal_debug/./contrib/libcxx/include/type_traits:3682']                                                                                                                                                       │
│ 626323041 │ ['./build_normal_debug/./contrib/libcxx/include/tuple:1415']                                                                                                                                                             │
└───────────┴──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

","22.2","Introspection"
"25.9.2.1","seriesDecomposeSTL",0,0,"","","System","
Decomposes a series data using STL [(Seasonal-Trend Decomposition Procedure Based on Loess)](https://www.wessa.net/download/stl.pdf) into a season, a trend and a residual component.
    ","seriesDecomposeSTL(series, period)","- `series` — An array of numeric values [`Array((U)Int8/16/32/64)`](/sql-reference/data-types/array) or [`Array(Float*)`](/sql-reference/data-types/array)
- `period` — A positive integer [`UInt8/16/32/64`](/sql-reference/data-types/int-uint)
","","Returns an array of four arrays where the first array includes seasonal components, the second array - trend, the third array - residue component, and the fourth array - baseline(seasonal + trend) component. [`Array(Array(Float32), Array(Float32), Array(Float32), Array(Float32))`](/sql-reference/data-types/array)","**Decompose series data using STL**

```sql title=Query
SELECT seriesDecomposeSTL([10.1, 20.45, 40.34, 10.1, 20.45, 40.34, 10.1, 20.45, 40.34, 10.1, 20.45, 40.34, 10.1, 20.45, 40.34, 10.1, 20.45, 40.34, 10.1, 20.45, 40.34, 10.1, 20.45, 40.34], 3) AS print_0
```

```response title=Response
┌───────────print_0──────────────────────────────────────────────────────────────────────────────────────────────────────┐
│ [[
        -13.529999, -3.1799996, 16.71,      -13.53,     -3.1799996, 16.71,      -13.53,     -3.1799996,
        16.71,      -13.530001, -3.18,      16.710001,  -13.530001, -3.1800003, 16.710001,  -13.530001,
        -3.1800003, 16.710001,  -13.530001, -3.1799994, 16.71,      -13.529999, -3.1799994, 16.709997
    ],
    [
        23.63,     23.63,     23.630003, 23.630001, 23.630001, 23.630001, 23.630001, 23.630001,
        23.630001, 23.630001, 23.630001, 23.63,     23.630001, 23.630001, 23.63,     23.630001,
        23.630001, 23.63,     23.630001, 23.630001, 23.630001, 23.630001, 23.630001, 23.630003
    ],
    [
        0, 0.0000019073486, -0.0000019073486, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.0000019073486, 0,
        0
    ],
    [
        10.1, 20.449999, 40.340004, 10.100001, 20.45, 40.34, 10.100001, 20.45, 40.34, 10.1, 20.45, 40.34,
        10.1, 20.45, 40.34, 10.1, 20.45, 40.34, 10.1, 20.45, 40.34, 10.100002, 20.45, 40.34
    ]]                                                                                                                   │
└────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

","24.1","Time Series"
"25.9.2.1","monthName",0,1,"","","System","
Returns the name of the month as a string from a date or date with time value.
    ","monthName(datetime)","- `datetime` — Date or date with time. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
","","Returns the name of the month. [`String`](/sql-reference/data-types/string)","**Get month name from date**

```sql title=Query
WITH toDateTime('2021-04-14 11:22:33') AS date_value
SELECT monthName(date_value)
```

```response title=Response
┌─monthName(date_value)─┐
│ April                 │
└───────────────────────┘
```

","22.1","Dates and Times"
"25.9.2.1","version",0,1,"","","System","
Returns the current version of ClickHouse as a string in the form: `major_version.minor_version.patch_version.number_of_commits_since_the_previous_stable_release`.
If executed in the context of a distributed table, this function generates a normal column with values relevant to each shard.
Otherwise, it produces a constant value.
    ","version()","","","Returns the current version of ClickHouse. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT version()
```

```response title=Response
┌─version()─┐
│ 24.2.1.1  │
└───────────┘
```

","1.1","Other"
"25.9.2.1","splitByRegexp",0,0,"","","System","
Splits a string which is separated by the provided regular expression into an array of substrings.
If the provided regular expression is empty, it will split the string into an array of single characters.
If no match is found for the regular expression, the string won't be split.

Empty substrings may be selected when:
- a non-empty regular expression match occurs at the beginning or end of the string
- there are multiple consecutive non-empty regular expression matches
- the original string string is empty while the regular expression is not empty.

:::note
Setting [`splitby_max_substrings_includes_remaining_string`](../../operations/settings/settings.md#splitby_max_substrings_includes_remaining_string) (default: `0`) controls if the remaining string is included in the last element of the result array when argument `max_substrings > 0`.
:::
","splitByRegexp(regexp, s[, max_substrings])","- `regexp` — Regular expression. Constant. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring)
- `s` — The string to split. [`String`](/sql-reference/data-types/string)
- `max_substrings` — Optional. When `max_substrings > 0`, the returned substrings will be no more than `max_substrings`, otherwise the function will return as many substrings as possible. Default value: `0`. [`Int64`](/sql-reference/data-types/int-uint)
","","Returns an array of the selected substrings of `s`. [`Array(String)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT splitByRegexp('\\d+', 'a12bc23de345f');
```

```response title=Response
┌─splitByRegex⋯c23de345f')─┐
│ ['a12bc23de345f']        │
└──────────────────────────┘
```

**Empty regexp**

```sql title=Query
SELECT splitByRegexp('', 'abcde');
```

```response title=Response
┌─splitByRegexp('', 'abcde')─┐
│ ['a','b','c','d','e']      │
└────────────────────────────┘
```

","21.6","String Splitting"
"25.9.2.1","__patchPartitionID",0,0,"","","System","
Internal function. Receives the name of a part and a hash of patch part's column names. Returns the name of partition of patch part. The argument must be a correct name of part, the behaviour is undefined otherwise.
        ","","","","","","25.5","Other"
"25.9.2.1","erf",0,0,"","","System","
If `x` is non-negative, then `erf(x/(σ√2))` is the probability that a random variable having a normal distribution with standard deviation `σ` takes the value that is separated from the expected value by more than `x`.
","erf(x)","- `x` — The value for which to compute the error function value. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal*`](/sql-reference/data-types/decimal)
","","Returns the error function value [`Float*`](/sql-reference/data-types/float)","**Three sigma rule**

```sql title=Query
SELECT erf(3 / sqrt(2))
```

```response title=Response
┌─erf(divide(3, sqrt(2)))─┐
│      0.9973002039367398 │
└─────────────────────────┘
```

","1.1","Mathematical"
"25.9.2.1","toIntervalSecond",0,0,"","","System","
Returns an interval of `n` seconds of data type [`IntervalSecond`](../data-types/special-data-types/interval.md).
    ","toIntervalSecond(n)","- `n` — Number of seconds. Integer numbers or string representations thereof, and float numbers. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`String`](/sql-reference/data-types/string)
","","Returns an interval of `n` seconds. [`Interval`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
WITH
    toDate('2025-06-15') AS date,
    toIntervalSecond(30) AS interval_to_seconds
SELECT date + interval_to_seconds AS result
```

```response title=Response
┌──────────────result─┐
│ 2025-06-15 00:00:30 │
└─────────────────────┘
```

","1.1","Type Conversion"
"25.9.2.1","kostikConsistentHash",0,0,"","","System","
An O(1) time and space consistent hash algorithm by Konstantin 'Kostik' Oblakov.
Only efficient with `n <= 32768`.
","kostikConsistentHash(input, n)","- `input` — An integer key. [`UInt64`](/sql-reference/data-types/int-uint)
- `n` — The number of buckets. [`UInt16`](/sql-reference/data-types/int-uint)
","","Returns the computed hash value. [`UInt16`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT kostikConsistentHash(16045690984833335023, 2);
```

```response title=Response
┌─kostikConsistentHash(16045690984833335023, 2)─┐
│                                             1 │
└───────────────────────────────────────────────┘
```

","22.6","Hash"
"25.9.2.1","proportionsZTest",0,0,"","","System","","","","","","","",""
"25.9.2.1","if",0,1,"","","System","
Performs conditional branching.

- If the condition `cond` evaluates to a non-zero value, the function returns the result of the expression `then`.
- If `cond` evaluates to zero or NULL, the result of the `else` expression is returned.

The setting [`short_circuit_function_evaluation`](/operations/settings/settings#short_circuit_function_evaluation) controls whether short-circuit evaluation is used.

If enabled, the `then` expression is evaluated only on rows where `cond` is true and the `else` expression where `cond` is false.

For example, with short-circuit evaluation, no division-by-zero exception is thrown when executing the following query:

```sql
SELECT if(number = 0, 0, intDiv(42, number)) FROM numbers(10)
```

`then` and `else` must be of a similar type.
","if(cond, then, else)","- `cond` — The evaluated condition. [`UInt8`](/sql-reference/data-types/int-uint) or [`Nullable(UInt8)`](/sql-reference/data-types/nullable) or [`NULL`](/sql-reference/syntax#null)
- `then` — The expression returned if `cond` is true. - `else` — The expression returned if `cond` is false or `NULL`. ","","The result of either the `then` or `else` expressions, depending on condition `cond`.","**Example usage**

```sql title=Query
SELECT if(1, 2 + 2, 2 + 6) AS res;
```

```response title=Response
┌─res─┐
│   4 │
└─────┘
```

","1.1","Conditional"
"25.9.2.1","jaroWinklerSimilarity",0,0,"","","System","
Calculates the [Jaro-Winkler similarity](https://en.wikipedia.org/wiki/Jaro%E2%80%93Winkler_distance) between two byte strings.
","jaroWinklerSimilarity(s1, s2)","- `s1` — First input string. [`String`](/sql-reference/data-types/string)
- `s2` — Second input string. [`String`](/sql-reference/data-types/string)
","","Returns the Jaro-Winkler similarity between the two strings. [`Float64`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT jaroWinklerSimilarity('clickhouse', 'click')
```

```response title=Response
┌─jaroWinklerSimilarity('clickhouse', 'click')─┐
│                           0.8999999999999999 │
└──────────────────────────────────────────────┘
```

","24.1","String"
"25.9.2.1","stringJaccardIndexUTF8",0,0,"","","System","
Like [`stringJaccardIndex`](#stringJaccardIndex) but for UTF8-encoded strings.
","stringJaccardIndexUTF8(s1, s2)","- `s1` — First input UTF8 string. [`String`](/sql-reference/data-types/string)
- `s2` — Second input UTF8 string. [`String`](/sql-reference/data-types/string)
","","Returns the Jaccard similarity index between the two UTF8 strings. [`Float64`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT stringJaccardIndexUTF8('我爱你', '我也爱你')
```

```response title=Response
┌─stringJaccardIndexUTF8('我爱你', '我也爱你')─┐
│                                       0.75 │
└─────────────────────────────────────────────┘
```

","23.11","String"
"25.9.2.1","stringJaccardIndex",0,0,"","","System","
Calculates the [Jaccard similarity index](https://en.wikipedia.org/wiki/Jaccard_index) between two byte strings.
","stringJaccardIndex(s1, s2)","- `s1` — First input string. [`String`](/sql-reference/data-types/string)
- `s2` — Second input string. [`String`](/sql-reference/data-types/string)
","","Returns the Jaccard similarity index between the two strings. [`Float64`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT stringJaccardIndex('clickhouse', 'mouse')
```

```response title=Response
┌─stringJaccardIndex('clickhouse', 'mouse')─┐
│                                       0.4 │
└───────────────────────────────────────────┘
```

","23.11","String"
"25.9.2.1","damerauLevenshteinDistance",0,0,"","","System","
Calculates the [Damerau-Levenshtein distance](https://en.wikipedia.org/wiki/Damerau%E2%80%93Levenshtein_distance) between two byte strings.
","damerauLevenshteinDistance(s1, s2)","- `s1` — First input string. [`String`](/sql-reference/data-types/string)
- `s2` — Second input string. [`String`](/sql-reference/data-types/string)
","","Returns the Damerau-Levenshtein distance between the two strings. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT damerauLevenshteinDistance('clickhouse', 'mouse')
```

```response title=Response
┌─damerauLevenshteinDistance('clickhouse', 'mouse')─┐
│                                                 6 │
└───────────────────────────────────────────────────┘
```

","24.1","String"
"25.9.2.1","UUIDToNum",0,0,"","","System","
Accepts a [UUID](../data-types/uuid.md) and returns its binary representation as a [FixedString(16)](../data-types/fixedstring.md), with its format optionally specified by `variant` (`Big-endian` by default).
This function replaces calls to two separate functions `UUIDStringToNum(toString(uuid))` so no intermediate conversion from UUID to string is required to extract bytes from a UUID.
    ","UUIDToNum(uuid[, variant = 1])","- `uuid` — UUID. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring)
- `variant` — Variant as specified by [RFC4122](https://datatracker.ietf.org/doc/html/rfc4122#section-4.1.1). 1 = `Big-endian` (default), 2 = `Microsoft`. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns a binary representation of the UUID. [`FixedString(16)`](/sql-reference/data-types/fixedstring)","**Usage example**

```sql title=Query
SELECT
    toUUID('612f3c40-5d3b-217e-707b-6a546a3d7b29') AS uuid,
    UUIDToNum(uuid) AS bytes
```

```response title=Response
┌─uuid─────────────────────────────────┬─bytes────────────┐
│ 612f3c40-5d3b-217e-707b-6a546a3d7b29 │ a/<@];!~p{jTj={) │
└──────────────────────────────────────┴──────────────────┘
```

**Microsoft variant**

```sql title=Query
SELECT
    toUUID('612f3c40-5d3b-217e-707b-6a546a3d7b29') AS uuid,
    UUIDToNum(uuid, 2) AS bytes
```

```response title=Response
┌─uuid─────────────────────────────────┬─bytes────────────┐
│ 612f3c40-5d3b-217e-707b-6a546a3d7b29 │ @</a;]~!p{jTj={) │
└──────────────────────────────────────┴──────────────────┘
```

","24.5","UUID"
"25.9.2.1","editDistanceUTF8",0,0,"","","System","
Calculates the [edit distance](https://en.wikipedia.org/wiki/Edit_distance) between two UTF8 strings.
","editDistanceUTF8(s1, s2)","- `s1` — First input string. [`String`](/sql-reference/data-types/string)
- `s2` — Second input string. [`String`](/sql-reference/data-types/string)
","","Returns the edit distance between the two UTF8 strings. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT editDistanceUTF8('我是谁', '我是我')
```

```response title=Response
┌─editDistanceUTF8('我是谁', '我是我')──┐
│                                   1 │
└─────────────────────────────────────┘
```

","24.6","String"
"25.9.2.1","editDistance",0,0,"","","System","
Calculates the [edit distance](https://en.wikipedia.org/wiki/Edit_distance) between two byte strings.
","editDistance(s1, s2)","- `s1` — First input string. [`String`](/sql-reference/data-types/string)
- `s2` — Second input string. [`String`](/sql-reference/data-types/string)
","","Returns the edit distance between the two strings. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT editDistance('clickhouse', 'mouse')
```

```response title=Response
┌─editDistance('clickhouse', 'mouse')─┐
│                                   6 │
└─────────────────────────────────────┘
```

","23.9","String"
"25.9.2.1","toIPv4OrZero",0,0,"","","System","
Converts an input value to a value of type [IPv4](../data-types/ipv4.md) but returns zero IPv4 address in case of an error.
Like [`toIPv4`](#toipv4) but returns zero IPv4 address (`0.0.0.0`) instead of throwing an exception on conversion errors.

Supported arguments:
- String representations of IPv4 addresses in dotted decimal notation.
- Integer representations of IPv4 addresses.

Unsupported arguments (return zero IPv4):
- Invalid IP address formats.
- IPv6 addresses.
- Out-of-range values.
    ","toIPv4OrZero(x)","- `x` — A string or integer representation of an IPv4 address. [`String`](/sql-reference/data-types/string) or [`Integer`](/sql-reference/data-types/int-uint)
","","Returns an IPv4 address if successful, otherwise zero IPv4 address (`0.0.0.0`). [`IPv4`](/sql-reference/data-types/ipv4)","**Usage example**

```sql title=Query
SELECT
    toIPv4OrZero('192.168.1.1') AS valid_ip,
    toIPv4OrZero('invalid.ip') AS invalid_ip
```

```response title=Response
┌─valid_ip────┬─invalid_ip─┐
│ 192.168.1.1 │ 0.0.0.0    │
└─────────────┴────────────┘
```

","23.1","Type Conversion"
"25.9.2.1","byteHammingDistance",0,0,"","","System","
Calculates the [hamming distance](https://en.wikipedia.org/wiki/Hamming_distance) between two byte strings.
","byteHammingDistance(s1, s2)","- `s1` — First input string. [`String`](/sql-reference/data-types/string)
- `s2` — Second input string. [`String`](/sql-reference/data-types/string)
","","Returns the Hamming distance between the two strings. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT byteHammingDistance('karolin', 'kathrin')
```

```response title=Response
┌─byteHammingDistance('karolin', 'kathrin')─┐
│                                         3 │
└───────────────────────────────────────────┘
```

","23.9","String"
"25.9.2.1","JSONExtractKeysAndValuesCaseInsensitive",0,0,"","","System","
Parses key-value pairs from JSON using case-insensitive key matching. This function is similar to [`JSONExtractKeysAndValues`](#jsonextractkeysandvalues).
        ","JSONExtractKeysAndValuesCaseInsensitive(json [, indices_or_keys...], value_type)","- `json` — JSON string to parse [`String`](/sql-reference/data-types/string)
- `indices_or_keys` — Optional. Indices or keys to navigate to the object. Keys use case-insensitive matching [`String`](/sql-reference/data-types/string) or [`(U)Int*`](/sql-reference/data-types/int-uint)
- `value_type` — The ClickHouse data type of the values [`String`](/sql-reference/data-types/string)
","","Returns an array of tuples containing key-value pairs. [`Array(Tuple(String, T))`](/sql-reference/data-types/array)","**basic**

```sql title=Query
SELECT JSONExtractKeysAndValuesCaseInsensitive('{""Name"": ""Alice"", ""AGE"": 30}', 'String')
```

```response title=Response
[('Name','Alice'),('AGE','30')]
```

","25.8","JSON"
"25.9.2.1","bitmapAndCardinality",0,0,"","","System","Returns the cardinality of the logical conjunction (AND) of two bitmaps.","bitmapAndCardinality(bitmap1, bitmap2)","- `bitmap1` — First bitmap object. [`AggregateFunction(groupBitmap, T)`](/sql-reference/data-types/aggregatefunction). - `bitmap2` — Second bitmap object. [`AggregateFunction(groupBitmap, T)`](/sql-reference/data-types/aggregatefunction). ","","Returns the number of set bits in the intersection of the two bitmaps [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT bitmapAndCardinality(bitmapBuild([1,2,3]), bitmapBuild([3,4,5])) AS res;
```

```response title=Response
┌─res─┐
│   1 │
└─────┘
```

","20.1","Bitmap"
"25.9.2.1","JSONExtractCaseInsensitive",0,0,"","","System","
Parses JSON and extracts a value of the given ClickHouse data type using case-insensitive key matching. This function is similar to [`JSONExtract`](#jsonextract).
        ","JSONExtractCaseInsensitive(json [, indices_or_keys...], return_type)","- `json` — JSON string to parse [`String`](/sql-reference/data-types/string)
- `indices_or_keys` — Optional. Indices or keys to navigate to the field. Keys use case-insensitive matching [`String`](/sql-reference/data-types/string) or [`(U)Int*`](/sql-reference/data-types/int-uint)
- `return_type` — The ClickHouse data type to extract [`String`](/sql-reference/data-types/string)
","","Returns the extracted value in the specified data type. [`Any`](/sql-reference/data-types)","**int_type**

```sql title=Query
SELECT JSONExtractCaseInsensitive('{""Number"": 123}', 'number', 'Int32')
```

```response title=Response
123
```

**array_type**

```sql title=Query
SELECT JSONExtractCaseInsensitive('{""List"": [1, 2, 3]}', 'list', 'Array(Int32)')
```

```response title=Response
[1,2,3]
```

","25.8","JSON"
"25.9.2.1","JSONExtractStringCaseInsensitive",0,0,"","","System","
Parses JSON and extracts a string using case-insensitive key matching. This function is similar to [`JSONExtractString`](#jsonextractstring).
        ","JSONExtractStringCaseInsensitive(json [, indices_or_keys]...)","- `json` — JSON string to parse [`String`](/sql-reference/data-types/string)
- `indices_or_keys` — Optional. Indices or keys to navigate to the field. Keys use case-insensitive matching [`String`](/sql-reference/data-types/string) or [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns the extracted string value, empty string if not found. [`String`](/sql-reference/data-types/string)","**basic**

```sql title=Query
SELECT JSONExtractStringCaseInsensitive('{""ABC"": ""def""}', 'abc')
```

```response title=Response
def
```

**nested**

```sql title=Query
SELECT JSONExtractStringCaseInsensitive('{""User"": {""Name"": ""John""}}', 'user', 'name')
```

```response title=Response
John
```

","25.8","JSON"
"25.9.2.1","JSONExtractBoolCaseInsensitive",0,0,"","","System","
Parses JSON and extracts a boolean value using case-insensitive key matching. This function is similar to [`JSONExtractBool`](#jsonextractbool).
        ","JSONExtractBoolCaseInsensitive(json [, indices_or_keys]...)","- `json` — JSON string to parse [`String`](/sql-reference/data-types/string)
- `indices_or_keys` — Optional. Indices or keys to navigate to the field. Keys use case-insensitive matching [`String`](/sql-reference/data-types/string) or [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns the extracted boolean value (1 for true, 0 for false), 0 if not found. [`UInt8`](/sql-reference/data-types/int-uint)","**basic**

```sql title=Query
SELECT JSONExtractBoolCaseInsensitive('{""IsActive"": true}', 'isactive')
```

```response title=Response
1
```

","25.8","JSON"
"25.9.2.1","JSONExtractFloatCaseInsensitive",0,0,"","","System","
Parses JSON and extracts a value of Float type using case-insensitive key matching. This function is similar to [`JSONExtractFloat`](#jsonextractfloat).
        ","JSONExtractFloatCaseInsensitive(json [, indices_or_keys]...)","- `json` — JSON string to parse [`String`](/sql-reference/data-types/string)
- `indices_or_keys` — Optional. Indices or keys to navigate to the field. Keys use case-insensitive matching [`String`](/sql-reference/data-types/string) or [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns the extracted Float value, 0 if not found or cannot be converted. [`Float64`](/sql-reference/data-types/float)","**basic**

```sql title=Query
SELECT JSONExtractFloatCaseInsensitive('{""Price"": 12.34}', 'PRICE')
```

```response title=Response
12.34
```

","25.8","JSON"
"25.9.2.1","JSONExtractUIntCaseInsensitive",0,0,"","","System","
Parses JSON and extracts a value of UInt type using case-insensitive key matching. This function is similar to [`JSONExtractUInt`](#jsonextractuint).
        ","JSONExtractUIntCaseInsensitive(json [, indices_or_keys]...)","- `json` — JSON string to parse [`String`](/sql-reference/data-types/string)
- `indices_or_keys` — Optional. Indices or keys to navigate to the field. Keys use case-insensitive matching [`String`](/sql-reference/data-types/string) or [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns the extracted UInt value, 0 if not found or cannot be converted. [`UInt64`](/sql-reference/data-types/int-uint)","**basic**

```sql title=Query
SELECT JSONExtractUIntCaseInsensitive('{""COUNT"": 789}', 'count')
```

```response title=Response
789
```

","25.8","JSON"
"25.9.2.1","JSONExtractIntCaseInsensitive",0,0,"","","System","
Parses JSON and extracts a value of Int type using case-insensitive key matching. This function is similar to [`JSONExtractInt`](#jsonextractint).
        ","JSONExtractIntCaseInsensitive(json [, indices_or_keys]...)","- `json` — JSON string to parse [`String`](/sql-reference/data-types/string)
- `indices_or_keys` — Optional. Indices or keys to navigate to the field. Keys use case-insensitive matching [`String`](/sql-reference/data-types/string) or [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns the extracted Int value, 0 if not found or cannot be converted. [`Int64`](/sql-reference/data-types/int-uint)","**basic**

```sql title=Query
SELECT JSONExtractIntCaseInsensitive('{""Value"": 123}', 'value')
```

```response title=Response
123
```

**nested**

```sql title=Query
SELECT JSONExtractIntCaseInsensitive('{""DATA"": {""COUNT"": 42}}', 'data', 'Count')
```

```response title=Response
42
```

","25.8","JSON"
"25.9.2.1","toFloat32OrZero",0,0,"","","System","
Converts an input value to a value of type [Float32](../data-types/float.md) but returns `0` in case of an error.
Like [`toFloat32`](#tofloat32) but returns `0` instead of throwing an exception on conversion errors.

See also:
- [`toFloat32`](#toFloat32).
- [`toFloat32OrNull`](#toFloat32OrNull).
- [`toFloat32OrDefault`](#toFloat32OrDefault).
    ","toFloat32OrZero(x)","- `x` — A string representation of a number. [`String`](/sql-reference/data-types/string)
","","Returns a 32-bit Float value if successful, otherwise `0`. [`Float32`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT
    toFloat32OrZero('42.7'),
    toFloat32OrZero('abc')
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toFloat32OrZero('42.7'): 42.7
toFloat32OrZero('abc'):  0
```

","1.1","Type Conversion"
"25.9.2.1","bitAnd",0,0,"","","System","Performs bitwise AND operation between two values.","bitAnd(a, b)","- `a` — First value. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
- `b` — Second value. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns the result of bitwise operation `a AND b`","**Usage example**

```sql title=Query
CREATE TABLE bits
(
    `a` UInt8,
    `b` UInt8
)
ENGINE = Memory;

INSERT INTO bits VALUES (0, 0), (0, 1), (1, 0), (1, 1);

SELECT
    a,
    b,
    bitAnd(a, b)
FROM bits
```

```response title=Response
┌─a─┬─b─┬─bitAnd(a, b)─┐
│ 0 │ 0 │            0 │
│ 0 │ 1 │            0 │
│ 1 │ 0 │            0 │
│ 1 │ 1 │            1 │
└───┴───┴──────────────┘
```

","1.1","Bit"
"25.9.2.1","decodeXMLComponent",0,0,"","","System","
Decodes XML entities in a string to their corresponding characters.
","decodeXMLComponent(s)","- `s` — String containing XML entities to decode. [`String`](/sql-reference/data-types/string)
","","Returns the provided string with XML entities decoded. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT decodeXMLComponent('&lt;tag&gt;Hello &amp; World&lt;/tag&gt;')
```

```response title=Response
┌─decodeXMLCom⋯;/tag&gt;')─┐
│ <tag>Hello & World</tag> │
└──────────────────────────┘
```

","21.2","String"
"25.9.2.1","subtractMicroseconds",0,0,"","","System","
Subtracts a specified number of microseconds from a date with time or a string-encoded date with time.
    ","subtractMicroseconds(datetime, num)","- `datetime` — Date with time to subtract specified number of microseconds from. [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64) or [`String`](/sql-reference/data-types/string)
- `num` — Number of microseconds to subtract. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns `datetime` minus `num` microseconds [`DateTime64`](/sql-reference/data-types/datetime64)","**Subtract microseconds from different date time types**

```sql title=Query
WITH
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractMicroseconds(date_time, 1000000) AS subtract_microseconds_with_date_time,
    subtractMicroseconds(date_time_string, 1000000) AS subtract_microseconds_with_date_time_string
```

```response title=Response
┌─subtract_microseconds_with_date_time─┬─subtract_microseconds_with_date_time_string─┐
│           2023-12-31 23:59:59.000000 │                  2023-12-31 23:59:59.000000 │
└──────────────────────────────────────┴─────────────────────────────────────────────┘
```

**Using alternative INTERVAL syntax**

```sql title=Query
SELECT dateSub('1998-06-16'::DateTime, INTERVAL 10 microsecond)
```

```response title=Response
┌─minus(CAST('1⋯osecond(10))─┐
│ 1998-06-15 23:59:59.999990 │
└────────────────────────────┘
```

","22.6","Dates and Times"
"25.9.2.1","arraySlice",0,0,"","","System","Returns a slice of the array, with `NULL` elements included.","arraySlice(arr, offset [, length])","- `arr` — Array to slice. [`Array(T)`](/sql-reference/data-types/array)
- `offset` — Indent from the edge of the array. A positive value indicates an offset on the left, and a negative value is an indent on the right. Numbering of the array items begins with `1`. [`(U)Int*`](/sql-reference/data-types/int-uint)
- `length` — The length of the required slice. If you specify a negative value, the function returns an open slice `[offset, array_length - length]`. If you omit the value, the function returns the slice `[offset, the_end_of_array]`. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns a slice of the array with `length` elements from the specified `offset` [`Array(T)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT arraySlice([1, 2, NULL, 4, 5], 2, 3) AS res;
```

```response title=Response
[2, NULL, 4]
```

","1.1","Arrays"
"25.9.2.1","currentQueryID",0,0,"","","System","
Returns current Query id.
","currentQueryID()","","","","**Example**

```sql title=Query
SELECT currentQueryID();
```

```response title=Response
┌─currentQueryID()─────────────────────┐
│ 1280d0e8-1a08-4524-be6e-77975bb68e7d │
└──────────────────────────────────────┘
```

","","Other"
"25.9.2.1","hilbertDecode",0,0,"","","System","
Decodes a Hilbert curve index back into a tuple of unsigned integers, representing coordinates in multi-dimensional space.

As with the `hilbertEncode` function, this function has two modes of operation:
- **Simple**
- **Expanded**

**Simple mode**

Accepts up to 2 unsigned integers as arguments and produces a `UInt64` code.

**Expanded mode**

Accepts a range mask (tuple) as a first argument and up to 2 unsigned integers as
other arguments. Each number in the mask configures the number of bits by which
the corresponding argument will be shifted left, effectively scaling the argument
within its range.

Range expansion can be beneficial when you need a similar distribution for
arguments with wildly different ranges (or cardinality) For example: 'IP Address' `(0...FFFFFFFF)`
and 'Country code' `(0...FF)`. As with the encode function, this is limited to 8
numbers at most.
    ","hilbertDecode(tuple_size, code)","- `tuple_size` — Integer value of no more than `2`. [`UInt8/16/32/64`](/sql-reference/data-types/int-uint) or [`Tuple(UInt8/16/32/64)`](/sql-reference/data-types/tuple)
- `code` — `UInt64` code. [`UInt64`](/sql-reference/data-types/int-uint)
","","Returns a tuple of the specified size. [`Tuple(UInt64)`](/sql-reference/data-types/tuple)","**Simple mode**

```sql title=Query
SELECT hilbertDecode(2, 31)
```

```response title=Response
[""3"", ""4""]
```

**Single argument**

```sql title=Query
-- Hilbert code for one argument is always the argument itself (as a tuple).
SELECT hilbertDecode(1, 1)
```

```response title=Response
[""1""]
```

**Expanded mode**

```sql title=Query
-- A single argument with a tuple specifying bit shifts will be right-shifted accordingly.
SELECT hilbertDecode(tuple(2), 32768)
```

```response title=Response
[""128""]
```

**Column usage**

```sql title=Query
-- First create the table and insert some data
CREATE TABLE hilbert_numbers(
    n1 UInt32,
    n2 UInt32
)
ENGINE=MergeTree()
ORDER BY n1 SETTINGS index_granularity = 8192, index_granularity_bytes = '10Mi';
insert into hilbert_numbers (*) values(1,2);

-- Use column names instead of constants as function arguments
SELECT untuple(hilbertDecode(2, hilbertEncode(n1, n2))) FROM hilbert_numbers;
```

```response title=Response
1    2
```

","24.6","Encoding"
"25.9.2.1","arrayJaccardIndex",0,0,"","","System","Returns the [Jaccard index](https://en.wikipedia.org/wiki/Jaccard_index) of two arrays.","arrayJaccardIndex(arr_x, arr_y)","- `arr_x` — First array. [`Array(T)`](/sql-reference/data-types/array)
- `arr_y` — Second array. [`Array(T)`](/sql-reference/data-types/array)
","","Returns the Jaccard index of `arr_x` and `arr_y` [`Float64`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT arrayJaccardIndex([1, 2], [2, 3]) AS res
```

```response title=Response
0.3333333333333333
```

","23.7","Arrays"
"25.9.2.1","base64Encode",0,0,"","","System","
Encodes a string using [Base64](https://en.wikipedia.org/wiki/Base64) representation, according to RFC 4648.
","base64Encode(plaintext)","- `plaintext` — Plaintext column or constant to decode. [`String`](/sql-reference/data-types/string)
","","Returns a string containing the encoded value of the argument. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT base64Encode('clickhouse')
```

```response title=Response
┌─base64Encode('clickhouse')─┐
│ Y2xpY2tob3VzZQ==           │
└────────────────────────────┘
```

","18.16","String"
"25.9.2.1","__actionName",0,0,"","","System","","","","","","","",""
"25.9.2.1","arrayReduceInRanges",0,0,"","","System","
Applies an aggregate function to array elements in the given ranges and returns an array containing the result corresponding to each range.
The function will return the same result as multiple `arrayReduce(agg_func, arraySlice(arr1, index, length), ...)`.
","arrayReduceInRanges(agg_f, ranges, arr1 [, arr2, ... ,arrN)])","- `agg_f` — The name of the aggregate function to use. [`String`](/sql-reference/data-types/string)
- `ranges` — The range over which to aggregate. An array of tuples, `(i, r)` containing the index `i` from which to begin from and the range `r` over which to aggregate. [`Array(T)`](/sql-reference/data-types/array) or [`Tuple(T)`](/sql-reference/data-types/tuple)
- `arr1 [, arr2, ... ,arrN)]` — N arrays as arguments to the aggregate function. [`Array(T)`](/sql-reference/data-types/array)
","","Returns an array containing results of the aggregate function over the specified ranges [`Array(T)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT arrayReduceInRanges(
    'sum',
    [(1, 5), (2, 3), (3, 4), (4, 4)],
    [1000000, 200000, 30000, 4000, 500, 60, 7]
) AS res
```

```response title=Response
┌─res─────────────────────────┐
│ [1234500,234000,34560,4567] │
└─────────────────────────────┘
```

","20.4","Arrays"
"25.9.2.1","polygonsDistanceSpherical",0,0,"","","System","","","","","","","",""
"25.9.2.1","bitHammingDistance",0,0,"","","System","
Returns the [Hamming Distance](https://en.wikipedia.org/wiki/Hamming_distance) between the bit representations of two numbers.
Can be used with [`SimHash`](../../sql-reference/functions/hash-functions.md#ngramSimHash) functions for detection of semi-duplicate strings.
The smaller the distance, the more similar the strings are.
","bitHammingDistance(x, y)","- `x` — First number for Hamming distance calculation. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
- `y` — Second number for Hamming distance calculation. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns the hamming distance between `x` and `y` [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT bitHammingDistance(111, 121);
```

```response title=Response
┌─bitHammingDistance(111, 121)─┐
│                            3 │
└──────────────────────────────┘
```

","21.1","Bit"
"25.9.2.1","bitRotateLeft",0,0,"","","System","Rotate bits left by a certain number of positions. Bits that fall off wrap around to the right.","bitRotateLeft(a, N)","- `a` — A value to rotate. [`(U)Int8/16/32/64`](/sql-reference/data-types/int-uint)
- `N` — The number of positions to rotate left. [`UInt8/16/32/64`](/sql-reference/data-types/int-uint)
","","Returns the rotated value with type equal to that of `a`. [`(U)Int8/16/32/64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT 99 AS a, bin(a), bitRotateLeft(a, 2) AS a_rotated, bin(a_rotated);
```

```response title=Response
┌──a─┬─bin(a)───┬─a_rotated─┬─bin(a_rotated)─┐
│ 99 │ 01100011 │       141 │ 10001101       │
└────┴──────────┴───────────┴────────────────┘
```

","1.1","Bit"
"25.9.2.1","isNaN",0,0,"","","System","Returns `1` if the Float32 and Float64 argument is `NaN`, otherwise returns `0`.","isNaN(x)","- `x` — Argument to evaluate for if it is `NaN`. [`Float*`](/sql-reference/data-types/float)
","","`1` if `NaN`, otherwise `0`","**Usage example**

```sql title=Query
SELECT isNaN(NaN)
```

```response title=Response
1
```

","1.1","Arithmetic"
"25.9.2.1","intDivOrZero",0,0,"","","System","
Same as `intDiv` but returns zero when dividing by zero or when dividing a
minimal negative number by minus one.
    ","intDivOrZero(a, b)","- `a` — Left hand operand. [`(U)Int*`](/sql-reference/data-types/int-uint)
- `b` — Right hand operand. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Result of integer division of a and b, or zero.","**Integer division by zero**

```sql title=Query
SELECT intDivOrZero(1, 0)
```

```response title=Response
0
```

**Dividing a minimal negative number by minus 1**

```sql title=Query
SELECT intDivOrZero(0.05, -1)
```

```response title=Response
0
```

","1.1","Arithmetic"
"25.9.2.1","__bitSwapLastTwo",0,0,"","","System","","","","","","","",""
"25.9.2.1","JSONExtractArrayRawCaseInsensitive",0,0,"","","System","
Returns an array with elements of JSON array, each represented as unparsed string, using case-insensitive key matching. This function is similar to [`JSONExtractArrayRaw`](#jsonextractarrayraw).
        ","JSONExtractArrayRawCaseInsensitive(json [, indices_or_keys]...)","- `json` — JSON string to parse [`String`](/sql-reference/data-types/string)
- `indices_or_keys` — Optional. Indices or keys to navigate to the array. Keys use case-insensitive matching [`String`](/sql-reference/data-types/string) or [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns an array of raw JSON strings. [`Array(String)`](/sql-reference/data-types/array)","**basic**

```sql title=Query
SELECT JSONExtractArrayRawCaseInsensitive('{""Items"": [1, 2, 3]}', 'ITEMS')
```

```response title=Response
['1','2','3']
```

","25.8","JSON"
"25.9.2.1","lowCardinalityKeys",0,0,"","","System","","","","","","","",""
"25.9.2.1","timeSlot",0,0,"","","System","
Round the time to the start of a half-an-hour length interval.

:::note
Although this function can take values of the extended types `Date32` and `DateTime64` as an argument,
passing it a time outside the normal range (year 1970 to 2149 for `Date` / 2106 for `DateTime`) will produce wrong results.
:::
    ","timeSlot(time[, time_zone])","- `time` — Time to round to the start of a half-an-hour length interval. [`DateTime`](/sql-reference/data-types/datetime) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime64`](/sql-reference/data-types/datetime64)
- `time_zone` — Optional. A String type const value or an expression representing the time zone. [`String`](/sql-reference/data-types/string)
","","Returns the time rounded to the start of a half-an-hour length interval. [`DateTime`](/sql-reference/data-types/datetime)","**Round time to half-hour interval**

```sql title=Query
SELECT timeSlot(toDateTime('2000-01-02 03:04:05', 'UTC'))
```

```response title=Response
┌─timeSlot(toDateTime('2000-01-02 03:04:05', 'UTC'))─┐
│                                2000-01-02 03:00:00 │
└────────────────────────────────────────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","JSONExtractKeysCaseInsensitive",0,0,"","","System","
Parses a JSON string and extracts the keys using case-insensitive key matching to navigate to nested objects. This function is similar to [`JSONExtractKeys`](#jsonextractkeys).
        ","JSONExtractKeysCaseInsensitive(json [, indices_or_keys]...)","- `json` — JSON string to parse [`String`](/sql-reference/data-types/string)
- `indices_or_keys` — Optional. Indices or keys to navigate to the object. Keys use case-insensitive matching [`String`](/sql-reference/data-types/string) or [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns an array of keys from the JSON object. [`Array(String)`](/sql-reference/data-types/array)","**basic**

```sql title=Query
SELECT JSONExtractKeysCaseInsensitive('{""Name"": ""Alice"", ""AGE"": 30}')
```

```response title=Response
['Name','AGE']
```

**nested**

```sql title=Query
SELECT JSONExtractKeysCaseInsensitive('{""User"": {""name"": ""John"", ""AGE"": 25}}', 'user')
```

```response title=Response
['name','AGE']
```

","25.8","JSON"
"25.9.2.1","changeMinute",0,0,"","","System","Changes the minute component of a `date or date time`.","changeMinute(date_or_datetime, value)","- `date_or_datetime` — The value to change. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
- `value` — The new value. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns a value of the same type as `date_or_datetime` with modified minute component. [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)","**Usage example**

```sql title=Query
SELECT changeMinute('2024-01-01 12:30:00'::DateTime, 45)
```

```response title=Response
2024-01-01 12:45:00
```

","24.7","Dates and Times"
"25.9.2.1","changeDay",0,0,"","","System","Changes the day component of a date or date time.","changeDay(date_or_datetime, value)","- `date_or_datetime` — The value to change. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
- `value` — The new value. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns a value of the same type as `date_or_datetime` with modified day component. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)","**Usage example**

```sql title=Query
SELECT changeDay('2024-01-31'::DateTime, 15)
```

```response title=Response
2024-01-15 00:00:00
```

","24.7","Dates and Times"
"25.9.2.1","changeYear",0,0,"","","System","Changes the year component of a date or date time.","changeYear(date_or_datetime, value)","- `date_or_datetime` — The value to change. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
- `value` — The new value. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns a value of the same type as `date_or_datetime` with modified year component. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)","**Usage example**

```sql title=Query
SELECT changeYear('2024-01-01'::DateTime, 2023)
```

```response title=Response
2023-01-01 00:00:00
```

","24.7","Dates and Times"
"25.9.2.1","bitTestAny",0,0,"","","System","
Returns result of the [logical disjunction](https://en.wikipedia.org/wiki/Logical_disjunction) (OR operator) of all bits at the given positions in a number.
Counts right-to-left, starting at 0.

The logical OR between two bits is true if at least one of the input bits is true.
    ","bitTestAny(a, index1[, index2, ... , indexN])","- `a` — An integer value. [`(U)Int8/16/32/64`](/sql-reference/data-types/int-uint)
- `index1, ...` — One or multiple positions of bits. [`(U)Int8/16/32/64`](/sql-reference/data-types/int-uint)
","","Returns the result of the logical disjunction [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example 1**

```sql title=Query
SELECT bitTestAny(43, 0, 2);
```

```response title=Response
┌─bin(43)──┬─bitTestAny(43, 0, 2)─┐
│ 00101011 │                    1 │
└──────────┴──────────────────────┘
```

**Usage example 2**

```sql title=Query
SELECT bitTestAny(43, 4, 2);
```

```response title=Response
┌─bin(43)──┬─bitTestAny(43, 4, 2)─┐
│ 00101011 │                    0 │
└──────────┴──────────────────────┘
```

","1.1","Bit"
"25.9.2.1","bitOr",0,0,"","","System","Performs bitwise OR operation between two values.","bitOr(a, b)","- `a` — First value. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
- `b` — Second value. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns the result of bitwise operation `a OR b`","**Usage example**

```sql title=Query
CREATE TABLE bits
(
    `a` UInt8,
    `b` UInt8
)
ENGINE = Memory;

INSERT INTO bits VALUES (0, 0), (0, 1), (1, 0), (1, 1);

SELECT
    a,
    b,
    bitOr(a, b)
FROM bits;
```

```response title=Response
┌─a─┬─b─┬─bitOr(a, b)─┐
│ 0 │ 0 │           0 │
│ 0 │ 1 │           1 │
│ 1 │ 0 │           1 │
│ 1 │ 1 │           1 │
└───┴───┴─────────────┘
```

","1.1","Bit"
"25.9.2.1","showCertificate",0,0,"","","System","
Shows information about the current server's Secure Sockets Layer (SSL) certificate if it has been configured.
See [Configuring SSL-TLS](/guides/sre/configuring-ssl) for more information on how to configure ClickHouse to use OpenSSL certificates to validate connections.
    ","showCertificate()","","","Returns map of key-value pairs relating to the configured SSL certificate. [`Map(String, String)`](/sql-reference/data-types/map)","**Usage example**

```sql title=Query
SELECT showCertificate() FORMAT LineAsString;
```

```response title=Response
{'version':'1','serial_number':'2D9071D64530052D48308473922C7ADAFA85D6C5','signature_algo':'sha256WithRSAEncryption','issuer':'/CN=marsnet.local CA','not_before':'May  7 17:01:21 2024 GMT','not_after':'May  7 17:01:21 2025 GMT','subject':'/CN=chnode1','pkey_algo':'rsaEncryption'}
```

","22.6","Other"
"25.9.2.1","bitXor",0,0,"","","System","Performs bitwise exclusive or (XOR) operation between two values.","bitXor(a, b)","- `a` — First value. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
- `b` — Second value. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns the result of bitwise operation `a XOR b`","**Usage example**

```sql title=Query
CREATE TABLE bits
(
    `a` UInt8,
    `b` UInt8
)
ENGINE = Memory;

INSERT INTO bits VALUES (0, 0), (0, 1), (1, 0), (1, 1);

SELECT
    a,
    b,
    bitXor(a, b)
FROM bits;
```

```response title=Response
┌─a─┬─b─┬─bitXor(a, b)─┐
│ 0 │ 0 │            0 │
│ 0 │ 1 │            1 │
│ 1 │ 0 │            1 │
│ 1 │ 1 │            0 │
└───┴───┴──────────────┘
```

","1.1","Bit"
"25.9.2.1","round",0,1,"","","System","
Rounds a value to a specified number of decimal places `N`.

- If `N > 0`, the function rounds to the right of the decimal point.
- If `N < 0`, the function rounds to the left of the decimal point.
- If `N = 0`, the function rounds to the next integer.

The function returns the nearest number of the specified order.
If the input value has equal distance to two neighboring numbers, the function uses banker's rounding for `Float*` inputs and rounds away from zero for the other number types (`Decimal*`).

If rounding causes an overflow (for example, `round(255, -1)`), the result is undefined.
","round(x[, N])","- `x` — A number to round. [`Float*`](/sql-reference/data-types/float) or [`Decimal*`](/sql-reference/data-types/decimal) or [`(U)Int*`](/sql-reference/data-types/int-uint)
- `N` — Optional. The number of decimal places to round to. Defaults to `0`. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns a rounded number of the same type as `x`. [`Float*`](/sql-reference/data-types/float) or [`Decimal*`](/sql-reference/data-types/decimal) or [`(U)Int*`](/sql-reference/data-types/int-uint)","**Float inputs**

```sql title=Query
SELECT number / 2 AS x, round(x) FROM system.numbers LIMIT 3;
```

```response title=Response
┌───x─┬─round(x)─┐
│   0 │        0 │
│ 0.5 │        0 │
│   1 │        1 │
└─────┴──────────┘
```

**Decimal inputs**

```sql title=Query
SELECT cast(number / 2 AS  Decimal(10,4)) AS x, round(x) FROM system.numbers LIMIT 3;
```

```response title=Response
┌───x─┬─round(x)─┐
│   0 │        0 │
│ 0.5 │        1 │
│   1 │        1 │
└─────┴──────────┘
```

","1.1","Rounding"
"25.9.2.1","hasTokenCaseInsensitiveOrNull",0,1,"","","System","Performs case insensitive lookup of needle in haystack using tokenbf_v1 index. Returns null if needle is ill-formed.","","","","","","","String Search"
"25.9.2.1","hasTokenCaseInsensitive",0,1,"","","System","Performs case insensitive lookup of needle in haystack using tokenbf_v1 index.","","","","","","","String Search"
"25.9.2.1","JSONExtractUInt",0,0,"","","System","
Parses JSON and extracts a value of UInt type.
        ","JSONExtractUInt(json [, indices_or_keys, ...])","- `json` — JSON string to parse. [`String`](/sql-reference/data-types/string)
- `indices_or_keys` — A list of zero or more arguments each of which can be either string or integer. [`String`](/sql-reference/data-types/string) or [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns a UInt value if it exists, otherwise returns `0`. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT JSONExtractUInt('{""a"": ""hello"", ""b"": [-100, 200.0, 300]}', 'b', -1) AS res;
```

```response title=Response
┌─res─┐
│ 300 │
└─────┘
```

","20.1","JSON"
"25.9.2.1","arrayReduce",0,0,"","","System","
Applies an aggregate function to array elements and returns its result.
The name of the aggregation function is passed as a string in single quotes `'max'`, `'sum'`.
When using parametric aggregate functions, the parameter is indicated after the function name in parentheses `'uniqUpTo(6)'`.
","arrayReduce(agg_f, arr1 [, arr2, ... , arrN)])","- `agg_f` — The name of an aggregate function which should be a constant. [`String`](/sql-reference/data-types/string)
- `arr1 [, arr2, ... , arrN)]` — N arrays corresponding to the arguments of `agg_f`. [`Array(T)`](/sql-reference/data-types/array)
","","Returns the result of the aggregate function","**Usage example**

```sql title=Query
SELECT arrayReduce('max', [1, 2, 3]);
```

```response title=Response
┌─arrayReduce('max', [1, 2, 3])─┐
│                             3 │
└───────────────────────────────┘
```

**Example with aggregate function using multiple arguments**

```sql title=Query
--If an aggregate function takes multiple arguments, then this function must be applied to multiple arrays of the same size.

SELECT arrayReduce('maxIf', [3, 5], [1, 0]);
```

```response title=Response
┌─arrayReduce('maxIf', [3, 5], [1, 0])─┐
│                                    3 │
└──────────────────────────────────────┘
```

**Example with a parametric aggregate function**

```sql title=Query
SELECT arrayReduce('uniqUpTo(3)', [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]);
```

```response title=Response
┌─arrayReduce('uniqUpTo(3)', [1, 2, 3, 4, 5, 6, 7, 8, 9, 10])─┐
│                                                           4 │
└─────────────────────────────────────────────────────────────┘
```

","1.1","Arrays"
"25.9.2.1","hasAll",0,0,"","","System","
Checks whether one array is a subset of another.

- An empty array is a subset of any array.
- `Null` is processed as a value.
- The order of values in both the arrays does not matter.
","hasAll(set, subset)","- `set` — Array of any type with a set of elements. [`Array(T)`](/sql-reference/data-types/array)
- `subset` — Array of any type that shares a common supertype with `set` containing elements that should be tested to be a subset of `set`. [`Array(T)`](/sql-reference/data-types/array)
","","- `1`, if `set` contains all of the elements from `subset`.
- `0`, otherwise.

Raises a `NO_COMMON_TYPE` exception if the set and subset elements do not share a common supertype.","**Empty arrays**

```sql title=Query
SELECT hasAll([], [])
```

```response title=Response
1
```

**Arrays containing NULL values**

```sql title=Query
SELECT hasAll([1, Null], [Null])
```

```response title=Response
1
```

**Arrays containing values of a different type**

```sql title=Query
SELECT hasAll([1.0, 2, 3, 4], [1, 3])
```

```response title=Response
1
```

**Arrays containing String values**

```sql title=Query
SELECT hasAll(['a', 'b'], ['a'])
```

```response title=Response
1
```

**Arrays without a common type**

```sql title=Query
SELECT hasAll([1], ['a'])
```

```response title=Response
Raises a NO_COMMON_TYPE exception
```

**Array of arrays**

```sql title=Query
SELECT hasAll([[1, 2], [3, 4]], [[1, 2], [3, 5]])
```

```response title=Response
0
```

","1.1","Arrays"
"25.9.2.1","toIPv6OrDefault",0,0,"","","System","
Converts a string or a UInt128 form of IPv6 address to [`IPv6`](../data-types/ipv6.md) type.
If the IPv6 address has an invalid format, it returns `::` (0 IPv6) or the provided IPv6 default.
    ","toIPv6OrDefault(string[, default])","- `string` — IP address string to convert. - `default` — Optional. The value to return if string has an invalid format. ","","Returns the IPv6 address, otherwise `::` or the provided optional default if argument `string` has an invalid format. [`IPv6`](/sql-reference/data-types/ipv6)","**Valid and invalid IPv6 strings**

```sql title=Query
WITH
    '2001:0db8:85a3:0000:0000:8a2e:0370:7334' AS valid_IPv6_string,
    '2001:0db8:85a3::8a2e:370g:7334' AS invalid_IPv6_string,
    'not_an_ipv6' AS malformed_string
SELECT
    toIPv6OrDefault(valid_IPv6_string) AS valid,
    toIPv6OrDefault(invalid_IPv6_string) AS default_value,
    toIPv6OrDefault(malformed_string, toIPv6('::1')) AS provided_default;
```

```response title=Response
┌─valid──────────────────────────────────┬─default_value─┬─provided_default─┐
│ 2001:db8:85a3::8a2e:370:7334           │ ::            │ ::1              │
└────────────────────────────────────────┴───────────────┴──────────────────┘
```

","22.3","IP Address"
"25.9.2.1","toIPv4OrDefault",0,0,"","","System","
Converts a string or a UInt32 form of an IPv4 address to [`IPv4`](../data-types/ipv4.md) type.
If the IPv4 address has an invalid format, it returns `0.0.0.0` (0 IPv4), or the provided IPv4 default.
    ","toIPv4OrDefault(string[, default])","- `string` — IP address string to convert. [`String`](/sql-reference/data-types/string)
- `default` — Optional. The value to return if string is an invalid IPv4 address. [`IPv4`](/sql-reference/data-types/ipv4)
","","Returns a string converted to the current IPv4 address, or the default value if conversion fails. [`IPv4`](/sql-reference/data-types/ipv4)","**Valid and invalid IPv4 strings**

```sql title=Query
WITH
    '192.168.1.1' AS valid_IPv4_string,
    '999.999.999.999' AS invalid_IPv4_string,
    'not_an_ip' AS malformed_string
SELECT
    toIPv4OrDefault(valid_IPv4_string) AS valid,
    toIPv4OrDefault(invalid_IPv4_string) AS default_value,
    toIPv4OrDefault(malformed_string, toIPv4('8.8.8.8')) AS provided_default;
```

```response title=Response
┌─valid─────────┬─default_value─┬─provided_default─┐
│ 192.168.1.1   │ 0.0.0.0       │ 8.8.8.8          │
└───────────────┴───────────────┴──────────────────┘
```

","22.3","IP Address"
"25.9.2.1","toUUIDOrDefault",0,0,"","","System","","","","","","","",""
"25.9.2.1","toDecimal128OrDefault",0,0,"","","System","","","","","","","",""
"25.9.2.1","toDecimal64OrDefault",0,0,"","","System","","","","","","","",""
"25.9.2.1","toDateTime64OrDefault",0,0,"","","System","","","","","","","",""
"25.9.2.1","toDateTimeOrDefault",0,0,"","","System","","","","","","","",""
"25.9.2.1","runningConcurrency",0,0,"","","System","
Calculates the number of concurrent events.
Each event has a start time and an end time.
The start time is included in the event, while the end time is excluded.
Columns with a start time and an end time must be of the same data type.
The function calculates the total number of active (concurrent) events for each event start time.

:::tip Requirements
Events must be ordered by the start time in ascending order.
If this requirement is violated the function raises an exception.
Every data block is processed separately.
If events from different data blocks overlap then they can not be processed correctly.
:::

:::warning Deprecated
It is advised to use [window functions](/sql-reference/window-functions) instead.
:::
","runningConcurrency(start, end)","- `start` — A column with the start time of events. [`Date`](/sql-reference/data-types/date) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
- `end` — A column with the end time of events. [`Date`](/sql-reference/data-types/date) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
","","Returns the number of concurrent events at each event start time. [`UInt32`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT start, runningConcurrency(start, end) FROM example_table;
```

```response title=Response
┌──────start─┬─runningConcurrency(start, end)─┐
│ 2025-03-03 │                              1 │
│ 2025-03-06 │                              2 │
│ 2025-03-07 │                              3 │
│ 2025-03-11 │                              2 │
└────────────┴────────────────────────────────┘
```

","21.3","Other"
"25.9.2.1","toDateOrDefault",0,0,"","","System","","","","","","","",""
"25.9.2.1","toFloat64OrDefault",0,0,"","","System","","","","","","","",""
"25.9.2.1","toFloat32OrDefault",0,0,"","","System","","","","","","","",""
"25.9.2.1","toInt256OrDefault",0,0,"","","System","","","","","","","",""
"25.9.2.1","toInt128OrDefault",0,0,"","","System","","","","","","","",""
"25.9.2.1","toISOYear",0,0,"","","System","
Converts a date or date with time to the ISO year number.
    ","toISOYear(datetime)","- `datetime` — The value with date or date with time. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
","","Returns the input value converted to an ISO year number. [`UInt16`](/sql-reference/data-types/int-uint)","**Get ISO year from date values**

```sql title=Query
SELECT
toISOYear(toDate('2024/10/02')) as year1,
toISOYear(toDateTime('2024-10-02 01:30:00')) as year2
```

```response title=Response
┌─week1─┬─week2─┐
│    40 │    40 │
└───────┴───────┘
```

","18.4","Dates and Times"
"25.9.2.1","toInt64OrDefault",0,0,"","","System","","","","","","","",""
"25.9.2.1","toInt32OrDefault",0,0,"","","System","","","","","","","",""
"25.9.2.1","toInt8OrDefault",0,0,"","","System","","","","","","","",""
"25.9.2.1","toUInt256OrDefault",0,0,"","","System","","","","","","","",""
"25.9.2.1","toUInt128OrDefault",0,0,"","","System","
Converts a string in the first argument of the function to UInt128 by parsing it.
If it cannot parse the value, returns the default value, which can be provided as the second function argument, and if provided, must be of UInt128 type.
If the default value is not provided in the second argument, it is assumed to be zero.
","","","","","**Successful conversion**

```sql title=Query
SELECT toUInt128OrDefault('1', 2::UInt128)
```

```response title=Response
1
```

**Default value**

```sql title=Query
SELECT toUInt128OrDefault('upyachka', 123456789012345678901234567890::UInt128)
```

```response title=Response
123456789012345678901234567890
```

**Implicit default value**

```sql title=Query
SELECT toUInt128OrDefault('upyachka')
```

```response title=Response
0
```

","","Type Conversion"
"25.9.2.1","hasSubstr",0,0,"","","System","
Checks whether all the elements of array2 appear in a array1 in the same exact order.
Therefore, the function will return `1`, if and only if array1 = prefix + array2 + suffix.

In other words, the functions will check whether all the elements of array2 are contained in array1 like the `hasAll` function.
In addition, it will check that the elements are observed in the same order in both array1 and array2.

- The function will return `1` if array2 is empty.
- `Null` is processed as a value. In other words `hasSubstr([1, 2, NULL, 3, 4], [2,3])` will return `0`. However, `hasSubstr([1, 2, NULL, 3, 4], [2,NULL,3])` will return `1`
- The order of values in both the arrays does matter.

Raises a `NO_COMMON_TYPE` exception if any of the elements of the two arrays do not share a common supertype.
","hasSubstr(arr1, arr2)","- `arr1` — Array of any type with a set of elements. [`Array(T)`](/sql-reference/data-types/array)
- `arr2` — Array of any type with a set of elements. [`Array(T)`](/sql-reference/data-types/array)
","","Returns `1` if array `arr1` contains array `arr2`. Otherwise, returns `0`. [`UInt8`](/sql-reference/data-types/int-uint)","**Both arrays are empty**

```sql title=Query
SELECT hasSubstr([], [])
```

```response title=Response
1
```

**Arrays containing NULL values**

```sql title=Query
SELECT hasSubstr([1, Null], [Null])
```

```response title=Response
1
```

**Arrays containing values of a different type**

```sql title=Query
SELECT hasSubstr([1.0, 2, 3, 4], [1, 3])
```

```response title=Response
0
```

**Arrays containing strings**

```sql title=Query
SELECT hasSubstr(['a', 'b'], ['a'])
```

```response title=Response
1
```

**Arrays with valid ordering**

```sql title=Query
SELECT hasSubstr(['a', 'b' , 'c'], ['a', 'b'])
```

```response title=Response
1
```

**Arrays with invalid ordering**

```sql title=Query
SELECT hasSubstr(['a', 'b' , 'c'], ['a', 'c'])
```

```response title=Response
0
```

**Array of arrays**

```sql title=Query
SELECT hasSubstr([[1, 2], [3, 4], [5, 6]], [[1, 2], [3, 4]])
```

```response title=Response
1
```

**Arrays without a common type**

```sql title=Query
SELECT hasSubstr([1, 2, NULL, 3, 4], ['a'])
```

```response title=Response
Raises a `NO_COMMON_TYPE` exception
```

","20.6","Arrays"
"25.9.2.1","__bitBoolMaskAnd",0,0,"","","System","","","","","","","",""
"25.9.2.1","toUInt64OrDefault",0,0,"","","System","","","","","","","",""
"25.9.2.1","toUInt16OrDefault",0,0,"","","System","","","","","","","",""
"25.9.2.1","accurateCastOrDefault",0,0,"","","System","","","","","","","",""
"25.9.2.1","tryBase32Decode",0,0,"","","System","
Accepts a string and decodes it using [Base32](https://datatracker.ietf.org/doc/html/rfc4648#section-6) encoding scheme.
","tryBase32Decode(encoded)","- `encoded` — String column or constant to decode. If the string is not valid Base32-encoded, returns an empty string in case of error. [`String`](/sql-reference/data-types/string)
","","Returns a string containing the decoded value of the argument. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT tryBase32Decode('IVXGG33EMVSA====');
```

```response title=Response
┌─tryBase32Decode('IVXGG33EMVSA====')─┐
│ Encoded                             │
└─────────────────────────────────────┘
```

","25.6","String"
"25.9.2.1","addressToSymbol",0,0,"","","System","
Converts virtual memory address inside the ClickHouse server process to a symbol from ClickHouse's object files.
    ","addressToSymbol(address_of_binary_instruction)","- `address_of_binary_instruction` — Address of instruction in a running process. [`UInt64`](/sql-reference/data-types/int-uint)
","","Returns the symbol from ClickHouse object files or an empty string, if the address is not valid. [`String`](/sql-reference/data-types/string)","**Selecting the first string from the `trace_log` system table**

```sql title=Query
SET allow_introspection_functions=1;
SELECT * FROM system.trace_log LIMIT 1 \G;
```

```response title=Response
-- The `trace` field contains the stack trace at the moment of sampling.
Row 1:
──────
event_date:    2019-11-20
event_time:    2019-11-20 16:57:59
revision:      54429
timer_type:    Real
thread_number: 48
query_id:      724028bf-f550-45aa-910d-2af6212b94ac
trace:         [94138803686098,94138815010911,94138815096522,94138815101224,94138815102091,94138814222988,94138806823642,94138814457211,94138806823642,94138814457211,94138806823642,94138806795179,94138806796144,94138753770094,94138753771646,94138753760572,94138852407232,140399185266395,140399178045583]
```

**Getting a symbol for a single address**

```sql title=Query
SET allow_introspection_functions=1;
SELECT addressToSymbol(94138803686098) \G;
```

```response title=Response
Row 1:
──────
addressToSymbol(94138803686098): _ZNK2DB24IAggregateFunctionHelperINS_20AggregateFunctionSumImmNS_24AggregateFunctionSumDataImEEEEE19addBatchSinglePlaceEmPcPPKNS_7IColumnEPNS_5ArenaE
```

**Applying the function to the whole stack trace**

```sql title=Query
SET allow_introspection_functions=1;

-- The arrayMap function allows to process each individual element of the trace array by the addressToSymbols function.
-- The result of this processing is shown in the trace_symbols column of output.

SELECT
    arrayStringConcat(arrayMap(x -> addressToSymbol(x), trace), '\n') AS trace_symbols
FROM system.trace_log
LIMIT 1
\G
```

```response title=Response
Row 1:
──────
trace_symbols: _ZNK2DB24IAggregateFunctionHelperINS_20AggregateFunctionSumImmNS_24AggregateFunctionSumDataImEEEEE19addBatchSinglePlaceEmPcPPKNS_7IColumnEPNS_5ArenaE
_ZNK2DB10Aggregator21executeWithoutKeyImplERPcmPNS0_28AggregateFunctionInstructionEPNS_5ArenaE
_ZN2DB10Aggregator14executeOnBlockESt6vectorIN3COWINS_7IColumnEE13immutable_ptrIS3_EESaIS6_EEmRNS_22AggregatedDataVariantsERS1_IPKS3_SaISC_EERS1_ISE_SaISE_EERb
_ZN2DB10Aggregator14executeOnBlockERKNS_5BlockERNS_22AggregatedDataVariantsERSt6vectorIPKNS_7IColumnESaIS9_EERS6_ISB_SaISB_EERb
_ZN2DB10Aggregator7executeERKSt10shared_ptrINS_17IBlockInputStreamEERNS_22AggregatedDataVariantsE
_ZN2DB27AggregatingBlockInputStream8readImplEv
_ZN2DB17IBlockInputStream4readEv
_ZN2DB26ExpressionBlockInputStream8readImplEv
_ZN2DB17IBlockInputStream4readEv
_ZN2DB26ExpressionBlockInputStream8readImplEv
_ZN2DB17IBlockInputStream4readEv
_ZN2DB28AsynchronousBlockInputStream9calculateEv
_ZNSt17_Function_handlerIFvvEZN2DB28AsynchronousBlockInputStream4nextEvEUlvE_E9_M_invokeERKSt9_Any_data
_ZN14ThreadPoolImplI20ThreadFromGlobalPoolE6workerESt14_List_iteratorIS0_E
_ZZN20ThreadFromGlobalPoolC4IZN14ThreadPoolImplIS_E12scheduleImplIvEET_St8functionIFvvEEiSt8optionalImEEUlvE1_JEEEOS4_DpOT0_ENKUlvE_clEv
_ZN14ThreadPoolImplISt6threadE6workerESt14_List_iteratorIS0_E
execute_native_thread_routine
start_thread
clone
```

","20.1","Introspection"
"25.9.2.1","toDecimal128OrZero",0,0,"","","System","
Converts an input value to a value of type [Decimal(38, S)](../data-types/decimal.md) but returns `0` in case of an error.
Like [`toDecimal128`](#todecimal128) but returns `0` instead of throwing an exception on conversion errors.

Supported arguments:
- Values or string representations of type (U)Int*.
- Values or string representations of type Float*.

Unsupported arguments (return `0`):
- Values or string representations of Float* values `NaN` and `Inf` (case-insensitive).
- String representations of binary and hexadecimal values.

:::note
If the input value exceeds the bounds of `Decimal128`:`(-1*10^(38 - S), 1*10^(38 - S))`, the function returns `0`.
:::
    ","toDecimal128OrZero(expr, S)","- `expr` — Expression returning a number or a string representation of a number. [`Expression`](/sql-reference/data-types/special-data-types/expression)
- `S` — Scale parameter between 0 and 38, specifying how many digits the fractional part of a number can have. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns a Decimal(38, S) value if successful, otherwise `0`. [`Decimal128(S)`](/sql-reference/data-types/decimal)","**Basic usage**

```sql title=Query
SELECT toDecimal128OrZero('42.7', 2), toDecimal128OrZero('invalid', 2)
```

```response title=Response
┌─toDecimal128OrZero('42.7', 2)─┬─toDecimal128OrZero('invalid', 2)─┐
│                         42.70 │                             0.00 │
└───────────────────────────────┴──────────────────────────────────┘
```

","20.1","Type Conversion"
"25.9.2.1","toInt16OrDefault",0,0,"","","System","","","","","","","",""
"25.9.2.1","extractURLParameters",0,0,"","","System","
Returns an array of `name=value` strings corresponding to the URL parameters.
The values are not decoded.
    ","extractURLParameters(url)","- `url` — URL. [`String`](/sql-reference/data-types/string)
","","Returns an array of `name=value` strings corresponding to the URL parameters. [`Array(String)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT extractURLParameters('http://example.com/?param1=value1&param2=value2');
```

```response title=Response
┌─extractURLParame⋯&param2=value2')─┐
│ ['param1=value1','param2=value2'] │
└───────────────────────────────────┘
```

","1.1","URL"
"25.9.2.1","lowCardinalityIndices",0,0,"","","System","","","","","","","",""
"25.9.2.1","colorOKLCHToSRGB",0,0,"","","System","
Converts a colour from the **OKLCH** perceptual colour space to the familiar **sRGB** colour space.

If `L` is outside the range `[0...1]`, `C` is negative, or `H` is outside the range `[0...360]`, the result is implementation-defined.

:::note
**OKLCH** is a cylindrical version of the OKLab colour space.
It's three coordinates are `L` (the lightness in the range `[0...1]`), `C` (chroma `>= 0`) and `H` (hue in degrees  from `[0...360]`)**.
OKLab/OKLCH is designed to be perceptually uniform while remaining cheap to compute.
:::

The conversion is the inverse of [`colorSRGBToOKLCH`](#colorSRGBToOKLCH):

1) OKLCH to OKLab.
2) OKLab to Linear sRGB
3) Linear sRGB to sRGB

The second argument gamma is used at the last stage.

For references of colors in OKLCH space, and how they correspond to sRGB colors please see [https://oklch.com/](https://oklch.com/).
    ","colorOKLCHToSRGB(tuple [, gamma])","- `tuple` — A tuple of three numeric values `L`, `C`, `H`, where `L` is in the range `[0...1]`, `C >= 0` and `H` is in the range `[0...360]`. [`Tuple(Float64, Float64, Float64)`](/sql-reference/data-types/tuple)
- `gamma` — Optional. The exponent that is used to transform linear sRGB back to sRGB by applying `(x ^ (1 / gamma)) * 255` for each channel `x`. Defaults to `2.2`. [`Float64`](/sql-reference/data-types/float)
","","Returns a tuple (R, G, B) representing sRGB color values. [`Tuple(Float64, Float64, Float64)`](/sql-reference/data-types/tuple)","**Convert OKLCH to sRGB**

```sql title=Query
SELECT colorOKLCHToSRGB((0.4466, 0.0991, 45.44), 2.2) AS rgb
WITH colorOKLCHToSRGB((0.7, 0.1, 54)) as t SELECT tuple(toUInt8(t.1), toUInt8(t.2), toUInt8(t.3)) AS RGB
```

```response title=Response
┌─rgb──────────────────────────────────────────────────────┐
│ (127.03349738778945,66.06672044472008,37.11802592155851) │
└──────────────────────────────────────────────────────────┘
┌─RGB──────────┐
│ (205,139,97) │
└──────────────┘
```

","25.7","Other"
"25.9.2.1","fromModifiedJulianDayOrNull",0,0,"","","System","
Similar to [`fromModifiedJulianDay()`](#fromModifiedJulianDay), but instead of raising exceptions it returns `NULL`.
    ","fromModifiedJulianDayOrNull(day)","- `day` — Modified Julian Day number. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns date in text form for valid `day` argument, otherwise `null`. [`Nullable(String)`](/sql-reference/data-types/nullable)","**Convert Modified Julian Day to date with null handling**

```sql title=Query
SELECT fromModifiedJulianDayOrNull(58849);
SELECT fromModifiedJulianDayOrNull(60000000); -- invalid argument, returns NULL
```

```response title=Response
┌─fromModified⋯Null(58849)─┐
│ 2020-01-01               │
└──────────────────────────┘
┌─fromModified⋯l(60000000)─┐
│ ᴺᵁᴸᴸ                     │
└──────────────────────────┘
```

","21.1","Dates and Times"
"25.9.2.1","fromModifiedJulianDay",0,0,"","","System","
Converts a [Modified Julian Day](https://en.wikipedia.org/wiki/Julian_day#Variants) number to a [Proleptic Gregorian calendar](https://en.wikipedia.org/wiki/Proleptic_Gregorian_calendar) date in text form `YYYY-MM-DD`. This function supports day number from `-678941` to `2973483` (which represent 0000-01-01 and 9999-12-31 respectively). It raises an exception if the day number is outside of the supported range.
    ","fromModifiedJulianDay(day)","- `day` — Modified Julian Day number. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns date in text form. [`String`](/sql-reference/data-types/string)","**Convert Modified Julian Day to date**

```sql title=Query
SELECT fromModifiedJulianDay(58849)
```

```response title=Response
┌─fromModifiedJulianDay(58849)─┐
│ 2020-01-01                   │
└──────────────────────────────┘
```

","21.1","Dates and Times"
"25.9.2.1","toIntervalMonth",0,0,"","","System","
Returns an interval of `n` months of data type [`IntervalMonth`](../../sql-reference/data-types/special-data-types/interval.md).
    ","toIntervalMonth(n)","- `n` — Number of months. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`String`](/sql-reference/data-types/string)
","","Returns an interval of `n` months. [`Interval`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
WITH
    toDate('2025-06-15') AS date,
    toIntervalMonth(1) AS interval_to_month
SELECT date + interval_to_month AS result
```

```response title=Response
┌─────result─┐
│ 2025-07-15 │
└────────────┘
```

","1.1","Type Conversion"
"25.9.2.1","fromUTCTimestamp",0,0,"","","System","
Converts a date or date with time value from UTC timezone to a date or date with time value with the specified time zone. This function is mainly included for compatibility with Apache Spark and similar frameworks.
    ","fromUTCTimestamp(datetime, time_zone)","- `datetime` — A date or date with time const value or an expression. [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
- `time_zone` — A String type const value or an expression representing the time zone. [`String`](/sql-reference/data-types/string)
","","Returns DateTime/DateTime64 in the specified timezone. [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)","**Convert UTC timezone to specified timezone**

```sql title=Query
SELECT fromUTCTimestamp(toDateTime64('2023-03-16 10:00:00', 3), 'Asia/Shanghai')
```

```response title=Response
┌─fromUTCTimestamp(toDateTime64('2023-03-16 10:00:00',3), 'Asia/Shanghai')─┐
│                                                 2023-03-16 18:00:00.000 │
└─────────────────────────────────────────────────────────────────────────┘
```

","22.1","Dates and Times"
"25.9.2.1","defaultProfiles",0,0,"","","System","
Returns an array of default setting profile names for the current user.
","defaultProfiles()","","","Returns an array of default setting profile names for the current user. [`Array(String)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT defaultProfiles();
```

```response title=Response
┌─defaultProfiles()─┐
│ ['default']       │
└───────────────────┘
```

","21.9","Other"
"25.9.2.1","toTime64",0,0,"","","System","
Converts an input value to type [Time64](/en/sql-reference/data-types/time64).
Supports conversion from String, FixedString, DateTime64, or numeric types representing microseconds since midnight.
Provides microsecond precision for time values.
    ","toTime64(x)","- `x` — Input value to convert. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring) or [`DateTime64`](/sql-reference/data-types/datetime64) or [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns the converted input value with microsecond precision. [`Time64(6)`](/sql-reference/data-types/time64)","**String to Time64 conversion**

```sql title=Query
SELECT toTime64('14:30:25.123456')
```

```response title=Response
14:30:25.123456
```

**DateTime64 to Time64 conversion**

```sql title=Query
SELECT toTime64(toDateTime64('2025-04-15 14:30:25.123456', 6))
```

```response title=Response
14:30:25.123456
```

**Integer to Time64 conversion**

```sql title=Query
SELECT toTime64(52225123456)
```

```response title=Response
14:30:25.123456
```

","25.6","Type Conversion"
"25.9.2.1","enabledProfiles",0,0,"","","System","
Returns an array of setting profile names which are enabled for the current user.
","enabledProfiles()","","","Returns an array of setting profile names which are enabled for the current user. [`Array(String)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT enabledProfiles();
```

```response title=Response
┌─enabledProfiles()─────────────────────────────────────────────────┐
│ ['default', 'readonly_user', 'web_analytics', 'batch_processing'] │
└───────────────────────────────────────────────────────────────────┘
```

","21.9","Other"
"25.9.2.1","convertCharset",0,0,"","","System","
Returns string `s` converted from the encoding `from` to encoding `to`.
","convertCharset(s, from, to)","- `s` — Input string. [`String`](/sql-reference/data-types/string)
- `from` — Source character encoding. [`String`](/sql-reference/data-types/string)
- `to` — Target character encoding. [`String`](/sql-reference/data-types/string)
","","Returns string `s` converted from encoding `from` to encoding `to`. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT convertCharset('Café', 'UTF-8', 'ISO-8859-1');
```

```response title=Response
┌─convertChars⋯SO-8859-1')─┐
│ Caf�                     │
└──────────────────────────┘
```

","1.1","String"
"25.9.2.1","arrayRandomSample",0,0,"","","System","Returns a subset with `samples`-many random elements of an input array. If `samples` exceeds the size of the input array, the sample size is limited to the size of the array, i.e. all array elements are returned but their order is not guaranteed. The function can handle both flat arrays and nested arrays.","arrayRandomSample(arr, samples)","- `arr` — The input array or multidimensional array from which to sample elements. [`Array(T)`](/sql-reference/data-types/array)
- `samples` — The number of elements to include in the random sample. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","An array containing a random sample of elements from the input array [`Array(T)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT arrayRandomSample(['apple', 'banana', 'cherry', 'date'], 2) as res;
```

```response title=Response
['cherry','apple']
```

**Using a multidimensional array**

```sql title=Query
SELECT arrayRandomSample([[1, 2], [3, 4], [5, 6]], 2) as res;
```

```response title=Response
[[3,4],[5,6]]
```

","23.10","Arrays"
"25.9.2.1","cosh",0,0,"","","System","
Returns the hyperbolic cosine of the argument.
","cosh(x)","- `x` — The angle, in radians. Values from the interval: `-∞ < x < +∞`. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal*`](/sql-reference/data-types/decimal)
","","Returns values from the interval: `1 ≤ cosh(x) < +∞` [`Float64`](/sql-reference/data-types/float)","**Basic usage**

```sql title=Query
SELECT cosh(0)
```

```response title=Response
1
```

","20.12","Mathematical"
"25.9.2.1","countDigits",0,0,"","","System","
Returns the number of decimal digits needed to represent a value.

:::note
This function takes into account the scales of decimal values i.e., it calculates the result over the underlying integer type which is `(value * scale)`.

For example:
- `countDigits(42) = 2`
- `countDigits(42.000) = 5`
- `countDigits(0.04200) = 4`
:::

:::tip
You can check decimal overflow for `Decimal64` with `countDigits(x) > 18`,
although it is slower than [`isDecimalOverflow`](#isDecimalOverflow).
:::
","countDigits(x)","- `x` — An integer or decimal value. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Decimal`](/sql-reference/data-types/decimal)
","","Returns the number of digits needed to represent `x`. [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT countDigits(toDecimal32(1, 9)), countDigits(toDecimal32(-1, 9)),
       countDigits(toDecimal64(1, 18)), countDigits(toDecimal64(-1, 18)),
       countDigits(toDecimal128(1, 38)), countDigits(toDecimal128(-1, 38));
```

```response title=Response
┌─countDigits(toDecimal32(1, 9))─┬─countDigits(toDecimal32(-1, 9))─┬─countDigits(toDecimal64(1, 18))─┬─countDigits(toDecimal64(-1, 18))─┬─countDigits(toDecimal128(1, 38))─┬─countDigits(toDecimal128(-1, 38))─┐
│                             10 │                              10 │                              19 │                               19 │                               39 │                                39 │
└────────────────────────────────┴─────────────────────────────────┴─────────────────────────────────┴──────────────────────────────────┴──────────────────────────────────┴───────────────────────────────────┘
```

","20.8","Decimal"
"25.9.2.1","getClientHTTPHeader",0,0,"","","System","
Gets the value of an HTTP header.
If there is no such header or the current request is not performed via the HTTP interface, the function returns an empty string.
Certain HTTP headers (e.g., `Authentication` and `X-ClickHouse-*`) are restricted.

:::note Setting `allow_get_client_http_header` is required
The function requires the setting `allow_get_client_http_header` to be enabled.
The setting is not enabled by default for security reasons, because some headers, such as `Cookie`, could contain sensitive info.
:::

HTTP headers are case sensitive for this function.
If the function is used in the context of a distributed query, it returns non-empty result only on the initiator node.
","getClientHTTPHeader(name)","- `name` — The HTTP header name. [`String`](/sql-reference/data-types/string)
","","Returns the value of the header. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT getClientHTTPHeader('Content-Type');
```

```response title=Response
┌─getClientHTTPHeader('Content-Type')─┐
│ application/x-www-form-urlencoded   │
└─────────────────────────────────────┘
```

","24.5","Other"
"25.9.2.1","e",0,0,"","","System","
Returns Euler's constant (e).
","e()","","","Returns Euler's constant [`Float64`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT e();
```

```response title=Response
2.718281828459045
```

","1.1","Mathematical"
"25.9.2.1","polygonPerimeterCartesian",0,0,"","","System","","","","","","","",""
"25.9.2.1","currentDatabase",0,0,"","","System","
Returns the name of the current database.
Useful in table engine parameters of `CREATE TABLE` queries where you need to specify the database.

Also see the [`SET` statement](/sql-reference/statements/use).
    ","currentDatabase()","","","Returns the current database name. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT currentDatabase()
```

```response title=Response
┌─currentDatabase()─┐
│ default           │
└───────────────────┘
```

","1.1","Other"
"25.9.2.1","currentRoles",0,0,"","","System","
Returns an array of the roles which are assigned to the current user.
    ","currentRoles()","","","Returns an array of the roles which are assigned to the current user. [`Array(String)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT currentRoles();
```

```response title=Response
┌─currentRoles()─────────────────────────────────┐
│ ['sql-console-role:jane.smith@clickhouse.com'] │
└────────────────────────────────────────────────┘
```

","21.9","Other"
"25.9.2.1","h3ExactEdgeLengthKm",0,0,"","","System","","","","","","","",""
"25.9.2.1","positiveModulo",0,1,"","","System","
Calculates the remainder when dividing `x` by `y`. Similar to function
`modulo` except that `positiveModulo` always return non-negative number.
    ","positiveModulo(x, y)","- `x` — The dividend. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
- `y` — The divisor (modulus). [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
","","Returns the difference between `x` and the nearest integer not greater than
`x` divisible by `y`.","**Usage example**

```sql title=Query
SELECT positiveModulo(-1, 10)
```

```response title=Response
9
```

","22.11","Arithmetic"
"25.9.2.1","isMergeTreePartCoveredBy",0,1,"","","System","
Function which checks if the part of the first argument is covered by the part of the second argument.
    ","isMergeTreePartCoveredBy(nested_part, covering_part)","- `nested_part` — Name of expected nested part. [`String`](/sql-reference/data-types/string)
- `covering_part` — Name of expected covering part. [`String`](/sql-reference/data-types/string)
","","Returns `1` if it covers, `0` otherwise. [`UInt8`](/sql-reference/data-types/int-uint)","**Basic example**

```sql title=Query
WITH 'all_12_25_7_4' AS lhs, 'all_7_100_10_20' AS rhs
SELECT isMergeTreePartCoveredBy(rhs, lhs), isMergeTreePartCoveredBy(lhs, rhs);
```

```response title=Response
┌─isMergeTreePartCoveredBy(rhs, lhs)─┬─isMergeTreePartCoveredBy(lhs, rhs)─┐
│                                  0 │                                  1 │
└────────────────────────────────────┴────────────────────────────────────┘
```

","25.6","Introspection"
"25.9.2.1","bitmaskToList",0,0,"","","System","
Like bitmaskToArray but returns the powers of two as a comma-separated string.
    ","bitmaskToList(num)","- `num` — An integer value. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns a string containing comma-separated powers of two. [`String`](/sql-reference/data-types/string)","**Basic example**

```sql title=Query
SELECT bitmaskToList(50) AS powers_list
```

```response title=Response
┌─powers_list───┐
│ 2, 16, 32     │
└───────────────┘
```

","1.1","Encoding"
"25.9.2.1","bitmaskToArray",0,0,"","","System","
This function decomposes an integer into a sum of powers of two.
The powers of two are returned as an ascendingly ordered array.
    ","bitmaskToArray(num)","- `num` — An integer value. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns an array with the ascendingly ordered powers of two which sum up to the input number. [`Array(UInt64)`](/sql-reference/data-types/array)","**Basic example**

```sql title=Query
SELECT bitmaskToArray(50) AS powers_of_two
```

```response title=Response
┌─powers_of_two───┐
│ [2, 16, 32]     │
└─────────────────┘
```

**Single power of two**

```sql title=Query
SELECT bitmaskToArray(8) AS powers_of_two
```

```response title=Response
┌─powers_of_two─┐
│ [8]           │
└───────────────┘
```

","1.1","Encoding"
"25.9.2.1","bitPositionsToArray",0,0,"","","System","
This function returns the positions (in ascending order) of the 1 bits in the binary representation of an unsigned integer.
Signed input integers are first casted to an unsigned integer.
    ","bitPositionsToArray(arg)","- `arg` — An integer value. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns an array with the ascendingly ordered positions of 1 bits in the binary representation of the input. [`Array(UInt64)`](/sql-reference/data-types/array)","**Single bit set**

```sql title=Query
SELECT bitPositionsToArray(toInt8(1)) AS bit_positions
```

```response title=Response
┌─bit_positions─┐
│ [0]           │
└───────────────┘
```

**All bits set**

```sql title=Query
SELECT bitPositionsToArray(toInt8(-1)) AS bit_positions
```

```response title=Response
┌─bit_positions─────────────┐
│ [0, 1, 2, 3, 4, 5, 6, 7]  │
└───────────────────────────┘
```

","21.7","Encoding"
"25.9.2.1","currentSchemas",0,1,"","","System","
Same as function [`currentDatabase`](#currentDatabase) but
- accepts a boolean argument which is ignored
- returns the database name as an array with a single value.

Function `currentSchemas` only exists for compatibility with PostgreSQL.
Please use `currentDatabase` instead.

Also see the [`SET` statement](/sql-reference/statements/use).
    ","currentSchemas(bool)","- `bool` — A boolean value, which is ignored. [`Bool`](/sql-reference/data-types/boolean)
","","Returns a single-element array with the name of the current database. [`Array(String)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT currentSchemas(true)
```

```response title=Response
┌─currentSchemas(true)─┐
│ ['default']          │
└──────────────────────┘
```

","23.7","Other"
"25.9.2.1","currentUser",0,0,"","","System","
Returns the name of the current user.
In case of a distributed query, the name of the user who initiated the query is returned.
    ","currentUser()","","","Returns the name of the current user, otherwise the login of the user who initiated the query. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT currentUser()
```

```response title=Response
┌─currentUser()─┐
│ default       │
└───────────────┘
```

","20.1","Other"
"25.9.2.1","age",0,1,"","","System","
Returns the unit component of the difference between `startdate` and `enddate`.
The difference is calculated using a precision of 1 nanosecond.

For example, the difference between 2021-12-29 and 2022-01-01 is 3 days for the day unit,
0 months for the month unit, and 0 years for the year unit.

For an alternative to age, see function [`timeDiff`](#timeDiff).
    ","age('unit', startdate, enddate, [timezone])","- `unit` — The type of interval for result.

| Unit        | Possible values                          |
|-------------|------------------------------------------|
| nanosecond  | `nanosecond`, `nanoseconds`, `ns`        |
| microsecond | `microsecond`, `microseconds`, `us`, `u` |
| millisecond | `millisecond`, `milliseconds`, `ms`      |
| second      | `second`, `seconds`, `ss`, `s`           |
| minute      | `minute`, `minutes`, `mi`, `n`           |
| hour        | `hour`, `hours`, `hh`, `h`               |
| day         | `day`, `days`, `dd`, `d`                 |
| week        | `week`, `weeks`, `wk`, `ww`              |
| month       | `month`, `months`, `mm`, `m`             |
| quarter     | `quarter`, `quarters`, `qq`, `q`         |
| year        | `year`, `years`, `yyyy`, `yy`            |
 - `startdate` — The first time value to subtract (the subtrahend). [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
- `enddate` — The second time value to subtract from (the minuend). [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
- `timezone` — Optional. Timezone name. If specified, it is applied to both startdate and enddate. If not specified, timezones of startdate and enddate are used. If they are not the same, the result is unspecified. [`String`](/sql-reference/data-types/string)
","","Returns the difference between enddate and startdate expressed in unit. [`Int32`](/sql-reference/data-types/int-uint)","**Calculate age in hours**

```sql title=Query
SELECT age('hour', toDateTime('2018-01-01 22:30:00'), toDateTime('2018-01-02 23:00:00'))
```

```response title=Response
┌─age('hour', toDateTime('2018-01-01 22:30:00'), toDateTime('2018-01-02 23:00:00'))─┐
│                                                                                24 │
└───────────────────────────────────────────────────────────────────────────────────┘
```

**Calculate age in different units**

```sql title=Query
SELECT
    toDate('2022-01-01') AS e,
    toDate('2021-12-29') AS s,
    age('day', s, e) AS day_age,
    age('month', s, e) AS month_age,
    age('year', s, e) AS year_age
```

```response title=Response
┌──────────e─┬──────────s─┬─day_age─┬─month_age─┬─year_age─┐
│ 2022-01-01 │ 2021-12-29 │       3 │         0 │        0 │
└────────────┴────────────┴─────────┴───────────┴──────────┘
```

","23.1","Dates and Times"
"25.9.2.1","cos",0,1,"","","System","
Returns the cosine of the argument.
","cos(x)","- `x` — The angle in radians. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal*`](/sql-reference/data-types/decimal)
","","Returns the cosine of `x`. [`Float*`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT cos(0);
```

```response title=Response
1
```

","1.1","Mathematical"
"25.9.2.1","stringToH3",0,0,"","","System","","","","","","","",""
"25.9.2.1","dateName",0,1,"","","System","
Returns the specified part of the date.

Possible values:
- 'year'
- 'quarter'
- 'month'
- 'week'
- 'dayofyear'
- 'day'
- 'weekday'
- 'hour'
- 'minute'
- 'second'
    ","dateName(date_part, date[, timezone])","- `date_part` — The part of the date that you want to extract. [`String`](/sql-reference/data-types/string)
- `datetime` — A date or date with time value. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
- `timezone` — Optional. Timezone. [`String`](/sql-reference/data-types/string)
","","Returns the specified part of date. [`String`](/sql-reference/data-types/string)","**Extract different date parts**

```sql title=Query
WITH toDateTime('2021-04-14 11:22:33') AS date_value
SELECT
    dateName('year', date_value),
    dateName('month', date_value),
    dateName('day', date_value)
```

```response title=Response
┌─dateName('year', date_value)─┬─dateName('month', date_value)─┬─dateName('day', date_value)─┐
│ 2021                         │ April                         │ 14                          │
└──────────────────────────────┴───────────────────────────────┴─────────────────────────────┘
```

","21.7","Dates and Times"
"25.9.2.1","assumeNotNull",0,0,"","","System","
Returns the corresponding non-`Nullable` value for a value of type [`Nullable`](../data-types/nullable.md).
If the original value is `NULL`, an arbitrary result can be returned.

See also: functions [`ifNull`](#ifNull) and [`coalesce`](#coalesce).
    ","assumeNotNull(x)","- `x` — The original value of any nullable type. [`Nullable(T)`](/sql-reference/data-types/nullable)
","","Returns the non-nullable value, if the original value was not `NULL`, otherwise an arbitrary value, if the input value is `NULL`. [`Any`](/sql-reference/data-types)","**Usage example**

```sql title=Query
CREATE TABLE t_null (x Int8, y Nullable(Int8))
ENGINE=MergeTree()
ORDER BY x;

INSERT INTO t_null VALUES (1, NULL), (2, 3);

SELECT assumeNotNull(y) FROM table;
SELECT toTypeName(assumeNotNull(y)) FROM t_null;
```

```response title=Response
┌─assumeNotNull(y)─┐
│                0 │
│                3 │
└──────────────────┘
┌─toTypeName(assumeNotNull(y))─┐
│ Int8                         │
│ Int8                         │
└──────────────────────────────┘
```

","1.1","Null"
"25.9.2.1","changeSecond",0,0,"","","System","Changes the second component of a date or date time.","changeSecond(date_or_datetime, value)","- `date_or_datetime` — The value to change. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
- `value` — The new value. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns a value of the same type as `date_or_datetime` with modified seconds component. [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)","**Usage example**

```sql title=Query
SELECT changeSecond('2024-01-01 12:30:45'::DateTime, 15)
```

```response title=Response
2024-01-01 12:30:15
```

","24.7","Dates and Times"
"25.9.2.1","dateTime64ToSnowflakeID",0,0,"","","System","
Converts a [`DateTime64`](../data-types/datetime64.md) to the first [Snowflake ID](https://en.wikipedia.org/wiki/Snowflake_ID) at the giving time.

See section [""Snowflake ID generation""](#snowflake-id-generation) for implementation details.
    ","dateTime64ToSnowflakeID(value[, epoch])","- `value` — Date with time. [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
- `epoch` — Epoch of the Snowflake ID in milliseconds since 1970-01-01. Defaults to 0 (1970-01-01). For the Twitter/X epoch (2015-01-01), provide 1288834974657. [`UInt*`](/sql-reference/data-types/int-uint)
","","Returns the input value as the first Snowflake ID at that time. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT toDateTime64('2025-08-15 18:57:56.493', 3, 'Asia/Shanghai') AS dt, dateTime64ToSnowflakeID(dt) AS res;
```

```response title=Response
┌──────────────────────dt─┬─────────────────res─┐
│ 2025-08-15 18:57:56.493 │ 7362075066076495872 │
└─────────────────────────┴─────────────────────┘
```

","24.6","UUID"
"25.9.2.1","xxHash32",0,0,"","","System","
Calculates a [xxHash](http://cyan4973.github.io/xxHash/) from a string.

For the 64-bit version see [`xxHash64`](#xxHash64)
","xxHash32(arg)","- `arg` — Input string to hash. [`String`](/sql-reference/data-types/string)
","","Returns the computed 32-bit hash of the input string. [`UInt32`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT xxHash32('Hello, world!');
```

```response title=Response
┌─xxHash32('Hello, world!')─┐
│                 834093149 │
└───────────────────────────┘
```

","20.1","Hash"
"25.9.2.1","dateTimeToSnowflakeID",0,0,"","","System","
Converts a [DateTime](../data-types/datetime.md) value to the first [Snowflake ID](https://en.wikipedia.org/wiki/Snowflake_ID) at the giving time.
    ","dateTimeToSnowflakeID(value[, epoch])","- `value` — Date with time. [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
- `epoch` — Optional. Epoch of the Snowflake ID in milliseconds since 1970-01-01. Defaults to 0 (1970-01-01). For the Twitter/X epoch (2015-01-01), provide 1288834974657. [`UInt*`](/sql-reference/data-types/int-uint)
","","Returns the input value as the first Snowflake ID at that time. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT toDateTime('2021-08-15 18:57:56', 'Asia/Shanghai') AS dt, dateTimeToSnowflakeID(dt) AS res;
```

```response title=Response
┌──────────────────dt─┬─────────────────res─┐
│ 2021-08-15 18:57:56 │ 6832626392367104000 │
└─────────────────────┴─────────────────────┘
```

","24.6","UUID"
"25.9.2.1","neighbor",0,0,"","","System","
Returns a value from a column at a specified offset from the current row.
This function is deprecated and error-prone because it operates on the physical order of data blocks which may not correspond to the logical order expected by users.
Consider using proper window functions instead.

The function can be enabled by setting `allow_deprecated_error_prone_window_functions = 1`.
","neighbor(column, offset[, default_value])","- `column` — The source column. [`Any`](/sql-reference/data-types)
- `offset` — The offset from the current row. Positive values look forward, negative values look backward. [`Integer`](/sql-reference/data-types/int-uint)
- `default_value` — Optional. The value to return if the offset goes beyond the data bounds. If not specified, uses the default value for the column type. [`Any`](/sql-reference/data-types)
","","Returns a value from the specified offset, or default if out of bounds. [`Any`](/sql-reference/data-types)","**Usage example**

```sql title=Query
SELECT number, neighbor(number, 2) FROM system.numbers LIMIT 10;
```

```response title=Response
┌─number─┬─neighbor(number, 2)─┐
│      0 │                   2 │
│      1 │                   3 │
│      2 │                   4 │
│      3 │                   5 │
│      4 │                   6 │
│      5 │                   7 │
│      6 │                   8 │
│      7 │                   9 │
│      8 │                   0 │
│      9 │                   0 │
└────────┴─────────────────────┘
```

**With default value**

```sql title=Query
SELECT number, neighbor(number, 2, 999) FROM system.numbers LIMIT 10;
```

```response title=Response
┌─number─┬─neighbor(number, 2, 999)─┐
│      0 │                        2 │
│      1 │                        3 │
│      2 │                        4 │
│      3 │                        5 │
│      4 │                        6 │
│      5 │                        7 │
│      6 │                        8 │
│      7 │                        9 │
│      8 │                      999 │
│      9 │                      999 │
└────────┴──────────────────────────┘
```

","20.1","Other"
"25.9.2.1","sipHash64Keyed",0,0,"","","System","
Like [`sipHash64`](#sipHash64) but additionally takes an explicit key argument instead of using a fixed key.
","sipHash64Keyed((k0, k1), arg1[,arg2, ...])","- `(k0, k1)` — A tuple of two values representing the key. [`Tuple(UInt64, UInt64)`](/sql-reference/data-types/tuple)
- `arg1[,arg2, ...]` — A variable number of input arguments. [`Any`](/sql-reference/data-types)
","","Returns the computed hash of the input values. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT sipHash64Keyed((506097522914230528, 1084818905618843912), array('e','x','a'), 'mple', 10, toDateTime('2019-06-15 23:00:00')) AS SipHash, toTypeName(SipHash) AS type;
```

```response title=Response
┌─────────────SipHash─┬─type───┐
│ 8017656310194184311 │ UInt64 │
└─────────────────────┴────────┘
```

","23.2","Hash"
"25.9.2.1","extractAll",0,0,"","","System","
Like [`extract`](#extract), but returns an array of all matches of a regular expression in a string.
If 'haystack' doesn't match the 'pattern' regex, an empty array is returned.

If the regular expression has capturing groups (sub-patterns), the function matches the input string against the first capturing group.
    ","extractAll(haystack, pattern)","- `haystack` — String from which to extract fragments. [`String`](/sql-reference/data-types/string)
- `pattern` — Regular expression, optionally containing capturing groups. [`const String`](/sql-reference/data-types/string)
","","Returns array of extracted fragments. [`Array(String)`](/sql-reference/data-types/array)","**Extract all numbers**

```sql title=Query
SELECT extractAll('hello 123 world 456', '[0-9]+')
```

```response title=Response
┌─extractAll('hello 123 world 456', '[0-9]+')─┐
│ ['123','456']                               │
└─────────────────────────────────────────────┘
```

**Extract using capturing group**

```sql title=Query
SELECT extractAll('test@example.com, user@domain.org', '([a-zA-Z0-9]+)@')
```

```response title=Response
┌─extractAll('test@example.com, user@domain.org', '([a-zA-Z0-9]+)@')─┐
│ ['test','user']                                                    │
└────────────────────────────────────────────────────────────────────┘
```

","1.1","String Search"
"25.9.2.1","__bitWrapperFunc",0,0,"","","System","","","","","","","",""
"25.9.2.1","lemmatize",0,0,"","","System","","","","","","","",""
"25.9.2.1","dateTrunc",0,0,"","","System","
Truncates a date and time value to the specified part of the date.
    ","dateTrunc(unit, datetime[, timezone])","- `unit` — 
The type of interval to truncate the result. `unit` argument is case-insensitive.
| Unit         | Compatibility                   |
|--------------|---------------------------------|
| `nanosecond` | Compatible only with DateTime64 |
| `microsecond`| Compatible only with DateTime64 |
| `millisecond`| Compatible only with DateTime64 |
| `second`     |                                 |
| `minute`     |                                 |
| `hour`       |                                 |
| `day`        |                                 |
| `week`       |                                 |
| `month`      |                                 |
| `quarter`    |                                 |
| `year`       |                                 |
 [`String`](/sql-reference/data-types/string)
- `datetime` — Date and time. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
- `timezone` — Optional. Timezone name for the returned datetime. If not specified, the function uses the timezone of the `datetime` parameter. [`String`](/sql-reference/data-types/string)
","","Returns the truncated date and time value.

| Unit Argument               | `datetime` Argument                   | Return Type                                                                            |
|-----------------------------|---------------------------------------|----------------------------------------------------------------------------------------|
| Year, Quarter, Month, Week  | `Date32` or `DateTime64` or `Date` or `DateTime` | [`Date32`](../data-types/date32.md) or [`Date`](../data-types/date.md)                 |
| Day, Hour, Minute, Second   | `Date32`, `DateTime64`, `Date`, or `DateTime` | [`DateTime64`](../data-types/datetime64.md) or [`DateTime`](../data-types/datetime.md) |
| Millisecond, Microsecond,   | Any                                   | [`DateTime64`](../data-types/datetime64.md)                                            |
| Nanosecond                  |                                       | with scale 3, 6, or 9                                                                  |","**Truncate without timezone**

```sql title=Query
SELECT now(), dateTrunc('hour', now());
```

```response title=Response
┌───────────────now()─┬─dateTrunc('hour', now())──┐
│ 2020-09-28 10:40:45 │       2020-09-28 10:00:00 │
└─────────────────────┴───────────────────────────┘
```

**Truncate with specified timezone**

```sql title=Query
SELECT now(), dateTrunc('hour', now(), 'Asia/Istanbul');
```

```response title=Response
┌───────────────now()─┬─dateTrunc('hour', now(), 'Asia/Istanbul')──┐
│ 2020-09-28 10:46:26 │                        2020-09-28 13:00:00 │
└─────────────────────┴────────────────────────────────────────────┘
```

","20.8","Dates and Times"
"25.9.2.1","toNullable",0,0,"","","System","
Converts the provided argument type to `Nullable`.
    ","toNullable(x)","- `x` — A value of any non-compound type. [`Any`](/sql-reference/data-types)
","","Returns the input value but of `Nullable` type. [`Nullable(Any)`](/sql-reference/data-types/nullable)","**Usage example**

```sql title=Query
SELECT toTypeName(10), toTypeName(toNullable(10));
```

```response title=Response
┌─toTypeName(10)─┬─toTypeName(toNullable(10))─┐
│ UInt8          │ Nullable(UInt8)            │
└────────────────┴────────────────────────────┘
```

","1.1","Null"
"25.9.2.1","formatReadableSize",0,0,"","","System","
Given a size (number of bytes), this function returns a readable, rounded size with suffix (KiB, MiB, etc.) as string.

The opposite operations of this function are [`parseReadableSize`](#parseReadableSize), [`parseReadableSizeOrZero`](#parseReadableSizeOrZero), and [`parseReadableSizeOrNull`](#parseReadableSizeOrNull).
This function accepts any numeric type as input, but internally it casts them to `Float64`. Results might be suboptimal with large values.
    ","formatReadableSize(x)","- `x` — Size in bytes. [`UInt64`](/sql-reference/data-types/int-uint)
","","Returns a readable, rounded size with suffix as a string. [`String`](/sql-reference/data-types/string)","**Format file sizes**

```sql title=Query
SELECT
    arrayJoin([1, 1024, 1024*1024, 192851925]) AS filesize_bytes,
    formatReadableSize(filesize_bytes) AS filesize
```

```response title=Response
┌─filesize_bytes─┬─filesize───┐
│              1 │ 1.00 B     │
│           1024 │ 1.00 KiB   │
│        1048576 │ 1.00 MiB   │
│      192851925 │ 183.92 MiB │
└────────────────┴────────────┘
```

","1.1","Other"
"25.9.2.1","toInt256OrNull",0,0,"","","System","
Like [`toInt256`](#toInt256), this function converts an input value to a value of type [Int256](../data-types/int-uint.md) but returns `NULL` in case of an error.

Supported arguments:
- String representations of (U)Int*.

Unsupported arguments (return `NULL`):
- String representations of Float* values, including `NaN` and `Inf`.
- String representations of binary and hexadecimal values, e.g. `SELECT toInt256OrNull('0xc0fe');`.

:::note
If the input value cannot be represented within the bounds of [Int256](../data-types/int-uint.md), overflow or underflow of the result occurs.
This is not considered an error.
:::

See also:
- [`toInt256`](#toInt256).
- [`toInt256OrZero`](#toInt256OrZero).
- [`toInt256OrDefault`](#toInt256OrDefault).
    ","toInt256OrNull(x)","- `x` — A String representation of a number. [`String`](/sql-reference/data-types/string)
","","Returns a value of type Int256, otherwise `NULL` if the conversion is unsuccessful. [`Int256`](/sql-reference/data-types/int-uint) or [`NULL`](/sql-reference/syntax#null)","**Usage example**

```sql title=Query
SELECT
    toInt256OrNull('-256'),
    toInt256OrNull('abc')
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toInt256OrNull('-256'): -256
toInt256OrNull('abc'):  \N
```

","20.8","Type Conversion"
"25.9.2.1","toUInt32",0,0,"","","System","
Converts an input value to a value of type [`UInt32`](../data-types/int-uint.md).
Throws an exception in case of an error.

Supported arguments:
- Values or string representations of type (U)Int*.
- Values of type Float*.

Unsupported arguments:
- String representations of Float* values, including `NaN` and `Inf`.
- String representations of binary and hexadecimal values, e.g. `SELECT toUInt32('0xc0fe');`.

:::note
If the input value cannot be represented within the bounds of [`UInt32`](../data-types/int-uint.md), the result over or under flows.
This is not considered an error.
For example: `SELECT toUInt32(4294967296) == 0;`
:::

:::note
The function uses [rounding towards zero](https://en.wikipedia.org/wiki/Rounding#Rounding_towards_zero), meaning it truncates fractional digits of numbers.
:::

See also:
- [`toUInt32OrZero`](#toUInt32OrZero).
- [`toUInt32OrNull`](#toUInt32OrNull).
- [`toUInt32OrDefault`](#toUInt32OrDefault).
    ","toUInt32(expr)","- `expr` — Expression returning a number or a string representation of a number. [`Expression`](/sql-reference/data-types/special-data-types/expression)
","","Returns a 32-bit unsigned integer value. [`UInt32`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT
    toUInt32(32),
    toUInt32(32.32),
    toUInt32('32')
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toUInt32(32):    32
toUInt32(32.32): 32
toUInt32('32'):  32
```

","1.1","Type Conversion"
"25.9.2.1","decodeHTMLComponent",0,0,"","","System","
Decodes HTML entities in a string to their corresponding characters.
","decodeHTMLComponent(s)","- `s` — String containing HTML entities to decode. [`String`](/sql-reference/data-types/string)
","","Returns the string with HTML entities decoded. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT decodeHTMLComponent('&lt;div&gt;Hello &amp; &quot;World&quot;&lt;/div&gt;')
```

```response title=Response
┌─decodeHTMLComponent('&lt;div&gt;Hello &amp; &quot;World&quot;&lt;/div&gt;')─┐
│ <div>Hello & ""World""</div>                                                  │
└─────────────────────────────────────────────────────────────────────────────┘
```

","23.9","String"
"25.9.2.1","numericIndexedVectorShortDebugString",0,0,"","","System","
Returns internal information of the numericIndexedVector in JSON format.
This function is primarily used for debugging purposes.
        ","numericIndexedVectorShortDebugString(numericIndexedVector)","- `numericIndexedVector` — A numericIndexedVector object. [`numericIndexedVector`](/sql-reference/functions/#create-numeric-indexed-vector-object)
","","Returns a JSON string containing debug information. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT numericIndexedVectorShortDebugString(numericIndexedVectorBuild(mapFromArrays([1, 2, 3], [10, 20, 30]))) AS res\G;
```

```response title=Response
Row 1:
──────
res: {""vector_type"":""BSI"",""index_type"":""char8_t"",""value_type"":""char8_t"",""integer_bit_num"":8,""fraction_bit_num"":0,""zero_indexes_info"":{""cardinality"":""0""},""non_zero_indexes_info"":{""total_cardinality"":""3"",""all_value_sum"":60,""number_of_bitmaps"":""8"",""bitmap_info"":{""cardinality"":{""0"":""0"",""1"":""2"",""2"":""2"",""3"":""2"",""4"":""2"",""5"":""0"",""6"":""0"",""7"":""0""}}}}
```

","25.7","NumericIndexedVector"
"25.9.2.1","numericIndexedVectorPointwiseGreater",0,0,"","","System","
Performs pointwise comparison between a numericIndexedVector and either another numericIndexedVector or a numeric constant.
The result is a numericIndexedVector containing the indices where the first vector's value is greater than the second vector's value, with all corresponding values set to 1.
        ","numericIndexedVectorPointwiseGreater(v1, v2)","- `v1` — A numericIndexedVector object. [`numericIndexedVector`](/sql-reference/functions/#create-numeric-indexed-vector-object)
- `v2` — A numeric constant or numericIndexedVector object. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`numericIndexedVector`](/sql-reference/functions/#create-numeric-indexed-vector-object)
","","Returns a new numericIndexedVector object. [`numericIndexedVector`](/sql-reference/functions/#create-numeric-indexed-vector-object)","**Usage example**

```sql title=Query
with
    numericIndexedVectorBuild(mapFromArrays([1, 2, 3], arrayMap(x -> toFloat64(x), [10, 20, 50]))) as vec1,
    numericIndexedVectorBuild(mapFromArrays([2, 3, 4], arrayMap(x -> toFloat64(x), [20, 40, 30]))) as vec2
SELECT
    numericIndexedVectorToMap(numericIndexedVectorPointwiseGreater(vec1, vec2)) AS res1,
    numericIndexedVectorToMap(numericIndexedVectorPointwiseGreater(vec1, 20)) AS res2;
```

```response title=Response
┌─res1──────┬─res2──┐
│ {1:1,3:1} │ {3:1} │
└───────────┴───────┘
```

","25.7","NumericIndexedVector"
"25.9.2.1","timeSeriesRange",0,0,"","","System","
Generates a range of timestamps [start_timestamp, start_timestamp + step, start_timestamp + 2 * step, ..., end_timestamp].

If `start_timestamp` is equal to `end_timestamp`, the function returns a 1-element array containing `[start_timestamp]`.

Function `timeSeriesRange()` is similar to function [range](../functions/array-functions.md#range).
","timeSeriesRange(start_timestamp, end_timestamp, step)","- `start_timestamp` — Start of the range. [`DateTime64`](/sql-reference/data-types/datetime64) or [`DateTime`](/sql-reference/data-types/datetime) or [`UInt32`](/sql-reference/data-types/int-uint)
- `end_timestamp` — End of the range. [`DateTime64`](/sql-reference/data-types/datetime64) or [`DateTime`](/sql-reference/data-types/datetime) or [`UInt32`](/sql-reference/data-types/int-uint)
- `step` — Step of the range in seconds [`UInt32/64`](/sql-reference/data-types/int-uint) or [`Decimal32/64`](/sql-reference/data-types/decimal)
","","Returns a range of timestamps. [`Array(DateTime64)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT timeSeriesRange('2025-06-01 00:00:00'::DateTime64(3), '2025-06-01 00:01:00'::DateTime64(3), 30)
```

```response title=Response
┌────────────────────────────────────result─────────────────────────────────────────┐
│ ['2025-06-01 00:00:00.000', '2025-06-01 00:00:30.000', '2025-06-01 00:01:00.000'] │
└───────────────────────────────────────────────────────────────────────────────────┘
```

","25.8","Time Series"
"25.9.2.1","numericIndexedVectorPointwiseLess",0,0,"","","System","
Performs pointwise comparison between a numericIndexedVector and either another numericIndexedVector or a numeric constant.
The result is a numericIndexedVector containing the indices where the first vector's value is less than the second vector's value, with all corresponding values set to 1.
        ","numericIndexedVectorPointwiseLess(v1, v2)","- `v1` — A numericIndexedVector object. [`numericIndexedVector`](/sql-reference/functions/#create-numeric-indexed-vector-object)
- `v2` — A numeric constant or numericIndexedVector object. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns a new numericIndexedVector object. [`numericIndexedVector`](/sql-reference/functions/#create-numeric-indexed-vector-object)","**Usage example**

```sql title=Query
with
    numericIndexedVectorBuild(mapFromArrays([1, 2, 3], arrayMap(x -> toFloat64(x), [10, 20, 30]))) as vec1,
    numericIndexedVectorBuild(mapFromArrays([2, 3, 4], arrayMap(x -> toFloat64(x), [20, 40, 30]))) as vec2
SELECT
    numericIndexedVectorToMap(numericIndexedVectorPointwiseLess(vec1, vec2)) AS res1,
    numericIndexedVectorToMap(numericIndexedVectorPointwiseLess(vec1, 20)) AS res2;
```

```response title=Response
┌─res1──────┬─res2──┐
│ {3:1,4:1} │ {1:1} │
└───────────┴───────┘
```

","25.7","NumericIndexedVector"
"25.9.2.1","h3HexAreaM2",0,0,"","","System","
Returns average hexagon area in square meters at the given [H3](#h3-index) resolution.
    ","h3HexAreaM2(resolution)","- `resolution` — Index resolution with range `[0, 15]`. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns the average area of an H3 hexagon in square meters for the given resolution. [`Float64`](/sql-reference/data-types/float)","**Get hexagon area at resolution 13**

```sql title=Query
SELECT h3HexAreaM2(13) AS area
```

```response title=Response
┌─area─┐
│ 43.9 │
└──────┘
```

","20.3","Geo"
"25.9.2.1","toYYYYMMDDhhmmss",0,0,"","","System","
Converts a date or date with time to a `UInt64` number containing the year and month number (YYYY * 10000000000 + MM * 100000000 + DD * 1000000 + hh * 10000 + mm * 100 + ss).
Accepts a second optional timezone argument. If provided, the timezone must be a string constant.
    ","toYYYYMMDDhhmmss(datetime[, timezone])","- `datetime` — Date or date with time to convert. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
- `timezone` — Optional. Timezone for the conversion. If provided, the timezone must be a string constant. [`String`](/sql-reference/data-types/string)
","","Returns a `UInt64` number containing the year, month, day, hour, minute and second (YYYY * 10000000000 + MM * 100000000 + DD * 1000000 + hh * 10000 + mm * 100 + ss). [`UInt64`](/sql-reference/data-types/int-uint)","**Convert current date and time to YYYYMMDDhhmmss format**

```sql title=Query
SELECT toYYYYMMDDhhmmss(now(), 'US/Eastern')
```

```response title=Response
┌─toYYYYMMDDhhmmss(now(), 'US/Eastern')─┐
│                        20230302112209 │
└───────────────────────────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","h3NumHexagons",0,0,"","","System","","","","","","","",""
"25.9.2.1","numericIndexedVectorPointwiseEqual",0,0,"","","System","
Performs pointwise comparison between a numericIndexedVector and either another numericIndexedVector or a numeric constant.
The result is a numericIndexedVector containing the indices where the values are equal, with all corresponding values set to 1.
        ","numericIndexedVectorPointwiseEqual(v1, v2)","- `v1` — A numericIndexedVector object. [`numericIndexedVector`](/sql-reference/functions/#create-numeric-indexed-vector-object)
- `v2` — A numeric constant or numericIndexedVector object. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns a new numericIndexedVector object. [`numericIndexedVector`](/sql-reference/functions/#create-numeric-indexed-vector-object)","****

```sql title=Query
with
    numericIndexedVectorBuild(mapFromArrays([1, 2, 3], arrayMap(x -> toFloat64(x), [10, 20, 30]))) as vec1,
    numericIndexedVectorBuild(mapFromArrays([2, 3, 4], arrayMap(x -> toFloat64(x), [20, 20, 30]))) as vec2
SELECT
    numericIndexedVectorToMap(numericIndexedVectorPointwiseEqual(vec1, vec2)) AS res1,
    numericIndexedVectorToMap(numericIndexedVectorPointwiseEqual(vec1, 20)) AS res2;
```

```response title=Response
┌─res1──┬─res2──┐
│ {2:1} │ {2:1} │
└───────┴───────┘
```

","25.7","NumericIndexedVector"
"25.9.2.1","JSONExtractKeysAndValues",0,0,"","","System","
Parses key-value pairs from a JSON where the values are of the given ClickHouse data type.
        ","JSONExtractKeysAndValues(json, value_type[, indices_or_keys, ...])","- `json` — JSON string to parse. [`String`](/sql-reference/data-types/string)
- `value_type` — ClickHouse data type of the values. [`String`](/sql-reference/data-types/string)
- `indices_or_keys` — A list of zero or more arguments each of which can be either string or integer. [`String`](/sql-reference/data-types/string) or [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns an array of tuples with the parsed key-value pairs. [`Array(Tuple(String, value_type))`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT JSONExtractKeysAndValues('{""x"": {""a"": 5, ""b"": 7, ""c"": 11}}', 'Int8', 'x') AS res;
```

```response title=Response
┌─res────────────────────┐
│ [('a',5),('b',7),('c',11)] │
└────────────────────────┘
```

","20.1","JSON"
"25.9.2.1","replicate",0,0,"","","System","
Creates an array with a single value.
","replicate(x, arr)","- `x` — The value to fill the result array with. [`Any`](/sql-reference/data-types)
- `arr` — An array. [`Array(T)`](/sql-reference/data-types/array)
","","Returns an array of the same length as `arr` filled with value `x`. [`Array(T)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT replicate(1, ['a', 'b', 'c']);
```

```response title=Response
┌─replicate(1, ['a', 'b', 'c'])───┐
│ [1, 1, 1]                       │
└─────────────────────────────────┘
```

","1.1","Arrays"
"25.9.2.1","extractKeyValuePairs",0,0,"","","System","Extracts key-value pairs from any string. The string does not need to be 100% structured in a key value pair format;

            It can contain noise (e.g. log files). The key-value pair format to be interpreted should be specified via function arguments.

            A key-value pair consists of a key followed by a `key_value_delimiter` and a value. Quoted keys and values are also supported. Key value pairs must be separated by pair delimiters.

            **Syntax**
            ```sql
            extractKeyValuePairs(data, [key_value_delimiter], [pair_delimiter], [quoting_character])
            ```

            **Arguments**
            - `data` - String to extract key-value pairs from. [String](../../sql-reference/data-types/string.md) or [FixedString](../../sql-reference/data-types/fixedstring.md).
            - `key_value_delimiter` - Character to be used as delimiter between the key and the value. Defaults to `:`. [String](../../sql-reference/data-types/string.md) or [FixedString](../../sql-reference/data-types/fixedstring.md).
            - `pair_delimiters` - Set of character to be used as delimiters between pairs. Defaults to `\space`, `,` and `;`. [String](../../sql-reference/data-types/string.md) or [FixedString](../../sql-reference/data-types/fixedstring.md).
            - `quoting_character` - Character to be used as quoting character. Defaults to `""`. [String](../../sql-reference/data-types/string.md) or [FixedString](../../sql-reference/data-types/fixedstring.md).
            - `unexpected_quoting_character_strategy` - Strategy to handle quoting characters in unexpected places during `read_key` and `read_value` phase. Possible values: `invalid`, `accept` and `promote`. Invalid will discard key/value and transition back to `WAITING_KEY` state. Accept will treat it as a normal character. Promote will transition to `READ_QUOTED_{KEY/VALUE}` state and start from next character. The default value is `INVALID`

            **Returned values**
            - The extracted key-value pairs in a Map(String, String).

            **Examples**

            Query:

            **Simple case**
            ```sql
            arthur :) select extractKeyValuePairs('name:neymar, age:31 team:psg,nationality:brazil') as kv

            SELECT extractKeyValuePairs('name:neymar, age:31 team:psg,nationality:brazil') as kv

            Query id: f9e0ca6f-3178-4ee2-aa2c-a5517abb9cee

            ┌─kv──────────────────────────────────────────────────────────────────────┐
            │ {'name':'neymar','age':'31','team':'psg','nationality':'brazil'}        │
            └─────────────────────────────────────────────────────────────────────────┘
            ```

            **Single quote as quoting character**
            ```sql
            arthur :) select extractKeyValuePairs('name:\'neymar\';\'age\':31;team:psg;nationality:brazil,last_key:last_value', ':', ';,', '\'') as kv

            SELECT extractKeyValuePairs('name:\'neymar\';\'age\':31;team:psg;nationality:brazil,last_key:last_value', ':', ';,', '\'') as kv

            Query id: 0e22bf6b-9844-414a-99dc-32bf647abd5e

            ┌─kv───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
            │ {'name':'neymar','age':'31','team':'psg','nationality':'brazil','last_key':'last_value'}                                 │
            └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
            ```

            unexpected_quoting_character_strategy examples:

            unexpected_quoting_character_strategy=invalid

            ```sql
            SELECT extractKeyValuePairs('name""abc:5', ':', ' ,;', '\""', 'INVALID') as kv;
            ```

            ```text
            ┌─kv────────────────┐
            │ {'abc':'5'}  │
            └───────────────────┘
            ```

            ```sql
            SELECT extractKeyValuePairs('name""abc"":5', ':', ' ,;', '\""', 'INVALID') as kv;
            ```

            ```text
            ┌─kv──┐
            │ {}  │
            └─────┘
            ```

            unexpected_quoting_character_strategy=accept

            ```sql
            SELECT extractKeyValuePairs('name""abc:5', ':', ' ,;', '\""', 'ACCEPT') as kv;
            ```

            ```text
            ┌─kv────────────────┐
            │ {'name""abc':'5'}  │
            └───────────────────┘
            ```

            ```sql
            SELECT extractKeyValuePairs('name""abc"":5', ':', ' ,;', '\""', 'ACCEPT') as kv;
            ```

            ```text
            ┌─kv─────────────────┐
            │ {'name""abc""':'5'}  │
            └────────────────────┘
            ```

            unexpected_quoting_character_strategy=promote

            ```sql
            SELECT extractKeyValuePairs('name""abc:5', ':', ' ,;', '\""', 'PROMOTE') as kv;
            ```

            ```text
            ┌─kv──┐
            │ {}  │
            └─────┘
            ```

            ```sql
            SELECT extractKeyValuePairs('name""abc"":5', ':', ' ,;', '\""', 'PROMOTE') as kv;
            ```

            ```text
            ┌─kv───────────┐
            │ {'abc':'5'}  │
            └──────────────┘
            ```

            **Escape sequences without escape sequences support**
            ```sql
            arthur :) select extractKeyValuePairs('age:a\\x0A\\n\\0') as kv

            SELECT extractKeyValuePairs('age:a\\x0A\\n\\0') AS kv

            Query id: e9fd26ee-b41f-4a11-b17f-25af6fd5d356

            ┌─kv────────────────────┐
            │ {'age':'a\\x0A\\n\\0'} │
            └───────────────────────┘
            ```","","","","","","","Map"
"25.9.2.1","h3ToChildren",0,0,"","","System","","","","","","","",""
"25.9.2.1","reinterpretAsInt128",0,0,"","","System","","","","","","","",""
"25.9.2.1","emptyArrayToSingle",0,0,"","","System","
Accepts an empty array and returns a one-element array that is equal to the default value.
    ","emptyArrayToSingle(arr)","- `arr` — An empty array. [`Array(T)`](/sql-reference/data-types/array)
","","An array with a single value of the Array's default type. [`Array(T)`](/sql-reference/data-types/array)","**Basic example**

```sql title=Query
CREATE TABLE test (
  a Array(Int32),
  b Array(String),
  c Array(DateTime)
)
ENGINE = MergeTree
ORDER BY tuple();

INSERT INTO test VALUES ([], [], []);

SELECT emptyArrayToSingle(a), emptyArrayToSingle(b), emptyArrayToSingle(c) FROM test;
```

```response title=Response
┌─emptyArrayToSingle(a)─┬─emptyArrayToSingle(b)─┬─emptyArrayToSingle(c)───┐
│ [0]                   │ ['']                  │ ['1970-01-01 01:00:00'] │
└───────────────────────┴───────────────────────┴─────────────────────────┘
```

","1.1","Arrays"
"25.9.2.1","degrees",0,1,"","","System","
Converts radians to degrees.
","degrees(x)","- `x` — Input in radians. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal*`](/sql-reference/data-types/decimal)
","","Returns the value of `x` in degrees. [`Float64`](/sql-reference/data-types/float)","**Basic usage**

```sql title=Query
SELECT degrees(3.141592653589793)
```

```response title=Response
180
```

","22.2","Mathematical"
"25.9.2.1","svg",0,0,"","","System","","","","","","","",""
"25.9.2.1","modulo",0,0,"","","System","
    Calculates the remainder of the division of two values a by b.

    The result type is an integer if both inputs are integers. If one of the
    inputs is a floating-point number, the result type is Float64.

    The remainder is computed like in C++. Truncated division is used for
    negative numbers.

    An exception is thrown when dividing by zero or when dividing a minimal
    negative number by minus one.
    ","modulo(a, b)","- `a` — The dividend - `b` — The divisor (modulus) ","","The remainder of a % b","**Usage example**

```sql title=Query
SELECT modulo(5, 2)
```

```response title=Response
1
```

","1.1","Arithmetic"
"25.9.2.1","getOSKernelVersion",0,0,"","","System","
Returns a string with the OS kernel version.
","getOSKernelVersion()","","","Returns the current OS kernel version. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT getOSKernelVersion();
```

```response title=Response
┌─getOSKernelVersion()────┐
│ Linux 4.15.0-55-generic │
└─────────────────────────┘
```

","21.11","Other"
"25.9.2.1","pathFull",0,0,"","","System","
The same as [`path`](#path), but includes the query string and fragment of the URL.
    ","pathFull(url)","- `url` — URL. [`String`](/sql-reference/data-types/string)
","","Returns the path of the URL including query string and fragment. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT pathFull('https://clickhouse.com/docs/sql-reference/functions/url-functions/?query=value#section');
```

```response title=Response
┌─pathFull('https://clickhouse.com⋯unctions/?query=value#section')─┐
│ /docs/sql-reference/functions/url-functions/?query=value#section │
└──────────────────────────────────────────────────────────────────┘
```

","1.1","URL"
"25.9.2.1","ngramMinHashArgCaseInsensitiveUTF8",0,0,"","","System","
Splits a UTF-8 string into n-grams of `ngramsize` symbols and returns the n-grams with minimum and maximum hashes, calculated by the ngramMinHashCaseInsensitiveUTF8 function with the same input.
It is case insensitive.
","ngramMinHashArgCaseInsensitiveUTF8(string[, ngramsize, hashnum])","- `string` — String for which to compute the hash. [`String`](/sql-reference/data-types/string)
- `ngramsize` — Optional. The size of an n-gram, any number from `1` to `25`. The default value is `3`. [`UInt8`](/sql-reference/data-types/int-uint)
- `hashnum` — Optional. The number of minimum and maximum hashes used to calculate the result, any number from `1` to `25`. The default value is `6`. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns a tuple with two tuples with `hashnum` n-grams each. [`Tuple(Tuple(String))`](/sql-reference/data-types/tuple)","**Usage example**

```sql title=Query
SELECT ngramMinHashArgCaseInsensitiveUTF8('ClickHouse') AS Tuple;
```

```response title=Response
┌─Tuple─────────────────────────────────────────────────────────────────────────┐
│ (('ckH','ous','ick','lic','kHo','use'),('kHo','lic','ick','ous','ckH','Hou')) │
└───────────────────────────────────────────────────────────────────────────────┘
```

","21.1","Hash"
"25.9.2.1","ngramMinHashArgUTF8",0,0,"","","System","
Splits a UTF-8 string into n-grams of `ngramsize` symbols and returns the n-grams with minimum and maximum hashes, calculated by the `ngramMinHashUTF8` function with the same input.
It is case sensitive.
","ngramMinHashArgUTF8(string[, ngramsize, hashnum])","- `string` — String for which to compute the hash. [`String`](/sql-reference/data-types/string)
- `ngramsize` — Optional. The size of an n-gram, any number from `1` to `25`. The default value is `3`. [`UInt8`](/sql-reference/data-types/int-uint)
- `hashnum` — Optional. The number of minimum and maximum hashes used to calculate the result, any number from `1` to `25`. The default value is `6`. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns a tuple with two tuples with `hashnum` n-grams each. [`Tuple(Tuple(String))`](/sql-reference/data-types/tuple)","**Usage example**

```sql title=Query
SELECT ngramMinHashArgUTF8('ClickHouse') AS Tuple;
```

```response title=Response
┌─Tuple─────────────────────────────────────────────────────────────────────────┐
│ (('ous','ick','lic','Hou','kHo','use'),('kHo','Hou','lic','ick','ous','ckH')) │
└───────────────────────────────────────────────────────────────────────────────┘
```

","21.1","Hash"
"25.9.2.1","cutToFirstSignificantSubdomainRFC",0,0,"","","System","Similar to `cutToFirstSignificantSubdomain` but follows stricter rules to be compatible with RFC 3986 and less performant.","","","","","","","URL"
"25.9.2.1","wordShingleMinHashUTF8",0,0,"","","System","
Splits a UTF-8 string into parts (shingles) of `shinglesize` words, calculates hash values for each word shingle and returns a tuple with these hashes.
Uses `hashnum` minimum hashes to calculate the minimum hash and `hashnum` maximum hashes to calculate the maximum hash.
It is case sensitive.

Can be used to detect semi-duplicate strings with [`tupleHammingDistance`](../functions/tuple-functions.md/#tuplehammingdistance).
For two strings, if the returned hashes are the same for both strings, then those strings are the same.
","wordShingleMinHashUTF8(string[, shinglesize, hashnum])","- `string` — String for which to compute the hash. [`String`](/sql-reference/data-types/string)
- `shinglesize` — Optional. The size of a word shingle, any number from `1` to `25`. The default value is `3`. [`UInt8`](/sql-reference/data-types/int-uint)
- `hashnum` — Optional. The number of minimum and maximum hashes used to calculate the result, any number from `1` to `25`. The default value is `6`. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns a tuple with two hashes — the minimum and the maximum. [`Tuple(UInt64, UInt64)`](/sql-reference/data-types/tuple)","**Usage example**

```sql title=Query
SELECT wordShingleMinHashUTF8('ClickHouse® is a column-oriented database management system (DBMS) for online analytical processing of queries (OLAP).') AS Tuple;
```

```response title=Response
┌─Tuple──────────────────────────────────────┐
│ (16452112859864147620,5844417301642981317) │
└────────────────────────────────────────────┘
```

","21.1","Hash"
"25.9.2.1","arrayDifference",0,0,"","","System","
Calculates an array of differences between adjacent array elements.
The first element of the result array will be 0, the second `arr[1] - arr[0]`, the third `arr[2] - arr[1]`, etc.
The type of elements in the result array are determined by the type inference rules for subtraction (e.g. `UInt8` - `UInt8` = `Int16`).
    ","arrayDifference(arr)","- `arr` — Array for which to calculate differences between adjacent elements. [`Array(T)`](/sql-reference/data-types/array)
","","Returns an array of differences between adjacent array elements [`UInt*`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT arrayDifference([1, 2, 3, 4]);
```

```response title=Response
[0,1,1,1]
```

**Example of overflow due to result type Int64**

```sql title=Query
SELECT arrayDifference([0, 10000000000000000000]);
```

```response title=Response
┌─arrayDifference([0, 10000000000000000000])─┐
│ [0,-8446744073709551616]                   │
└────────────────────────────────────────────┘
```

","1.1","Arrays"
"25.9.2.1","wordShingleMinHash",0,0,"","","System","
Splits a ASCII string into parts (shingles) of `shinglesize` words, calculates hash values for each word shingle and returns a tuple with these hashes.
Uses `hashnum` minimum hashes to calculate the minimum hash and `hashnum` maximum hashes to calculate the maximum hash.
It is case sensitive.

Can be used to detect semi-duplicate strings with [`tupleHammingDistance`](../functions/tuple-functions.md/#tuplehammingdistance).
For two strings, if the returned hashes are the same for both strings, then those strings are the same.
","wordShingleMinHash(string[, shinglesize, hashnum])","- `string` — String for which to compute the hash. [`String`](/sql-reference/data-types/string)
- `shinglesize` — Optional. The size of a word shingle, any number from `1` to `25`. The default value is `3`. [`UInt8`](/sql-reference/data-types/int-uint)
- `hashnum` — Optional. The number of minimum and maximum hashes used to calculate the result, any number from `1` to `25`. The default value is `6`. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns a tuple with two hashes — the minimum and the maximum. [`Tuple(UInt64, UInt64)`](/sql-reference/data-types/tuple)","**Usage example**

```sql title=Query
SELECT wordShingleMinHash('ClickHouse® is a column-oriented database management system (DBMS) for online analytical processing of queries (OLAP).') AS Tuple;
```

```response title=Response
┌─Tuple──────────────────────────────────────┐
│ (16452112859864147620,5844417301642981317) │
└────────────────────────────────────────────┘
```

","21.1","Hash"
"25.9.2.1","ngramMinHash",0,0,"","","System","
Splits a ASCII string into n-grams of `ngramsize` symbols and calculates hash values for each n-gram and returns a tuple with these hashes.
Uses `hashnum` minimum hashes to calculate the minimum hash and `hashnum` maximum hashes to calculate the maximum hash.
It is case sensitive.

Can be used to detect semi-duplicate strings with [`tupleHammingDistance`](../functions/tuple-functions.md/#tuplehammingdistance).
For two strings, if the returned hashes are the same for both strings, then those strings are the same.
","ngramMinHash(string[, ngramsize, hashnum])","- `string` — String for which to compute the hash. [`String`](/sql-reference/data-types/string)
- `ngramsize` — Optional. The size of an n-gram, any number from `1` to `25`. The default value is `3`. [`UInt8`](/sql-reference/data-types/int-uint)
- `hashnum` — Optional. The number of minimum and maximum hashes used to calculate the result, any number from `1` to `25`. The default value is `6`. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns a tuple with two hashes — the minimum and the maximum. [`Tuple`](/sql-reference/data-types/tuple)","**Usage example**

```sql title=Query
SELECT ngramMinHash('ClickHouse') AS Tuple;
```

```response title=Response
┌─Tuple──────────────────────────────────────┐
│ (18333312859352735453,9054248444481805918) │
└────────────────────────────────────────────┘
```

","21.1","Hash"
"25.9.2.1","formatRowNoNewline",0,0,"","","System","","","","","","","",""
"25.9.2.1","wordShingleSimHashCaseInsensitiveUTF8",0,0,"","","System","
Splits a UTF-8 encoded string into parts (shingles) of `shinglesize` words and returns the word shingle `simhash`.
It is case insensitive.

Can be used for detection of semi-duplicate strings with [`bitHammingDistance`](../functions/bit-functions.md/#bitHammingDistance).
The smaller the [Hamming Distance](https://en.wikipedia.org/wiki/Hamming_distance) of the calculated `simhashes` of two strings, the more likely these strings are the same.
","wordShingleSimHashCaseInsensitiveUTF8(string[, shinglesize])","- `string` — String for which to compute the hash. [`String`](/sql-reference/data-types/string)
- `shinglesize` — Optional. The size of a word shingle, any number from `1` to `25`. The default value is `3`. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns the computed hash value. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT wordShingleSimHashCaseInsensitiveUTF8('ClickHouse® is a column-oriented database management system (DBMS) for online analytical processing of queries (OLAP).') AS Hash;
```

```response title=Response
┌───────Hash─┐
│ 2194812424 │
└────────────┘
```

","1.1","Hash"
"25.9.2.1","wordShingleSimHashUTF8",0,0,"","","System","
Splits a UTF-8 string into parts (shingles) of `shinglesize` words and returns the word shingle `simhash`.
It is case sensitive.

Can be used for detection of semi-duplicate strings with [`bitHammingDistance`](../functions/bit-functions.md/#bitHammingDistance).
The smaller the [Hamming distance](https://en.wikipedia.org/wiki/Hamming_distance) of the calculated `simhashes` of two strings, the more likely these strings are the same.
","wordShingleSimHashUTF8(string[, shinglesize])","- `string` — String for which to compute the hash. [`String`](/sql-reference/data-types/string)
- `shinglesize` — Optional. The size of a word shingle, any number from `1` to `25`. The default value is `3`. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns the computed hash value. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT wordShingleSimHashUTF8('ClickHouse® is a column-oriented database management system (DBMS) for online analytical processing of queries (OLAP).') AS Hash;
```

```response title=Response
┌───────Hash─┐
│ 2328277067 │
└────────────┘
```

","21.1","Hash"
"25.9.2.1","parseDateTime32BestEffortOrNull",0,0,"","","System","
Same as [`parseDateTime32BestEffort`](#parseDateTime32BestEffort) except that it returns `NULL` when it encounters a date format that cannot be processed.
    ","parseDateTime32BestEffortOrNull(time_string[, time_zone])","- `time_string` — String containing a date and time to convert. [`String`](/sql-reference/data-types/string)
- `time_zone` — Optional. Time zone according to which `time_string` is parsed. [`String`](/sql-reference/data-types/string)
","","Returns a `DateTime` object parsed from the string, or `NULL` if the parsing fails. [`DateTime`](/sql-reference/data-types/datetime)","**Usage example**

```sql title=Query
SELECT
    parseDateTime32BestEffortOrNull('23/10/2025 12:12:57') AS valid,
    parseDateTime32BestEffortOrNull('invalid date') AS invalid
```

```response title=Response
┌─valid───────────────┬─invalid─┐
│ 2025-10-23 12:12:57 │    ᴺᵁᴸᴸ │
└─────────────────────┴─────────┘
```

","20.9","Type Conversion"
"25.9.2.1","cutToFirstSignificantSubdomainWithWWW",0,0,"","","System","Returns the part of the domain that includes top-level subdomains up to the ""first significant subdomain"", without stripping ""www"".","","","","","","","URL"
"25.9.2.1","mapApply",0,0,"","","System","The same as arrayMap.","","","","","**mapApply**

```sql title=Query
SELECT mapApply((k, v) -> (k, v * 2), map('k1', 1, 'k2', 2))
```

```response title=Response

```

","22.3","Map"
"25.9.2.1","wordShingleSimHashCaseInsensitive",0,0,"","","System","
Splits a ASCII string into parts (shingles) of `shinglesize` words and returns the word shingle `simhash`.
It is case insensitive.

Can be used for detection of semi-duplicate strings with [`bitHammingDistance`](../functions/bit-functions.md/#bitHammingDistance).
The smaller the [Hamming distance](https://en.wikipedia.org/wiki/Hamming_distance) of the calculated `simhashes` of two strings, the more likely these strings are the same.
","wordShingleSimHashCaseInsensitive(string[, shinglesize])","- `string` — String for which to compute the hash. [`String`](/sql-reference/data-types/string)
- `shinglesize` — Optional. The size of a word shingle, any number from `1` to `25`. The default value is `3`. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns the computed hash value. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT wordShingleSimHashCaseInsensitive('ClickHouse® is a column-oriented database management system (DBMS) for online analytical processing of queries (OLAP).') AS Hash;
```

```response title=Response
┌───────Hash─┐
│ 2194812424 │
└────────────┘
```

","21.1","Hash"
"25.9.2.1","ngramSimHash",0,0,"","","System","
Splits a ASCII string into n-grams of `ngramsize` symbols and returns the n-gram `simhash`.

Can be used for detection of semi-duplicate strings with [`bitHammingDistance`](../functions/bit-functions.md/#bitHammingDistance).
The smaller the [Hamming distance](https://en.wikipedia.org/wiki/Hamming_distance) of the calculated `simhashes` of two strings, the more likely these strings are the same.
","ngramSimHash(string[, ngramsize])","- `string` — String for which to compute the case sensitive `simhash`. [`String`](/sql-reference/data-types/string)
- `ngramsize` — Optional. The size of an n-gram, any number from `1` to `25`. The default value is`3`. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns the computed hash of the input string. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT ngramSimHash('ClickHouse') AS Hash;
```

```response title=Response
┌───────Hash─┐
│ 1627567969 │
└────────────┘
```

","21.1","Hash"
"25.9.2.1","regionToCountry",0,0,"","","System","","","","","","","",""
"25.9.2.1","generateUUIDv7",0,0,"","","System","
Generates a [version 7](https://datatracker.ietf.org/doc/html/draft-peabody-dispatch-new-uuid-format-04) [UUID](../data-types/uuid.md).

See section [""UUIDv7 generation""](#uuidv7-generation) for details on UUID structure, counter management, and concurrency guarantees.

:::note
As of September 2025, version 7 UUIDs are in draft status and their layout may change in future.
:::
    ","generateUUIDv7([expr])","- `expr` — Optional. An arbitrary expression used to bypass [common subexpression elimination](/sql-reference/functions/overview#common-subexpression-elimination) if the function is called multiple times in a query. The value of the expression has no effect on the returned UUID. [`Any`](/sql-reference/data-types)
","","Returns a UUIDv7. [`UUID`](/sql-reference/data-types/uuid)","**Usage example**

```sql title=Query
SELECT generateUUIDv7(number) FROM numbers(3);
```

```response title=Response
┌─generateUUIDv7(number)───────────────┐
│ 019947fb-5766-7ed0-b021-d906f8f7cebb │
│ 019947fb-5766-7ed0-b021-d9072d0d1e07 │
│ 019947fb-5766-7ed0-b021-d908dca2cf63 │
└──────────────────────────────────────┘
```

**Common subexpression elimination**

```sql title=Query
SELECT generateUUIDv7(1), generateUUIDv7(1);
```

```response title=Response
┌─generateUUIDv7(1)────────────────────┬─generateUUIDv7(1)────────────────────┐
│ 019947ff-0f87-7d88-ace0-8b5b3a66e0c1 │ 019947ff-0f87-7d88-ace0-8b5b3a66e0c1 │
└──────────────────────────────────────┴──────────────────────────────────────┘
```

","24.5","UUID"
"25.9.2.1","toTimezone",0,0,"","","System","
Converts a `DateTime` or `DateTime64` to the specified time zone.
The internal value (number of unix seconds) of the data doesn't change.
Only the value's time zone attribute and the value's string representation changes.
        ","toTimeZone(datetime, timezone)","- `date` — The value to convert. [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
- `timezone` — The target time zone name. [`String`](/sql-reference/data-types/string)
","","Returns the same timestamp as the input, but with the specified time zone [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)","**Usage example**

```sql title=Query
SELECT toDateTime('2019-01-01 00:00:00', 'UTC') AS time_utc,
toTypeName(time_utc) AS type_utc,
toInt32(time_utc) AS int32utc,
toTimeZone(time_utc, 'Asia/Yekaterinburg') AS time_yekat,
toTypeName(time_yekat) AS type_yekat,
toInt32(time_yekat) AS int32yekat,
toTimeZone(time_utc, 'US/Samoa') AS time_samoa,
toTypeName(time_samoa) AS type_samoa,
toInt32(time_samoa) AS int32samoa
FORMAT Vertical;
```

```response title=Response
Row 1:
──────
time_utc:   2019-01-01 00:00:00
type_utc:   DateTime('UTC')
int32utc:   1546300800
time_yekat: 2019-01-01 05:00:00
type_yekat: DateTime('Asia/Yekaterinburg')
int32yekat: 1546300800
time_samoa: 2018-12-31 13:00:00
type_samoa: DateTime('US/Samoa')
int32samoa: 1546300800
```

","1.1","Dates and Times"
"25.9.2.1","emptyArrayDate",0,0,"","","System","Returns an empty Date array","emptyArrayDate()","","","An empty Date array. [`Array(T)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT emptyArrayDate
```

```response title=Response
[]
```

","1.1","Arrays"
"25.9.2.1","CRC32IEEE",0,1,"","","System","
Calculates the CRC32 checksum of a string using the CRC-32-IEEE 802.3 polynomial.
","CRC32IEEE(s)","- `s` — String to calculate CRC32 for. [`String`](/sql-reference/data-types/string)
","","Returns the CRC32 checksum of the string. [`UInt32`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT CRC32IEEE('ClickHouse');
```

```response title=Response
┌─CRC32IEEE('ClickHouse')─┐
│              3089448422 │
└─────────────────────────┘
```

","20.1","String"
"25.9.2.1","notEmpty",0,0,"","","System","
Checks whether the input array is non-empty.

An array is considered non-empty if it contains at least one element.

:::note
Can be optimized by enabling the [`optimize_functions_to_subcolumns`](/operations/settings/settings#optimize_functions_to_subcolumns) setting. With `optimize_functions_to_subcolumns = 1` the function reads only [size0](/sql-reference/data-types/array#array-size) subcolumn instead of reading and processing the whole array column. The query `SELECT notEmpty(arr) FROM table` transforms to `SELECT arr.size0 != 0 FROM TABLE`.
:::

The function also works for [strings](string-functions.md#notempty) or [UUID](uuid-functions.md#notempty).
    ","notEmpty(arr)","- `arr` — Input array. [`Array(T)`](/sql-reference/data-types/array)
","","Returns `1` for a non-empty array or `0` for an empty array [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT notEmpty([1,2]);
```

```response title=Response
1
```

","1.1","Arrays"
"25.9.2.1","tryPunycodeDecode",0,0,"","","System","
Like `punycodeDecode` but returns an empty string if no valid Punycode-encoded string is given.
","tryPunycodeDecode(s)","- `s` — Punycode-encoded string. [`String`](/sql-reference/data-types/string)
","","Returns the plaintext of the input value, or empty string if input is invalid. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT tryPunycodeDecode('Mnchen-3ya')
```

```response title=Response
┌─tryPunycodeDecode('Mnchen-3ya')─┐
│ München                         │
└─────────────────────────────────┘
```

","24.1","String"
"25.9.2.1","L2Normalize",0,0,"","","System","
Calculates the unit vector of a given vector (the elements of the tuple are the coordinates) in Euclidean space (using [Euclidean distance](https://en.wikipedia.org/wiki/Euclidean_distance)).
    ","L2Normalize(tuple)","- `tuple` — A tuple of numeric values. [`Tuple(T)`](/sql-reference/data-types/tuple)
","","Returns the unit vector. [`Tuple(Float64)`](/sql-reference/data-types/tuple)","**Basic usage**

```sql title=Query
SELECT L2Normalize((3, 4))
```

```response title=Response
┌─L2Normalize((3, 4))─┐
│ (0.6,0.8)           │
└─────────────────────┘
```

","21.11","Distance"
"25.9.2.1","YYYYMMDDhhmmssToDateTime64",0,0,"","","System","
Converts a number containing the year, month, day, hour, minute, and second to a `DateTime64`.
This function is the opposite of function [`toYYYYMMDDhhmmss()`](/sql-reference/functions/date-time-functions#toYYYYMMDDhhmmss).
The output is undefined if the input does not encode a valid `DateTime64` value.
    ","YYYYMMDDhhmmssToDateTime64(YYYYMMDDhhmmss[, precision[, timezone]])","- `YYYYMMDDhhmmss` — Number containing the year, month, day, hour, minute, and second. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
- `precision` — Precision for the fractional part (0-9). [`UInt8`](/sql-reference/data-types/int-uint)
- `timezone` — Timezone name. [`String`](/sql-reference/data-types/string)
","","Returns a `DateTime64` value from the provided arguments [`DateTime64`](/sql-reference/data-types/datetime64)","**Example**

```sql title=Query
SELECT YYYYMMDDhhmmssToDateTime64(20230911131415, 3, 'Asia/Istanbul');
```

```response title=Response
┌─YYYYMMDDhhmm⋯/Istanbul')─┐
│  2023-09-11 13:14:15.000 │
└──────────────────────────┘
```

","23.9","Dates and Times"
"25.9.2.1","pow",0,1,"","","System","
Returns x raised to the power of y.
","pow(x, y)","- `x` — The base. [`(U)Int8/16/32/64`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal*`](/sql-reference/data-types/decimal)
- `y` — The exponent. [`(U)Int8/16/32/64`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal*`](/sql-reference/data-types/decimal)
","","Returns x^y [`Float64`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT pow(2, 3);
```

```response title=Response
8
```

","1.1","Mathematical"
"25.9.2.1","polygonsWithinSpherical",0,0,"","","System","","","","","","","",""
"25.9.2.1","flattenTuple",0,0,"","","System","
Flattens a named and nested tuple.
The elements of the returned tuple are the paths of the input tuple.
","flattenTuple(input)","- `input` — Named and nested tuple to flatten. [`Tuple(n1 T1[, n2 T2, ... ])`](/sql-reference/data-types/tuple)
","","Returns an output tuple whose elements are paths from the original input. [`Tuple(T)`](/sql-reference/data-types/tuple)","**Usage example**

```sql title=Query
CREATE TABLE tab(t Tuple(a UInt32, b Tuple(c String, d UInt32))) ENGINE = MergeTree ORDER BY tuple();
INSERT INTO tab VALUES ((3, ('c', 4)));

SELECT flattenTuple(t) FROM tab;
```

```response title=Response
┌─flattenTuple(t)┐
│ (3, 'c', 4)    │
└────────────────┘
```

","22.6","Tuple"
"25.9.2.1","reinterpretAsUInt64",0,0,"","","System","","","","","","","",""
"25.9.2.1","erfc",0,0,"","","System","
Returns a number close to `1-erf(x)` without loss of precision for large `x` values.
","erfc(x)","- `x` — The value for which to find the error function value. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal*`](/sql-reference/data-types/decimal)
","","Returns the complementary error function value [`Float*`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT erfc(0);
```

```response title=Response
1
```

","1.1","Mathematical"
"25.9.2.1","numericIndexedVectorPointwiseAdd",0,0,"","","System","
Performs pointwise addition between a numericIndexedVector and either another numericIndexedVector or a numeric constant.
The function returns a new numericIndexedVector.
        ","numericIndexedVectorPointwiseAdd(v1, v2)","- `numericIndexedVector` — A numericIndexedVector object. [`numericIndexedVector`](/sql-reference/functions/#create-numeric-indexed-vector-object)
- `numeric` — A numeric constant or numericIndexedVector object. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`numericIndexedVector`](/sql-reference/functions/#create-numeric-indexed-vector-object)
","","Returns a new NumericIndexedVector object. [`numericIndexedVector`](/sql-reference/functions/#create-numeric-indexed-vector-object)","**Usage example**

```sql title=Query
WITH
    numericIndexedVectorBuild(mapFromArrays([1, 2, 3], arrayMap(x -> toInt32(x), [10, 20, 30]))) AS vec1,
    numericIndexedVectorBuild(mapFromArrays([2, 3, 4], arrayMap(x -> toInt32(x), [10, 20, 30]))) AS vec2
SELECT
    numericIndexedVectorToMap(numericIndexedVectorPointwiseAdd(vec1, vec2)) AS res1,
    numericIndexedVectorToMap(numericIndexedVectorPointwiseAdd(vec1, 2)) AS res2;
```

```response title=Response
┌─res1──────────────────┬─res2─────────────┐
│ {1:10,2:30,3:50,4:30} │ {1:12,2:22,3:32} │
└───────────────────────┴──────────────────┘
```

","25.7","NumericIndexedVector"
"25.9.2.1","tumbleEnd",0,0,"","","System","
Returns the exclusive upper bound of the corresponding tumbling window.
    ","tumbleEnd(time_attr, interval[, timezone])","- `time_attr` — Date and time. [`DateTime`](/sql-reference/data-types/datetime)
- `interval` — Window interval in Interval. [`Interval`](/sql-reference/data-types/int-uint)
- `timezone` — Optional. Timezone name. [`String`](/sql-reference/data-types/string)
","","Returns the exclusive upper bound of the corresponding tumbling window. [`DateTime`](/sql-reference/data-types/datetime)","**Tumbling window end**

```sql title=Query
SELECT tumbleEnd(now(), toIntervalDay('1'))
```

```response title=Response
2024-07-05 00:00:00
```

","22.1","Time Window"
"25.9.2.1","isInfinite",0,0,"","","System","
    Returns `1` if the Float32 or Float64 argument is infinite, otherwise this function returns `0`.
    Note that `0` is returned for a `NaN`.
    ","isInfinite(x)","- `x` — Number to check for infiniteness. [`Float*`](/sql-reference/data-types/float)
","","`1` if x is infinite, otherwise `0` (including for `NaN`).","**Test if a number is infinite**

```sql title=Query
SELECT isInfinite(inf), isInfinite(NaN), isInfinite(10))
```

```response title=Response
1 0 0
```

","1.1","Arithmetic"
"25.9.2.1","replaceRegexpOne",0,0,"","","System","
Replaces the first occurrence of the substring matching the regular expression `pattern` (in re2 syntax) in `haystack` by the `replacement` string.
`replacement` can contain substitutions `\0-\9`.
Substitutions `\1-\9` correspond to the 1st to 9th capturing group (submatch), substitution `\0` corresponds to the entire match.
To use a verbatim `\` character in the `pattern` or `replacement` strings, escape it using `\`.
Also keep in mind that string literals require extra escaping.
","replaceRegexpOne(haystack, pattern, replacement)","- `haystack` — The input string to search in. [`String`](/sql-reference/data-types/string)
- `pattern` — The regular expression pattern to find. [`const String`](/sql-reference/data-types/string)
- `replacement` — The string to replace the pattern with, may contain substitutions. [`const String`](/sql-reference/data-types/string)
","","Returns a string with the first regex match replaced. [`String`](/sql-reference/data-types/string)","**Converting ISO dates to American format**

```sql title=Query
SELECT DISTINCT
    EventDate,
    replaceRegexpOne(toString(EventDate), '(\\d{4})-(\\d{2})-(\\d{2})', '\\2/\\3/\\1') AS res
FROM test.hits
LIMIT 7
FORMAT TabSeparated
```

```response title=Response
2014-03-17      03/17/2014
2014-03-18      03/18/2014
2014-03-19      03/19/2014
2014-03-20      03/20/2014
2014-03-21      03/21/2014
2014-03-22      03/22/2014
2014-03-23      03/23/2014
```

**Copying a string ten times**

```sql title=Query
SELECT replaceRegexpOne('Hello, World!', '.*', '\\\\0\\\\0\\\\0\\\\0\\\\0\\\\0\\\\0\\\\0\\\\0\\\\0') AS res
```

```response title=Response
┌─res────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│ Hello, World!Hello, World!Hello, World!Hello, World!Hello, World!Hello, World!Hello, World!Hello, World!Hello, World!Hello, World! │
└────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

","1.1","String Replacement"
"25.9.2.1","isNull",0,1,"","","System","
Checks if the argument is `NULL`.

Also see: operator [`IS NULL`](/sql-reference/operators#is_null).
    ","isNull(x)","- `x` — A value of non-compound data type. [`Any`](/sql-reference/data-types)
","","Returns `1` if `x` is `NULL`, otherwise `0`. [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
CREATE TABLE t_null
(
  x Int32,
  y Nullable(Int32)
)
ENGINE = MergeTree
ORDER BY tuple();

INSERT INTO t_null VALUES (1, NULL), (2, 3);

SELECT x FROM t_null WHERE isNull(y);
```

```response title=Response
┌─x─┐
│ 1 │
└───┘
```

","1.1","Null"
"25.9.2.1","factorial",0,1,"","","System","
Computes the factorial of an integer value. It works with any native integer type including UInt(8|16|32|64) and Int(8|16|32|64). The return type is UInt64.

The factorial of 0 is 1. Likewise, the factorial() function returns 1 for any negative value. The maximum positive value for the input argument is 20, a value of 21 or greater will cause exception throw.
","","","","","**factorial**

```sql title=Query
SELECT factorial(10)
```

```response title=Response

```

","","Mathematical"
"25.9.2.1","financialNetPresentValue",0,0,"","","System","
Calculates the Net Present Value (NPV) of a series of cash flows assuming equal time intervals between each cash flow.

Default variant (`start_from_zero` = true):

$$
\sum_{i=0}^{N-1} \frac{values_i}{(1 + rate)^i}
$$

Excel-compatible variant (`start_from_zero` = false):

$$
\sum_{i=1}^{N} \frac{values_i}{(1 + rate)^i}
$$
    ","financialNetPresentValue(rate, cashflows[, start_from_zero])","- `rate` — The discount rate to apply. [`Float*`](/sql-reference/data-types/float)
- `cashflows` — Array of cash flows. Each value represents a payment (negative value) or income (positive value). [`Array(Int8/16/32/64)`](/sql-reference/data-types/array) or [`Array(Float*)`](/sql-reference/data-types/array)
- `[, start_from_zero]` — Optional boolean parameter indicating whether to start the NPV calculation from period `0` (true) or period `1` (false, Excel-compatible). Default: true. [`Bool`](/sql-reference/data-types/boolean)
","","Returns the net present value as a Float64 value. [`Float64`](/sql-reference/data-types/float)","**default_calculation**

```sql title=Query
SELECT financialNetPresentValue(0.08, [-40000., 5000., 8000., 12000., 30000.])
```

```response title=Response
3065.2226681795255
```

**excel_compatible_calculation**

```sql title=Query
SELECT financialNetPresentValue(0.08, [-40000., 5000., 8000., 12000., 30000.], false)
```

```response title=Response
2838.1691372032656
```

","25.7","Financial"
"25.9.2.1","ngramSearch",0,0,"","","System","
Checks if the 4-gram distance between two strings is less than or equal to a given threshold.

For case-insensitive search or/and in UTF8 format use functions `ngramSearchCaseInsensitive`, `ngramSearchUTF8`, `ngramSearchCaseInsensitiveUTF8`.
    ","ngramSearch(haystack, needle)","- `haystack` — String for comparison. [`String`](/sql-reference/data-types/string)
- `needle` — String for comparison. [`String`](/sql-reference/data-types/string)
","","Returns `1` if the 4-gram distance between the strings is less than or equal to a threshold (`1.0` by default), `0` otherwise. [`UInt8`](/sql-reference/data-types/int-uint)","**Search using 4-grams**

```sql title=Query
SELECT ngramSearch('ClickHouse', 'Click')
```

```response title=Response
┌─ngramSearch('ClickHouse', 'Click')─┐
│                                  1 │
└────────────────────────────────────┘
```

","20.1","String Search"
"25.9.2.1","lessOrEquals",0,0,"","","System","Compares two values for less-than-or-equal-to relation.","lessOrEquals(a, b)
-- a <= b","- `a` — First value.<sup>[*](#comparison-rules)</sup> - `b` — Second value.<sup>[*](#comparison-rules)</sup> ","","Returns `1` if `a` is less than or equal to `b`, otherwise `0` [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT 1 <= 2, 2 <= 2, 3 <= 2;
```

```response title=Response
┌─lessOrEquals(1, 2)─┬─lessOrEquals(2, 2)─┬─lessOrEquals(3, 2)─┐
│                  1 │                  1 │                  0 │
└────────────────────┴────────────────────┴────────────────────┘
```

","1.1","Comparison"
"25.9.2.1","subtractQuarters",0,0,"","","System","
Subtracts a specified number of quarters from a date, a date with time or a string-encoded date or date with time.
    ","subtractQuarters(datetime, num)","- `datetime` — Date or date with time to subtract specified number of quarters from. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64) or [`String`](/sql-reference/data-types/string)
- `num` — Number of quarters to subtract. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns `datetime` minus `num` quarters [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)","**Subtract quarters from different date types**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractQuarters(date, 1) AS subtract_quarters_with_date,
    subtractQuarters(date_time, 1) AS subtract_quarters_with_date_time,
    subtractQuarters(date_time_string, 1) AS subtract_quarters_with_date_time_string
```

```response title=Response
┌─subtract_quarters_with_date─┬─subtract_quarters_with_date_time─┬─subtract_quarters_with_date_time_string─┐
│                  2023-10-01 │              2023-10-01 00:00:00 │                 2023-10-01 00:00:00.000 │
└─────────────────────────────┴──────────────────────────────────┴─────────────────────────────────────────┘
```

**Using alternative INTERVAL syntax**

```sql title=Query
SELECT dateSub('1998-06-16'::Date, INTERVAL 10 quarter)
```

```response title=Response
┌─minus(CAST('1⋯Quarter(10))─┐
│                1996-09-16 │
└───────────────────────────┘
```

","20.1","Dates and Times"
"25.9.2.1","fromUnixTimestamp64Nano",0,0,"","","System","","","","","","","",""
"25.9.2.1","bitShiftLeft",0,0,"","","System","
Shifts the binary representation of a value to the left by a specified number of bit positions.

A `FixedString` or a `String` is treated as a single multibyte value.

Bits of a `FixedString` value are lost as they are shifted out.
On the contrary, a `String` value is extended with additional bytes, so no bits are lost.
","bitShiftLeft(a, N)","- `a` — A value to shift. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring)
- `N` — The number of positions to shift. [`UInt8/16/32/64`](/sql-reference/data-types/int-uint)
","","Returns the shifted value with type equal to that of `a`.","**Usage example with binary encoding**

```sql title=Query
SELECT 99 AS a, bin(a), bitShiftLeft(a, 2) AS a_shifted, bin(a_shifted);
```

```response title=Response
┌──a─┬─bin(99)──┬─a_shifted─┬─bin(bitShiftLeft(99, 2))─┐
│ 99 │ 01100011 │       140 │ 10001100                 │
└────┴──────────┴───────────┴──────────────────────────┘
```

**Usage example with hexadecimal encoding**

```sql title=Query
SELECT 'abc' AS a, hex(a), bitShiftLeft(a, 4) AS a_shifted, hex(a_shifted);
```

```response title=Response
┌─a───┬─hex('abc')─┬─a_shifted─┬─hex(bitShiftLeft('abc', 4))─┐
│ abc │ 616263     │ &0        │ 06162630                    │
└─────┴────────────┴───────────┴─────────────────────────────┘
```

**Usage example with Fixed String encoding**

```sql title=Query
SELECT toFixedString('abc', 3) AS a, hex(a), bitShiftLeft(a, 4) AS a_shifted, hex(a_shifted);
```

```response title=Response
┌─a───┬─hex(toFixedString('abc', 3))─┬─a_shifted─┬─hex(bitShiftLeft(toFixedString('abc', 3), 4))─┐
│ abc │ 616263                       │ &0        │ 162630                                        │
└─────┴──────────────────────────────┴───────────┴───────────────────────────────────────────────┘
```

","1.1","Bit"
"25.9.2.1","cutToFirstSignificantSubdomainCustomRFC",0,0,"","","System","Similar to `cutToFirstSignificantSubdomainCustom` but follows stricter rules according to RFC 3986.","","","","","","","URL"
"25.9.2.1","dictGetInt16OrDefault",0,0,"","","System","
Retrieves values from a dictionary.

Accepts 4 parameters:
-- name of the dictionary;
-- name of the column of the dictionary or tuple of column names;
-- key value - expression returning dictionary key-type value or tuple-type value - depending on the dictionary configuration;
-- default values returned if the dictionary does not contain a row with the key value;

Returned value: value of the dictionary attribute parsed in the Int16 if key is found, otherwise default value.

Throws an exception if cannot parse the value of the attribute or the value does not match the attribute data type.
","","","","","","","Dictionary"
"25.9.2.1","cutToFirstSignificantSubdomainCustom",0,0,"","","System","
Returns the part of the domain that includes top-level subdomains up to the first significant subdomain. Accepts custom TLD list name.

Can be useful if you need fresh TLD list or you have custom.
        ","","","","","**cutToFirstSignificantSubdomainCustom**

```sql title=Query
SELECT cutToFirstSignificantSubdomainCustom('bar.foo.there-is-no-such-domain', 'public_suffix_list');
```

```response title=Response

```

","","URL"
"25.9.2.1","JSONExtractArrayRaw",0,0,"","","System","
Returns an array with elements of JSON array, each represented as unparsed string.
        ","JSONExtractArrayRaw(json[, indices_or_keys, ...])","- `json` — JSON string to parse. [`String`](/sql-reference/data-types/string)
- `indices_or_keys` — A list of zero or more arguments each of which can be either string or integer. [`String`](/sql-reference/data-types/string) or [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns an array of strings with JSON array elements. If the part is not an array or does not exist, an empty array will be returned. [`Array(String)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT JSONExtractArrayRaw('{""a"": ""hello"", ""b"": [-100, 200.0, ""hello""]}', 'b') AS res;
```

```response title=Response
┌─res──────────────────────────┐
│ ['-100','200.0','""hello""']   │
└──────────────────────────────┘
```

","20.1","JSON"
"25.9.2.1","atan2",0,1,"","","System","
Returns the atan2 as the angle in the Euclidean plane, given in radians, between the positive x axis and the ray to the point `(x, y) ≠ (0, 0)`.
","atan2(y, x)","- `y` — y-coordinate of the point through which the ray passes. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal*`](/sql-reference/data-types/decimal)
- `x` — x-coordinate of the point through which the ray passes. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal*`](/sql-reference/data-types/decimal)
","","Returns the angle `θ` such that `-π < θ ≤ π`, in radians [`Float64`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT atan2(1, 1)
```

```response title=Response
0.7853981633974483
```

","20.12","Mathematical"
"25.9.2.1","joinGetOrNull",0,0,"","","System","
Allows you to extract data from a table the same way as from a dictionary.
Gets data from Join tables using the specified join key.
Unlike [`joinGet`](#joinGet) it returns `NULL` when the key is missing.

:::note
Only supports tables created with the `ENGINE = Join(ANY, LEFT, <join_keys>)` [statement](/engines/table-engines/special/join).
:::
","joinGetOrNull(join_storage_table_name, value_column, join_keys)","- `join_storage_table_name` — An identifier which indicates where to perform the search. The identifier is searched in the default database (see parameter default_database in the config file). To override the default database, use the `USE database_name` query or specify the database and the table through a dot, like `database_name.table_name`. [`String`](/sql-reference/data-types/string)
- `value_column` — The name of the column of the table that contains required data. [`const String`](/sql-reference/data-types/string)
- `join_keys` — A list of join keys. [`Any`](/sql-reference/data-types)
","","Returns a list of values corresponding to the list of keys, or `NULL` if a key is not found. [`Any`](/sql-reference/data-types)","**Usage example**

```sql title=Query
CREATE TABLE db_test.id_val(`id` UInt32, `val` UInt32) ENGINE = Join(ANY, LEFT, id);
INSERT INTO db_test.id_val VALUES (1,11)(2,12)(4,13);

SELECT joinGetOrNull(db_test.id_val, 'val', toUInt32(1)), joinGetOrNull(db_test.id_val, 'val', toUInt32(999));
```

```response title=Response
┌─joinGetOrNull(db_test.id_val, 'val', toUInt32(1))─┬─joinGetOrNull(db_test.id_val, 'val', toUInt32(999))─┐
│                                                11 │                                                ᴺᵁᴸᴸ │
└───────────────────────────────────────────────────┴─────────────────────────────────────────────────────┘
```

","20.4","Other"
"25.9.2.1","trimRight",0,0,"","","System","
Removes the specified characters from the end of a string.
By default, removes common whitespace (ASCII) characters.
","trimRight(s[, trim_characters])","- `s` — String to trim. [`String`](/sql-reference/data-types/string)
- `trim_characters` — Optional characters to trim. If not specified, common whitespace characters are removed. [`String`](/sql-reference/data-types/string)
","","Returns the string with specified characters trimmed from the right. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT trimRight('ClickHouse','House');
```

```response title=Response
┌─trimRight('C⋯', 'House')─┐
│ Click                    │
└──────────────────────────┘
```

","20.1","String"
"25.9.2.1","translate",0,0,"","","System","
Replaces characters in the string `s` using a one-to-one character mapping defined by `from` and `to` strings.
`from` and `to` must be constant ASCII strings.
If `from` and `to` have equal sizes, each occurrence of the first character of `first` in `s` is replaced by the first character of `to`, the second character of `first` in `s` is replaced by the second character of `to`, etc.
If `from` contains more characters than `to`, all occurrences of the characters at the end of `from` that have no corresponding character in `to` are deleted from `s`.
Non-ASCII characters in `s` are not modified by the function.
","translate(s, from, to)","- `s` — The input string to translate. [`String`](/sql-reference/data-types/string)
- `from` — A constant ASCII string containing characters to replace. [`const String`](/sql-reference/data-types/string)
- `to` — A constant ASCII string containing replacement characters. [`const String`](/sql-reference/data-types/string)
","","Returns a string with character translations applied. [`String`](/sql-reference/data-types/string)","**Character mapping**

```sql title=Query
SELECT translate('Hello, World!', 'delor', 'DELOR') AS res
```

```response title=Response
┌─res───────────┐
│ HELLO, WORLD! │
└───────────────┘
```

**Different lengths**

```sql title=Query
SELECT translate('clickhouse', 'clickhouse', 'CLICK') AS res
```

```response title=Response
┌─res───┐
│ CLICK │
└───────┘
```

","22.7","String Replacement"
"25.9.2.1","timeSeriesFromGrid",0,0,"","","System","
Converts an array of values `[x1, x2, x3, ...]` to an array of tuples
`[(start_timestamp, x1), (start_timestamp + step, x2), (start_timestamp + 2 * step, x3), ...]`.

The current timestamp is increased by `step` until it becomes greater than `end_timestamp`
If the number of the values doesn't match the number of the timestamps, the function throws an exception.

NULL values in `[x1, x2, x3, ...]` are skipped but the current timestamp is still incremented.
For example, for `[value1, NULL, x2]` the function returns `[(start_timestamp, x1), (start_timestamp + 2 * step, x2)]`.
    ","timeSeriesFromGrid(start_timestamp, end_timestamp, step, values)","- `start_timestamp` — Start of the grid. [`DateTime64`](/sql-reference/data-types/datetime64) or [`DateTime`](/sql-reference/data-types/datetime) or [`UInt32`](/sql-reference/data-types/int-uint)
- `end_timestamp` — End of the grid. [`DateTime64`](/sql-reference/data-types/datetime64) or [`DateTime`](/sql-reference/data-types/datetime) or [`UInt32`](/sql-reference/data-types/int-uint)
- `step` — Step of the grid in seconds [`Decimal64`](/sql-reference/data-types/decimal) or [`Decimal32`](/sql-reference/data-types/decimal) or [`UInt32/64`](/sql-reference/data-types/int-uint)
- `values` — Array of values [`Array(Float*)`](/sql-reference/data-types/array) or [`Array(Nullable(Float*))`](/sql-reference/data-types/array)
","","Returns values from the source array of values combined with timestamps on a regular time grid described by `start_timestamp` and `step`. [`Array(Tuple(DateTime64, Float64))`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT timeSeriesFromGrid('2025-06-01 00:00:00'::DateTime64(3), '2025-06-01 00:01:30.000'::DateTime64(3), 30, [10, 20, NULL, 30]) AS result;
```

```response title=Response
┌─────────────────────────────────────────────result─────────────────────────────────────────────┐
│ [('2025-06-01 00:00:00.000',10),('2025-06-01 00:00:30.000',20),('2025-06-01 00:01:30.000',30)] │
└────────────────────────────────────────────────────────────────────────────────────────────────┘
```

","25.8","Time Series"
"25.9.2.1","formatQueryOrNull",0,0,"","","System","Returns a formatted, possibly multi-line, version of the given SQL query. Returns NULL in case of a parsing error.
[example:multiline]","formatQueryOrNull(query)","- `query` — The SQL query to be formatted. [String](../../sql-reference/data-types/string.md) ","","The formatted query [`String`](/sql-reference/data-types/string)","**multiline**

```sql title=Query
SELECT formatQuery('select a,    b FRom tab WHERE a > 3 and  b < 3');
```

```response title=Response
SELECT
    a,
    b
FROM tab
WHERE (a > 3) AND (b < 3)
```

","","Other"
"25.9.2.1","lengthUTF8",0,0,"","","System","
Returns the length of a string in Unicode code points rather than in bytes or characters.
It assumes that the string contains valid UTF-8 encoded text.
If this assumption is violated, no exception is thrown and the result is undefined.

","lengthUTF8(s)","- `s` — String containing valid UTF-8 encoded text. [`String`](/sql-reference/data-types/string)
","","Length of the string `s` in Unicode code points. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT lengthUTF8('Здравствуй, мир!')
```

```response title=Response
┌─lengthUTF8('Здравствуй, мир!')─┐
│                             16 │
└────────────────────────────────┘
```

","1.1","String"
"25.9.2.1","aes_decrypt_mysql",0,0,"","","System","
Decrypts data encrypted by MySQL's [`AES_ENCRYPT`](https://dev.mysql.com/doc/refman/8.0/en/encryption-functions.html#function_aes-encrypt) function.

Produces the same plaintext as [`decrypt`](#decrypt) for the same inputs.
When `key` or `iv` are longer than they should normally be, `aes_decrypt_mysql` will stick to what MySQL's `aes_decrypt` does which is to 'fold' `key` and ignore the excess bits of `IV`.

Supports the following decryption modes:

- aes-128-ecb, aes-192-ecb, aes-256-ecb
- aes-128-cbc, aes-192-cbc, aes-256-cbc
- aes-128-cfb128
- aes-128-ofb, aes-192-ofb, aes-256-ofb
        ","aes_decrypt_mysql(mode, ciphertext, key[, iv])","- `mode` — Decryption mode. [`String`](/sql-reference/data-types/string)
- `ciphertext` — Encrypted text that needs to be decrypted. [`String`](/sql-reference/data-types/string)
- `key` — Decryption key. [`String`](/sql-reference/data-types/string)
- `iv` — Optional. Initialization vector. [`String`](/sql-reference/data-types/string)
","","Returns the decrypted String. [`String`](/sql-reference/data-types/string)","**Decrypt MySQL data**

```sql title=Query
-- Let's decrypt data we've previously encrypted with MySQL:
mysql> SET  block_encryption_mode='aes-256-ofb';
Query OK, 0 rows affected (0.00 sec)

mysql> SELECT aes_encrypt('Secret', '123456789101213141516171819202122', 'iviviviviviviviv123456') as ciphertext;
+------------------------+
| ciphertext             |
+------------------------+
| 0x24E9E4966469         |
+------------------------+
1 row in set (0.00 sec)

SELECT aes_decrypt_mysql('aes-256-ofb', unhex('24E9E4966469'), '123456789101213141516171819202122', 'iviviviviviviviv123456') AS plaintext
```

```response title=Response
┌─plaintext─┐
│ Secret    │
└───────────┘
```

","20.12","Encryption"
"25.9.2.1","position",0,1,"","","System","
Returns the position (in bytes, starting at 1) of a substring `needle` in a string `haystack`.

If substring `needle` is empty, these rules apply:
- if no `start_pos` was specified: return `1`
- if `start_pos = 0`: return `1`
- if `start_pos >= 1` and `start_pos <= length(haystack) + 1`: return `start_pos`
- otherwise: return `0`

The same rules also apply to functions [`locate`](#locate), [`positionCaseInsensitive`](#positionCaseInsensitive), [`positionUTF8`](#positionUTF8) and [`positionCaseInsensitiveUTF8`](#positionCaseInsensitiveUTF8).
    ","position(haystack, needle[, start_pos])","- `haystack` — String in which the search is performed. [`String`](/sql-reference/data-types/string) or [`Enum`](/sql-reference/data-types/enum)
- `needle` — Substring to be searched. [`String`](/sql-reference/data-types/string)
- `start_pos` — Position (1-based) in `haystack` at which the search starts. Optional. [`UInt`](/sql-reference/data-types/int-uint)
","","Returns starting position in bytes and counting from 1, if the substring was found, otherwise `0`, if the substring was not found. [`UInt64`](/sql-reference/data-types/int-uint)","**Basic usage**

```sql title=Query
SELECT position('Hello, world!', '!')
```

```response title=Response
┌─position('Hello, world!', '!')─┐
│                             13 │
└────────────────────────────────┘
```

**With start_pos argument**

```sql title=Query
SELECT position('Hello, world!', 'o', 1), position('Hello, world!', 'o', 7)
```

```response title=Response
┌─position('Hello, world!', 'o', 1)─┬─position('Hello, world!', 'o', 7)─┐
│                                 5 │                                 9 │
└───────────────────────────────────┴───────────────────────────────────┘
```

**Needle IN haystack syntax**

```sql title=Query
SELECT 6 = position('/' IN s) FROM (SELECT 'Hello/World' AS s)
```

```response title=Response
┌─equals(6, position(s, '/'))─┐
│                           1 │
└─────────────────────────────┘
```

**Empty needle substring**

```sql title=Query
SELECT position('abc', ''), position('abc', '', 0), position('abc', '', 1), position('abc', '', 2), position('abc', '', 3), position('abc', '', 4), position('abc', '', 5)
```

```response title=Response
┌─position('abc', '')─┬─position('abc', '', 0)─┬─position('abc', '', 1)─┬─position('abc', '', 2)─┬─position('abc', '', 3)─┬─position('abc', '', 4)─┬─position('abc', '', 5)─┐
│                   1 │                      1 │                      1 │                      2 │                      3 │                      4 │                      0 │
└─────────────────────┴────────────────────────┴────────────────────────┴────────────────────────┴────────────────────────┴────────────────────────┴────────────────────────┘
```

","1.1","String Search"
"25.9.2.1","formatQuerySingleLine",0,0,"","","System","Like formatQuery() but the returned formatted string contains no line breaks. Throws in case of a parsing error.
[example:multiline]","formatQuerySingleLine(query)","- `query` — The SQL query to be formatted. [String](../../sql-reference/data-types/string.md) ","","The formatted query [`String`](/sql-reference/data-types/string)","**multiline**

```sql title=Query
SELECT formatQuerySingleLine('select a,    b FRom tab WHERE a > 3 and  b < 3');
```

```response title=Response
SELECT a, b FROM tab WHERE (a > 3) AND (b < 3)
```

","","Other"
"25.9.2.1","mapAll",0,0,"","","System","The same as arrayAll.","","","","","**mapAll**

```sql title=Query
SELECT mapAll((k, v) -> v = 1, map('k1', 1, 'k2', 2))
```

```response title=Response

```

","23.4","Map"
"25.9.2.1","overlay",0,1,"","","System","
Replaces part of the string `input` with another string `replace`, starting at the 1-based index `offset`.
","overlay(s, replace, offset[, length])","- `s` — The input string. [`String`](/sql-reference/data-types/string)
- `replace` — The replacement string [`const String`](/sql-reference/data-types/string)
- `offset` — An integer type `Int` (1-based). If `offset` is negative, it is counted from the end of the string `s`. [`Int`](/sql-reference/data-types/int-uint)
- `length` — Optional. An integer type `Int`. `length` specifies the length of the snippet within the input string `s` to be replaced. If `length` is not specified, the number of bytes removed from `s` equals the length of `replace`; otherwise `length` bytes are removed. [`Int`](/sql-reference/data-types/int-uint)
","","Returns a string with replacement. [`String`](/sql-reference/data-types/string)","**Basic replacement**

```sql title=Query
SELECT overlay('My father is from Mexico.', 'mother', 4) AS res;
```

```response title=Response
┌─res──────────────────────┐
│ My mother is from Mexico.│
└──────────────────────────┘
```

**Replacement with length**

```sql title=Query
SELECT overlay('My father is from Mexico.', 'dad', 4, 6) AS res;
```

```response title=Response
┌─res───────────────────┐
│ My dad is from Mexico.│
└───────────────────────┘
```

","24.9","String"
"25.9.2.1","toStartOfMinute",0,0,"","","System","
Rounds down a date with time to the start of the minute.

:::note
The return type can be configured by setting [`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions).
:::
    ","toStartOfMinute(datetime)","- `datetime` — A date with time to round. [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
","","Returns the date with time rounded down to the start of the minute. [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)","**Round down to the start of the minute**

```sql title=Query
SELECT
    toStartOfMinute(toDateTime('2023-04-21 10:20:30')),
    toStartOfMinute(toDateTime64('2023-04-21 10:20:30.5300', 8))
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toStartOfMinute(toDateTime('2023-04-21 10:20:30')):           2023-04-21 10:20:00
toStartOfMinute(toDateTime64('2023-04-21 10:20:30.5300', 8)): 2023-04-21 10:20:00
```

","1.1","Dates and Times"
"25.9.2.1","wordShingleSimHash",0,0,"","","System","
Splits a ASCII string into parts (shingles) of `shinglesize` words and returns the word shingle `simhash`.
Is is case sensitive.

Can be used for detection of semi-duplicate strings with [`bitHammingDistance`](../functions/bit-functions.md/#bitHammingDistance).
The smaller the [Hamming distance](https://en.wikipedia.org/wiki/Hamming_distance) of the calculated `simhashes` of two strings, the more likely these strings are the same.
","wordShingleSimHash(string[, shinglesize])","- `string` — String for which to compute the hash. [`String`](/sql-reference/data-types/string)
- `shinglesize` — Optional. The size of a word shingle, any number from `1` to `25`. The default value is `3`. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns the computed hash value. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT wordShingleSimHash('ClickHouse® is a column-oriented database management system (DBMS) for online analytical processing of queries (OLAP).') AS Hash;
```

```response title=Response
┌───────Hash─┐
│ 2328277067 │
└────────────┘
```

","21.1","Hash"
"25.9.2.1","arrayCumSum",0,0,"","","System","Returns an array of the partial (running) sums of the elements in the source array. If a lambda function is specified, the sum is computed from applying the lambda to the array elements at each position.","arrayCumSum([func,] arr1[, arr2, ... , arrN])","- `func` — Optional. A lambda function to apply to the array elements at each position. [`Lambda function`](/sql-reference/functions/overview#arrow-operator-and-lambda)
- `arr1` — The source array of numeric values. [`Array(T)`](/sql-reference/data-types/array)
- `[arr2, ..., arrN]` — Optional. Additional arrays of the same size, passed as arguments to the lambda function if specified. [`Array(T)`](/sql-reference/data-types/array)
","","Returns an array of the partial sums of the elements in the source array. The result type matches the input array's numeric type. [`Array(T)`](/sql-reference/data-types/array)","**Basic usage**

```sql title=Query
SELECT arrayCumSum([1, 1, 1, 1]) AS res
```

```response title=Response
[1, 2, 3, 4]
```

**With lambda**

```sql title=Query
SELECT arrayCumSum(x -> x * 2, [1, 2, 3]) AS res
```

```response title=Response
[2, 6, 12]
```

","1.1","Arrays"
"25.9.2.1","formatQuerySingleLineOrNull",0,0,"","","System","Like formatQuery() but the returned formatted string contains no line breaks. Returns NULL in case of a parsing error.
[example:multiline]","formatQuerySingleLineOrNull(query)","- `query` — The SQL query to be formatted. [`String`](/sql-reference/data-types/string)
","","The formatted query [`String`](/sql-reference/data-types/string)","**multiline**

```sql title=Query
SELECT formatQuerySingleLine('select a,    b FRom tab WHERE a > 3 and  b < 3');
```

```response title=Response
SELECT a, b FROM tab WHERE (a > 3) AND (b < 3)
```

","","Other"
"25.9.2.1","IPv4StringToNumOrNull",0,0,"","","System","
Converts a 32-bit integer to its IPv4 address string representation in dotted decimal notation (A.B.C.D format) but if the IPv4 address has an invalid format, it returns `NULL`.
    ","IPv4StringToNumOrNull(string)","- `string` — IPv4 address string. [`String`](/sql-reference/data-types/string)
","","Returns the IPv4 address, or `NULL` if invalid. [`Nullable(UInt32)`](/sql-reference/data-types/nullable)","**Example with an invalid address**

```sql title=Query
SELECT
IPv4StringToNumOrNull('127.0.0.1') AS valid,
IPv4StringToNumOrNull('invalid') AS invalid;
```

```response title=Response
┌──────valid─┬─invalid─┐
│ 2130706433 │    ᴺᵁᴸᴸ │
└────────────┴─────────┘
```

","22.3","IP Address"
"25.9.2.1","trimLeft",0,0,"","","System","
Removes the specified characters from the start of a string.
By default, removes common whitespace (ASCII) characters.
","trimLeft(input[, trim_characters])","- `input` — String to trim. [`String`](/sql-reference/data-types/string)
- `trim_characters` — Optional. Characters to trim. If not specified, common whitespace characters are removed. [`String`](/sql-reference/data-types/string)
","","Returns the string with specified characters trimmed from the left. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT trimLeft('ClickHouse', 'Click');
```

```response title=Response
┌─trimLeft('Cl⋯', 'Click')─┐
│ House                    │
└──────────────────────────┘
```

","20.1","String"
"25.9.2.1","formatReadableQuantity",0,0,"","","System","
Given a number, this function returns a rounded number with suffix (thousand, million, billion, etc.) as a string.

This function accepts any numeric type as input, but internally it casts them to `Float64`.
Results might be suboptimal with large values.
    ","formatReadableQuantity(x)","- `x` — A number to format. [`UInt64`](/sql-reference/data-types/int-uint)
","","Returns a rounded number with suffix as a string. [`String`](/sql-reference/data-types/string)","**Format numbers with suffixes**

```sql title=Query
SELECT
    arrayJoin([1024, 1234 * 1000, (4567 * 1000) * 1000, 98765432101234]) AS number,
    formatReadableQuantity(number) AS number_for_humans
```

```response title=Response
┌─────────number─┬─number_for_humans─┐
│           1024 │ 1.02 thousand     │
│        1234000 │ 1.23 million      │
│     4567000000 │ 4.57 billion      │
│ 98765432101234 │ 98.77 trillion    │
└────────────────┴───────────────────┘
```

","20.10","Other"
"25.9.2.1","countMatchesCaseInsensitive",0,0,"","","System","
Like [`countMatches`](#countMatches) but performs case-insensitive matching.
    ","countMatchesCaseInsensitive(haystack, pattern)","- `haystack` — The string to search in. [`String`](/sql-reference/data-types/string)
- `pattern` — Regular expression pattern. [`const String`](/sql-reference/data-types/string)
","","Returns the number of matches found. [`UInt64`](/sql-reference/data-types/int-uint)","**Case insensitive count**

```sql title=Query
SELECT countMatchesCaseInsensitive('Hello HELLO world', 'hello')
```

```response title=Response
┌─countMatchesCaseInsensitive('Hello HELLO world', 'hello')─┐
│                                                         2 │
└───────────────────────────────────────────────────────────┘
```

","21.1","String Search"
"25.9.2.1","toQuarter",0,0,"","","System","
Returns the quarter of the year (1-4) for a given `Date` or `DateTime` value.
    ","toQuarter(datetime)","- `datetime` — Date or date with time to get the quarter of the year from. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
","","Returns the quarter of the year for the given date/time [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT toQuarter(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toQuarter(toDateTime('2023-04-21 10:20:30'))─┐
│                                            2 │
└──────────────────────────────────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","isFinite",0,0,"","","System","
Returns `1` if the Float32 or Float64 argument not infinite and not a `NaN`,
otherwise this function returns `0`.
    ","isFinite(x)","- `x` — Number to check for finiteness. [`Float*`](/sql-reference/data-types/float)
","","`1` if x is not infinite and not `NaN`, otherwise `0`.","**Test if a number is finite**

```sql title=Query
SELECT isFinite(inf)
```

```response title=Response
0
```

","1.1","Arithmetic"
"25.9.2.1","countMatches",0,0,"","","System","
Returns number of matches of a regular expression in a string.

:::note Version dependent behavior
The behavior of this function depends on the ClickHouse version:

- in versions < v25.6, the function stops counting at the first empty match even if a pattern accepts.
- in versions >= 25.6, the function continues execution when an empty match occurs. The legacy behavior can be restored using setting `count_matches_stop_at_empty_match = true`;
:::

    ","countMatches(haystack, pattern)","- `haystack` — The string to search in. [`String`](/sql-reference/data-types/string)
- `pattern` — Regular expression pattern. [`String`](/sql-reference/data-types/string)
","","Returns the number of matches found. [`UInt64`](/sql-reference/data-types/int-uint)","**Count digit sequences**

```sql title=Query
SELECT countMatches('hello 123 world 456 test', '[0-9]+')
```

```response title=Response
┌─countMatches('hello 123 world 456 test', '[0-9]+')─┐
│                                                   2 │
└─────────────────────────────────────────────────────┘
```

","21.1","String Search"
"25.9.2.1","fromDaysSinceYearZero",0,0,"","","System","
For a given number of days elapsed since [1 January 0000](https://en.wikipedia.org/wiki/Year_zero), returns the corresponding date in the [proleptic Gregorian calendar defined by ISO 8601](https://en.wikipedia.org/wiki/Gregorian_calendar#Proleptic_Gregorian_calendar).

The calculation is the same as in MySQL's `FROM_DAYS()` function. The result is undefined if it cannot be represented within the bounds of the [Date](../data-types/date.md) type.
    ","fromDaysSinceYearZero(days)","- `days` — The number of days passed since year zero. [`UInt32`](/sql-reference/data-types/int-uint)
","","Returns the date corresponding to the number of days passed since year zero. [`Date`](/sql-reference/data-types/date)","**Convert days since year zero to dates**

```sql title=Query
SELECT
fromDaysSinceYearZero(739136) AS date1,
fromDaysSinceYearZero(toDaysSinceYearZero(toDate('2023-09-08'))) AS date2
```

```response title=Response
┌──────date1─┬──────date2─┐
│ 2023-09-08 │ 2023-09-08 │
└────────────┴────────────┘
```

","23.11","Dates and Times"
"25.9.2.1","arrayWithConstant",0,0,"","","System","
Creates an array of length `length` filled with the constant `x`.
    ","arrayWithConstant(N, x)","- `length` — Number of elements in the array. [`(U)Int*`](/sql-reference/data-types/int-uint)
- `x` — The value of the `N` elements in the array, of any type. ","","Returns an Array with `N` elements of value `x`. [`Array(T)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT arrayWithConstant(3, 1)
```

```response title=Response
[1, 1, 1]
```

","20.1","Arrays"
"25.9.2.1","toStartOfNanosecond",0,0,"","","System","
Rounds down a date with time to the start of the nanoseconds.
        ","toStartOfNanosecond(datetime, [timezone])","- `datetime` — Date and time. [`DateTime64`](/sql-reference/data-types/datetime64)
- `timezone` — Optional. Timezone for the returned value. If not specified, the function uses the timezone of the `value` parameter. [`String`](/sql-reference/data-types/string)
","","Input value with nanoseconds. [`DateTime64`](/sql-reference/data-types/datetime64)","**Query without timezone**

```sql title=Query
WITH toDateTime64('2020-01-01 10:20:30.999999999', 9) AS dt64
SELECT toStartOfNanosecond(dt64);
```

```response title=Response
┌─────toStartOfNanosecond(dt64)─┐
│ 2020-01-01 10:20:30.999999999 │
└───────────────────────────────┘
```

**Query with timezone**

```sql title=Query
WITH toDateTime64('2020-01-01 10:20:30.999999999', 9) AS dt64
SELECT toStartOfNanosecond(dt64, 'Asia/Istanbul');
```

```response title=Response
┌─toStartOfNanosecond(dt64, 'Asia/Istanbul')─┐
│              2020-01-01 12:20:30.999999999 │
└────────────────────────────────────────────┘
```

","22.6","Dates and Times"
"25.9.2.1","fromUnixTimestamp64Second",0,0,"","","System","","","","","","","",""
"25.9.2.1","countEqual",0,0,"","","System","
Returns the number of elements in the array equal to `x`. Equivalent to `arrayCount(elem -> elem = x, arr)`.

`NULL` elements are handled as separate values.
","countEqual(arr, x)","- `arr` — Array to search. [`Array(T)`](/sql-reference/data-types/array)
- `x` — Value in the array to count. Any type. ","","Returns the number of elements in the array equal to `x` [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT countEqual([1, 2, NULL, NULL], NULL)
```

```response title=Response
2
```

","1.1","Arrays"
"25.9.2.1","JSONArrayLength",0,0,"","","System","
Returns the number of elements in the outermost JSON array.
The function returns `NULL` if input JSON string is invalid.
    ","JSONArrayLength(json)","- `json` — String with valid JSON. [`String`](/sql-reference/data-types/string)
","","Returns the number of array elements if `json` is a valid JSON array string, otherwise returns `NULL`. [`Nullable(UInt64)`](/sql-reference/data-types/nullable)","**Usage example**

```sql title=Query
SELECT
    JSONArrayLength(''),
    JSONArrayLength('[1,2,3]');
```

```response title=Response
┌─JSONArrayLength('')─┬─JSONArrayLength('[1,2,3]')─┐
│                ᴺᵁᴸᴸ │                          3 │
└─────────────────────┴────────────────────────────┘
```

","23.2","JSON"
"25.9.2.1","timezone",0,1,"","","System","
Returns the time zone name of the current session or converts a time zone
offset or name to a canonical time zone name.
    ","timezone()","","","Returns the canonical time zone name as a [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT timezone()
```

```response title=Response
┌─timezone()───────┐
│ Europe/Amsterdam │
└──────────────────┘
```

","21.4","Dates and Times"
"25.9.2.1","dynamicElement",0,0,"","","System","
Extracts a column with specified type from a `Dynamic` column.
","dynamicElement(dynamic, type_name)","- `dynamic` — Dynamic column - `type_name` — The name of the variant type to extract ","","","**Example**

```sql title=Query
CREATE TABLE test (d Dynamic) ENGINE = Memory;
INSERT INTO test VALUES (NULL), (42), ('Hello, World!'), ([1, 2, 3]);
SELECT d, dynamicType(d), dynamicElement(d, 'String'), dynamicElement(d, 'Int64'), dynamicElement(d, 'Array(Int64)'), dynamicElement(d, 'Date'), dynamicElement(d, 'Array(String)') FROM test;
```

```response title=Response
┌─d─────────────┬─dynamicType(d)─┬─dynamicElement(d, 'String')─┬─dynamicElement(d, 'Int64')─┬─dynamicElement(d, 'Array(Int64)')─┬─dynamicElement(d, 'Date')─┬─dynamicElement(d, 'Array(String)')─┐
│ ᴺᵁᴸᴸ          │ None           │ ᴺᵁᴸᴸ                        │                       ᴺᵁᴸᴸ │ []                                │                      ᴺᵁᴸᴸ │ []                                 │
│ 42            │ Int64          │ ᴺᵁᴸᴸ                        │                         42 │ []                                │                      ᴺᵁᴸᴸ │ []                                 │
│ Hello, World! │ String         │ Hello, World!               │                       ᴺᵁᴸᴸ │ []                                │                      ᴺᵁᴸᴸ │ []                                 │
│ [1,2,3]       │ Array(Int64)   │ ᴺᵁᴸᴸ                        │                       ᴺᵁᴸᴸ │ [1,2,3]                           │                      ᴺᵁᴸᴸ │ []                                 │
└───────────────┴────────────────┴─────────────────────────────┴────────────────────────────┴───────────────────────────────────┴───────────────────────────┴────────────────────────────────────┘
```

","","JSON"
"25.9.2.1","divide",0,0,"","","System","
    Calculates the quotient of two values `a` and `b`. The result type is always [Float64](/sql-reference/data-types/float).
    Integer division is provided by the `intDiv` function.

    :::note
    Division by `0` returns `inf`, `-inf`, or `nan`.
    :::
    ","divide(x, y)","- `x` — Dividend - `y` — Divisor ","","The quotient of x and y","**Dividing two numbers**

```sql title=Query
SELECT divide(25,5) AS quotient, toTypeName(quotient)
```

```response title=Response
5 Float64
```

**Dividing by zero**

```sql title=Query
SELECT divide(25,0)
```

```response title=Response
inf
```

","1.1","Arithmetic"
"25.9.2.1","h3EdgeAngle",0,0,"","","System","
Calculates the average length of an [H3](https://h3geo.org/docs/core-library/h3Indexing/) hexagon edge in grades.
    ","h3EdgeAngle(resolution)","- `resolution` — Index resolution. Range: `[0, 15]`. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns the average length of an [H3](#h3-index) hexagon edge in grades. [`Float64`](/sql-reference/data-types/float)","**Get edge angle for resolution 10**

```sql title=Query
SELECT h3EdgeAngle(10) AS edgeAngle
```

```response title=Response
┌───────h3EdgeAngle(10)─┐
│ 0.0005927224846720883 │
└───────────────────────┘
```

","20.1","Geo"
"25.9.2.1","acos",0,1,"","","System","
Returns the arc cosine of the argument.
","acos(x)","- `x` — The value for which to find arc cosine of. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal*`](/sql-reference/data-types/decimal)
","","Returns the arc cosine of x [`Float*`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT acos(0.5);
```

```response title=Response
1.0471975511965979
```

","1.1","Mathematical"
"25.9.2.1","fromUnixTimestamp64Micro",0,0,"","","System","","","","","","","",""
"25.9.2.1","timeSeriesTagsGroupToTags",0,0,"","","System","Finds tags associated with a group index. Group indices are numbers 0, 1, 2, 3 associated with each unique set of tags in the context of the currently executed query.","timeSeriesTagsGroupToTags(group)","- `group` — Group index associated with a time series. [`UInt64`](/sql-reference/data-types/int-uint)
","","Array of pairs (tag_name, tag_value). [`Array(Tuple(String, String))`](/sql-reference/data-types/array)","**Example**

```sql title=Query
SELECT timeSeriesStoreTags(8374283493092, [('region', 'eu'), ('env', 'dev')], '__name__', 'http_requests_count') AS id, timeSeriesIdToTagsGroup(id) AS group, timeSeriesTagsGroupToTags(group)
```

```response title=Response
8374283493092    0    [('__name__', ''http_requests_count''), ('env', 'dev'), ('region', 'eu')]
```

","25.8","Time Series"
"25.9.2.1","windowID",0,0,"","","System","","","","","","","",""
"25.9.2.1","multiMatchAnyIndex",0,0,"","","System","","","","","","","",""
"25.9.2.1","hopStart",0,0,"","","System","
Returns the inclusive lower bound of the corresponding hopping window.

Since one record can be assigned to multiple hop windows, the function only returns the bound of the first window when hop function is used without `WINDOW VIEW`.
    ","hopStart(time_attr, hop_interval, window_interval[, timezone])","- `time_attr` — Date and time. [`DateTime`](/sql-reference/data-types/datetime)
- `hop_interval` — Positive Hop interval. [`Interval`](/sql-reference/data-types/int-uint)
- `window_interval` — Positive Window interval. [`Interval`](/sql-reference/data-types/int-uint)
- `timezone` — Optional. Timezone name. [`String`](/sql-reference/data-types/string)
","","Returns the inclusive lower bound of the corresponding hopping window. [`DateTime`](/sql-reference/data-types/datetime)","**Hopping window start**

```sql title=Query
SELECT hopStart(now(), INTERVAL '1' DAY, INTERVAL '2' DAY)
```

```response title=Response
2024-07-03 00:00:00
```

","22.1","Time Window"
"25.9.2.1","dateDiff",0,1,"","","System","","","","","","","",""
"25.9.2.1","hop",0,0,"","","System","
A hopping time window has a fixed duration (`window_interval`) and hops by a specified hop interval (`hop_interval`). If the `hop_interval` is smaller than the `window_interval`, hopping windows are overlapping. Thus, records can be assigned to multiple windows.

Since one record can be assigned to multiple hop windows, the function only returns the bound of the first window when hop function is used without WINDOW VIEW.
    ","hop(time_attr, hop_interval, window_interval[, timezone])","- `time_attr` — Date and time. [`DateTime`](/sql-reference/data-types/datetime)
- `hop_interval` — Positive Hop interval. [`Interval`](/sql-reference/data-types/int-uint)
- `window_interval` — Positive Window interval. [`Interval`](/sql-reference/data-types/int-uint)
- `timezone` — Optional. Timezone name. [`String`](/sql-reference/data-types/string)
","","Returns the inclusive lower and exclusive upper bound of the corresponding hopping window. [`Tuple(DateTime, DateTime)`](/sql-reference/data-types/tuple)","**Hopping window**

```sql title=Query
SELECT hop(now(), INTERVAL '1' DAY, INTERVAL '2' DAY)
```

```response title=Response
('2024-07-03 00:00:00','2024-07-05 00:00:00')
```

","21.12","Time Window"
"25.9.2.1","hasAny",0,0,"","","System","
Checks whether two arrays have intersection by some elements.

- `Null` is processed as a value.
- The order of the values in both of the arrays does not matter.
","hasAny(arr_x, arr_y)","- `arr_x` — Array of any type with a set of elements. [`Array(T)`](/sql-reference/data-types/array)
- `arr_y` — Array of any type that shares a common supertype with array `arr_x`. [`Array(T)`](/sql-reference/data-types/array)
","","- `1`, if `arr_x` and `arr_y` have one similar element at least.
- `0`, otherwise.

Raises a `NO_COMMON_TYPE` exception if any of the elements of the two arrays do not share a common supertype.","**One array is empty**

```sql title=Query
SELECT hasAny([1], [])
```

```response title=Response
0
```

**Arrays containing NULL values**

```sql title=Query
SELECT hasAny([Null], [Null, 1])
```

```response title=Response
1
```

**Arrays containing values of a different type**

```sql title=Query
SELECT hasAny([-128, 1., 512], [1])
```

```response title=Response
1
```

**Arrays without a common type**

```sql title=Query
SELECT hasAny([[1, 2], [3, 4]], ['a', 'c'])
```

```response title=Response
Raises a `NO_COMMON_TYPE` exception
```

**Array of arrays**

```sql title=Query
SELECT hasAll([[1, 2], [3, 4]], [[1, 2], [1, 2]])
```

```response title=Response
1
```

","1.1","Arrays"
"25.9.2.1","fuzzBits",0,0,"","","System","
Flips the bits of the input string `s`, with probability `p` for each bit.
    ","fuzzBits(s, p)","- `s` — String or FixedString to perform bit fuzzing on [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring)
- `p` — Probability of flipping each bit as a number between `0.0` and `1.0` [`Float*`](/sql-reference/data-types/float)
","","Returns a Fuzzed string with same type as `s`. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring)","**Usage example**

```sql title=Query
SELECT fuzzBits(materialize('abacaba'), 0.1)
FROM numbers(3)
```

```response title=Response
┌─fuzzBits(materialize('abacaba'), 0.1)─┐
│ abaaaja                               │
│ a*cjab+                               │
│ aeca2A                                │
└───────────────────────────────────────┘
```

","20.5","Random Number"
"25.9.2.1","gcd",0,0,"","","System","
    Returns the greatest common divisor of two values a and b.

    An exception is thrown when dividing by zero or when dividing a minimal
    negative number by minus one.
    ","gcd(x, y)","- `x` — First integer - `y` — Second integer ","","The greatest common divisor of `x` and `y`.","**Usage example**

```sql title=Query
SELECT gcd(12, 18)
```

```response title=Response
6
```

","1.1","Arithmetic"
"25.9.2.1","minSampleSizeConversion",0,0,"","","System","","","","","","","",""
"25.9.2.1","jumpConsistentHash",0,0,"","","System","
Calculates the [jump consistent hash](https://arxiv.org/pdf/1406.2294.pdf) for an integer.
","jumpConsistentHash(key, buckets)","- `key` — The input key. [`UInt64`](/sql-reference/data-types/int-uint)
- `buckets` — The number of buckets. [`Int32`](/sql-reference/data-types/int-uint)
","","Returns the computed hash value. [`Int32`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT jumpConsistentHash(256, 4)
```

```response title=Response
┌─jumpConsistentHash(256, 4)─┐
│                          3 │
└────────────────────────────┘
```

","1.1","Hash"
"25.9.2.1","getTypeSerializationStreams",0,0,"","","System","","","","","","","",""
"25.9.2.1","space",0,1,"","","System","
Concatenates a space (` `) as many times with itself as specified.
","space(n)","- `n` — The number of times to repeat the space. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns astring containing a space repeated `n` times. If `n <= 0`, the function returns the empty string. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT space(3) AS res, length(res);
```

```response title=Response
┌─res─┬─length(res)─┐
│     │           3 │
└─────┴─────────────┘
```

","23.5","String"
"25.9.2.1","toMillisecond",0,0,"","","System","
Returns the millisecond component (0-999) of a `DateTime` or `DateTime64` value.
    ","toMillisecond(datetime)","- `datetime` — Date with time to get the millisecond from. [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
","","Returns the millisecond in the minute (0 - 59) of `datetime`. [`UInt16`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT toMillisecond(toDateTime64('2023-04-21 10:20:30.456', 3));
```

```response title=Response
┌──toMillisecond(toDateTime64('2023-04-21 10:20:30.456', 3))─┐
│                                                        456 │
└────────────────────────────────────────────────────────────┘
```

","24.2","Dates and Times"
"25.9.2.1","parseDateTime64InJodaSyntax",0,0,"","","System","","","","","","","",""
"25.9.2.1","generateUUIDv4",0,0,"","","System","Generates a [version 4](https://tools.ietf.org/html/rfc4122#section-4.4) [UUID](../data-types/uuid.md).","generateUUIDv4([expr])","- `expr` — Optional. An arbitrary expression used to bypass [common subexpression elimination](/sql-reference/functions/overview#common-subexpression-elimination) if the function is called multiple times in a query. The value of the expression has no effect on the returned UUID. ","","Returns a UUIDv4. [`UUID`](/sql-reference/data-types/uuid)","**Usage example**

```sql title=Query
SELECT generateUUIDv4(number) FROM numbers(3);
```

```response title=Response
┌─generateUUIDv4(number)───────────────┐
│ fcf19b77-a610-42c5-b3f5-a13c122f65b6 │
│ 07700d36-cb6b-4189-af1d-0972f23dc3bc │
│ 68838947-1583-48b0-b9b7-cf8268dd343d │
└──────────────────────────────────────┘
```

**Common subexpression elimination**

```sql title=Query
SELECT generateUUIDv4(1), generateUUIDv4(1);
```

```response title=Response
┌─generateUUIDv4(1)────────────────────┬─generateUUIDv4(2)────────────────────┐
│ 2d49dc6e-ddce-4cd0-afb8-790956df54c1 │ 2d49dc6e-ddce-4cd0-afb8-790956df54c1 │
└──────────────────────────────────────┴──────────────────────────────────────┘
```

","1.1","UUID"
"25.9.2.1","toFloat32OrNull",0,0,"","","System","
Converts an input value to a value of type [Float32](../data-types/float.md) but returns `NULL` in case of an error.
Like [`toFloat32`](#toFloat32) but returns `NULL` instead of throwing an exception on conversion errors.

Supported arguments:
- Values of type (U)Int*.
- String representations of (U)Int8/16/32/128/256.
- Values of type Float*, including `NaN` and `Inf`.
- String representations of Float*, including `NaN` and `Inf` (case-insensitive).

Unsupported arguments (return `NULL`):
- String representations of binary and hexadecimal values, e.g. `SELECT toFloat32OrNull('0xc0fe');`.
- Invalid string formats.

See also:
- [`toFloat32`](#toFloat32).
- [`toFloat32OrZero`](#toFloat32OrZero).
- [`toFloat32OrDefault`](#toFloat32OrDefault).
    ","toFloat32OrNull(x)","- `x` — A string representation of a number. [`String`](/sql-reference/data-types/string)
","","Returns a 32-bit Float value if successful, otherwise `NULL`. [`Float32`](/sql-reference/data-types/float) or [`NULL`](/sql-reference/syntax#null)","**Usage example**

```sql title=Query
SELECT
    toFloat32OrNull('42.7'),
    toFloat32OrNull('NaN'),
    toFloat32OrNull('abc')
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toFloat32OrNull('42.7'): 42.7
toFloat32OrNull('NaN'):  nan
toFloat32OrNull('abc'):  \N
```

","1.1","Type Conversion"
"25.9.2.1","endsWithUTF8",0,0,"","","System","
Returns whether string `s` ends with `suffix`.
Assumes that the string contains valid UTF-8 encoded text.
If this assumption is violated, no exception is thrown and the result is undefined.
","endsWithUTF8(s, suffix)","- `s` — String to check. [`String`](/sql-reference/data-types/string)
- `suffix` — Suffix to check for. [`String`](/sql-reference/data-types/string)
","","Returns `1` if `s` ends with `suffix`, otherwise `0`. [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT endsWithUTF8('данных', 'ых');
```

```response title=Response
┌─endsWithUTF8('данных', 'ых')─┐
│                            1 │
└──────────────────────────────┘
```

","23.8","String"
"25.9.2.1","h3IndexesAreNeighbors",0,0,"","","System","","","","","","","",""
"25.9.2.1","tryIdnaEncode",0,0,"","","System","
Returns the Unicode (UTF-8) representation (ToUnicode algorithm) of a domain name according to the [Internationalized Domain Names in Applications](https://en.wikipedia.org/wiki/Internationalized_domain_name#Internationalizing_Domain_Names_in_Applications) (IDNA) mechanism.
In case of an error it returns an empty string instead of throwing an exception.
","tryIdnaEncode(s)","- `s` — Input string. [`String`](/sql-reference/data-types/string)
","","Returns an ASCII representation of the input string according to the IDNA mechanism of the input value, or empty string if input is invalid. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT tryIdnaEncode('straße.münchen.de')
```

```response title=Response
┌─tryIdnaEncode('straße.münchen.de')──┐
│ xn--strae-oqa.xn--mnchen-3ya.de     │
└─────────────────────────────────────┘
```

","24.1","String"
"25.9.2.1","geohashDecode",0,0,"","","System","
Decodes any [geohash](https://en.wikipedia.org/wiki/Geohash)-encoded string into longitude and latitude coordinates.
    ","geohashDecode(hash_str)","- `hash_str` — Geohash-encoded string to decode. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring)
","","Returns a tuple of `(longitude, latitude)` with `Float64` precision. [`Tuple(Float64, Float64)`](/sql-reference/data-types/tuple)","**Basic usage**

```sql title=Query
SELECT geohashDecode('ezs42') AS res
```

```response title=Response
┌─res─────────────────────────────┐
│ (-5.60302734375,42.60498046875) │
└─────────────────────────────────┘
```

","20.1","Geo"
"25.9.2.1","numericIndexedVectorCardinality",0,0,"","","System","
Returns the cardinality (number of unique indexes) of the numericIndexedVector.
        ","numericIndexedVectorCardinality(numericIndexedVector)","- `numericIndexedVector` — A numericIndexedVector object. [`numericIndexedVector`](/sql-reference/functions/#create-numeric-indexed-vector-object)
","","Returns the number of unique indexes. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT numericIndexedVectorCardinality(numericIndexedVectorBuild(mapFromArrays([1, 2, 3], [10, 20, 30]))) AS res;
```

```response title=Response
┌─res─┐
│  3  │
└─────┘
```

","25.7","NumericIndexedVector"
"25.9.2.1","uniqThetaNot",0,0,"","","System","
Two uniqThetaSketch objects to do a_not_b calculation(set operation ×), the result is a new uniqThetaSketch.
    ","uniqThetaNot(uniqThetaSketch,uniqThetaSketch)","- `uniqThetaSketch` — uniqThetaSketch object. [`Tuple`](/sql-reference/data-types/tuple) or [`Array`](/sql-reference/data-types/array) or [`Date`](/sql-reference/data-types/date) or [`DateTime`](/sql-reference/data-types/datetime) or [`String`](/sql-reference/data-types/string) or [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
","","Returns a new uniqThetaSketch containing the a_not_b result. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT finalizeAggregation(uniqThetaNot(a, b)) AS a_not_b, finalizeAggregation(a) AS a_cardinality, finalizeAggregation(b) AS b_cardinality
FROM
(SELECT arrayReduce('uniqThetaState', [2, 3, 4]) AS a, arrayReduce('uniqThetaState', [1, 2]) AS b);
```

```response title=Response
┌─a_not_b─┬─a_cardinality─┬─b_cardinality─┐
│       2 │             3 │             2 │
└─────────┴───────────────┴───────────────┘
```

","22.9","Other"
"25.9.2.1","polygonsSymDifferenceCartesian",0,0,"","","System","","","","","","","",""
"25.9.2.1","substringIndexUTF8",0,0,"","","System","
Returns the substring of `s` before `count` occurrences of the delimiter `delim`, specifically for Unicode code points.
Assumes that the string contains valid UTF-8 encoded text.
If this assumption is violated, no exception is thrown and the result is undefined.
","substringIndexUTF8(s, delim, count)","- `s` — The string to extract substring from. [`String`](/sql-reference/data-types/string)
- `delim` — The character to split. [`String`](/sql-reference/data-types/string)
- `count` — The number of occurrences of the delimiter to count before extracting the substring. If count is positive, everything to the left of the final delimiter (counting from the left) is returned. If count is negative, everything to the right of the final delimiter (counting from the right) is returned. [`UInt`](/sql-reference/data-types/int-uint) or [`Int`](/sql-reference/data-types/int-uint)
","","Returns a substring of `s` before `count` occurrences of `delim`. [`String`](/sql-reference/data-types/string)","**UTF8 example**

```sql title=Query
SELECT substringIndexUTF8('www.straßen-in-europa.de', '.', 2)
```

```response title=Response
www.straßen-in-europa
```

","23.7","String"
"25.9.2.1","substringIndex",0,0,"","","System","
Returns the substring of `s` before `count` occurrences of the delimiter `delim`, as in Spark or MySQL.
","substringIndex(s, delim, count)","- `s` — The string to extract substring from. [`String`](/sql-reference/data-types/string)
- `delim` — The character to split. [`String`](/sql-reference/data-types/string)
- `count` — The number of occurrences of the delimiter to count before extracting the substring. If count is positive, everything to the left of the final delimiter (counting from the left) is returned. If count is negative, everything to the right of the final delimiter (counting from the right) is returned. [`UInt`](/sql-reference/data-types/int-uint) or [`Int`](/sql-reference/data-types/int-uint)
","","Returns a substring of `s` before `count` occurrences of `delim`. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT substringIndex('www.clickhouse.com', '.', 2)
```

```response title=Response
┌─substringIndex('www.clickhouse.com', '.', 2)─┐
│ www.clickhouse                               │
└──────────────────────────────────────────────┘
```

","23.7","String"
"25.9.2.1","formatReadableTimeDelta",0,0,"","","System","
Given a time interval (delta) in seconds, this function returns a time delta with year/month/day/hour/minute/second/millisecond/microsecond/nanosecond as a string.

This function accepts any numeric type as input, but internally it casts them to `Float64`. Results might be suboptimal with large values.
    ","formatReadableTimeDelta(column[, maximum_unit, minimum_unit])","- `column` — A column with a numeric time delta. [`Float64`](/sql-reference/data-types/float)
- `maximum_unit` — Optional. Maximum unit to show. Acceptable values: `nanoseconds`, `microseconds`, `milliseconds`, `seconds`, `minutes`, `hours`, `days`, `months`, `years`. Default value: `years`. [`const String`](/sql-reference/data-types/string)
- `minimum_unit` — Optional. Minimum unit to show. All smaller units are truncated. Acceptable values: `nanoseconds`, `microseconds`, `milliseconds`, `seconds`, `minutes`, `hours`, `days`, `months`, `years`. If explicitly specified value is bigger than `maximum_unit`, an exception will be thrown. Default value: `seconds` if `maximum_unit` is `seconds` or bigger, `nanoseconds` otherwise. [`const String`](/sql-reference/data-types/string)
","","Returns a time delta as a string. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT
    arrayJoin([100, 12345, 432546534]) AS elapsed,
    formatReadableTimeDelta(elapsed) AS time_delta
```

```response title=Response
┌────elapsed─┬─time_delta─────────────────────────────────────────────────────┐
│        100 │ 1 minute and 40 seconds                                        │
│      12345 │ 3 hours, 25 minutes and 45 seconds                             │
│  432546534 │ 13 years, 8 months, 17 days, 7 hours, 48 minutes and 54 seconds│
└────────────┴────────────────────────────────────────────────────────────────┘
```

**With maximum unit**

```sql title=Query
SELECT
    arrayJoin([100, 12345, 432546534]) AS elapsed,
    formatReadableTimeDelta(elapsed, 'minutes') AS time_delta
```

```response title=Response
┌────elapsed─┬─time_delta─────────────────────────────────────────────────────┐
│        100 │ 1 minute and 40 seconds                                         │
│      12345 │ 205 minutes and 45 seconds                                      │
│  432546534 │ 7209108 minutes and 54 seconds                                  │
└────────────┴─────────────────────────────────────────────────────────────────┘
```

","20.12","Other"
"25.9.2.1","geohashEncode",0,0,"","","System","
Encodes longitude and latitude as a [geohash](https://en.wikipedia.org/wiki/Geohash)-string.

:::
All coordinate parameters must be of the same type: either `Float32` or `Float64`.

For the `precision` parameter, any value less than `1` or greater than `12` is silently converted to `12`.
:::
    ","geohashEncode(longitude, latitude, [precision])","- `longitude` — Longitude part of the coordinate to encode. Range: `[-180°, 180°]`. [`Float32`](/sql-reference/data-types/float) or [`Float64`](/sql-reference/data-types/float)
- `latitude` — Latitude part of the coordinate to encode. Range: `[-90°, 90°]`. [`Float32`](/sql-reference/data-types/float) or [`Float64`](/sql-reference/data-types/float)
- `precision` — Optional. Length of the resulting encoded string. Default: 12. Range: `[1, 12]`. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns an alphanumeric string of the encoded coordinate (modified version of the base32-encoding alphabet is used) [`String`](/sql-reference/data-types/string)","**Basic usage with default precision**

```sql title=Query
SELECT geohashEncode(-5.60302734375, 42.593994140625) AS res
```

```response title=Response
┌─res──────────┐
│ ezs42d000000 │
└──────────────┘
```

","20.1","Geo"
"25.9.2.1","cutToFirstSignificantSubdomainCustomWithWWW",0,0,"","","System","
Returns the part of the domain that includes top-level subdomains up to the first significant subdomain without stripping `www`.
Accepts custom TLD list name from config.

Can be useful if you need fresh TLD list or you have custom.
        ","","","","","**cutToFirstSignificantSubdomainCustomWithWWW**

```sql title=Query
SELECT cutToFirstSignificantSubdomainCustomWithWWW('www.foo', 'public_suffix_list')
```

```response title=Response

```

","","URL"
"25.9.2.1","addHours",0,0,"","","System","
Adds a specified number of hours to a date, a date with time or a string-encoded date or date with time.
    ","addHours(datetime, num)","- `datetime` — Date or date with time to add specified number of hours to. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64) or [`String`](/sql-reference/data-types/string)
- `num` — Number of hours to add. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns `datetime` plus `num` hours [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64(3)`](/sql-reference/data-types/datetime64)","**Add hours to different date types**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addHours(date, 12) AS add_hours_with_date,
    addHours(date_time, 12) AS add_hours_with_date_time,
    addHours(date_time_string, 12) AS add_hours_with_date_time_string
```

```response title=Response
┌─add_hours_with_date─┬─add_hours_with_date_time─┬─add_hours_with_date_time_string─┐
│ 2024-01-01 12:00:00 │      2024-01-01 12:00:00 │         2024-01-01 12:00:00.000 │
└─────────────────────┴──────────────────────────┴─────────────────────────────────┘
```

**Using alternative INTERVAL syntax**

```sql title=Query
SELECT dateAdd('1998-06-16'::Date, INTERVAL 10 hour)
```

```response title=Response
┌─plus(CAST('1⋯alHour(10))─┐
│      1998-06-16 10:00:00 │
└──────────────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","arrayFill",0,0,"","","System","
The `arrayFill` function sequentially processes a source array from the first element
to the last, evaluating a lambda condition at each position using elements from
the source and condition arrays. When the lambda function evaluates to false at
position i, the function replaces that element with the element at position i-1
from the current state of the array. The first element is always preserved
regardless of any condition.
","arrayFill(func(x [, y1, ..., yN]), source_arr[, cond1_arr, ... , condN_arr])","- `func(x [, y1, ..., yN])` — A lambda function `func(x [, y1, y2, ... yN]) → F(x [, y1, y2, ... yN])` which operates on elements of the source array (`x`) and condition arrays (`y`). [`Lambda function`](/sql-reference/functions/overview#arrow-operator-and-lambda)
- `source_arr` — The source array to process. [`Lambda function`](/sql-reference/functions/overview#arrow-operator-and-lambda)
- `[, cond1_arr, ... , condN_arr]` — Optional. N condition arrays providing additional arguments to the lambda function. [`Array(T)`](/sql-reference/data-types/array)
","","Returns an array [`Array(T)`](/sql-reference/data-types/array)","**Example with single array**

```sql title=Query
SELECT arrayFill(x -> not isNull(x), [1, null, 2, null]) AS res
```

```response title=Response
[1, 1, 2, 2]
```

**Example with two arrays**

```sql title=Query
SELECT arrayFill(x, y, z -> x > y AND x < z, [5, 3, 6, 2], [4, 7, 1, 3], [10, 2, 8, 5]) AS res
```

```response title=Response
[5, 5, 6, 6]
```

","20.1","Arrays"
"25.9.2.1","toDate32OrNull",0,0,"","","System","
Converts an input value to a value of type Date32 but returns `NULL` if an invalid argument is received.
The same as [`toDate32`](#toDate32) but returns `NULL` if an invalid argument is received.
    ","toDate32OrNull(x)","- `x` — A string representation of a date. [`String`](/sql-reference/data-types/string)
","","Returns a Date32 value if successful, otherwise `NULL`. [`Date32`](/sql-reference/data-types/date32) or [`NULL`](/sql-reference/syntax#null)","**Usage example**

```sql title=Query
SELECT toDate32OrNull('2025-01-01'), toDate32OrNull('invalid')
```

```response title=Response
┌─toDate32OrNull('2025-01-01')─┬─toDate32OrNull('invalid')─┐
│                   2025-01-01 │                      ᴺᵁᴸᴸ │
└──────────────────────────────┴───────────────────────────┘
```

","21.9","Type Conversion"
"25.9.2.1","getServerSetting",0,0,"","","System","
Returns the currently set value, given a server setting name.
    ","getServerSetting(setting_name')","- `setting_name` — The server setting name. [`String`](/sql-reference/data-types/string)
","","Returns the server setting's current value. [`Any`](/sql-reference/data-types)","**Usage example**

```sql title=Query
SELECT getServerSetting('allow_use_jemalloc_memory');
```

```response title=Response
┌─getServerSetting('allow_use_jemalloc_memory')─┐
│ true                                          │
└───────────────────────────────────────────────┘
```

","25.6","Other"
"25.9.2.1","identity",0,0,"","","System","
This function returns the argument you pass to it, which is useful for debugging and testing. It lets you bypass index usage to see full scan performance instead. The query analyzer ignores anything inside identity functions when looking for indexes to use, and it also disables constant folding.
","identity(x)","- `x` — Input value. [`Any`](/sql-reference/data-types)
","","Returns the input value unchanged. [`Any`](/sql-reference/data-types)","**Usage example**

```sql title=Query
SELECT identity(42)
```

```response title=Response
42
```

","1.1","Other"
"25.9.2.1","icebergHash",0,0,"","","System","Implements logic of iceberg hashing transform: https://iceberg.apache.org/spec/#appendix-b-32-bit-hash-requirements.","icebergHash(N, value)","- `value` — Integer, bool, decimal, float, string, fixed_string, uuid, date, time, datetime. ","","Int32","**Example**

```sql title=Query
SELECT icebergHash(1.0 :: Float32)
```

```response title=Response
-142385009
```

","25.5","Other"
"25.9.2.1","bech32Decode",0,0,"","","System","
Decodes a Bech32 address string generated by either the bech32 or bech32m algorithms.

:::note
Unlike the encode function, `Bech32Decode` will automatically handle padded FixedStrings.
:::
    ","bech32Decode(address)","- `address` — A Bech32 string to decode. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring)
","","Returns a tuple consisting of `(hrp, data)` that was used to encode the string. The data is in binary format. [`Tuple(String, String)`](/sql-reference/data-types/tuple)","**Decode address**

```sql title=Query
SELECT tup.1 AS hrp, hex(tup.2) AS data FROM (SELECT bech32Decode('bc1w508d6qejxtdg4y5r3zarvary0c5xw7kj7gz7z') AS tup)
```

```response title=Response
bc   751E76E8199196D454941C45D1B3A323F1433BD6
```

**Testnet address**

```sql title=Query
SELECT tup.1 AS hrp, hex(tup.2) AS data FROM (SELECT bech32Decode('tb1w508d6qejxtdg4y5r3zarvary0c5xw7kzp034v') AS tup)
```

```response title=Response
tb   751E76E8199196D454941C45D1B3A323F1433BD6
```

","25.6","Encoding"
"25.9.2.1","geoDistance",0,0,"","","System","
Similar to the `greatCircleDistance` function but it calculates the distance on the WGS-84 ellipsoid, which is a more accurate representation of Earth's shape than a perfect sphere.
It offers the same performance as for `greatCircleDistance` and it is therefore recommended to use `geoDistance` to calculate distances on Earth.

Technical note: for close enough points it calculates the distance using planar approximation with the metric on the tangent plane at the midpoint of the coordinates.
        ","geoDistance(lon1Deg, lat1Deg, lon2Deg, lat2Deg)","- `lon1Deg` — Longitude of the first point in degrees. Range: `[-180°, 180°]`. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
- `lat1Deg` — Latitude of the first point in degrees. Range: `[-90°, 90°]`. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
- `lon2Deg` — Longitude of the second point in degrees. Range: `[-180°, 180°]`. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
- `lat2Deg` — Latitude of the second point in degrees. Range: `[-90°, 90°]`. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
","","Returns the distance between two points on the Earth's surface, in meters [`Float64`](/sql-reference/data-types/float)","**Basic usage**

```sql title=Query
SELECT geoDistance(38.8976, -77.0366, 39.9496, -75.1503) AS geoDistance
```

```response title=Response
┌─geoDistance─┐
│   212458.73 │
└─────────────┘
```

","1.1","Geo"
"25.9.2.1","greatCircleDistance",0,0,"","","System","
Calculates the distance between two points on the Earth's surface using [the great-circle formula](https://en.wikipedia.org/wiki/Great-circle_distance).
        ","greatCircleDistance(lon1Deg, lat1Deg, lon2Deg, lat2Deg)","- `lon1Deg` — Longitude of the first point in degrees. Range: `[-180°, 180°]`. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
- `lat1Deg` — Latitude of the first point in degrees. Range: `[-90°, 90°]`. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
- `lon2Deg` — Longitude of the second point in degrees. Range: `[-180°, 180°]`. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
- `lat2Deg` — Latitude of the second point in degrees. Range: `[-90°, 90°]`. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
","","Returns the distance between two points on the Earth's surface, in meters [`Float64`](/sql-reference/data-types/float)","**Basic usage**

```sql title=Query
SELECT greatCircleDistance(55.755831, 37.617673, -55.755831, -37.617673) AS greatCircleDistance
```

```response title=Response
┌─greatCircleDistance─┐
│            14128352 │
└─────────────────────┘
```

","1.1","Geo"
"25.9.2.1","isIPv4String",0,0,"","","System","
Determines whether the input string is an IPv4 address or not.
For the IPv6 version see [`isIPv6String`](#isIPv6String).
    ","isIPv4String(string)","- `string` — IP address string to check. [`String`](/sql-reference/data-types/string)
","","Returns `1` if `string` is IPv4 address, otherwise `0`. [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT addr, isIPv4String(addr)
FROM(
SELECT ['0.0.0.0', '127.0.0.1', '::ffff:127.0.0.1'] AS addr
)
ARRAY JOIN addr;
```

```response title=Response
┌─addr─────────────┬─isIPv4String(addr)─┐
│ 0.0.0.0          │                  1 │
│ 127.0.0.1        │                  1 │
│ ::ffff:127.0.0.1 │                  0 │
└──────────────────┴────────────────────┘
```

","21.1","IP Address"
"25.9.2.1","JSON_QUERY",0,0,"","","System","
Parses a JSON and extract a value as a JSON array or JSON object.
If the value does not exist, an empty string will be returned.
        ","JSON_QUERY(json, path)","- `json` — A string with valid JSON. [`String`](/sql-reference/data-types/string)
- `path` — A string representing the path. [`String`](/sql-reference/data-types/string)
","","Returns the extracted JSON array or JSON object as a string, or an empty string if the value does not exist. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT JSON_QUERY('{""hello"":""world""}', '$.hello');
SELECT JSON_QUERY('{""array"":[[0, 1, 2, 3, 4, 5], [0, -1, -2, -3, -4, -5]]}', '$.array[*][0 to 2, 4]');
SELECT JSON_QUERY('{""hello"":2}', '$.hello');
SELECT toTypeName(JSON_QUERY('{""hello"":2}', '$.hello'));
```

```response title=Response
[""world""]
[0, 1, 4, 0, -1, -4]
[2]
String
```

","21.8","JSON"
"25.9.2.1","greater",0,0,"","","System","Compares two values for greater-than relation.","greater(a, b)
    -- a > b","- `a` — First value.<sup>[*](#comparison-rules)</sup> - `b` — Second value.<sup>[*](#comparison-rules)</sup> ","","Returns `1` if `a` is greater than `b`, otherwise `0` [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT 2 > 1, 1 > 2;
```

```response title=Response
┌─greater(2, 1)─┬─greater(1, 2)─┐
│             1 │             0 │
└───────────────┴───────────────┘
```

","1.1","Comparison"
"25.9.2.1","murmurHash3_128",0,0,"","","System","
Computes the 128-bit [MurmurHash3](https://github.com/aappleby/smhasher) hash of the input value.
","murmurHash3_128(arg1[, arg2, ...])","- `arg1[, arg2, ...]` — A variable number of input arguments for which to compute the hash. [`Any`](/sql-reference/data-types)
","","Returns the computed 128-bit `MurmurHash3` hash value of the input arguments. [`FixedString(16)`](/sql-reference/data-types/fixedstring)","**Usage example**

```sql title=Query
SELECT hex(murmurHash3_128('foo', 'foo', 'foo'));
```

```response title=Response
┌─hex(murmurHash3_128('foo', 'foo', 'foo'))─┐
│ F8F7AD9B6CD4CF117A71E277E2EC2931          │
└───────────────────────────────────────────┘
```

","18.10","Hash"
"25.9.2.1","reverseUTF8",0,0,"","","System","
Reverses a sequence of Unicode code points in a string.
Assumes that the string contains valid UTF-8 encoded text.
If this assumption is violated, no exception is thrown and the result is undefined.
","reverseUTF8(s)","- `s` — String containing valid UTF-8 encoded text. [`String`](/sql-reference/data-types/string)
","","Returns a string with the sequence of Unicode code points reversed. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT reverseUTF8('ClickHouse')
```

```response title=Response
esuoHkcilC
```

","1.1","String"
"25.9.2.1","murmurHash3_64",0,0,"","","System","
Computes the [MurmurHash3](https://github.com/aappleby/smhasher) hash of the input value.

:::note
The calculated hash values may be equal for the same input values of different argument types.
This affects for example integer types of different size, named and unnamed `Tuple` with the same data, `Map` and the corresponding `Array(Tuple(key, value))` type with the same data.
:::
","murmurHash3_64(arg1[, arg2, ...])","- `arg1[, arg2, ...]` — A variable number of input arguments for which to compute the hash. [`Any`](/sql-reference/data-types)
","","Returns the computed hash value of the input arguments. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT murmurHash3_64(array('e','x','a'), 'mple', 10, toDateTime('2019-06-15 23:00:00')) AS MurmurHash3, toTypeName(MurmurHash3) AS type;
```

```response title=Response
┌──────────MurmurHash3─┬─type───┐
│ 11832096901709403633 │ UInt64 │
└──────────────────────┴────────┘
```

","18.10","Hash"
"25.9.2.1","greaterOrEquals",0,0,"","","System","Compares two values for greater-than-or-equal-to relation.","greaterOrEquals(a, b)
    -- a >= b","- `a` — First value.<sup>[*](#comparison-rules)</sup> - `b` — Second value.<sup>[*](#comparison-rules)</sup> ","","Returns `1` if `a` is greater than or equal to `b`, otherwise `0` [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT 2 >= 1, 2 >= 2, 1 >= 2;
```

```response title=Response
┌─greaterOrEquals(2, 1)─┬─greaterOrEquals(2, 2)─┬─greaterOrEquals(1, 2)─┐
│                     1 │                     1 │                     0 │
└───────────────────────┴───────────────────────┴───────────────────────┘
```

","1.1","Comparison"
"25.9.2.1","CRC32",0,1,"","","System","
Calculates the CRC32 checksum of a string using the CRC-32-IEEE 802.3 polynomial and initial value `0xffffffff` (zlib implementation).
","CRC32(s)","- `s` — String to calculate CRC32 for. [`String`](/sql-reference/data-types/string)
","","Returns the CRC32 checksum of the string. [`UInt32`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT CRC32('ClickHouse')
```

```response title=Response
┌─CRC32('ClickHouse')─┐
│          1538217360 │
└─────────────────────┘
```

","20.1","String"
"25.9.2.1","printf",0,0,"","","System","
The `printf` function formats the given string with the values (strings, integers, floating-points etc.) listed in the arguments, similar to printf function in C++.
The format string can contain format specifiers starting with `%` character.
Anything not contained in `%` and the following format specifier is considered literal text and copied verbatim into the output.
Literal `%` character can be escaped by `%%`.
","printf(format[, sub1, sub2, ...])","- `format` — The format string with `%` specifiers. [`String`](/sql-reference/data-types/string)
- `sub1, sub2, ...` — Optional. Zero or more values to substitute into the format string. [`Any`](/sql-reference/data-types)
","","Returns a formatted string. [`String`](/sql-reference/data-types/string)","**C++-style formatting**

```sql title=Query
SELECT printf('%%%s %s %d', 'Hello', 'World', 2024);
```

```response title=Response
┌─printf('%%%s %s %d', 'Hello', 'World', 2024)─┐
│ %Hello World 2024                            │
└──────────────────────────────────────────────┘
```

","24.8","String Replacement"
"25.9.2.1","domainWithoutWWWRFC",0,0,"","","System","
Returns the domain without leading `www.` if present. Similar to [`domainWithoutWWW`](#domainwithoutwww) but conforms to [RFC 3986](https://datatracker.ietf.org/doc/html/rfc3986).
    ","domainWithoutWWWRFC(url)","- `url` — URL. [`String`](/sql-reference/data-types/string)
","","Returns the domain name if the input string can be parsed as a URL (without leading `www.`), otherwise an empty string. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT
    domainWithoutWWW('http://user:password@www.example.com:8080/path?query=value#fragment'),
    domainWithoutWWWRFC('http://user:password@www.example.com:8080/path?query=value#fragment');
```

```response title=Response
┌─domainWithoutWWW('http://user:password@www.example.com:8080/path?query=value#fragment')─┬─domainWithoutWWWRFC('http://user:password@www.example.com:8080/path?query=value#fragment')─┐
│                                                                                         │ example.com                                                                                │
└─────────────────────────────────────────────────────────────────────────────────────────┴────────────────────────────────────────────────────────────────────────────────────────────┘
```

","1.1","URL"
"25.9.2.1","arrayEnumerateDenseRanked",0,0,"","","System","Returns an array the same size as the source array, indicating where each element first appears in the source array. It allows for enumeration of a multidimensional array with the ability to specify how deep to look inside the array.","arrayEnumerateDenseRanked(clear_depth, arr, max_array_depth)","- `clear_depth` — Enumerate elements at the specified level separately. Must be less than or equal to `max_arr_depth`. [`UInt*`](/sql-reference/data-types/int-uint)
- `arr` — N-dimensional array to enumerate. [`Array(T)`](/sql-reference/data-types/array)
- `max_array_depth` — The maximum effective depth. Must be less than or equal to the depth of `arr`. [`UInt*`](/sql-reference/data-types/int-uint)
","","Returns an array denoting where each element first appears in the source array [`Array`](/sql-reference/data-types/array)","**Basic usage**

```sql title=Query
-- With clear_depth=1 and max_array_depth=1, the result is identical to what arrayEnumerateDense would give.

SELECT arrayEnumerateDenseRanked(1,[10, 20, 10, 30],1);
```

```response title=Response
[1,2,1,3]
```

**Usage with a multidimensional array**

```sql title=Query
-- In this example, arrayEnumerateDenseRanked is used to obtain an array indicating, for each element of the
-- multidimensional array, what its position is among elements of the same value.
-- For the first row of the passed array, [10, 10, 30, 20], the corresponding first row of the result is [1, 1, 2, 3],
-- indicating that 10 is the first number encountered in position 1 and 2, 30 the second number encountered in position 3
-- and 20 is the third number encountered in position 4.
-- For the second row, [40, 50, 10, 30], the corresponding second row of the result is [4,5,1,2], indicating that 40
-- and 50 are the fourth and fifth numbers encountered in position 1 and 2 of that row, that another 10
-- (the first encountered number) is in position 3 and 30 (the second number encountered) is in the last position.

SELECT arrayEnumerateDenseRanked(1,[[10,10,30,20],[40,50,10,30]],2);
```

```response title=Response
[[1,1,2,3],[4,5,1,2]]
```

**Example with increased clear_depth**

```sql title=Query
-- Changing clear_depth=2 results in the enumeration occurring separately for each row anew.

SELECT arrayEnumerateDenseRanked(2,[[10,10,30,20],[40,50,10,30]],2);
```

```response title=Response
[[1, 1, 2, 3], [1, 2, 3, 4]]
```

","20.1","Arrays"
"25.9.2.1","reinterpretAsUUID",0,0,"","","System","","","","","","","",""
"25.9.2.1","simpleJSONExtractFloat",0,0,"","","System","
Parses `Float64` from the value of the field named `field_name`.
If `field_name` is a string field, it tries to parse a number from the beginning of the string.
If the field does not exist, or it exists but does not contain a number, it returns `0`.
","simpleJSONExtractFloat(json, field_name)","- `json` — The JSON in which the field is searched for. [`String`](/sql-reference/data-types/string)
- `field_name` — The name of the field to search for. [`const String`](/sql-reference/data-types/string)
","","Returns the number parsed from the field if the field exists and contains a number, otherwise `0`. [`Float64`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
CREATE TABLE jsons
(
    `json` String
)
ENGINE = MergeTree
ORDER BY tuple();

INSERT INTO jsons VALUES ('{""foo"":""-4e3""}');
INSERT INTO jsons VALUES ('{""foo"":-3.4}');
INSERT INTO jsons VALUES ('{""foo"":5}');
INSERT INTO jsons VALUES ('{""foo"":""not1number""}');
INSERT INTO jsons VALUES ('{""baz"":2}');

SELECT simpleJSONExtractFloat(json, 'foo') FROM jsons ORDER BY json;
```

```response title=Response
0
-4000
0
-3.4
5
```

","21.4","JSON"
"25.9.2.1","generateULID",0,0,"","","System","
Generates a [Universally Unique Lexicographically Sortable Identifier (ULID)](https://github.com/ulid/spec).
    ","generateULID([x])","- `x` — Optional. An expression resulting in any of the supported data types. The resulting value is discarded, but the expression itself if used for bypassing [common subexpression elimination](/sql-reference/functions/overview#common-subexpression-elimination) if the function is called multiple times in one query. [`Any`](/sql-reference/data-types)
","","Returns a ULID. [`FixedString(26)`](/sql-reference/data-types/fixedstring)","**Usage example**

```sql title=Query
SELECT generateULID()
```

```response title=Response
┌─generateULID()─────────────┐
│ 01GNB2S2FGN2P93QPXDNB4EN2R │
└────────────────────────────┘
```

**Usage example if it is needed to generate multiple values in one row**

```sql title=Query
SELECT generateULID(1), generateULID(2)
```

```response title=Response
┌─generateULID(1)────────────┬─generateULID(2)────────────┐
│ 01GNB2SGG4RHKVNT9ZGA4FFMNP │ 01GNB2SGG4V0HMQVH4VBVPSSRB │
└────────────────────────────┴────────────────────────────┘
```

","23.2","ULID"
"25.9.2.1","randLogNormal",0,0,"","","System","
Returns a random Float64 number drawn from a [log-normal distribution](https://en.wikipedia.org/wiki/Log-normal_distribution).
    ","randLogNormal(mean, stddev[, x])","- `mean` — The mean value of distribution. [`Float64`](/sql-reference/data-types/float)
- `stddev` — The standard deviation of the distribution. [`Float64`](/sql-reference/data-types/float)
- `x` — Optional and ignored. The only purpose of the argument is to prevent [common subexpression elimination](/sql-reference/functions/overview#common-subexpression-elimination) when the same function call is used multiple times in a query. [`Any`](/sql-reference/data-types)
","","Returns a random Float64 number drawn from the specified log-normal distribution. [`Float64`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT randLogNormal(100, 5) FROM numbers(5)
```

```response title=Response
┌─randLogNormal(100, 5)─┐
│  1.295699673937363e48 │
│  9.719869109186684e39 │
│  6.110868203189557e42 │
│  9.912675872925529e39 │
│ 2.3564708490552458e42 │
└───────────────────────┘
```

","22.10","Random Number"
"25.9.2.1","ifNull",0,1,"","","System","
Returns an alternative value if the first argument is `NULL`.
    ","ifNull(x, alt)","- `x` — The value to check for `NULL`. [`Any`](/sql-reference/data-types)
- `alt` — The value that the function returns if `x` is `NULL`. [`Any`](/sql-reference/data-types)
","","Returns the value of `x` if it is not `NULL`, otherwise `alt`. [`Any`](/sql-reference/data-types)","**Usage example**

```sql title=Query
SELECT ifNull('a', 'b'), ifNull(NULL, 'b');
```

```response title=Response
┌─ifNull('a', 'b')─┬─ifNull(NULL, 'b')─┐
│ a                │ b                 │
└──────────────────┴───────────────────┘
```

","1.1","Null"
"25.9.2.1","h3EdgeLengthM",0,0,"","","System","
Calculates the average length of an [H3](https://h3geo.org/docs/core-library/h3Indexing/) hexagon edge in meters.
    ","h3EdgeLengthM(resolution)","- `resolution` — Index resolution. Range: `[0, 15]`. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns the average edge length of an [H3](#h3-index) hexagon in meters. [`Float64`](/sql-reference/data-types/float)","**Get edge length for maximum resolution**

```sql title=Query
SELECT h3EdgeLengthM(15) AS edgeLengthM
```

```response title=Response
┌─edgeLengthM─┐
│ 0.509713273 │
└─────────────┘
```

","20.1","Geo"
"25.9.2.1","MACNumToString",0,0,"","","System","","","","","","","",""
"25.9.2.1","arrayExcept",0,0,"","","System","
Returns an array containing elements from `source` that are not present in `except`, preserving the original order.

This function performs a set difference operation between two arrays. For each element in `source`, it checks if the element exists in `except` (using exact comparison). If not, the element is included in the result.

The operation maintains these properties:
1. Order of elements from `source` is preserved
2. Duplicates in `source` are preserved if they don't exist in `except`
3. NULL is handled as a separate value
    ","arrayExcept(source, except)","- `source` — The source array containing elements to filter.  [`Array(T)`](/sql-reference/data-types/array)
- `except` — The array containing elements to exclude from the result.  [`Array(T)`](/sql-reference/data-types/array)
","","Returns an array of the same type as the input array containing elements from `source` that weren't found in `except`.  [`Array(T)`](/sql-reference/data-types/array)","**basic**

```sql title=Query
SELECT arrayExcept([1, 2, 3, 2, 4], [3, 5])
```

```response title=Response
[1, 2, 2, 4]
```

**with_nulls1**

```sql title=Query
SELECT arrayExcept([1, NULL, 2, NULL], [2])
```

```response title=Response
[1, NULL, NULL]
```

**with_nulls2**

```sql title=Query
SELECT arrayExcept([1, NULL, 2, NULL], [NULL, 2, NULL])
```

```response title=Response
[1]
```

**strings**

```sql title=Query
SELECT arrayExcept(['apple', 'banana', 'cherry'], ['banana', 'date'])
```

```response title=Response
['apple', 'cherry']
```

","25.9","Arrays"
"25.9.2.1","arrayRotateLeft",0,0,"","","System","Rotates an array to the left by the specified number of elements. Negative values of `n` are treated as rotating to the right by the absolute value of the rotation.","arrayRotateLeft(arr, n)","- `arr` — The array for which to rotate the elements.[`Array(T)`](/sql-reference/data-types/array). - `n` — Number of elements to rotate. [`(U)Int8/16/32/64`](/sql-reference/data-types/int-uint). ","","An array rotated to the left by the specified number of elements [`Array(T)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT arrayRotateLeft([1,2,3,4,5,6], 2) as res;
```

```response title=Response
[3,4,5,6,1,2]
```

**Negative value of n**

```sql title=Query
SELECT arrayRotateLeft([1,2,3,4,5,6], -2) as res;
```

```response title=Response
[5,6,1,2,3,4]
```

","23.8","Arrays"
"25.9.2.1","changeMonth",0,0,"","","System","Changes the month component of a date or date time.","changeMonth(date_or_datetime, value)","- `date_or_datetime` — The value to change. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
- `value` — The new value. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns a value of the same type as `date_or_datetime` with modified month component. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)","**Usage example**

```sql title=Query
SELECT changeMonth('2024-01-01'::DateTime, 12)
```

```response title=Response
2024-12-01 00:00:00
```

","24.7","Dates and Times"
"25.9.2.1","cutToFirstSignificantSubdomainWithWWWRFC",0,0,"","","System","Similar to `cutToFirstSignificantSubdomainWithWWW` but follows stricter rules to be compatible with RFC 3986 and less performant.","","","","","","","URL"
"25.9.2.1","intDiv",0,0,"","","System","
Performs an integer division of two values `x` by `y`. In other words it
computes the quotient rounded down to the next smallest integer.

The result has the same width as the dividend (the first parameter).

An exception is thrown when dividing by zero, when the quotient does not fit
in the range of the dividend, or when dividing a minimal negative number by minus one.
    ","intDiv(x, y)","- `x` — Left hand operand. - `y` — Right hand operand. ","","Result of integer division of `x` and `y`","**Integer division of two floats**

```sql title=Query
SELECT intDiv(toFloat64(1), 0.001) AS res, toTypeName(res)
```

```response title=Response
┌──res─┬─toTypeName(intDiv(toFloat64(1), 0.001))─┐
│ 1000 │ Int64                                   │
└──────┴─────────────────────────────────────────┘
```

**Quotient does not fit in the range of the dividend**

```sql title=Query
SELECT
intDiv(1, 0.001) AS res,
toTypeName(res)
```

```response title=Response
Received exception from server (version 23.2.1):
Code: 153. DB::Exception: Received from localhost:9000. DB::Exception:
Cannot perform integer division, because it will produce infinite or too
large number: While processing intDiv(1, 0.001) AS res, toTypeName(res).
(ILLEGAL_DIVISION)
```

","1.1","Arithmetic"
"25.9.2.1","dateTimeToSnowflake",0,0,"","","System","

<DeprecatedBadge/>

:::warning
This function is deprecated and can only be used if setting [`allow_deprecated_snowflake_conversion_functions`](../../operations/settings/settings.md#allow_deprecated_snowflake_conversion_functions) is enabled.
The function will be removed at some point in future.

Please use function [dateTimeToSnowflakeID](#dateTimeToSnowflakeID) instead.
:::

Converts a [DateTime](../data-types/datetime.md) value to the first [Snowflake ID](https://en.wikipedia.org/wiki/Snowflake_ID) at the giving time.
    ","dateTimeToSnowflake(value)","- `value` — Date with time. [`DateTime`](/sql-reference/data-types/datetime)
","","Returns the input value as the first Snowflake ID at that time. [`Int64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
WITH toDateTime('2021-08-15 18:57:56', 'Asia/Shanghai') AS dt SELECT dateTimeToSnowflake(dt);
```

```response title=Response
┌─dateTimeToSnowflake(dt)─┐
│     1426860702823350272 │
└─────────────────────────┘
```

","21.10","UUID"
"25.9.2.1","domain",0,0,"","","System","
Extracts the hostname from a URL.

The URL can be specified with or without a protocol.
    ","domain(url)","- `url` — URL. [`String`](/sql-reference/data-types/string)
","","Returns the host name if the input string can be parsed as a URL, otherwise an empty string. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT domain('svn+ssh://some.svn-hosting.com:80/repo/trunk');
```

```response title=Response
┌─domain('svn+ssh://some.svn-hosting.com:80/repo/trunk')─┐
│ some.svn-hosting.com                                   │
└────────────────────────────────────────────────────────┘
```

","1.1","URL"
"25.9.2.1","cutToFirstSignificantSubdomain",0,0,"","","System","Returns the part of the domain that includes top-level subdomains up to the ""first significant subdomain"" (see documentation of the `firstSignificantSubdomain`).","","","","","**cutToFirstSignificantSubdomain1**

```sql title=Query
SELECT cutToFirstSignificantSubdomain('https://news.clickhouse.com.tr/')
```

```response title=Response

```

**cutToFirstSignificantSubdomain2**

```sql title=Query
SELECT cutToFirstSignificantSubdomain('www.tr')
```

```response title=Response

```

**cutToFirstSignificantSubdomain3**

```sql title=Query
SELECT cutToFirstSignificantSubdomain('tr')
```

```response title=Response

```

","","URL"
"25.9.2.1","getMacro",0,0,"","","System","
Returns the value of a macro from the server configuration file.
Macros are defined in the [`<macros>`](/operations/server-configuration-parameters/settings#macros) section of the configuration file and can be used to distinguish servers by convenient names even if they have complicated hostnames.
If the function is executed in the context of a distributed table, it generates a normal column with values relevant to each shard.
","getMacro(name)","- `name` — The name of the macro to retrieve. [`const String`](/sql-reference/data-types/string)
","","Returns the value of the specified macro. [`String`](/sql-reference/data-types/string)","**Basic usage**

```sql title=Query
SELECT getMacro('test');
```

```response title=Response
┌─getMacro('test')─┐
│ Value            │
└──────────────────┘
```

","20.1","Other"
"25.9.2.1","toYear",0,0,"","","System","
Returns the year component (AD) of a `Date` or `DateTime` value.
    ","toYear(datetime)","- `datetime` — Date or date with time to get the year from. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
","","Returns the year of the given Date or DateTime [`UInt16`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT toYear(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toYear(toDateTime('2023-04-21 10:20:30'))─┐
    │                                     2023  │
    └───────────────────────────────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","log",0,1,"","","System","
Returns the natural logarithm of the argument.
","log(x)","- `x` — The number for which to compute the natural logarithm of. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal*`](/sql-reference/data-types/decimal)
","","Returns the natural logarithm of `x`. [`Float*`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT log(10);
```

```response title=Response
2.302585092994046
```

","1.1","Mathematical"
"25.9.2.1","errorCodeToName",0,0,"","","System","
Returns the textual name of a numeric ClickHouse error code.
The mapping from numeric error codes to error names is available [here](https://github.com/ClickHouse/ClickHouse/blob/master/src/Common/ErrorCodes.cpp).
","errorCodeToName(error_code)","- `error_code` — ClickHouse error code. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
","","Returns the textual name of `error_code`. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT errorCodeToName(252);
```

```response title=Response
┌─errorCodeToName(252)─┐
│ TOO_MANY_PARTS       │
└──────────────────────┘
```

","20.12","Other"
"25.9.2.1","toTimeOrNull",0,0,"","","System","
Converts an input value to a value of type Time but returns `NULL` in case of an error.
Like [`toTime`](#toTime) but returns `NULL` instead of throwing an exception on conversion errors.

See also:
- [`toTime`](#toTime)
- [`toTimeOrZero`](#toTimeOrZero)
    ","toTimeOrNull(x)","- `x` — A string representation of a time. [`String`](/sql-reference/data-types/string)
","","Returns a Time value if successful, otherwise `NULL`. [`Time`](/sql-reference/data-types/time) or [`NULL`](/sql-reference/syntax#null)","**Usage example**

```sql title=Query
SELECT toTimeOrNull('12:30:45'), toTimeOrNull('invalid')
```

```response title=Response
┌─toTimeOrNull('12:30:45')─┬─toTimeOrNull('invalid')─┐
│                 12:30:45 │                    ᴺᵁᴸᴸ │
└──────────────────────────┴─────────────────────────┘
```

","1.1","Type Conversion"
"25.9.2.1","h3GetDestinationIndexFromUnidirectionalEdge",0,0,"","","System","","","","","","","",""
"25.9.2.1","toDate32OrDefault",0,0,"","","System","","","","","","","",""
"25.9.2.1","addMinutes",0,0,"","","System","
Adds a specified number of minutes to a date, a date with time or a string-encoded date or date with time.
    ","addMinutes(datetime, num)","- `datetime` — Date or date with time to add specified number of minutes to. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64) or [`String`](/sql-reference/data-types/string)
- `num` — Number of minutes to add. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns `datetime` plus `num` minutes [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64(3)`](/sql-reference/data-types/datetime64)","**Add minutes to different date types**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addMinutes(date, 20) AS add_minutes_with_date,
    addMinutes(date_time, 20) AS add_minutes_with_date_time,
    addMinutes(date_time_string, 20) AS add_minutes_with_date_time_string
```

```response title=Response
┌─add_minutes_with_date─┬─add_minutes_with_date_time─┬─add_minutes_with_date_time_string─┐
│   2024-01-01 00:20:00 │        2024-01-01 00:20:00 │           2024-01-01 00:20:00.000 │
└───────────────────────┴────────────────────────────┴───────────────────────────────────┘
```

**Using alternative INTERVAL syntax**

```sql title=Query
SELECT dateAdd('1998-06-16'::Date, INTERVAL 10 minute)
```

```response title=Response
┌─plus(CAST('1⋯Minute(10))─┐
│      1998-06-16 00:10:00 │
└──────────────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","roundDuration",0,0,"","","System","
Rounds a number down to the closest from a set of commonly used durations: `1, 10, 30, 60, 120, 180, 240, 300, 600, 1200, 1800, 3600, 7200, 18000, 36000`.
If the number is less than one, it returns `0`.
","roundDuration(num)","- `num` — A number to round to one of the numbers in the set of common durations. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns `0`, for `num` < 1. Otherwise, one of: `1, 10, 30, 60, 120, 180, 240, 300, 600, 1200, 1800, 3600, 7200, 18000, 36000`. [`UInt16`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT *, roundDuration(*) FROM system.numbers WHERE number IN (0, 9, 19, 47, 101, 149, 205, 271, 421, 789, 1423, 2345, 4567, 9876, 24680, 42573)
```

```response title=Response
┌─number─┬─roundDuration(number)─┐
│      0 │                     0 │
│      9 │                     1 │
│     19 │                    10 │
│     47 │                    30 │
│    101 │                    60 │
│    149 │                   120 │
│    205 │                   180 │
│    271 │                   240 │
│    421 │                   300 │
│    789 │                   600 │
│   1423 │                  1200 │
│   2345 │                  1800 │
│   4567 │                  3600 │
│   9876 │                  7200 │
│  24680 │                 18000 │
│  42573 │                 36000 │
└────────┴───────────────────────┘
```

","1.1","Rounding"
"25.9.2.1","h3HexRing",0,0,"","","System","","","","","","","",""
"25.9.2.1","URLPathHierarchy",0,0,"","","System","","","","","","","",""
"25.9.2.1","h3GetUnidirectionalEdgesFromHexagon",0,0,"","","System","","","","","","","",""
"25.9.2.1","simpleJSONExtractUInt",0,0,"","","System","
Parses `UInt64` from the value of the field named `field_name`.
If `field_name` is a string field, it tries to parse a number from the beginning of the string.
If the field does not exist, or it exists but does not contain a number, it returns `0`.
","simpleJSONExtractUInt(json, field_name)","- `json` — The JSON in which the field is searched for. [`String`](/sql-reference/data-types/string)
- `field_name` — The name of the field to search for. [`const String`](/sql-reference/data-types/string)
","","Returns the number parsed from the field if the field exists and contains a number, `0` otherwise [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
CREATE TABLE jsons
(
    `json` String
)
ENGINE = MergeTree
ORDER BY tuple();

INSERT INTO jsons VALUES ('{""foo"":""4e3""}');
INSERT INTO jsons VALUES ('{""foo"":3.4}');
INSERT INTO jsons VALUES ('{""foo"":5}');
INSERT INTO jsons VALUES ('{""foo"":""not1number""}');
INSERT INTO jsons VALUES ('{""baz"":2}');

SELECT simpleJSONExtractUInt(json, 'foo') FROM jsons ORDER BY json;
```

```response title=Response
0
4
0
3
5
```

","21.4","JSON"
"25.9.2.1","getSettingOrDefault",0,0,"","","System","
Returns the current value of a setting or returns the default value specified in the second argument if the setting is not set in the current profile.
","getSettingOrDefault(setting_name, default_value)","- `setting_name` — The setting name. [`String`](/sql-reference/data-types/string)
- `default_value` — Value to return if custom_setting is not set. Value may be of any data type or Null. ","","Returns the current value of the specified setting or `default_value` if the setting is not set.","**Usage example**

```sql title=Query
SELECT getSettingOrDefault('custom_undef1', 'my_value');
SELECT getSettingOrDefault('custom_undef2', 100);
SELECT getSettingOrDefault('custom_undef3', NULL);
```

```response title=Response
my_value
100
NULL
```

","24.10","Other"
"25.9.2.1","ngramMinHashArgCaseInsensitive",0,0,"","","System","
Splits a ASCII string into n-grams of `ngramsize` symbols and returns the n-grams with minimum and maximum hashes, calculated by the [`ngramMinHashCaseInsensitive`](#ngramMinHashCaseInsensitive) function with the same input.
It is case insensitive.
","ngramMinHashArgCaseInsensitive(string[, ngramsize, hashnum])","- `string` — String for which to compute the hash. [`String`](/sql-reference/data-types/string)
- `ngramsize` — Optional. The size of an n-gram, any number from `1` to `25`. The default value is `3`. [`UInt8`](/sql-reference/data-types/int-uint)
- `hashnum` — Optional. The number of minimum and maximum hashes used to calculate the result, any number from `1` to `25`. The default value is `6`. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns a tuple with two tuples with `hashnum` n-grams each. [`Tuple(Tuple(String))`](/sql-reference/data-types/tuple)","**Usage example**

```sql title=Query
SELECT ngramMinHashArgCaseInsensitive('ClickHouse') AS Tuple;
```

```response title=Response
┌─Tuple─────────────────────────────────────────────────────────────────────────┐
│ (('ous','ick','lic','kHo','use','Cli'),('kHo','lic','ick','ous','ckH','Hou')) │
└───────────────────────────────────────────────────────────────────────────────┘
```

","21.1","Hash"
"25.9.2.1","ngramMinHashUTF8",0,0,"","","System","
Splits a UTF-8 string into n-grams of `ngramsize` symbols and calculates hash values for each n-gram and returns a tuple with these hashes.
Uses `hashnum` minimum hashes to calculate the minimum hash and `hashnum` maximum hashes to calculate the maximum hash.
It is case sensitive.

Can be used to detect semi-duplicate strings with [`tupleHammingDistance`](../functions/tuple-functions.md/#tuplehammingdistance).
For two strings, if the returned hashes are the same for both strings, then those strings are the same.
","ngramMinHashUTF8(string[, ngramsize, hashnum])","- `string` — String for which to compute the hash. [`String`](/sql-reference/data-types/string)
- `ngramsize` — Optional. The size of an n-gram, any number from `1` to `25`. The default value is `3`. [`UInt8`](/sql-reference/data-types/int-uint)
- `hashnum` — Optional. The number of minimum and maximum hashes used to calculate the result, any number from `1` to `25`. The default value is `6`. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns a tuple with two hashes — the minimum and the maximum. [`Tuple`](/sql-reference/data-types/tuple)","**Usage example**

```sql title=Query
SELECT ngramMinHashUTF8('ClickHouse') AS Tuple;
```

```response title=Response
┌─Tuple──────────────────────────────────────┐
│ (18333312859352735453,6742163577938632877) │
└────────────────────────────────────────────┘
```

","21.1","Hash"
"25.9.2.1","compareSubstrings",0,0,"","","System","
Compares two strings lexicographically.
","compareSubstrings(s1, s2, s1_offset, s2_offset, num_bytes)","- `s1` — The first string to compare. [`String`](/sql-reference/data-types/string)
- `s2` — The second string to compare. [`String`](/sql-reference/data-types/string)
- `s1_offset` — The position (zero-based) in `s1` from which the comparison starts. [`UInt*`](/sql-reference/data-types/int-uint)
- `s2_offset` — The position (zero-based index) in `s2` from which the comparison starts. [`UInt*`](/sql-reference/data-types/int-uint)
- `num_bytes` — The maximum number of bytes to compare in both strings. If `s1_offset` (or `s2_offset`) + `num_bytes` exceeds the end of an input string, `num_bytes` will be reduced accordingly. [`UInt*`](/sql-reference/data-types/int-uint)
","","Returns:
- `-1` if `s1`[`s1_offset` : `s1_offset` + `num_bytes`] < `s2`[`s2_offset` : `s2_offset` + `num_bytes`].
- `0` if `s1`[`s1_offset` : `s1_offset` + `num_bytes`] = `s2`[`s2_offset` : `s2_offset` + `num_bytes`].
- `1` if `s1`[`s1_offset` : `s1_offset` + `num_bytes`] > `s2`[`s2_offset` : `s2_offset` + `num_bytes`].
     [`Int8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT compareSubstrings('Saxony', 'Anglo-Saxon', 0, 6, 5) AS result
```

```response title=Response
┌─result─┐
│      0 │
└────────┘
```

","25.2","String"
"25.9.2.1","plus",0,0,"","","System","
Calculates the sum of two values `x` and `y`. Alias: `x + y` (operator).
It is possible to add an integer and a date or date with time. The former
operation increments the number of days in the date, the latter operation
increments the number of seconds in the date with time.
    ","plus(x, y)","- `x` — Left hand operand. - `y` — Right hand operand. ","","Returns the sum of x and y","**Adding two numbers**

```sql title=Query
SELECT plus(5,5)
```

```response title=Response
10
```

**Adding an integer and a date**

```sql title=Query
SELECT plus(toDate('2025-01-01'),5)
```

```response title=Response
2025-01-06
```

","1.1","Arithmetic"
"25.9.2.1","readWKTMultiPolygon",0,0,"","","System","","","","","","","",""
"25.9.2.1","subtractYears",0,0,"","","System","
Subtracts a specified number of years from a date, a date with time or a string-encoded date or date with time.
    ","subtractYears(datetime, num)","- `datetime` — Date or date with time to subtract specified number of years from. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64) or [`String`](/sql-reference/data-types/string)
- `num` — Number of years to subtract. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns `datetime` minus `num` years [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)","**Subtract years from different date types**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractYears(date, 1) AS subtract_years_with_date,
    subtractYears(date_time, 1) AS subtract_years_with_date_time,
    subtractYears(date_time_string, 1) AS subtract_years_with_date_time_string
```

```response title=Response
┌─subtract_years_with_date─┬─subtract_years_with_date_time─┬─subtract_years_with_date_time_string─┐
│               2023-01-01 │           2023-01-01 00:00:00 │              2023-01-01 00:00:00.000 │
└──────────────────────────┴───────────────────────────────┴──────────────────────────────────────┘
```

**Using alternative INTERVAL syntax**

```sql title=Query
SELECT dateSub('1998-06-16'::Date, INTERVAL 10 year)
```

```response title=Response
┌─minus(CAST('⋯alYear(10))─┐
│               1988-06-16 │
└──────────────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","detectLanguageMixed",0,0,"","","System","","","","","","","",""
"25.9.2.1","acosh",0,0,"","","System","
Returns the inverse hyperbolic cosine.
","acosh(x)","- `x` — Hyperbolic cosine of angle. Values from the interval: `1 ≤ x < +∞`. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal*`](/sql-reference/data-types/decimal)
","","Returns the angle, in radians. Values from the interval: `0 ≤ acosh(x) < +∞`. [`Float64`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT acosh(1)
```

```response title=Response
0
```

","20.12","Mathematical"
"25.9.2.1","arrayPushBack",0,0,"","","System","Adds one item to the end of the array.","arrayPushBack(arr, x)","- `arr` — The array for which to add value `x` to the end of. [`Array(T)`](/sql-reference/data-types/array)
- `x` — 
- Single value to add to the end of the array. [`Array(T)`](/sql-reference/data-types/array).

:::note
- Only numbers can be added to an array with numbers, and only strings can be added to an array of strings.
- When adding numbers, ClickHouse automatically sets the type of `x` for the data type of the array.
- Can be `NULL`. The function adds a `NULL` element to an array, and the type of array elements converts to `Nullable`.

For more information about the types of data in ClickHouse, see [Data types](/sql-reference/data-types).
:::
     ","","Returns an array identical to `arr` but with an additional value `x` at the end of the array [`Array(T)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT arrayPushBack(['a'], 'b') AS res;
```

```response title=Response
['a','b']
```

","1.1","Arrays"
"25.9.2.1","toFixedString",0,0,"","","System","","","","","","","",""
"25.9.2.1","firstNonDefault",0,1,"","","System","Returns the first non-default value from a set of arguments","","- `arg1` — The first argument to check - `arg2` — The second argument to check - `...` — Additional arguments to check ","","Result type is the supertype of all arguments","**integers**

```sql title=Query
SELECT firstNonDefault(0, 1, 2)
```

```response title=Response
1
```

**strings**

```sql title=Query
SELECT firstNonDefault('', 'hello', 'world')
```

```response title=Response
'hello'
```

**nulls**

```sql title=Query
SELECT firstNonDefault(NULL, 0 :: UInt8, 1 :: UInt8)
```

```response title=Response
1
```

**nullable zero**

```sql title=Query
SELECT firstNonDefault(NULL, 0 :: Nullable(UInt8), 1 :: Nullable(UInt8))
```

```response title=Response
0
```

","25.7","Null"
"25.9.2.1","domainWithoutWWW",0,0,"","","System","
Returns the domain of a URL without leading `www.` if present.
    ","domainWithoutWWW(url)","- `url` — URL. [`String`](/sql-reference/data-types/string)
","","Returns the domain name if the input string can be parsed as a URL (without leading `www.`), otherwise an empty string. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT domainWithoutWWW('http://paul@www.example.com:80/');
```

```response title=Response
┌─domainWithoutWWW('http://paul@www.example.com:80/')─┐
│ example.com                                         │
└─────────────────────────────────────────────────────┘
```

","1.1","URL"
"25.9.2.1","ngramSearchUTF8",0,0,"","","System","
Provides a UTF-8 variant of `ngramSearch`.
Assumes `haystack` and `needle` to be UTF-8 strings.
Checks if the 3-gram distance between two UTF-8 strings is less than or equal to a given threshold.
    ","ngramSearchUTF8(haystack, needle)","- `haystack` — UTF-8 string for comparison. [`String`](/sql-reference/data-types/string)
- `needle` — UTF-8 string for comparison. [`String`](/sql-reference/data-types/string)
","","Returns `1` if the 3-gram distance between the strings is less than or equal to a threshold (`1.0` by default), `0` otherwise. [`UInt8`](/sql-reference/data-types/int-uint)","**UTF-8 search using 3-grams**

```sql title=Query
SELECT ngramSearchUTF8('абвгдеёжз', 'гдеёзд')
```

```response title=Response
┌─ngramSearchUTF8('абвгдеёжз', 'гдеёзд')─┐
│                                      1 │
└────────────────────────────────────────┘
```

","20.1","String Search"
"25.9.2.1","JSONExtractBool",0,0,"","","System","
Parses JSON and extracts a value of Bool type.
        ","JSONExtractBool(json[, indices_or_keys, ...])","- `json` — JSON string to parse. [`String`](/sql-reference/data-types/string)
- `indices_or_keys` — A list of zero or more arguments each of which can be either string or integer. [`String`](/sql-reference/data-types/string) or [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns a Bool value if it exists, otherwise returns `0`. [`Bool`](/sql-reference/data-types/boolean)","**Usage example**

```sql title=Query
SELECT JSONExtractBool('{""passed"": true}', 'passed') AS res;
```

```response title=Response
┌─res─┐
│   1 │
└─────┘
```

","20.1","JSON"
"25.9.2.1","tupleHammingDistance",0,0,"","","System","
Returns the [Hamming Distance](https://en.wikipedia.org/wiki/Hamming_distance) between two tuples of the same size.

:::note
The result type is determined the same way it is for [Arithmetic functions](../../sql-reference/functions/arithmetic-functions.md), based on the number of elements in the input tuples.

```sql
SELECT
    toTypeName(tupleHammingDistance(tuple(0), tuple(0))) AS t1,
    toTypeName(tupleHammingDistance((0, 0), (0, 0))) AS t2,
    toTypeName(tupleHammingDistance((0, 0, 0), (0, 0, 0))) AS t3,
    toTypeName(tupleHammingDistance((0, 0, 0, 0), (0, 0, 0, 0))) AS t4,
    toTypeName(tupleHammingDistance((0, 0, 0, 0, 0), (0, 0, 0, 0, 0))) AS t5
```

```text
┌─t1────┬─t2─────┬─t3─────┬─t4─────┬─t5─────┐
│ UInt8 │ UInt16 │ UInt32 │ UInt64 │ UInt64 │
└───────┴────────┴────────┴────────┴────────┘
```
:::
","tupleHammingDistance(t1, t2)","- `t1` — First tuple. [`Tuple(*)`](/sql-reference/data-types/tuple)
- `t2` — Second tuple. [`Tuple(*)`](/sql-reference/data-types/tuple)
","","Returns the Hamming distance. [`UInt8/16/32/64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT tupleHammingDistance((1, 2, 3), (3, 2, 1))
```

```response title=Response
2
```

**With MinHash to detect semi-duplicate strings**

```sql title=Query
SELECT tupleHammingDistance(wordShingleMinHash(string), wordShingleMinHashCaseInsensitive(string)) FROM (SELECT 'ClickHouse is a column-oriented database management system for online analytical processing of queries.' AS string)
```

```response title=Response
2
```

","21.1","Tuple"
"25.9.2.1","readWKBMultiPolygon",0,0,"","","System","
        Parses a Well-Known Binary (WKB) representation of a MultiPolygon geometry and returns it in the internal ClickHouse format.
        ","readWKBMultiPolygon(wkt_string)","- `wkb_string` — The input WKB string representing a MultiPolygon geometry. [`String`](/sql-reference/data-types/string)
","","The function returns a ClickHouse internal representation of the MultiPolygon geometry.","**first call**

```sql title=Query
SELECT readWKBMultiPolygon(unhex('0106000000020000000103000000020000000500000000000000000000400000000000000000000000000000244000000000000000000000000000002440000000000000244000000000000000000000000000002440000000000000004000000000000000000500000000000000000010400000000000001040000000000000144000000000000010400000000000001440000000000000144000000000000010400000000000001440000000000000104000000000000010400103000000010000000400000000000000000024c000000000000024c000000000000024c000000000000022c000000000000022c0000000000000244000000000000024c000000000000024c0'));
```

```response title=Response
┌─readWKBMultiPolygon(unhex'01060000000200000001030000000200000005000000000000000000004000000000000000000000000000002440...'))─┐
        │ [[[(2,0),(10,0),(10,10),(0,10),(2,0)],[(4,4),(5,4),(5,5),(4,5),(4,4)]],[[(-10,-10),(-10,-9),(-9,10),(-10,-10)]]]             │
        └──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

","25.5","Geo"
"25.9.2.1","h3ExactEdgeLengthRads",0,0,"","","System","","","","","","","",""
"25.9.2.1","dictGetDateTime",0,0,"","","System","
Retrieves values from a dictionary.

Accepts 3 parameters:
-- name of the dictionary;
-- name of the column of the dictionary or tuple of column names;
-- key value - expression returning dictionary key-type value or tuple-type value - depending on the dictionary configuration;

Returned value: value of the dictionary attribute parsed in the DateTime if key is found, otherwise <null_value> element specified in the dictionary configuration.

Throws an exception if cannot parse the value of the attribute or the value does not match the attribute data type.
","","","","","","","Dictionary"
"25.9.2.1","h3ToGeoBoundary",0,0,"","","System","
Returns array of pairs `(lat, lon)`, which corresponds to the boundary of the provided H3 index.
    ","h3ToGeoBoundary(h3Index)","- `h3Index` — H3 index. [`UInt64`](/sql-reference/data-types/int-uint)
","","Returns an array of coordinate pairs `(lat, lon)` that define the boundary of the H3 hexagon. [`Array(Tuple(Float64, Float64))`](/sql-reference/data-types/array)","**Get boundary coordinates for an H3 index**

```sql title=Query
SELECT h3ToGeoBoundary(644325524701193974) AS coordinates
```

```response title=Response
┌─h3ToGeoBoundary(599686042433355775)────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│ [(37.2713558667319,-121.91508032705622),(37.353926450852256,-121.8622232890249),(37.42834118609435,-121.92354999630156),(37.42012867767779,-122.03773496427027),(37.33755608435299,-122.090428929044),(37.26319797461824,-122.02910130919001)] │
└────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

","21.11","Geo"
"25.9.2.1","numericIndexedVectorGetValue",0,0,"","","System","
Retrieves the value corresponding to a specified index from a numericIndexedVector.
        ","numericIndexedVectorGetValue(numericIndexedVector, index)","- `numericIndexedVector` — A numericIndexedVector object. [`numericIndexedVector`](/sql-reference/functions/#create-numeric-indexed-vector-object)
- `index` — The index for which the value is to be retrieved. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","A numeric value with the same type as the value type of NumericIndexedVector. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT numericIndexedVectorGetValue(numericIndexedVectorBuild(mapFromArrays([1, 2, 3], [10, 20, 30])), 3) AS res;
```

```response title=Response
┌─res─┐
│  30 │
└─────┘
```

","25.7","NumericIndexedVector"
"25.9.2.1","positionCaseInsensitive",0,0,"","","System","
Like [`position`](#position) but case-insensitive.
    ","positionCaseInsensitive(haystack, needle[, start_pos])","- `haystack` — String in which the search is performed. [`String`](/sql-reference/data-types/string) or [`Enum`](/sql-reference/data-types/enum)
- `needle` — Substring to be searched. [`String`](/sql-reference/data-types/string)
- `start_pos` — Optional. Position (1-based) in `haystack` at which the search starts. [`UInt*`](/sql-reference/data-types/int-uint)
","","Returns starting position in bytes and counting from 1, if the substring was found, otherwise `0`, if the substring was not found. [`UInt64`](/sql-reference/data-types/int-uint)","**Case insensitive search**

```sql title=Query
SELECT positionCaseInsensitive('Hello, world!', 'hello')
```

```response title=Response
┌─positionCaseInsensitive('Hello, world!', 'hello')─┐
│                                                 1 │
└───────────────────────────────────────────────────┘
```

","1.1","String Search"
"25.9.2.1","arrayShiftRight",0,0,"","","System","
Shifts an array to the right by the specified number of elements.
New elements are filled with the provided argument or the default value of the array element type.
If the number of elements is negative, the array is shifted to the left.
    ","arrayShiftRight(arr, n[, default])","- `arr` — The array for which to shift the elements. [`Array(T)`](/sql-reference/data-types/array)
- `n` — Number of elements to shift. [`(U)Int8/16/32/64`](/sql-reference/data-types/int-uint)
- `default` — Optional. Default value for new elements. ","","An array shifted to the right by the specified number of elements [`Array(T)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT arrayShiftRight([1, 2, 3, 4, 5, 6], 2) as res;
```

```response title=Response
[0, 0, 1, 2, 3, 4]
```

**Negative value of n**

```sql title=Query
SELECT arrayShiftRight([1, 2, 3, 4, 5, 6], -2) as res;
```

```response title=Response
[3, 4, 5, 6, 0, 0]
```

**Using a default value**

```sql title=Query
SELECT arrayShiftRight([1, 2, 3, 4, 5, 6], 2, 42) as res;
```

```response title=Response
[42, 42, 1, 2, 3, 4]
```

","23.8","Arrays"
"25.9.2.1","h3ToString",0,0,"","","System","","","","","","","",""
"25.9.2.1","numericIndexedVectorToMap",0,0,"","","System","
Converts a numericIndexedVector to a map.
        ","numericIndexedVectorToMap(numericIndexedVector)","- `numericIndexedVector` — A numericIndexedVector object. [`numericIndexedVector`](/sql-reference/functions/#create-numeric-indexed-vector-object)
","","Returns a map with index-value pairs. [`Map`](/sql-reference/data-types/map)","**Usage example**

```sql title=Query
SELECT numericIndexedVectorToMap(numericIndexedVectorBuild(mapFromArrays([1, 2, 3], [10, 20, 30]))) AS res;
```

```response title=Response
┌─res──────────────┐
│ {1:10,2:20,3:30} │
└──────────────────┘
```

","25.7","NumericIndexedVector"
"25.9.2.1","arrayRotateRight",0,0,"","","System","Rotates an array to the right by the specified number of elements. Negative values of `n` are treated as rotating to the left by the absolute value of the rotation.","arrayRotateRight(arr, n)","- `arr` — The array for which to rotate the elements.[`Array(T)`](/sql-reference/data-types/array). - `n` — Number of elements to rotate. [`(U)Int8/16/32/64`](/sql-reference/data-types/int-uint). ","","An array rotated to the right by the specified number of elements [`Array(T)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT arrayRotateRight([1,2,3,4,5,6], 2) as res;
```

```response title=Response
[5,6,1,2,3,4]
```

**Negative value of n**

```sql title=Query
SELECT arrayRotateRight([1,2,3,4,5,6], -2) as res;
```

```response title=Response
[3,4,5,6,1,2]
```

","23.8","Arrays"
"25.9.2.1","hasSubsequence",0,1,"","","System","
Checks if a needle is a subsequence of a haystack.
A subsequence of a string is a sequence that can be derived from another string by deleting some or no characters without changing the order of the remaining characters.
    ","hasSubsequence(haystack, needle)","- `haystack` — String in which to search for the subsequence. [`String`](/sql-reference/data-types/string)
- `needle` — Subsequence to be searched. [`String`](/sql-reference/data-types/string)
","","Returns `1` if needle is a subsequence of haystack, `0` otherwise. [`UInt8`](/sql-reference/data-types/int-uint)","**Basic subsequence check**

```sql title=Query
SELECT hasSubsequence('Hello World', 'HlWrd')
```

```response title=Response
┌─hasSubsequence('Hello World', 'HlWrd')─┐
│                                      1 │
└────────────────────────────────────────┘
```

**No subsequence found**

```sql title=Query
SELECT hasSubsequence('Hello World', 'xyz')
```

```response title=Response
┌─hasSubsequence('Hello World', 'xyz')─┐
│                                    0 │
└──────────────────────────────────────┘
```

","23.7","String Search"
"25.9.2.1","JSON_VALUE",0,0,"","","System","
Parses a JSON and extract a value as a JSON scalar. If the value does not exist, an empty string will be returned by default.

This function is controlled by the following settings:
- by SET `function_json_value_return_type_allow_nullable` = `true`, `NULL` will be returned. If the value is complex type (such as: struct, array, map), an empty string will be returned by default.
- by SET `function_json_value_return_type_allow_complex` = `true`, the complex value will be returned.
        ","JSON_VALUE(json, path)","- `json` — A string with valid JSON. [`String`](/sql-reference/data-types/string)
- `path` — A string representing the path. [`String`](/sql-reference/data-types/string)
","","Returns the extracted JSON scalar as a string, or an empty string if the value does not exist. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT JSON_VALUE('{""hello"":""world""}', '$.hello');
SELECT JSON_VALUE('{""array"":[[0, 1, 2, 3, 4, 5], [0, -1, -2, -3, -4, -5]]}', '$.array[*][0 to 2, 4]');
SELECT JSON_VALUE('{""hello"":2}', '$.hello');
SELECT JSON_VALUE('{""hello"":""world""}', '$.b') settings function_json_value_return_type_allow_nullable=true;
```

```response title=Response
world
0
2
ᴺᵁᴸᴸ
```

","21.11","JSON"
"25.9.2.1","JSONExtract",0,0,"","","System","
Parses JSON and extracts a value with given ClickHouse data type.
        ","JSONExtract(json, return_type[, indices_or_keys, ...])","- `json` — JSON string to parse. [`String`](/sql-reference/data-types/string)
- `return_type` — ClickHouse data type to return. [`String`](/sql-reference/data-types/string)
- `indices_or_keys` — A list of zero or more arguments each of which can be either string or integer. [`String`](/sql-reference/data-types/string) or [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns a value of specified ClickHouse data type if possible, otherwise returns the default value for that type.","**Usage example**

```sql title=Query
SELECT JSONExtract('{""a"": ""hello"", ""b"": [-100, 200.0, 300]}', 'Tuple(String, Array(Float64))') AS res;
```

```response title=Response
┌─res──────────────────────────────┐
│ ('hello',[-100,200,300])         │
└──────────────────────────────────┘
```

","19.14","JSON"
"25.9.2.1","tumbleStart",0,0,"","","System","
Returns the inclusive lower bound of the corresponding tumbling window.
    ","tumbleStart(time_attr, interval[, timezone])","- `time_attr` — Date and time. [`DateTime`](/sql-reference/data-types/datetime)
- `interval` — Window interval in Interval. [`Interval`](/sql-reference/data-types/int-uint)
- `timezone` — Optional. Timezone name. [`String`](/sql-reference/data-types/string)
","","Returns the inclusive lower bound of the corresponding tumbling window. [`DateTime`](/sql-reference/data-types/datetime)","**Tumbling window start**

```sql title=Query
SELECT tumbleStart(now(), toIntervalDay('1'))
```

```response title=Response
2024-07-04 00:00:00
```

","22.1","Time Window"
"25.9.2.1","bitShiftRight",0,0,"","","System","
Shifts the binary representation of a value to the right by a specified number of bit positions.

A `FixedString` or a `String` is treated as a single multibyte value.

Bits of a `FixedString` value are lost as they are shifted out.
On the contrary, a `String` value is extended with additional bytes, so no bits are lost.
","bitShiftRight(a, N)","- `a` — A value to shift. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring)
- `N` — The number of positions to shift. [`UInt8/16/32/64`](/sql-reference/data-types/int-uint)
","","Returns the shifted value with type equal to that of `a`.","**Usage example with binary encoding**

```sql title=Query
SELECT 101 AS a, bin(a), bitShiftRight(a, 2) AS a_shifted, bin(a_shifted);
```

```response title=Response
┌───a─┬─bin(101)─┬─a_shifted─┬─bin(bitShiftRight(101, 2))─┐
│ 101 │ 01100101 │        25 │ 00011001                   │
└─────┴──────────┴───────────┴────────────────────────────┘
```

**Usage example with hexadecimal encoding**

```sql title=Query
SELECT 'abc' AS a, hex(a), bitShiftLeft(a, 4) AS a_shifted, hex(a_shifted);
```

```response title=Response
┌─a───┬─hex('abc')─┬─a_shifted─┬─hex(bitShiftRight('abc', 12))─┐
│ abc │ 616263     │           │ 0616                          │
└─────┴────────────┴───────────┴───────────────────────────────┘
```

**Usage example with Fixed String encoding**

```sql title=Query
SELECT toFixedString('abc', 3) AS a, hex(a), bitShiftRight(a, 12) AS a_shifted, hex(a_shifted);
```

```response title=Response
┌─a───┬─hex(toFixedString('abc', 3))─┬─a_shifted─┬─hex(bitShiftRight(toFixedString('abc', 3), 12))─┐
│ abc │ 616263                       │           │ 000616                                          │
└─────┴──────────────────────────────┴───────────┴─────────────────────────────────────────────────┘
```

","1.1","Bit"
"25.9.2.1","today",0,0,"","","System","Returns the current date at moment of query analysis. Same as `toDate(now())`.","today()","","","Returns the current date [`Date`](/sql-reference/data-types/date)","**Usage example**

```sql title=Query
SELECT today() AS today, curdate() AS curdate, current_date() AS current_date FORMAT Pretty
```

```response title=Response
┏━━━━━━━━━━━━┳━━━━━━━━━━━━┳━━━━━━━━━━━━━━┓
┃      today ┃    curdate ┃ current_date ┃
┡━━━━━━━━━━━━╇━━━━━━━━━━━━╇━━━━━━━━━━━━━━┩
│ 2025-03-03 │ 2025-03-03 │   2025-03-03 │
└────────────┴────────────┴──────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","tryBase58Decode",0,0,"","","System","
Like [`base58Decode`](#base58Decode), but returns an empty string in case of error.
","tryBase58Decode(encoded)","- `encoded` — String column or constant. If the string is not valid Base58-encoded, returns an empty string in case of error. [`String`](/sql-reference/data-types/string)
","","Returns a string containing the decoded value of the argument. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT tryBase58Decode('3dc8KtHrwM') AS res, tryBase58Decode('invalid') AS res_invalid;
```

```response title=Response
┌─res─────┬─res_invalid─┐
│ Encoded │             │
└─────────┴─────────────┘
```

","22.10","String"
"25.9.2.1","geohashesInBox",0,0,"","","System","
Returns an array of [geohash](https://en.wikipedia.org/wiki/Geohash)-encoded strings of given precision that fall inside and intersect boundaries of given box, essentially a 2D grid flattened into an array.

:::note
All coordinate parameters must be of the same type: either `Float32` or `Float64`.
:::

This function throws an exception if the size of the resulting array exceeds more than 10,000,000 items.
    ","geohashesInBox(longitude_min, latitude_min, longitude_max, latitude_max, precision)","- `longitude_min` — Minimum longitude. Range: `[-180°, 180°]`. [`Float32`](/sql-reference/data-types/float) or [`Float64`](/sql-reference/data-types/float)
- `latitude_min` — Minimum latitude. Range: `[-90°, 90°]`. [`Float32`](/sql-reference/data-types/float) or [`Float64`](/sql-reference/data-types/float)
- `longitude_max` — Maximum longitude. Range: `[-180°, 180°]`. [`Float32`](/sql-reference/data-types/float) or [`Float64`](/sql-reference/data-types/float)
- `latitude_max` — Maximum latitude. Range: `[-90°, 90°]`. [`Float32`](/sql-reference/data-types/float) or [`Float64`](/sql-reference/data-types/float)
- `precision` — Geohash precision. Range: `[1, 12]`. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns an array of precision-long strings of geohash-boxes covering the provided area, or an empty array if the minimum longitude and latitude values aren't less than the corresponding maximum values. [`Array(String)`](/sql-reference/data-types/array)","**Basic usage**

```sql title=Query
SELECT geohashesInBox(24.48, 40.56, 24.785, 40.81, 4) AS thasos
```

```response title=Response
┌─thasos──────────────────────────────────────┐
│ ['sx1q','sx1r','sx32','sx1w','sx1x','sx38'] │
└─────────────────────────────────────────────┘
```

","20.1","Geo"
"25.9.2.1","hasSubsequenceUTF8",0,1,"","","System","","","","","","","",""
"25.9.2.1","rightPadUTF8",0,0,"","","System","
Pads the string from the right with spaces or a specified string (multiple times, if needed) until the resulting string reaches the given length.
Unlike [`rightPad`](#rightPad) which measures the string length in bytes, the string length is measured in code points.
","rightPadUTF8(string, length[, pad_string])","- `string` — Input string that should be padded. [`String`](/sql-reference/data-types/string)
- `length` — The length of the resulting string. If the value is smaller than the input string length, then the input string is shortened to `length` characters. [`(U)Int*`](/sql-reference/data-types/int-uint)
- `pad_string` — Optional. The string to pad the input string with. If not specified, then the input string is padded with spaces. [`String`](/sql-reference/data-types/string)
","","Returns a right-padded string of the given length. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT rightPadUTF8('абвг', 7, '*'), rightPadUTF8('абвг', 7)
```

```response title=Response
┌─rightPadUTF8('абвг', 7, '*')─┬─rightPadUTF8('абвг', 7)─┐
│ абвг***                      │ абвг                    │
└──────────────────────────────┴─────────────────────────┘
```

","21.8","String"
"25.9.2.1","rightPad",0,0,"","","System","
Pads a string from the right with spaces or with a specified string (multiple times, if needed) until the resulting string reaches the specified `length`.
","rightPad(string, length[, pad_string])","- `string` — Input string that should be padded. [`String`](/sql-reference/data-types/string)
- `length` — The length of the resulting string. If the value is smaller than the input string length, then the input string is shortened to `length` characters. [`(U)Int*`](/sql-reference/data-types/int-uint)
- `pad_string` — Optional. The string to pad the input string with. If not specified, then the input string is padded with spaces. [`String`](/sql-reference/data-types/string)
","","Returns a right-padded string of the given length. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT rightPad('abc', 7, '*'), rightPad('abc', 7)
```

```response title=Response
┌─rightPad('abc', 7, '*')─┬─rightPad('abc', 7)─┐
│ abc****                 │ abc                │
└─────────────────────────┴────────────────────┘
```

","21.8","String"
"25.9.2.1","aes_encrypt_mysql",0,0,"","","System","
Encrypts text the same way as MySQL's `AES_ENCRYPT` function does.
The resulting ciphertext can be decrypted with MySQL's `AES_DECRYPT` function.
Produces the same ciphertext as the `encrypt` function for the same inputs.
When `key` or `iv` are longer than they should normally be, `aes_encrypt_mysql` will stick to what MySQL's `aes_encrypt` does which is to 'fold' `key` and ignore the excess bits of `iv`.

The supported encryption modes are:

- aes-128-ecb, aes-192-ecb, aes-256-ecb
- aes-128-cbc, aes-192-cbc, aes-256-cbc
- aes-128-ofb, aes-192-ofb, aes-256-ofb
        ","aes_encrypt_mysql(mode, plaintext, key[, iv])","- `mode` — Encryption mode. [`String`](/sql-reference/data-types/string)
- `plaintext` — Text that should be encrypted. [`String`](/sql-reference/data-types/string)
- `key` — Encryption key. If the key is longer than required by `mode`, MySQL-specific key folding is performed. [`String`](/sql-reference/data-types/string)
- `iv` — Optional. Initialization vector. Only the first 16 bytes are taken into account. [`String`](/sql-reference/data-types/string)
","","Ciphertext binary string. [`String`](/sql-reference/data-types/string)","**Equal input comparison**

```sql title=Query
-- Given equal input encrypt and aes_encrypt_mysql produce the same ciphertext:
SELECT encrypt('aes-256-ofb', 'Secret', '12345678910121314151617181920212', 'iviviviviviviviv') = aes_encrypt_mysql('aes-256-ofb', 'Secret', '12345678910121314151617181920212', 'iviviviviviviviv') AS ciphertexts_equal;
```

```response title=Response
┌─ciphertexts_equal─┐
│                 1 │
└───────────────────┘
```

**Encrypt fails with long key**

```sql title=Query
-- But encrypt fails when key or iv is longer than expected:
SELECT encrypt('aes-256-ofb', 'Secret', '123456789101213141516171819202122', 'iviviviviviviviv123');
```

```response title=Response
Received exception from server (version 22.6.1):
Code: 36. DB::Exception: Received from localhost:9000. DB::Exception: Invalid key size: 33 expected 32: While processing encrypt('aes-256-ofb', 'Secret', '123456789101213141516171819202122', 'iviviviviviviviv123').
```

**MySQL compatibility**

```sql title=Query
-- aes_encrypt_mysql produces MySQL-compatible output:
SELECT hex(aes_encrypt_mysql('aes-256-ofb', 'Secret', '123456789101213141516171819202122', 'iviviviviviviviv123')) AS ciphertext;
```

```response title=Response
┌─ciphertext───┐
│ 24E9E4966469 │
└──────────────┘
```

**Longer IV produces the same result**

```sql title=Query
-- Notice how supplying even longer IV produces the same result
SELECT hex(aes_encrypt_mysql('aes-256-ofb', 'Secret', '123456789101213141516171819202122', 'iviviviviviviviv123456')) AS ciphertext
```

```response title=Response
┌─ciphertext───┐
│ 24E9E4966469 │
└──────────────┘
```

","20.12","Encryption"
"25.9.2.1","hasTokenOrNull",0,0,"","","System","
Like [`hasToken`](#hasToken) but returns null if token is ill-formed.
    ","hasTokenOrNull(haystack, token)","- `haystack` — String to be searched. Must be constant. [`String`](/sql-reference/data-types/string)
- `token` — Token to search for. [`const String`](/sql-reference/data-types/string)
","","Returns `1` if the token is found, `0` otherwise, null if token is ill-formed. [`Nullable(UInt8)`](/sql-reference/data-types/nullable)","**Usage example**

```sql title=Query
SELECT hasTokenOrNull('apple banana cherry', 'ban ana');
```

```response title=Response
┌─hasTokenOrNu⋯ 'ban ana')─┐
│                     ᴺᵁᴸᴸ │
└──────────────────────────┘
```

","20.1","String Search"
"25.9.2.1","dictGetUUIDOrDefault",0,0,"","","System","
Retrieves values from a dictionary.

Accepts 4 parameters:
-- name of the dictionary;
-- name of the column of the dictionary or tuple of column names;
-- key value - expression returning dictionary key-type value or tuple-type value - depending on the dictionary configuration;
-- default values returned if the dictionary does not contain a row with the key value;

Returned value: value of the dictionary attribute parsed in the UUID if key is found, otherwise default value.

Throws an exception if cannot parse the value of the attribute or the value does not match the attribute data type.
","","","","","","","Dictionary"
"25.9.2.1","hasToken",0,0,"","","System","
Checks if the given token is present in the haystack.

A token is defined as the longest possible sub-sequence of consecutive characters `[0-9A-Za-z_]`, i.e. numbers, ASCII letters and underscore.
    ","hasToken(haystack, token)","- `haystack` — String to be searched. [`String`](/sql-reference/data-types/string)
- `token` — Token to search for. [`const String`](/sql-reference/data-types/string)
","","Returns `1` if the token is found, `0` otherwise. [`UInt8`](/sql-reference/data-types/int-uint)","**Token search**

```sql title=Query
SELECT hasToken('clickhouse test', 'test')
```

```response title=Response
┌─hasToken('clickhouse test', 'test')─┐
│                                   1 │
└─────────────────────────────────────┘
```

","20.1","String Search"
"25.9.2.1","idnaEncode",0,0,"","","System","
Returns the ASCII representation (ToASCII algorithm) of a domain name according to the [Internationalized Domain Names in Applications](https://en.wikipedia.org/wiki/Internationalized_domain_name#Internationalizing_Domain_Names_in_Applications) (IDNA) mechanism.
The input string must be UTF-encoded and translatable to an ASCII string, otherwise an exception is thrown.

:::note
No percent decoding or trimming of tabs, spaces or control characters is performed.
:::
","idnaEncode(s)","- `s` — Input string. [`String`](/sql-reference/data-types/string)
","","Returns an ASCII representation of the input string according to the IDNA mechanism of the input value. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT idnaEncode('straße.münchen.de')
```

```response title=Response
┌─idnaEncode('straße.münchen.de')─────┐
│ xn--strae-oqa.xn--mnchen-3ya.de     │
└─────────────────────────────────────┘
```

","24.1","String"
"25.9.2.1","tan",0,1,"","","System","
Returns the tangent of the argument.
","tan(x)","- `x` — The angle in radians. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal*`](/sql-reference/data-types/decimal)
","","Returns the tangent of `x`. [`Float*`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT tan(0);
```

```response title=Response
0
```

","1.1","Mathematical"
"25.9.2.1","substring",0,1,"","","System","
Returns the substring of a string `s` which starts at the specified byte index `offset`.
Byte counting starts from 1 with the following logic:
- If `offset` is `0`, an empty string is returned.
- If `offset` is negative, the substring starts `pos` characters from the end of the string, rather than from the beginning.

An optional argument `length` specifies the maximum number of bytes the returned substring may have.
","substring(s, offset[, length])","- `s` — The string to calculate a substring from. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring) or [`Enum`](/sql-reference/data-types/enum)
- `offset` — The starting position of the substring in `s`. [`(U)Int*`](/sql-reference/data-types/int-uint)
- `length` — Optional. The maximum length of the substring. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns a substring of `s` with `length` many bytes, starting at index `offset`. [`String`](/sql-reference/data-types/string)","**Basic usage**

```sql title=Query
SELECT 'database' AS db, substr(db, 5), substr(db, 5, 1)
```

```response title=Response
┌─db───────┬─substring('database', 5)─┬─substring('database', 5, 1)─┐
│ database │ base                     │ b                           │
└──────────┴──────────────────────────┴─────────────────────────────┘
```

","1.1","String"
"25.9.2.1","toDateTime64OrNull",0,0,"","","System","
Converts an input value to a value of type `DateTime64` but returns `NULL` if an invalid argument is received.
The same as `toDateTime64` but returns `NULL` if an invalid argument is received.
    ","toDateTime64OrNull(x)","- `x` — A string representation of a date with time and subsecond precision. [`String`](/sql-reference/data-types/string)
","","Returns a DateTime64 value if successful, otherwise `NULL`. [`DateTime64`](/sql-reference/data-types/datetime64) or [`NULL`](/sql-reference/syntax#null)","**Usage example**

```sql title=Query
SELECT toDateTime64OrNull('2025-12-30 13:44:17.123'), toDateTime64OrNull('invalid')
```

```response title=Response
┌─toDateTime64OrNull('2025-12-30 13:44:17.123')─┬─toDateTime64OrNull('invalid')─┐
│                         2025-12-30 13:44:17.123 │                          ᴺᵁᴸᴸ │
└─────────────────────────────────────────────────┴───────────────────────────────┘
```

","20.1","Type Conversion"
"25.9.2.1","regionHierarchy",0,0,"","","System","","","","","","","",""
"25.9.2.1","polygonsWithinCartesian",0,0,"","","System","","","","","","","",""
"25.9.2.1","materialize",0,0,"","","System","
Turns a constant into a full column containing a single value.
Full columns and constants are represented differently in memory.
Functions usually execute different code for normal and constant arguments, although the result should typically be the same.
This function can be used to debug this behavior.
","materialize(x)","- `x` — A constant. [`Any`](/sql-reference/data-types)
","","Returns a full column containing the constant value. [`Any`](/sql-reference/data-types)","**Usage example**

```sql title=Query
-- In the example below the `countMatches` function expects a constant second argument.
-- This behaviour can be debugged by using the `materialize` function to turn a constant into a full column,
-- verifying that the function throws an error for a non-constant argument.

SELECT countMatches('foobarfoo', 'foo');
SELECT countMatches('foobarfoo', materialize('foo'));
```

```response title=Response
2
Code: 44. DB::Exception: Received from localhost:9000. DB::Exception: Illegal type of argument #2 'pattern' of function countMatches, expected constant String, got String
```

","1.1","Other"
"25.9.2.1","toDecimalString",0,1,"","","System","
Returns string representation of a number. First argument is the number of any numeric type,
second argument is the desired number of digits in fractional part. Returns String.

        ","","","","","**toDecimalString**

```sql title=Query
SELECT toDecimalString(2.1456,2)
```

```response title=Response

```

","","Type Conversion"
"25.9.2.1","readWKTMultiLineString",0,0,"","","System","
Parses a Well-Known Text (WKT) representation of a MultiLineString geometry and returns it in the internal ClickHouse format.
","readWKTMultiLineString(wkt_string)","- `wkt_string` — The input WKT string representing a MultiLineString geometry. [`String`](/sql-reference/data-types/string)
","","The function returns a ClickHouse internal representation of the multilinestring geometry.","**first call**

```sql title=Query
SELECT readWKTMultiLineString('MULTILINESTRING ((1 1, 2 2, 3 3), (4 4, 5 5, 6 6))');
```

```response title=Response
┌─readWKTMultiLineString('MULTILINESTRING ((1 1, 2 2, 3 3), (4 4, 5 5, 6 6))')─┐
│ [[(1,1),(2,2),(3,3)],[(4,4),(5,5),(6,6)]]                                    │
└──────────────────────────────────────────────────────────────────────────────┘
```

**second call**

```sql title=Query
SELECT toTypeName(readWKTLineString('MULTILINESTRING ((1 1, 2 2, 3 3, 1 1))'));
```

```response title=Response
┌─toTypeName(readWKTLineString('MULTILINESTRING ((1 1, 2 2, 3 3, 1 1))'))─┐
│ MultiLineString                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

","","Geo"
"25.9.2.1","ignore",0,0,"","","System","
Accepts arbitrary arguments and unconditionally returns `0`.
    ","ignore(x)","- `x` — An input value which is unused and passed only so as to avoid a syntax error. [`Any`](/sql-reference/data-types)
","","Always returns `0`. [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT ignore(0, 'ClickHouse', NULL)
```

```response title=Response
┌─ignore(0, 'ClickHouse', NULL)─┐
│                             0 │
└───────────────────────────────┘
```

","1.1","Other"
"25.9.2.1","h3GetUnidirectionalEdgeBoundary",0,0,"","","System","","","","","","","",""
"25.9.2.1","globalNullInIgnoreSet",0,0,"","","System","","","","","","","",""
"25.9.2.1","fromDaysSinceYearZero32",0,0,"","","System","
For a given number of days elapsed since [1 January 0000](https://en.wikipedia.org/wiki/Year_zero), returns the corresponding date in the [proleptic Gregorian calendar defined by ISO 8601](https://en.wikipedia.org/wiki/Gregorian_calendar#Proleptic_Gregorian_calendar).
The calculation is the same as in MySQL's `FROM_DAYS()` function. The result is undefined if it cannot be represented within the bounds of the [`Date32`](../data-types/date32.md) type.
    ","fromDaysSinceYearZero32(days)","- `days` — The number of days passed since year zero. [`UInt32`](/sql-reference/data-types/int-uint)
","","Returns the date corresponding to the number of days passed since year zero. [`Date32`](/sql-reference/data-types/date32)","**Convert days since year zero to dates**

```sql title=Query
SELECT
fromDaysSinceYearZero32(739136) AS date1,
fromDaysSinceYearZero32(toDaysSinceYearZero(toDate('2023-09-08'))) AS date2
```

```response title=Response
┌──────date1─┬──────date2─┐
│ 2023-09-08 │ 2023-09-08 │
└────────────┴────────────┘
```

","23.11","Dates and Times"
"25.9.2.1","globalNotInIgnoreSet",0,0,"","","System","","","","","","","",""
"25.9.2.1","splitByChar",0,0,"","","System","
Splits a string separated by a specified constant string `separator` of exactly one character into an array of substrings.
Empty substrings may be selected if the separator occurs at the beginning or end of the string, or if there are multiple consecutive separators.

:::note
Setting [`splitby_max_substrings_includes_remaining_string`](../../operations/settings/settings.md#splitby_max_substrings_includes_remaining_string) (default: `0`) controls if the remaining string is included in the last element of the result array when argument `max_substrings > 0`.
:::

Empty substrings may be selected when:
- A separator occurs at the beginning or end of the string
- There are multiple consecutive separators
- The original string `s` is empty
","splitByChar(separator, s[, max_substrings])","- `separator` — The separator must be a single-byte character. [`String`](/sql-reference/data-types/string)
- `s` — The string to split. [`String`](/sql-reference/data-types/string)
- `max_substrings` — Optional. If `max_substrings > 0`, the returned array will contain at most `max_substrings` substrings, otherwise the function will return as many substrings as possible. The default value is `0`.  [`Int64`](/sql-reference/data-types/int-uint)
","","Returns an array of selected substrings. [`Array(String)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT splitByChar(',', '1,2,3,abcde');
```

```response title=Response
┌─splitByChar(⋯2,3,abcde')─┐
│ ['1','2','3','abcde']    │
└──────────────────────────┘
```

","1.1","String Splitting"
"25.9.2.1","toRelativeDayNum",0,0,"","","System","
Converts a date or date with time to the number of days elapsed since a certain fixed point in the past.
The exact point in time is an implementation detail, and therefore this function is not intended to be used standalone.
The main purpose of the function is to calculate the difference in days between two dates or dates with time, e.g., `toRelativeDayNum(dt1) - toRelativeDayNum(dt2)`.
    ","toRelativeDayNum(date)","- `date` — Date or date with time. [`Date`](/sql-reference/data-types/date) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
","","Returns the number of days from a fixed reference point in the past. [`UInt32`](/sql-reference/data-types/int-uint)","**Get relative day numbers**

```sql title=Query
SELECT toRelativeDayNum(toDate('2023-04-01')) - toRelativeDayNum(toDate('2023-01-01'))
```

```response title=Response
┌─minus(toRela⋯3-01-01')))─┐
│                       90 │
└──────────────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","notInIgnoreSet",0,0,"","","System","","","","","","","",""
"25.9.2.1","globalInIgnoreSet",0,0,"","","System","","","","","","","",""
"25.9.2.1","arrayConcat",0,0,"","","System","Combines arrays passed as arguments.","arrayConcat(arr1 [, arr2, ... , arrN])","- `arr1 [, arr2, ... , arrN]` — N number of arrays to concatenate. [`Array(T)`](/sql-reference/data-types/array)
","","Returns a single combined array from the provided array arguments. [`Array(T)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT arrayConcat([1, 2], [3, 4], [5, 6]) AS res
```

```response title=Response
[1, 2, 3, 4, 5, 6]
```

","1.1","Arrays"
"25.9.2.1","globalNotNullIn",0,0,"","","System","","","","","","","",""
"25.9.2.1","sqrt",0,1,"","","System","
Returns the square root of the argument.
","sqrt(x)","- `x` — The number for which to find the square root of. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal*`](/sql-reference/data-types/decimal)
","","Returns the square root of x [`Float*`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT sqrt(16);
```

```response title=Response
4
```

","1.1","Mathematical"
"25.9.2.1","notNullIn",0,0,"","","System","","","","","","","",""
"25.9.2.1","globalNullIn",0,0,"","","System","","","","","","","",""
"25.9.2.1","nullIn",0,0,"","","System","","","","","","","",""
"25.9.2.1","dictGetHierarchy",0,0,"","","System","
Creates an array, containing all the parents of a key in the hierarchical dictionary.
Accepts 2 parameters: name of the dictionary, key value - expression returning a UInt64-type value.
Returned value: parents for the key, type of Array(UInt64)
","","","","","","","Dictionary"
"25.9.2.1","globalIn",0,0,"","","System","","","","","","","",""
"25.9.2.1","finalizeAggregation",0,0,"","","System","
Given an aggregation state, this function returns the result of aggregation (or the finalized state when using a [-State](../../sql-reference/aggregate-functions/combinators.md#-state) combinator).
","finalizeAggregation(state)","- `state` — State of aggregation. [`AggregateFunction`](/sql-reference/data-types/aggregatefunction)
","","Returns the finalized result of aggregation. [`Any`](/sql-reference/data-types)","**Usage example**

```sql title=Query
SELECT finalizeAggregation(arrayReduce('maxState', [1, 2, 3]));
```

```response title=Response
┌─finalizeAggregation(arrayReduce('maxState', [1, 2, 3]))─┐
│                                                       3 │
└─────────────────────────────────────────────────────────┘
```

**Combined with initializeAggregation**

```sql title=Query
WITH initializeAggregation('sumState', number) AS one_row_sum_state
SELECT
    number,
    finalizeAggregation(one_row_sum_state) AS one_row_sum,
    runningAccumulate(one_row_sum_state) AS cumulative_sum
FROM numbers(5);
```

```response title=Response
┌─number─┬─one_row_sum─┬─cumulative_sum─┐
│      0 │           0 │              0 │
│      1 │           1 │              1 │
│      2 │           2 │              3 │
│      3 │           3 │              6 │
│      4 │           4 │             10 │
└────────┴─────────────┴────────────────┘
```

","1.1","Other"
"25.9.2.1","ngramSimHashCaseInsensitiveUTF8",0,0,"","","System","
Splits a UTF-8 string into n-grams of `ngramsize` symbols and returns the n-gram `simhash`.
It is case insensitive.

Can be used for detection of semi-duplicate strings with [bitHammingDistance](../functions/bit-functions.md/#bitHammingDistance). The smaller is the [Hamming Distance](https://en.wikipedia.org/wiki/Hamming_distance) of the calculated `simhashes` of two strings, the more likely these strings are the same.
","ngramSimHashCaseInsensitiveUTF8(string[, ngramsize])","- `string` — String for which to compute the hash. [`String`](/sql-reference/data-types/string)
- `ngramsize` — Optional. The size of an n-gram, any number from `1` to `25`. The default value is `3`. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns the computed hash value. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT ngramSimHashCaseInsensitiveUTF8('ClickHouse') AS Hash;
```

```response title=Response
┌───────Hash─┐
│ 1636742693 │
└────────────┘
```

","21.1","Hash"
"25.9.2.1","toStartOfWeek",0,0,"","","System","
Rounds a date or date with time down to the nearest Sunday or Monday.

:::note
The return type can be configured by setting [`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions).
:::
    ","toStartOfWeek(datetime[, mode[, timezone]])","- `datetime` — A date or date with time to convert. [`Date`](/sql-reference/data-types/date) or [`DateTime`](/sql-reference/data-types/datetime) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime64`](/sql-reference/data-types/datetime64)
- `mode` — Determines the first day of the week as described in the `toWeek()` function. Default `0`. [`UInt8`](/sql-reference/data-types/int-uint)
- `timezone` — The timezone to use for the conversion. If not specified, the server's timezone is used. [`String`](/sql-reference/data-types/string)
","","Returns the date of the nearest Sunday or Monday on, or prior to, the given date, depending on the mode [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)","**Round down to the nearest Sunday or Monday**

```sql title=Query
SELECT
        toStartOfWeek(toDateTime('2023-04-21 10:20:30')), /* a Friday */
        toStartOfWeek(toDateTime('2023-04-21 10:20:30'), 1), /* a Friday */
        toStartOfWeek(toDate('2023-04-24')), /* a Monday */
        toStartOfWeek(toDate('2023-04-24'), 1) /* a Monday */
    FORMAT Vertical
```

```response title=Response
Row 1:
    ──────
    toStartOfWeek(toDateTime('2023-04-21 10:20:30')):      2023-04-17
    toStartOfWeek(toDateTime('2023-04-21 10:20:30'), 1):   2023-04-17
    toStartOfWeek(toDate('2023-04-24')):                   2023-04-24
    toStartOfWeek(toDate('2023-04-24'), 1):                2023-04-24
```

","20.1","Dates and Times"
"25.9.2.1","timeSeriesIdToTagsGroup",0,0,"","","System","Converts the specified identifier of a time series to its group index. Group indices are numbers 0, 1, 2, 3 associated with each unique set of tags in the context of the currently executed query.","timeSeriesIdToTagsGroup(id)","- `id` — Identifier of a time series. [`UInt64`](/sql-reference/data-types/int-uint) or [`UInt128`](/sql-reference/data-types/int-uint) or [`UUID`](/sql-reference/data-types/uuid) or [`FixedString(16)`](/sql-reference/data-types/fixedstring)
","","Returns a group index associated with this set of tags. [`UInt64`](/sql-reference/data-types/int-uint)","**Example**

```sql title=Query
SELECT timeSeriesStoreTags(8374283493092, [('region', 'eu'), ('env', 'dev')], '__name__', 'http_requests_count') AS id, timeSeriesIdToTagsGroup(id)
```

```response title=Response
8374283493092    0
```

","25.8","Time Series"
"25.9.2.1","indexHint",0,0,"","","System","
This function is intended for debugging and introspection.
It ignores its argument and always returns 1.
The arguments are not evaluated.

But during index analysis, the argument of this function is assumed to be not wrapped in `indexHint`.
This allows to select data in index ranges by the corresponding condition but without further filtering by this condition.
The index in ClickHouse is sparse and using `indexHint` will yield more data than specifying the same condition directly.
    ","indexHint(expression)","- `expression` — Any expression for index range selection. [`Expression`](/sql-reference/data-types/special-data-types/expression)
","","Returns `1` in all cases. [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example with date filtering**

```sql title=Query
SELECT FlightDate AS k, count() FROM ontime WHERE indexHint(k = '2025-09-15') GROUP BY k ORDER BY k ASC;
```

```response title=Response
┌──────────k─┬─count()─┐
│ 2025-09-14 │    7071 │
│ 2025-09-15 │   16428 │
│ 2025-09-16 │    1077 │
│ 2025-09-30 │    8167 │
└────────────┴─────────┘
```

","1.1","Other"
"25.9.2.1","toDateTime32",0,0,"","","System","
Converts an input value to type `DateTime`.
Supports conversion from `String`, `FixedString`, `Date`, `Date32`, `DateTime`, or numeric types (`(U)Int*`, `Float*`, `Decimal`).
DateTime32 provides extended range compared to `DateTime`, supporting dates from `1900-01-01` to `2299-12-31`.
    ","toDateTime32(x[, timezone])","- `x` — Input value to convert. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring) or [`UInt*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Date`](/sql-reference/data-types/date) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
- `timezone` — Optional. Timezone for the returned `DateTime` value. [`String`](/sql-reference/data-types/string)
","","Returns the converted input value. [`DateTime`](/sql-reference/data-types/datetime)","**The value is within the range**

```sql title=Query
SELECT toDateTime64('2025-01-01 00:00:00.000', 3) AS value, toTypeName(value);
```

```response title=Response
┌───────────────────value─┬─toTypeName(toDateTime64('20255-01-01 00:00:00.000', 3))─┐
│ 2025-01-01 00:00:00.000 │ DateTime64(3)                                          │
└─────────────────────────┴────────────────────────────────────────────────────────┘
```

**As a decimal with precision**

```sql title=Query
SELECT toDateTime64(1735689600.000, 3) AS value, toTypeName(value);
-- without the decimal point the value is still treated as Unix Timestamp in seconds
SELECT toDateTime64(1546300800000, 3) AS value, toTypeName(value);
```

```response title=Response
┌───────────────────value─┬─toTypeName(toDateTime64(1735689600.000, 3))─┐
│ 2025-01-01 00:00:00.000 │ DateTime64(3)                            │
└─────────────────────────┴──────────────────────────────────────────┘
┌───────────────────value─┬─toTypeName(toDateTime64(1546300800000, 3))─┐
│ 2282-12-31 00:00:00.000 │ DateTime64(3)                              │
└─────────────────────────┴────────────────────────────────────────────┘
```

**With a timezone**

```sql title=Query
SELECT toDateTime64('2025-01-01 00:00:00', 3, 'Asia/Istanbul') AS value, toTypeName(value);
```

```response title=Response
┌───────────────────value─┬─toTypeName(toDateTime64('2025-01-01 00:00:00', 3, 'Asia/Istanbul'))─┐
│ 2025-01-01 00:00:00.000 │ DateTime64(3, 'Asia/Istanbul')                                      │
└─────────────────────────┴─────────────────────────────────────────────────────────────────────┘
```

","20.9","Type Conversion"
"25.9.2.1","arraySplit",0,0,"","","System","Split a source array into multiple arrays. When `func(x [, y1, ..., yN])` returns something other than zero, the array will be split to the left of the element. The array will not be split before the first element.","arraySplit(func(x[, y1, ..., yN]), source_arr[, cond1_arr, ... , condN_arr])","- `func(x[, y1, ..., yN])` — A lambda function which operates on elements of the source array (`x`) and condition arrays (`y`).[Lambda function](/sql-reference/functions/overview#arrow-operator-and-lambda). - `source_arr` — The source array to split [`Array(T)`](/sql-reference/data-types/array). - `[, cond1_arr, ... , condN_arr]` — Optional. N condition arrays providing additional arguments to the lambda function. [`Array(T)`](/sql-reference/data-types/array). ","","Returns an array of arrays [`Array(Array(T))`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT arraySplit((x, y) -> y, [1, 2, 3, 4, 5], [1, 0, 0, 1, 0]) AS res
```

```response title=Response
[[1, 2, 3], [4, 5]]
```

","20.1","Arrays"
"25.9.2.1","initcapUTF8",0,0,"","","System","
Like [`initcap`](#initCap), `initcapUTF8` converts the first letter of each word to upper case and the rest to lower case.
Assumes that the string contains valid UTF-8 encoded text.
If this assumption is violated, no exception is thrown and the result is undefined.

:::note
This function does not detect the language, e.g. for Turkish the result might not be exactly correct (i/İ vs. i/I).
If the length of the UTF-8 byte sequence is different for upper and lower case of a code point, the result may be incorrect for this code point.
:::
","initcapUTF8(s)","- `s` — Input string. [`String`](/sql-reference/data-types/string)
","","Returns `s` with the first letter of each word converted to upper case. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT initcapUTF8('не тормозит')
```

```response title=Response
┌─initcapUTF8('не тормозит')─┐
│ Не Тормозит                │
└────────────────────────────┘
```

","23.7","String"
"25.9.2.1","path",0,0,"","","System","
Returns the path without query string from a URL.
    ","path(url)","- `url` — URL. [`String`](/sql-reference/data-types/string)
","","Returns the path of the URL without query string. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT path('https://clickhouse.com/docs/sql-reference/functions/url-functions/?query=value');
```

```response title=Response
┌─path('https://clickhouse.com/en/sql-reference/functions/url-functions/?query=value')─┐
│ /docs/sql-reference/functions/url-functions/                                         │
└──────────────────────────────────────────────────────────────────────────────────────┘
```

","1.1","URL"
"25.9.2.1","toUnixTimestamp64Nano",0,0,"","","System","","","","","","","",""
"25.9.2.1","structureToProtobufSchema",0,0,"","","System","
Function that converts ClickHouse table structure to Protobuf format schema
","","","","","**random**

```sql title=Query
SELECT structureToProtobufSchema('s String, x UInt32', 'MessageName') format TSVRaw
```

```response title=Response
syntax = ""proto3"";

message MessageName
{
    bytes s = 1;
    uint32 x = 2;
}
```

","","Other"
"25.9.2.1","polygonAreaSpherical",0,0,"","","System","","","","","","","",""
"25.9.2.1","base58Encode",0,0,"","","System","
Encodes a string using [Base58](https://tools.ietf.org/id/draft-msporny-base58-01.html) encoding.
","base58Encode(plaintext)","- `plaintext` — Plaintext to encode. [`String`](/sql-reference/data-types/string)
","","Returns a string containing the encoded value of the argument. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT base58Encode('ClickHouse');
```

```response title=Response
┌─base58Encode('ClickHouse')─┐
│ 4nhk8K7GHXf6zx             │
└────────────────────────────┘
```

","22.7","String"
"25.9.2.1","ngramDistanceCaseInsensitive",0,0,"","","System","
Provides a case-insensitive variant of [`ngramDistance`](#ngramDistance).
Calculates the 4-gram distance between two strings, ignoring case.
The smaller the returned value, the more similar the strings are.
    ","ngramDistanceCaseInsensitive(haystack, needle)","- `haystack` — First comparison string. [`String`](/sql-reference/data-types/string)
- `needle` — Second comparison string. [`String`](/sql-reference/data-types/string)
","","Returns a Float32 number between `0` and `1`. [`Float32`](/sql-reference/data-types/float)","**Case-insensitive 4-gram distance**

```sql title=Query
SELECT ngramDistanceCaseInsensitive('ClickHouse','clickhouse')
```

```response title=Response
┌─ngramDistanceCaseInsensitive('ClickHouse','clickhouse')─┐
│                                                       0 │
└─────────────────────────────────────────────────────────┘
```

","20.1","String Search"
"25.9.2.1","connectionId",0,1,"","","System","
Returns the connection ID of the client that submitted the current query.
This function is most useful in debugging scenarios.
It was created for compatibility with MySQL's `CONNECTION_ID` function.
It is not typically used in production queries.
","connectionId()","","","Returns the connection ID of the current client. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT connectionId();
```

```response title=Response
┌─connectionId()─┐
│              0 │
└────────────────┘
```

","21.3","Other"
"25.9.2.1","startsWith",0,0,"","","System","
Checks whether a string begins with the provided string.
","startsWith(s, prefix)","- `s` — String to check. [`String`](/sql-reference/data-types/string)
- `prefix` — Prefix to check for. [`String`](/sql-reference/data-types/string)
","","Returns `1` if `s` starts with `prefix`, otherwise `0`. [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT startsWith('ClickHouse', 'Click');
```

```response title=Response
┌─startsWith('⋯', 'Click')─┐
│                        1 │
└──────────────────────────┘
```

","1.1","String"
"25.9.2.1","initialQueryID",0,0,"","","System","
Returns the ID of the initial current query.
Other parameters of a query can be extracted from field `initial_query_id` in [`system.query_log`](../../operations/system-tables/query_log.md).

In contrast to [`queryID`](/sql-reference/functions/other-functions#queryid) function, `initialQueryID` returns the same results on different shards.
","initialQueryID()","","","Returns the ID of the initial current query. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
CREATE TABLE tmp (str String) ENGINE = Log;
INSERT INTO tmp (*) VALUES ('a');
SELECT count(DISTINCT t) FROM (SELECT initialQueryID() AS t FROM remote('127.0.0.{1..3}', currentDatabase(), 'tmp') GROUP BY queryID());
```

```response title=Response
┌─count(DISTINCT t)─┐
│                 1 │
└───────────────────┘
```

","1.1","Other"
"25.9.2.1","murmurHash2_64",0,0,"","","System","
Computes the [MurmurHash2](https://github.com/aappleby/smhasher) hash of the input value.

:::note
The calculated hash values may be equal for the same input values of different argument types.
This affects for example integer types of different size, named and unnamed `Tuple` with the same data, `Map` and the corresponding `Array(Tuple(key, value))` type with the same data.
:::
","murmurHash2_64(arg1[, arg2, ...])","- `arg1[, arg2, ...]` — A variable number of input arguments for which to compute the hash. [`Any`](/sql-reference/data-types)
","","Returns the computed hash of the input arguments. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT murmurHash2_64(array('e','x','a'), 'mple', 10, toDateTime('2019-06-15 23:00:00')) AS MurmurHash2, toTypeName(MurmurHash2) AS type;
```

```response title=Response
┌──────────MurmurHash2─┬─type───┐
│ 11832096901709403633 │ UInt64 │
└──────────────────────┴────────┘
```

","18.10","Hash"
"25.9.2.1","parseReadableSizeOrNull",0,0,"","","System","
Given a string containing a byte size and `B`, `KiB`, `KB`, `MiB`, `MB`, etc. as a unit (i.e. [ISO/IEC 80000-13](https://en.wikipedia.org/wiki/ISO/IEC_80000) or decimal byte unit), this function returns the corresponding number of bytes.
If the function is unable to parse the input value, it returns `NULL`.

The inverse operations of this function are [`formatReadableSize`](#formatReadableSize) and [`formatReadableDecimalSize`](#formatReadableDecimalSize).
","parseReadableSizeOrNull(x)","- `x` — Readable size with ISO/IEC 80000-13 or decimal byte unit. [`String`](/sql-reference/data-types/string)
","","Returns the number of bytes, rounded up to the nearest integer, or `NULL` if unable to parse the input [`Nullable(UInt64)`](/sql-reference/data-types/nullable)","**Usage example**

```sql title=Query
SELECT arrayJoin(['1 B', '1 KiB', '3 MB', '5.314 KiB', 'invalid']) AS readable_sizes, parseReadableSizeOrNull(readable_sizes) AS sizes;
```

```response title=Response
┌─readable_sizes─┬───sizes─┐
│ 1 B            │       1 │
│ 1 KiB          │    1024 │
│ 3 MB           │ 3000000 │
│ 5.314 KiB      │    5442 │
│ invalid        │    ᴺᵁᴸᴸ │
└────────────────┴─────────┘
```

","24.6","Other"
"25.9.2.1","numericIndexedVectorPointwiseSubtract",0,0,"","","System","
Performs pointwise subtraction between a numericIndexedVector and either another numericIndexedVector or a numeric constant.
The function returns a new numericIndexedVector.
        ","numericIndexedVectorPointwiseSubtract(v1, v2)","- `v1` — A numericIndexedVector object. [`numericIndexedVector`](/sql-reference/functions/#create-numeric-indexed-vector-object)
- `v2` — A numeric constant or numericIndexedVector object. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns a new numericIndexedVector object. [`numericIndexedVector`](/sql-reference/functions/#create-numeric-indexed-vector-object)","**Usage example**

```sql title=Query
WITH
    numericIndexedVectorBuild(mapFromArrays([1, 2, 3], arrayMap(x -> toInt32(x), [10, 20, 30]))) AS vec1,
    numericIndexedVectorBuild(mapFromArrays([2, 3, 4], arrayMap(x -> toInt32(x), [10, 20, 30]))) AS vec2
SELECT
    numericIndexedVectorToMap(numericIndexedVectorPointwiseSubtract(vec1, vec2)) AS res1,
    numericIndexedVectorToMap(numericIndexedVectorPointwiseSubtract(vec1, 2)) AS res2;
```

```response title=Response
┌─res1───────────────────┬─res2────────────┐
│ {1:10,2:10,3:10,4:-30} │ {1:8,2:18,3:28} │
└────────────────────────┴─────────────────┘
```

","25.7","NumericIndexedVector"
"25.9.2.1","h3GetBaseCell",0,0,"","","System","
Returns the base cell number of the [H3](#h3-index) index.
    ","h3GetBaseCell(index)","- `index` — Hexagon index number. [`UInt64`](/sql-reference/data-types/int-uint)
","","Returns the hexagon base cell number. [`UInt8`](/sql-reference/data-types/int-uint)","**Get base cell number**

```sql title=Query
SELECT h3GetBaseCell(612916788725809151) AS basecell
```

```response title=Response
┌─basecell─┐
│       12 │
└──────────┘
```

","20.3","Geo"
"25.9.2.1","JSONExtractKeysAndValuesRawCaseInsensitive",0,0,"","","System","
Extracts raw key-value pairs from JSON using case-insensitive key matching. This function is similar to [`JSONExtractKeysAndValuesRaw`](#jsonextractkeysandvaluesraw).
        ","JSONExtractKeysAndValuesRawCaseInsensitive(json [, indices_or_keys]...)","- `json` — JSON string to parse [`String`](/sql-reference/data-types/string)
- `indices_or_keys` — Optional. Indices or keys to navigate to the object. Keys use case-insensitive matching [`String`](/sql-reference/data-types/string) or [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns an array of tuples containing key-value pairs as raw strings. [`Array(Tuple(String, String))`](/sql-reference/data-types/array)","**basic**

```sql title=Query
SELECT JSONExtractKeysAndValuesRawCaseInsensitive('{""Name"": ""Alice"", ""AGE"": 30}')
```

```response title=Response
[('Name','""Alice""'),('AGE','30')]
```

","25.8","JSON"
"25.9.2.1","intDivOrNull",0,0,"","","System","
Same as `intDiv` but returns NULL when dividing by zero or when dividing a
minimal negative number by minus one.
    ","intDivOrNull(x, y)","- `x` — Left hand operand. [`(U)Int*`](/sql-reference/data-types/int-uint)
- `y` — Right hand operand. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Result of integer division of `x` and `y`, or NULL.","**Integer division by zero**

```sql title=Query
SELECT intDivOrNull(1, 0)
```

```response title=Response
\N
```

**Dividing a minimal negative number by minus 1**

```sql title=Query
SELECT intDivOrNull(-9223372036854775808, -1)
```

```response title=Response
\N
```

","25.5","Arithmetic"
"25.9.2.1","isIPAddressInRange",0,0,"","","System","
Determines if an IP address is contained in a network represented in the [Classless Inter-Domain Routing (CIDR)](https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing) notation.

This function accepts both IPv4 and IPv6 addresses (and networks) represented as strings. It returns `0` if the IP version of the address and the CIDR don't match.
        ","isIPAddressInRange(address, prefix)","- `address` — An IPv4 or IPv6 address. [`String`](/sql-reference/data-types/string)
- `prefix` — An IPv4 or IPv6 network prefix in CIDR. [`String`](/sql-reference/data-types/string)
","","Returns `1` if the IP version of the address and the CIDR match, otherwise `0`. [`UInt8`](/sql-reference/data-types/int-uint)","**IPv4 address in range**

```sql title=Query
SELECT isIPAddressInRange('127.0.0.1', '127.0.0.0/8')
```

```response title=Response
1
```

**IPv4 address not in range**

```sql title=Query
SELECT isIPAddressInRange('127.0.0.1', 'ffff::/16')
```

```response title=Response
0
```

**IPv6 address not in range**

```sql title=Query
SELECT isIPAddressInRange('::ffff:192.168.0.1', '::ffff:192.168.0.4/128')
```

```response title=Response
0
```

","21.4","IP Address"
"25.9.2.1","JSON_EXISTS",0,0,"","","System","
If the value exists in the JSON document, `1` will be returned.
If the value does not exist, `0` will be returned.
        ","JSON_EXISTS(json, path)","- `json` — A string with valid JSON. [`String`](/sql-reference/data-types/string)
- `path` — A string representing the path. [`String`](/sql-reference/data-types/string)
","","Returns `1` if the value exists in the JSON document, otherwise `0`. [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT JSON_EXISTS('{""hello"":1}', '$.hello');
SELECT JSON_EXISTS('{""hello"":{""world"":1}}', '$.hello.world');
SELECT JSON_EXISTS('{""hello"":[""world""]}', '$.hello[*]');
SELECT JSON_EXISTS('{""hello"":[""world""]}', '$.hello[0]');
```

```response title=Response
┌─JSON_EXISTS(⋯ '$.hello')─┐
│                        1 │
└──────────────────────────┘
┌─JSON_EXISTS(⋯llo.world')─┐
│                        1 │
└──────────────────────────┘
┌─JSON_EXISTS(⋯.hello[*]')─┐
│                        1 │
└──────────────────────────┘
┌─JSON_EXISTS(⋯.hello[0]')─┐
│                        1 │
└──────────────────────────┘
```

","21.8","JSON"
"25.9.2.1","dictGetDescendants",0,0,"","","System","
Returns all descendants as if dictGetChildren function was applied level times recursively.
Accepts 3 parameters: name of the dictionary, key value - expression returning a UInt64-type value, level — hierarchy level - If level = 0 returns all descendants to the end - UInt8
Returned value: descendants for the key, type of Array(UInt64)
","","","","","","","Dictionary"
"25.9.2.1","readWKBMultiLineString",0,0,"","","System","
            Parses a Well-Known Binary (WKB) representation of a MultiLineString geometry and returns it in the internal ClickHouse format.
            ","readWKBMultiLineString(wkt_string)","- `wkb_string` — The input WKB string representing a MultiLineString geometry. ","","The function returns a ClickHouse internal representation of the multilinestring geometry.","**first call**

```sql title=Query
SELECT readWKTMultiLineString(unhex('010500000002000000010200000003000000000000000000f03f000000000000f03f0000000000000040000000000000004000000000000008400000000000000840010200000003000000000000000000104000000000000010400000000000001440000000000000144000000000000018400000000000001840'));
```

```response title=Response
┌─readWKBMultiLineString('unhex('010500000002000000010200000003000000000...'))─┐
            │ [[(1,1),(2,2),(3,3)],[(4,4),(5,5),(6,6)]]                                    │
            └──────────────────────────────────────────────────────────────────────────────┘
```

","25.5","Geo"
"25.9.2.1","mapContainsValue",0,0,"","","System","Checks whether the map has the specified value.","","","","","**mapContainsValue**

```sql title=Query
SELECT mapContainsValue(map('k1', 'v1', 'k2', 'v2'), 'v1')
```

```response title=Response

```

","25.5","Map"
"25.9.2.1","dictGetChildren",0,0,"","","System","
Returns first-level children as an array of indexes. It is the inverse transformation for dictGetHierarchy.
Accepts 2 parameters: name of the dictionary, key value - expression returning a UInt64-type value.
Returned value: first-level descendants for the key, type of Array(UInt64)
","","","","","","","Dictionary"
"25.9.2.1","dictIsIn",0,0,"","","System","
Checks the ancestor of a key through the whole hierarchical chain in the dictionary.
Accepts 3 parameters: name of the dictionary, key to be checked - expression returning a UInt64-type value, alleged ancestor of the key - expression returning a UInt64-type.
Returned value: 0 if key is not a child of the ancestor, 1 if key is a child of the ancestor or if key is the ancestor, type of UInt8
","","","","","","","Dictionary"
"25.9.2.1","dictGetStringOrDefault",0,0,"","","System","
Retrieves values from a dictionary.

Accepts 4 parameters:
-- name of the dictionary;
-- name of the column of the dictionary or tuple of column names;
-- key value - expression returning dictionary key-type value or tuple-type value - depending on the dictionary configuration;
-- default values returned if the dictionary does not contain a row with the key value;

Returned value: value of the dictionary attribute parsed in the String if key is found, otherwise default value.

Throws an exception if cannot parse the value of the attribute or the value does not match the attribute data type.
","","","","","","","Dictionary"
"25.9.2.1","evalMLMethod",0,0,"","","System","","","","","","","",""
"25.9.2.1","dictGetIPv6OrDefault",0,0,"","","System","
Retrieves values from a dictionary.

Accepts 4 parameters:
-- name of the dictionary;
-- name of the column of the dictionary or tuple of column names;
-- key value - expression returning dictionary key-type value or tuple-type value - depending on the dictionary configuration;
-- default values returned if the dictionary does not contain a row with the key value;

Returned value: value of the dictionary attribute parsed in the IPv6 if key is found, otherwise default value.

Throws an exception if cannot parse the value of the attribute or the value does not match the attribute data type.
","","","","","","","Dictionary"
"25.9.2.1","_CAST",0,1,"","","System","","","","","","","",""
"25.9.2.1","dictGetIPv4OrDefault",0,0,"","","System","
Retrieves values from a dictionary.

Accepts 4 parameters:
-- name of the dictionary;
-- name of the column of the dictionary or tuple of column names;
-- key value - expression returning dictionary key-type value or tuple-type value - depending on the dictionary configuration;
-- default values returned if the dictionary does not contain a row with the key value;

Returned value: value of the dictionary attribute parsed in the IPv4 if key is found, otherwise default value.

Throws an exception if cannot parse the value of the attribute or the value does not match the attribute data type.
","","","","","","","Dictionary"
"25.9.2.1","UTCTimestamp",0,1,"","","System","
Returns the current date and time at the moment of query analysis. The function is a constant expression.

This function gives the same result that `now('UTC')` would. It was added only for MySQL support. [`now`](#now) is the preferred usage.
    ","UTCTimestamp()","","","Returns the current date and time at the moment of query analysis. [`DateTime`](/sql-reference/data-types/datetime)","**Get current UTC timestamp**

```sql title=Query
SELECT UTCTimestamp()
```

```response title=Response
┌──────UTCTimestamp()─┐
│ 2024-05-28 08:32:09 │
└─────────────────────┘
```

","22.11","Dates and Times"
"25.9.2.1","dictGetFloat64OrDefault",0,0,"","","System","
Retrieves values from a dictionary.

Accepts 4 parameters:
-- name of the dictionary;
-- name of the column of the dictionary or tuple of column names;
-- key value - expression returning dictionary key-type value or tuple-type value - depending on the dictionary configuration;
-- default values returned if the dictionary does not contain a row with the key value;

Returned value: value of the dictionary attribute parsed in the Float64 if key is found, otherwise default value.

Throws an exception if cannot parse the value of the attribute or the value does not match the attribute data type.
","","","","","","","Dictionary"
"25.9.2.1","s2RectAdd",0,0,"","","System","","","","","","","",""
"25.9.2.1","dictGetFloat32OrDefault",0,0,"","","System","
Retrieves values from a dictionary.

Accepts 4 parameters:
-- name of the dictionary;
-- name of the column of the dictionary or tuple of column names;
-- key value - expression returning dictionary key-type value or tuple-type value - depending on the dictionary configuration;
-- default values returned if the dictionary does not contain a row with the key value;

Returned value: value of the dictionary attribute parsed in the Float32 if key is found, otherwise default value.

Throws an exception if cannot parse the value of the attribute or the value does not match the attribute data type.
","","","","","","","Dictionary"
"25.9.2.1","keccak256",0,0,"","","System","
Calculates the Keccak-256 cryptographic hash of the given string.
This hash function is widely used in blockchain applications, particularly Ethereum.
    ","keccak256(message)","- `message` — The input string to hash. [`String`](/sql-reference/data-types/string)
","","Returns the 32-byte Keccak-256 hash of the input string as a fixed-length string. [`FixedString(32)`](/sql-reference/data-types/fixedstring)","**Usage example**

```sql title=Query
SELECT hex(keccak256('hello'))
```

```response title=Response
┌─hex(keccak256('hello'))──────────────────────────────────────────┐
│ 1C8AFF950685C2ED4BC3174F3472287B56D9517B9C948127319A09A7A36DEAC8 │
└──────────────────────────────────────────────────────────────────┘
```

","25.4","Hash"
"25.9.2.1","dictGetInt64OrDefault",0,0,"","","System","
Retrieves values from a dictionary.

Accepts 4 parameters:
-- name of the dictionary;
-- name of the column of the dictionary or tuple of column names;
-- key value - expression returning dictionary key-type value or tuple-type value - depending on the dictionary configuration;
-- default values returned if the dictionary does not contain a row with the key value;

Returned value: value of the dictionary attribute parsed in the Int64 if key is found, otherwise default value.

Throws an exception if cannot parse the value of the attribute or the value does not match the attribute data type.
","","","","","","","Dictionary"
"25.9.2.1","bitTestAll",0,0,"","","System","
Returns result of the [logical conjunction](https://en.wikipedia.org/wiki/Logical_conjunction) (AND operator) of all bits at the given positions.
Counts right-to-left, starting at 0.

The logical AND between two bits is true if and only if both input bits are true.
    ","bitTestAll(a, index1[, index2, ... , indexN])","- `a` — An integer value. [`(U)Int8/16/32/64`](/sql-reference/data-types/int-uint)
- `index1, ...` — One or multiple positions of bits. [`(U)Int8/16/32/64`](/sql-reference/data-types/int-uint)
","","Returns the result of the logical conjunction [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example 1**

```sql title=Query
SELECT bitTestAll(43, 0, 1, 3, 5);
```

```response title=Response
┌─bin(43)──┬─bitTestAll(43, 0, 1, 3, 5)─┐
│ 00101011 │                          1 │
└──────────┴────────────────────────────┘
```

**Usage example 2**

```sql title=Query
SELECT bitTestAll(43, 0, 1, 3, 5, 2);
```

```response title=Response
┌─bin(43)──┬─bitTestAll(4⋯1, 3, 5, 2)─┐
│ 00101011 │                        0 │
└──────────┴──────────────────────────┘
```

","1.1","Bit"
"25.9.2.1","normalizedQueryHash",0,0,"","","System","
Returns identical 64 bit hash values without the values of literals for similar queries.
Can be helpful in analyzing query logs.
    ","normalizedQueryHash(x)","- `x` — Sequence of characters. [`String`](/sql-reference/data-types/string)
","","Returns a 64 bit hash value. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT normalizedQueryHash('SELECT 1 AS `xyz`') != normalizedQueryHash('SELECT 1 AS `abc`') AS res
```

```response title=Response
┌─res─┐
│   1 │
└─────┘
```

","20.8","Other"
"25.9.2.1","dictGetInt32OrDefault",0,0,"","","System","
Retrieves values from a dictionary.

Accepts 4 parameters:
-- name of the dictionary;
-- name of the column of the dictionary or tuple of column names;
-- key value - expression returning dictionary key-type value or tuple-type value - depending on the dictionary configuration;
-- default values returned if the dictionary does not contain a row with the key value;

Returned value: value of the dictionary attribute parsed in the Int32 if key is found, otherwise default value.

Throws an exception if cannot parse the value of the attribute or the value does not match the attribute data type.
","","","","","","","Dictionary"
"25.9.2.1","addressToLine",0,0,"","","System","
Converts a virtual memory address inside the ClickHouse server process to a filename and line number in ClickHouse's source code.

:::note
This function is slow and may impose security considerations.
:::

To enable this introspection function:

- Install the `clickhouse-common-static-dbg` package.
- Set setting [`allow_introspection_functions`](../../operations/settings/settings.md#allow_introspection_functions) to `1`.
    ","addressToLine(address_of_binary_instruction)","- `address_of_binary_instruction` — Address of instruction in a running process. [`UInt64`](/sql-reference/data-types/int-uint)
","","Returns a source code filename and line number delimited by a colon, for example, `/build/obj-x86_64-linux-gnu/../src/Common/ThreadPool.cpp:199`. Returns the name of a binary, if no debug information could be found, otherwise an empty string, if the address is not valid. [`String`](/sql-reference/data-types/string)","**Selecting the first string from the `trace_log` system table**

```sql title=Query
SET allow_introspection_functions=1;
SELECT * FROM system.trace_log LIMIT 1 \G;
```

```response title=Response
-- The `trace` field contains the stack trace at the moment of sampling.
Row 1:
──────
event_date:              2019-11-19
event_time:              2019-11-19 18:57:23
revision:                54429
timer_type:              Real
thread_number:           48
query_id:                421b6855-1858-45a5-8f37-f383409d6d72
trace:                   [140658411141617,94784174532828,94784076370703,94784076372094,94784076361020,94784175007680,140658411116251,140658403895439]
```

**Getting the source code filename and the line number for a single address**

```sql title=Query
SET allow_introspection_functions=1;
SELECT addressToLine(94784076370703) \G;
```

```response title=Response
Row 1:
──────
addressToLine(94784076370703): /build/obj-x86_64-linux-gnu/../src/Common/ThreadPool.cpp:199
```

**Applying the function to the whole stack trace**

```sql title=Query
-- The arrayMap function in this example processing each individual element of the trace array by the addressToLine function.
-- The result of this processing is seen in the trace_source_code_lines column of output.

SELECT
    arrayStringConcat(arrayMap(x -> addressToLine(x), trace), '\n') AS trace_source_code_lines
FROM system.trace_log
LIMIT 1
\G
```

```response title=Response
Row 1:
──────
trace_source_code_lines: /lib/x86_64-linux-gnu/libpthread-2.27.so
/usr/lib/debug/usr/bin/clickhouse
/build/obj-x86_64-linux-gnu/../src/Common/ThreadPool.cpp:199
/build/obj-x86_64-linux-gnu/../src/Common/ThreadPool.h:155
/usr/include/c++/9/bits/atomic_base.h:551
/usr/lib/debug/usr/bin/clickhouse
/lib/x86_64-linux-gnu/libpthread-2.27.so
/build/glibc-OTsEL5/glibc-2.27/misc/../sysdeps/unix/sysv/linux/x86_64/clone.S:97
```

","20.1","Introspection"
"25.9.2.1","globalNotIn",0,0,"","","System","","","","","","","",""
"25.9.2.1","dateTime64ToSnowflake",0,0,"","","System","
<DeprecatedBadge/>

:::warning
This function is deprecated and can only be used if setting [`allow_deprecated_snowflake_conversion_functions`](../../operations/settings/settings.md#allow_deprecated_snowflake_conversion_functions) is enabled.
The function will be removed at some point in future.

Please use function [dateTime64ToSnowflakeID](#dateTime64ToSnowflakeID) instead.
:::

Converts a [DateTime64](../data-types/datetime64.md) to the first [Snowflake ID](https://en.wikipedia.org/wiki/Snowflake_ID) at the giving time.
    ","dateTime64ToSnowflake(value)","- `value` — Date with time. [`DateTime64`](/sql-reference/data-types/datetime64)
","","Returns the input value converted as the first Snowflake ID at that time. [`Int64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
WITH toDateTime64('2021-08-15 18:57:56.492', 3, 'Asia/Shanghai') AS dt64 SELECT dateTime64ToSnowflake(dt64);
```

```response title=Response
┌─dateTime64ToSnowflake(dt64)─┐
│         1426860704886947840 │
└─────────────────────────────┘
```

","21.10","UUID"
"25.9.2.1","dictGetInt8OrDefault",0,0,"","","System","
Retrieves values from a dictionary.

Accepts 4 parameters:
-- name of the dictionary;
-- name of the column of the dictionary or tuple of column names;
-- key value - expression returning dictionary key-type value or tuple-type value - depending on the dictionary configuration;
-- default values returned if the dictionary does not contain a row with the key value;

Returned value: value of the dictionary attribute parsed in the Int8 if key is found, otherwise default value.

Throws an exception if cannot parse the value of the attribute or the value does not match the attribute data type.
","","","","","","","Dictionary"
"25.9.2.1","wordShingleMinHashCaseInsensitive",0,0,"","","System","
Splits a ASCII string into parts (shingles) of `shinglesize` words, calculates hash values for each word shingle and returns a tuple with these hashes.
Uses `hashnum` minimum hashes to calculate the minimum hash and `hashnum` maximum hashes to calculate the maximum hash.
It is case insensitive.

Can be used to detect semi-duplicate strings with [`tupleHammingDistance`](../functions/tuple-functions.md/#tuplehammingdistance).
For two strings, if the returned hashes are the same for both strings, then those strings are the same.
","wordShingleMinHashCaseInsensitive(string[, shinglesize, hashnum])","- `string` — String for which to compute the hash. [`String`](/sql-reference/data-types/string)
- `shinglesize` — Optional. The size of a word shingle, any number from `1` to `25`. The default value is `3`. [`UInt8`](/sql-reference/data-types/int-uint)
- `hashnum` — Optional. The number of minimum and maximum hashes used to calculate the result, any number from `1` to `25`. The default value is `6`. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns a tuple with two hashes — the minimum and the maximum. [`Tuple(UInt64, UInt64)`](/sql-reference/data-types/tuple)","**Usage example**

```sql title=Query
SELECT wordShingleMinHashCaseInsensitive('ClickHouse® is a column-oriented database management system (DBMS) for online analytical processing of queries (OLAP).') AS Tuple;
```

```response title=Response
┌─Tuple─────────────────────────────────────┐
│ (3065874883688416519,1634050779997673240) │
└───────────────────────────────────────────┘
```

","21.1","Hash"
"25.9.2.1","dictGetDateOrDefault",0,0,"","","System","
Retrieves values from a dictionary.

Accepts 4 parameters:
-- name of the dictionary;
-- name of the column of the dictionary or tuple of column names;
-- key value - expression returning dictionary key-type value or tuple-type value - depending on the dictionary configuration;
-- default values returned if the dictionary does not contain a row with the key value;

Returned value: value of the dictionary attribute parsed in the Date if key is found, otherwise default value.

Throws an exception if cannot parse the value of the attribute or the value does not match the attribute data type.
","","","","","","","Dictionary"
"25.9.2.1","dictGetUInt64OrDefault",0,0,"","","System","
Retrieves values from a dictionary.

Accepts 4 parameters:
-- name of the dictionary;
-- name of the column of the dictionary or tuple of column names;
-- key value - expression returning dictionary key-type value or tuple-type value - depending on the dictionary configuration;
-- default values returned if the dictionary does not contain a row with the key value;

Returned value: value of the dictionary attribute parsed in the UInt64 if key is found, otherwise default value.

Throws an exception if cannot parse the value of the attribute or the value does not match the attribute data type.
","","","","","","","Dictionary"
"25.9.2.1","dictGetUInt32OrDefault",0,0,"","","System","
Retrieves values from a dictionary.

Accepts 4 parameters:
-- name of the dictionary;
-- name of the column of the dictionary or tuple of column names;
-- key value - expression returning dictionary key-type value or tuple-type value - depending on the dictionary configuration;
-- default values returned if the dictionary does not contain a row with the key value;

Returned value: value of the dictionary attribute parsed in the UInt32 if key is found, otherwise default value.

Throws an exception if cannot parse the value of the attribute or the value does not match the attribute data type.
","","","","","","","Dictionary"
"25.9.2.1","h3ExactEdgeLengthM",0,0,"","","System","","","","","","","",""
"25.9.2.1","countSubstringsCaseInsensitiveUTF8",0,0,"","","System","","","","","","","",""
"25.9.2.1","h3IsPentagon",0,0,"","","System","","","","","","","",""
"25.9.2.1","dictGetUInt16OrDefault",0,0,"","","System","
Retrieves values from a dictionary.

Accepts 4 parameters:
-- name of the dictionary;
-- name of the column of the dictionary or tuple of column names;
-- key value - expression returning dictionary key-type value or tuple-type value - depending on the dictionary configuration;
-- default values returned if the dictionary does not contain a row with the key value;

Returned value: value of the dictionary attribute parsed in the UInt16 if key is found, otherwise default value.

Throws an exception if cannot parse the value of the attribute or the value does not match the attribute data type.
","","","","","","","Dictionary"
"25.9.2.1","dictGetString",0,0,"","","System","
Retrieves values from a dictionary.

Accepts 3 parameters:
-- name of the dictionary;
-- name of the column of the dictionary or tuple of column names;
-- key value - expression returning dictionary key-type value or tuple-type value - depending on the dictionary configuration;

Returned value: value of the dictionary attribute parsed in the String if key is found, otherwise <null_value> element specified in the dictionary configuration.

Throws an exception if cannot parse the value of the attribute or the value does not match the attribute data type.
","","","","","","","Dictionary"
"25.9.2.1","hasSubsequenceCaseInsensitive",0,1,"","","System","","","","","","","",""
"25.9.2.1","numericIndexedVectorPointwiseLessEqual",0,0,"","","System","
Performs pointwise comparison between a numericIndexedVector and either another numericIndexedVector or a numeric constant.
The result is a numericIndexedVector containing the indices where the first vector's value is less than or equal to the second vector's value, with all corresponding values set to 1.
        ","numericIndexedVectorPointwiseLessEqual(v1, v2)","- `v1` — A numericIndexedVector object. [`numericIndexedVector`](/sql-reference/functions/#create-numeric-indexed-vector-object)
- `v2` — A numeric constant or numericIndexedVector object [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`numericIndexedVector`](/sql-reference/functions/#create-numeric-indexed-vector-object)
","","Returns a new numericIndexedVector object. [`numericIndexedVector`](/sql-reference/functions/#create-numeric-indexed-vector-object)","**Usage example**

```sql title=Query
with
    numericIndexedVectorBuild(mapFromArrays([1, 2, 3], arrayMap(x -> toFloat64(x), [10, 20, 30]))) as vec1,
    numericIndexedVectorBuild(mapFromArrays([2, 3, 4], arrayMap(x -> toFloat64(x), [20, 40, 30]))) as vec2
SELECT
    numericIndexedVectorToMap(numericIndexedVectorPointwiseLessEqual(vec1, vec2)) AS res1,
    numericIndexedVectorToMap(numericIndexedVectorPointwiseLessEqual(vec1, 20)) AS res2;
```

```response title=Response
┌─res1──────────┬─res2──────┐
│ {2:1,3:1,4:1} │ {1:1,2:1} │
└───────────────┴───────────┘
```

","25.7","NumericIndexedVector"
"25.9.2.1","dictGetIPv6",0,0,"","","System","
Retrieves values from a dictionary.

Accepts 3 parameters:
-- name of the dictionary;
-- name of the column of the dictionary or tuple of column names;
-- key value - expression returning dictionary key-type value or tuple-type value - depending on the dictionary configuration;

Returned value: value of the dictionary attribute parsed in the IPv6 if key is found, otherwise <null_value> element specified in the dictionary configuration.

Throws an exception if cannot parse the value of the attribute or the value does not match the attribute data type.
","","","","","","","Dictionary"
"25.9.2.1","dictGetIPv4",0,0,"","","System","
Retrieves values from a dictionary.

Accepts 3 parameters:
-- name of the dictionary;
-- name of the column of the dictionary or tuple of column names;
-- key value - expression returning dictionary key-type value or tuple-type value - depending on the dictionary configuration;

Returned value: value of the dictionary attribute parsed in the IPv4 if key is found, otherwise <null_value> element specified in the dictionary configuration.

Throws an exception if cannot parse the value of the attribute or the value does not match the attribute data type.
","","","","","","","Dictionary"
"25.9.2.1","multiSearchFirstPosition",0,0,"","","System","
Like [`position`](#position) but returns the leftmost offset in a `haystack` string which matches any of multiple `needle` strings.

Functions [`multiSearchFirstPositionCaseInsensitive`](#multiSearchFirstPositionCaseInsensitive), [`multiSearchFirstPositionUTF8`](#multiSearchFirstPositionUTF8) and [`multiSearchFirstPositionCaseInsensitiveUTF8`](#multiSearchFirstPositionCaseInsensitiveUTF8) provide case-insensitive and/or UTF-8 variants of this function.
    ","multiSearchFirstPosition(haystack, needle1[, needle2, ...])","- `haystack` — String in which the search is performed. [`String`](/sql-reference/data-types/string)
- `needle1[, needle2, ...]` — An array of one or more substrings to be searched. [`Array(String)`](/sql-reference/data-types/array)
","","Returns the leftmost offset in a `haystack` string which matches any of multiple `needle` strings, otherwise `0`, if there was no match. [`UInt64`](/sql-reference/data-types/int-uint)","**First position search**

```sql title=Query
SELECT multiSearchFirstPosition('Hello World',['llo', 'Wor', 'ld'])
```

```response title=Response
┌─multiSearchFirstPosition('Hello World', ['llo', 'Wor', 'ld'])─┐
│                                                             3 │
└───────────────────────────────────────────────────────────────┘
```

","20.1","String Search"
"25.9.2.1","dictGetDate",0,0,"","","System","
Retrieves values from a dictionary.

Accepts 3 parameters:
-- name of the dictionary;
-- name of the column of the dictionary or tuple of column names;
-- key value - expression returning dictionary key-type value or tuple-type value - depending on the dictionary configuration;

Returned value: value of the dictionary attribute parsed in the Date if key is found, otherwise <null_value> element specified in the dictionary configuration.

Throws an exception if cannot parse the value of the attribute or the value does not match the attribute data type.
","","","","","","","Dictionary"
"25.9.2.1","YYYYMMDDToDate32",0,1,"","","System","
Converts a number containing the year, month and day number to a `Date32`.
This function is the opposite of function [`toYYYYMMDD()`](/sql-reference/functions/date-time-functions#toYYYYMMDD).
The output is undefined if the input does not encode a valid `Date32` value.
    ","YYYYMMDDToDate32(YYYYMMDD)","- `YYYYMMDD` — Number containing the year, month and day. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
","","Returns a `Date32` value from the provided arguments [`Date32`](/sql-reference/data-types/date32)","**Example**

```sql title=Query
SELECT YYYYMMDDToDate32(20000507);
```

```response title=Response
┌─YYYYMMDDToDate32(20000507)─┐
│                 2000-05-07 │
└────────────────────────────┘
```

","23.9","Dates and Times"
"25.9.2.1","reinterpretAsInt32",0,0,"","","System","","","","","","","",""
"25.9.2.1","dictGetFloat64",0,0,"","","System","
Retrieves values from a dictionary.

Accepts 3 parameters:
-- name of the dictionary;
-- name of the column of the dictionary or tuple of column names;
-- key value - expression returning dictionary key-type value or tuple-type value - depending on the dictionary configuration;

Returned value: value of the dictionary attribute parsed in the Float64 if key is found, otherwise <null_value> element specified in the dictionary configuration.

Throws an exception if cannot parse the value of the attribute or the value does not match the attribute data type.
","","","","","","","Dictionary"
"25.9.2.1","greatCircleAngle",0,0,"","","System","
Calculates the central angle between two points on the Earth's surface using the [great-circle formula](https://en.wikipedia.org/wiki/Great-circle_distance).
This function returns the angle in degrees between two points on a sphere.
        ","greatCircleAngle(lon1Deg, lat1Deg, lon2Deg, lat2Deg)","- `lon1Deg` — Longitude of the first point in degrees. Range: `[-180°, 180°]` [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
- `lat1Deg` — Latitude of the first point in degrees. Range: `[-90°, 90°]`. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
- `lon2Deg` — Longitude of the second point in degrees. Range: `[-180°, 180°]`. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
- `lat2Deg` — Latitude of the second point in degrees. Range: `[-90°, 90°]`. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
","","Returns the central angle between the two points in degrees [`Float64`](/sql-reference/data-types/float)","**Basic usage**

```sql title=Query
SELECT greatCircleAngle(0, 0, 45, 0) AS angle
```

```response title=Response
┌─angle─┐
│    45 │
└───────┘
```

","1.1","Geo"
"25.9.2.1","IPv6StringToNum",0,0,"","","System","
Converts an IPv6 address from its standard text representation to binary format (`FixedString(16)`).
Accepts IPv4-mapped IPv6 addresses in the format `::ffff:111.222.33.44.`.
If the IPv6 address has an invalid format, an exception is thrown.

If the input string contains a valid IPv4 address, returns its IPv6 equivalent.
HEX can be uppercase or lowercase.
    ","IPv6StringToNum(string)","- `string` — IPv6 address string. [`String`](/sql-reference/data-types/string)
","","Returns theIPv6 address in binary format. [`FixedString(16)`](/sql-reference/data-types/fixedstring)","**Basic example**

```sql title=Query
SELECT addr, cutIPv6(IPv6StringToNum(addr), 0, 0) FROM (SELECT ['notaddress', '127.0.0.1', '1111::ffff'] AS addr) ARRAY JOIN addr;
```

```response title=Response
┌─addr───────┬─cutIPv6(IPv6StringToNum(addr), 0, 0)─┐
│ notaddress │ ::                                   │
│ 127.0.0.1  │ ::ffff:127.0.0.1                     │
│ 1111::ffff │ 1111::ffff                           │
└────────────┴──────────────────────────────────────┘
```

","1.1","IP Address"
"25.9.2.1","dictGetInt64",0,0,"","","System","
Retrieves values from a dictionary.

Accepts 3 parameters:
-- name of the dictionary;
-- name of the column of the dictionary or tuple of column names;
-- key value - expression returning dictionary key-type value or tuple-type value - depending on the dictionary configuration;

Returned value: value of the dictionary attribute parsed in the Int64 if key is found, otherwise <null_value> element specified in the dictionary configuration.

Throws an exception if cannot parse the value of the attribute or the value does not match the attribute data type.
","","","","","","","Dictionary"
"25.9.2.1","min2",0,1,"","","System","
    Returns the smaller of two numeric values `x` and `y`.
    ","min2(x, y)","- `x` — First value [`(U)Int8/16/32/64`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
- `y` — Second value [`(U)Int8/16/32/64`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
","","Returns the smaller value of `x` and `y`. [`Float64`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT min2(-1, 2)
```

```response title=Response
-1
```

","21.11","Arithmetic"
"25.9.2.1","dictGetInt16",0,0,"","","System","
Retrieves values from a dictionary.

Accepts 3 parameters:
-- name of the dictionary;
-- name of the column of the dictionary or tuple of column names;
-- key value - expression returning dictionary key-type value or tuple-type value - depending on the dictionary configuration;

Returned value: value of the dictionary attribute parsed in the Int16 if key is found, otherwise <null_value> element specified in the dictionary configuration.

Throws an exception if cannot parse the value of the attribute or the value does not match the attribute data type.
","","","","","","","Dictionary"
"25.9.2.1","leftUTF8",0,0,"","","System","
Returns a substring of a UTF-8-encoded string `s` with a specified `offset` starting from the left.
","leftUTF8(s, offset)","- `s` — The UTF-8 encoded string to calculate a substring from. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring)
- `offset` — The number of bytes of the offset. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns:
- For positive `offset`, a substring of `s` with `offset` many bytes, starting from the left of the string.\n""
- For negative `offset`, a substring of `s` with `length(s) - |offset|` bytes, starting from the left of the string.\n""
- An empty string if `length` is 0.
     [`String`](/sql-reference/data-types/string)","**Positive offset**

```sql title=Query
SELECT leftUTF8('Привет', 4)
```

```response title=Response
Прив
```

**Negative offset**

```sql title=Query
SELECT leftUTF8('Привет', -4)
```

```response title=Response
Пр
```

","22.1","String"
"25.9.2.1","isValidUTF8",0,0,"","","System","
Checks if the set of bytes constitutes valid UTF-8-encoded text.
","isValidUTF8(s)","- `s` — The string to check for UTF-8 encoded validity. [`String`](/sql-reference/data-types/string)
","","Returns `1`, if the set of bytes constitutes valid UTF-8-encoded text, otherwise `0`. [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT isValidUTF8('\\xc3\\xb1') AS valid, isValidUTF8('\\xc3\\x28') AS invalid
```

```response title=Response
┌─valid─┬─invalid─┐
│     1 │       0 │
└───────┴─────────┘
```

","20.1","String"
"25.9.2.1","dictGetInt8",0,0,"","","System","
Retrieves values from a dictionary.

Accepts 3 parameters:
-- name of the dictionary;
-- name of the column of the dictionary or tuple of column names;
-- key value - expression returning dictionary key-type value or tuple-type value - depending on the dictionary configuration;

Returned value: value of the dictionary attribute parsed in the Int8 if key is found, otherwise <null_value> element specified in the dictionary configuration.

Throws an exception if cannot parse the value of the attribute or the value does not match the attribute data type.
","","","","","","","Dictionary"
"25.9.2.1","dictGetUInt64",0,0,"","","System","
Retrieves values from a dictionary.

Accepts 3 parameters:
-- name of the dictionary;
-- name of the column of the dictionary or tuple of column names;
-- key value - expression returning dictionary key-type value or tuple-type value - depending on the dictionary configuration;

Returned value: value of the dictionary attribute parsed in the UInt64 if key is found, otherwise <null_value> element specified in the dictionary configuration.

Throws an exception if cannot parse the value of the attribute or the value does not match the attribute data type.
","","","","","","","Dictionary"
"25.9.2.1","dictGetUInt32",0,0,"","","System","
Retrieves values from a dictionary.

Accepts 3 parameters:
-- name of the dictionary;
-- name of the column of the dictionary or tuple of column names;
-- key value - expression returning dictionary key-type value or tuple-type value - depending on the dictionary configuration;

Returned value: value of the dictionary attribute parsed in the UInt32 if key is found, otherwise <null_value> element specified in the dictionary configuration.

Throws an exception if cannot parse the value of the attribute or the value does not match the attribute data type.
","","","","","","","Dictionary"
"25.9.2.1","numericIndexedVectorPointwiseNotEqual",0,0,"","","System","
Performs pointwise comparison between a numericIndexedVector and either another numericIndexedVector or a numeric constant.
The result is a numericIndexedVector containing the indices where the values are not equal, with all corresponding values set to 1.
        ","numericIndexedVectorPointwiseNotEqual(v1, v2)","- `numericIndexedVector` — A numericIndexedVector object. [`numericIndexedVector`](/sql-reference/functions/#create-numeric-indexed-vector-object)
- `numeric` — A numeric constant or numericIndexedVector object. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`numericIndexedVector`](/sql-reference/functions/#create-numeric-indexed-vector-object)
","","Returns a new numericIndexedVector object. [`numericIndexedVector`](/sql-reference/functions/#create-numeric-indexed-vector-object)","**Usage example**

```sql title=Query
with
    numericIndexedVectorBuild(mapFromArrays([1, 2, 3], arrayMap(x -> toFloat64(x), [10, 20, 30]))) as vec1,
    numericIndexedVectorBuild(mapFromArrays([2, 3, 4], arrayMap(x -> toFloat64(x), [20, 20, 30]))) as vec2
SELECT
    numericIndexedVectorToMap(numericIndexedVectorPointwiseNotEqual(vec1, vec2)) AS res1,
    numericIndexedVectorToMap(numericIndexedVectorPointwiseNotEqual(vec1, 20)) AS res2;
```

```response title=Response
┌─res1──────────┬─res2──────┐
│ {1:1,3:1,4:1} │ {1:1,3:1} │
└───────────────┴───────────┘
```

","25.7","NumericIndexedVector"
"25.9.2.1","dictGetAll",0,0,"","","System","
Retrieves all values from a dictionary corresponding to the given key values.

Accepts 3 or 4 parameters:
-- name of the dictionary;
-- name of the column of the dictionary or tuple of column names;
-- key value - expression returning dictionary key-type value or tuple-type value - depending on the dictionary configuration;
-- [optional] maximum number of values to return for each attribute;

Returned value: array of dictionary attribute values parsed in the attribute's data type if key is found, otherwise empty array.

Throws an exception if cannot parse the value of the attribute, the value does not match the attribute data type, or the dictionary doesn't support this function.
","","","","","","","Dictionary"
"25.9.2.1","h3GetPentagonIndexes",0,0,"","","System","","","","","","","",""
"25.9.2.1","emptyArrayInt16",0,0,"","","System","Returns an empty Int16 array","emptyArrayInt16()","","","An empty Int16 array. [`Array(T)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT emptyArrayInt16
```

```response title=Response
[]
```

","1.1","Arrays"
"25.9.2.1","replaceOne",0,0,"","","System","
Replaces the first occurrence of the substring `pattern` in `haystack` by the `replacement` string.
","replaceOne(haystack, pattern, replacement)","- `haystack` — The input string to search in. [`String`](/sql-reference/data-types/string)
- `pattern` — The substring to find and replace. [`const String`](/sql-reference/data-types/string)
- `replacement` — The string to replace the pattern with. [`const String`](/sql-reference/data-types/string)
","","Returns a string with the first occurrence of pattern replaced. [`String`](/sql-reference/data-types/string)","**Replace first occurrence**

```sql title=Query
SELECT replaceOne('Hello, Hello world', 'Hello', 'Hi') AS res;
```

```response title=Response
┌─res─────────────┐
│ Hi, Hello world │
└─────────────────┘
```

","1.1","String"
"25.9.2.1","dictGetOrDefault",0,0,"","","System","
Retrieves values from a dictionary.

Accepts 4 parameters:
-- name of the dictionary;
-- name of the column of the dictionary or tuple of column names;
-- key value - expression returning dictionary key-type value or tuple-type value - depending on the dictionary configuration;
-- default values returned if the dictionary does not contain a row with the key value;

Returned value: value of the dictionary attribute parsed in the attribute's data type if key is found, otherwise default value.

Throws an exception if cannot parse the value of the attribute or the value does not match the attribute data type.
","","","","","","","Dictionary"
"25.9.2.1","isNotDistinctFrom",0,0,"","","System","
Performs a null-safe comparison between two `JOIN` keys. This function will consider
two `NULL` values as identical and will return `true`, which is distinct from the usual
equals behavior where comparing two `NULL` values would return `NULL`.

:::info
This function is an internal function used by the implementation of `JOIN ON`.
Please do not use it manually in queries.
:::

For a complete example see: [`NULL` values in `JOIN` keys](/sql-reference/statements/select/join#null-values-in-join-keys).
    ","isNotDistinctFrom(x, y)","- `x` — First `JOIN` key to compare. [`Any`](/sql-reference/data-types)
- `y` — Second `JOIN` key to compare. [`Any`](/sql-reference/data-types)
","","Returns `true` when `x` and `y` are both `NULL`, otherwise `false`. [`Bool`](/sql-reference/data-types/boolean)","","23.8","Null"
"25.9.2.1","seriesPeriodDetectFFT",0,0,"","","System","
Finds the period of the given series data using FFT - [Fast Fourier transform](https://en.wikipedia.org/wiki/Fast_Fourier_transform)
    ","seriesPeriodDetectFFT(series)","- `series` — An array of numeric values. [`Array((U)Int8/16/32/64)`](/sql-reference/data-types/array) or [`Array(Float*)`](/sql-reference/data-types/array)
","","Returns a real value equal to the period of series data. NaN when number of data points are less than four. [`Float64`](/sql-reference/data-types/float)","**Period detection with simple pattern**

```sql title=Query
SELECT seriesPeriodDetectFFT([1, 4, 6, 1, 4, 6, 1, 4, 6, 1, 4, 6, 1, 4, 6, 1, 4, 6, 1, 4, 6]) AS print_0
```

```response title=Response
┌───────────print_0──────┐
│                      3 │
└────────────────────────┘
```

**Period detection with complex pattern**

```sql title=Query
SELECT seriesPeriodDetectFFT(arrayMap(x -> abs((x % 6) - 3), range(1000))) AS print_0
```

```response title=Response
┌─print_0─┐
│       6 │
└─────────┘
```

","23.12","Time Series"
"25.9.2.1","multiSearchFirstIndexCaseInsensitiveUTF8",0,0,"","","System","","","","","","","",""
"25.9.2.1","addWeeks",0,0,"","","System","
Adds a specified number of weeks to a date, a date with time or a string-encoded date or date with time.
    ","addWeeks(datetime, num)","- `datetime` — Date or date with time to add specified number of weeks to. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64) or [`String`](/sql-reference/data-types/string)
- `num` — Number of weeks to add. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns `datetime` plus `num` weeks [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)","**Add weeks to different date types**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addWeeks(date, 5) AS add_weeks_with_date,
    addWeeks(date_time, 5) AS add_weeks_with_date_time,
    addWeeks(date_time_string, 5) AS add_weeks_with_date_time_string
```

```response title=Response
┌─add_weeks_with_date─┬─add_weeks_with_date_time─┬─add_weeks_with_date_time_string─┐
│          2024-02-05 │      2024-02-05 00:00:00 │         2024-02-05 00:00:00.000 │
└─────────────────────┴──────────────────────────┴─────────────────────────────────┘
```

**Using alternative INTERVAL syntax**

```sql title=Query
SELECT dateAdd('1998-06-16'::Date, INTERVAL 10 week)
```

```response title=Response
┌─plus(CAST('1⋯alWeek(10))─┐
│               1998-08-25 │
└──────────────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","lgamma",0,0,"","","System","
Returns the logarithm of the gamma function.
","lgamma(x)","- `x` — The number for which to compute the logarithm of the gamma function. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal*`](/sql-reference/data-types/decimal)
","","Returns the logarithm of the gamma function of `x`. [`Float*`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT lgamma(5);
```

```response title=Response
3.1780538303479458
```

","1.1","Mathematical"
"25.9.2.1","h3PointDistM",0,0,"","","System","","","","","","","",""
"25.9.2.1","runningDifferenceStartingWithFirstValue",0,0,"","","System","
Calculates the difference between consecutive row values in a data block, but unlike [`runningDifference`](#runningDifference), it returns the actual value of the first row instead of `0`.

:::warning Deprecated
Only returns differences inside the currently processed data block.
Because of this error-prone behavior, the function is deprecated.
It is advised to use [window functions](/sql-reference/window-functions) instead.

You can use setting `allow_deprecated_error_prone_window_functions` to allow usage of this function.
:::
","runningDifferenceStartingWithFirstValue(x)","- `x` — Column for which to calculate the running difference. [`Any`](/sql-reference/data-types)
","","Returns the difference between consecutive values, with the first row's value for the first row. [`Any`](/sql-reference/data-types)","**Usage example**

```sql title=Query
SELECT
    number,
    runningDifferenceStartingWithFirstValue(number) AS diff
FROM numbers(5);
```

```response title=Response
┌─number─┬─diff─┐
│      0 │    0 │
│      1 │    1 │
│      2 │    1 │
│      3 │    1 │
│      4 │    1 │
└────────┴──────┘
```

","1.1","Other"
"25.9.2.1","h3CellAreaM2",0,0,"","","System","","","","","","","",""
"25.9.2.1","normalizeUTF8NFC",0,0,"","","System","
Normalizes a UTF-8 string according to the [NFC normalization form](https://en.wikipedia.org/wiki/Unicode_equivalence#Normal_forms).
","normalizeUTF8NFC(str)","- `str` — UTF-8 encoded input string. [`String`](/sql-reference/data-types/string)
","","Returns the NFC normalized form of the UTF-8 string. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT
'é' AS original, -- e + combining acute accent (U+0065 + U+0301)
length(original),
normalizeUTF8NFC('é') AS nfc_normalized, -- é (U+00E9)
length(nfc_normalized);
```

```response title=Response
┌─original─┬─length(original)─┬─nfc_normalized─┬─length(nfc_normalized)─┐
│ é        │                2 │ é              │                      2 │
└──────────┴──────────────────┴────────────────┴────────────────────────┘
```

","21.11","String"
"25.9.2.1","like",0,0,"","","System","","","","","","","",""
"25.9.2.1","extractURLParameterNames",0,0,"","","System","
Returns an array of name strings corresponding to the names of URL parameters.
The values are not decoded.
    ","extractURLParameterNames(url)","- `url` — URL. [`String`](/sql-reference/data-types/string)
","","Returns an array of name strings corresponding to the names of URL parameters. [`Array(String)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT extractURLParameterNames('http://example.com/?param1=value1&param2=value2');
```

```response title=Response
┌─extractURLPa⋯m2=value2')─┐
│ ['param1','param2']      │
└──────────────────────────┘
```

","1.1","URL"
"25.9.2.1","LinfNormalize",0,0,"","","System","
Calculates the unit vector of a given vector (the elements of the tuple are the coordinates) in `L_{inf}` space (using [maximum norm](https://en.wikipedia.org/wiki/Norm_(mathematics)#Maximum_norm_(special_case_of:_infinity_norm,_uniform_norm,_or_supremum_norm))).
    ","LinfNormalize(tuple)","- `tuple` — A tuple of numeric values. [`Tuple(T)`](/sql-reference/data-types/tuple)
","","Returns the unit vector. [`Tuple(Float64)`](/sql-reference/data-types/tuple)","**Basic usage**

```sql title=Query
SELECT LinfNormalize((3, 4))
```

```response title=Response
┌─LinfNormalize((3, 4))─┐
│ (0.75,1)              │
└───────────────────────┘
```

","21.11","Distance"
"25.9.2.1","cosineDistance",0,0,"","","System","
Calculates the cosine distance between two vectors (the elements of the tuples are the coordinates). The smaller the returned value is, the more similar are the vectors.
    ","cosineDistance(vector1, vector2)","- `vector1` — First tuple. [`Tuple(T)`](/sql-reference/data-types/tuple) or [`Array(T)`](/sql-reference/data-types/array)
- `vector2` — Second tuple. [`Tuple(T)`](/sql-reference/data-types/tuple) or [`Array(T)`](/sql-reference/data-types/array)
","","Returns the cosine of the angle between two vectors subtracted from one. [`Float64`](/sql-reference/data-types/float)","**Basic usage**

```sql title=Query
SELECT cosineDistance((1, 2), (2, 3));
```

```response title=Response
┌─cosineDistance((1, 2), (2, 3))─┐
│           0.007722123286332261 │
└────────────────────────────────┘
```

","1.1","Distance"
"25.9.2.1","toIntervalNanosecond",0,0,"","","System","
Returns an interval of `n` nanoseconds of data type [`IntervalNanosecond`](../../sql-reference/data-types/special-data-types/interval.md).
    ","toIntervalNanosecond(n)","- `n` — Number of nanoseconds. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`String`](/sql-reference/data-types/string)
","","Returns an interval of `n` nanoseconds. [`Interval`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
WITH
    toDateTime('2025-06-15') AS date,
    toIntervalNanosecond(30) AS interval_to_nanoseconds
SELECT date + interval_to_nanoseconds AS result
```

```response title=Response
┌────────────────────────result─┐
│ 2025-06-15 00:00:00.000000030 │
└───────────────────────────────┘
```

","22.6","Type Conversion"
"25.9.2.1","addDate",0,1,"","","System","
Adds the time interval to the provided date, date with time or string-encoded date or date with time.
If the addition results in a value outside the bounds of the data type, the result is undefined.
    ","addDate(datetime, interval)","- `datetime` — The date or date with time to which `interval` is added. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64) or [`String`](/sql-reference/data-types/string)
- `interval` — Interval to add. [`Interval`](/sql-reference/data-types/int-uint)
","","Returns date or date with time obtained by adding `interval` to `datetime`. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)","**Add interval to date**

```sql title=Query
SELECT addDate(toDate('2018-01-01'), INTERVAL 3 YEAR)
```

```response title=Response
┌─addDate(toDa⋯valYear(3))─┐
│               2021-01-01 │
└──────────────────────────┘
```

","23.9","Dates and Times"
"25.9.2.1","tupleIntDivOrZero",0,0,"","","System","
Like [`tupleIntDiv`](#tupleIntDiv) performs integer division of a tuple of numerators and a tuple of denominators, and returns a tuple of the quotients.
In case of division by 0, returns the quotient as 0 instead of throwing an exception.
If either tuple contains non-integer elements then the result is calculated by rounding to the nearest integer for each non-integer numerator or divisor.
","tupleIntDivOrZero(tuple_num, tuple_div)","- `tuple_num` — Tuple of numerator values. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) or [`Tuple(Float*)`](/sql-reference/data-types/tuple) or [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
- `tuple_div` — Tuple of divisor values. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) or [`Tuple(Float*)`](/sql-reference/data-types/tuple) or [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
","","Returns tuple of the quotients. Returns 0 for quotients where the divisor is 0. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) or [`Tuple(Float*)`](/sql-reference/data-types/tuple) or [`Tuple(Decimal)`](/sql-reference/data-types/tuple)","**With zero divisors**

```sql title=Query
SELECT tupleIntDivOrZero((5, 10, 15), (0, 0, 0))
```

```response title=Response
(0, 0, 0)
```

","23.8","Tuple"
"25.9.2.1","LpDistance",0,0,"","","System","
Calculates the distance between two points (the elements of the vectors are the coordinates) in `Lp` space ([p-norm distance](https://en.wikipedia.org/wiki/Norm_(mathematics)#p-norm)).
    ","LpDistance(vector1, vector2, p)","- `vector1` — First vector. [`Tuple(T)`](/sql-reference/data-types/tuple) or [`Array(T)`](/sql-reference/data-types/array)
- `vector2` — Second vector. [`Tuple(T)`](/sql-reference/data-types/tuple) or [`Array(T)`](/sql-reference/data-types/array)
- `p` — The power. Possible values: real number from `[1; inf)`. [`UInt*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns the p-norm distance. [`Float64`](/sql-reference/data-types/float)","**Basic usage**

```sql title=Query
SELECT LpDistance((1, 2), (2, 3), 3)
```

```response title=Response
┌─LpDistance((1, 2), (2, 3), 3)─┐
│            1.2599210498948732 │
└───────────────────────────────┘
```

","21.11","Distance"
"25.9.2.1","JSONSharedDataPathsWithTypes",0,0,"","","System","
Returns the list of paths that are stored in shared data structure and their types in each row in JSON column.
        ","JSONSharedDataPathsWithTypes(json)","- `json` — JSON column. [`JSON`](/sql-reference/data-types/newjson)
","","Returns a map of paths stored in shared data structure and their data types in the JSON column. [`Map(String, String)`](/sql-reference/data-types/map)","**Usage example**

```sql title=Query
CREATE TABLE test (json JSON(max_dynamic_paths=1)) ENGINE = Memory;
INSERT INTO test FORMAT JSONEachRow {""json"" : {""a"" : 42}}, {""json"" : {""b"" : ""Hello""}}, {""json"" : {""a"" : [1, 2, 3], ""c"" : ""2020-01-01""}}
SELECT json, JSONSharedDataPathsWithTypes(json) FROM test;
```

```response title=Response
┌─json─────────────────────────────────┬─JSONSharedDataPathsWithTypes(json)─┐
│ {""a"":""42""}                           │ {}                                  │
│ {""b"":""Hello""}                        │ {'b':'String'}                      │
│ {""a"":[""1"",""2"",""3""],""c"":""2020-01-01""} │ {'c':'Date'}                        │
└──────────────────────────────────────┴─────────────────────────────────────┘
```

","24.8","JSON"
"25.9.2.1","dictHas",0,0,"","","System","
Checks whether a key is present in a dictionary.
Accepts 2 parameters: name of the dictionary, key value - expression returning dictionary key-type value or tuple-type value - depending on the dictionary configuration.
Returned value: 0 if there is no key, 1 if there is a key, type of UInt8
","","","","","","","Dictionary"
"25.9.2.1","toDecimal256OrDefault",0,0,"","","System","","","","","","","",""
"25.9.2.1","emptyArrayInt64",0,0,"","","System","Returns an empty Int64 array","emptyArrayInt64()","","","An empty Int64 array. [`Array(T)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT emptyArrayInt64
```

```response title=Response
[]
```

","1.1","Arrays"
"25.9.2.1","arraySum",0,0,"","","System","
Returns the sum of elements in the source array.

If a lambda function `func` is specified, returns the sum of elements of the lambda results.
    ","arrayMax([func(x[, y1, ..., yN])], source_arr[, cond1_arr, ... , condN_arr])","- `func(x[, y1, ..., yN])` — Optional. A lambda function which operates on elements of the source array (`x`) and condition arrays (`y`). [`Lambda function`](/sql-reference/functions/overview#arrow-operator-and-lambda)
- `source_arr` — The source array to process. [`Array(T)`](/sql-reference/data-types/array)
- `, cond1_arr, ... , condN_arr]` — Optional. N condition arrays providing additional arguments to the lambda function. [`Array(T)`](/sql-reference/data-types/array)
","","Returns the sum of elements in the source array, or the sum of elements of the lambda results if provided.","**Basic example**

```sql title=Query
SELECT arraySum([1, 2, 3, 4]);
```

```response title=Response
10
```

**Usage with lambda function**

```sql title=Query
SELECT arraySum(x, y -> x+y, [1, 1, 1, 1], [1, 1, 1, 1]);
```

```response title=Response
8
```

","21.1","Arrays"
"25.9.2.1","L2SquaredDistance",0,0,"","","System","
Calculates the sum of the squares of the difference between the corresponding elements of two vectors.
    ","L2SquaredDistance(vector1, vector2)","- `vector1` — First vector. [`Tuple(T)`](/sql-reference/data-types/tuple) or [`Array(T)`](/sql-reference/data-types/array)
- `vector2` — Second vector. [`Tuple(T)`](/sql-reference/data-types/tuple) or [`Array(T)`](/sql-reference/data-types/array)
","","Returns the sum of the squares of the difference between the corresponding elements of two vectors. [`Float64`](/sql-reference/data-types/float)","**Basic usage**

```sql title=Query
SELECT L2SquaredDistance([1, 2, 3], [0, 0, 0])
```

```response title=Response
┌─L2SquaredDis⋯ [0, 0, 0])─┐
│                       14 │
└──────────────────────────┘
```

","22.7","Distance"
"25.9.2.1","encodeURLComponent",0,0,"","","System","
Takes a regular string and converts it into a URL-encoded (percent-encoded) format where special characters are replaced with their percent-encoded equivalents.
    ","encodeURLComponent(url)","- `url` — URL. [`String`](/sql-reference/data-types/string)
","","Returns the encoded URL. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT encodeURLComponent('http://127.0.0.1:8123/?query=SELECT 1;') AS EncodedURL;
```

```response title=Response
┌─EncodedURL───────────────────────────────────────────────┐
│ http%3A%2F%2F127.0.0.1%3A8123%2F%3Fquery%3DSELECT%201%3B │
└──────────────────────────────────────────────────────────┘
```

","22.3","URL"
"25.9.2.1","wordShingleMinHashArgCaseInsensitiveUTF8",0,0,"","","System","
Splits a UTF-8 string into parts (shingles) of `shinglesize` words each and returns the shingles with minimum and maximum word hashes, calculated by the [`wordShingleMinHashCaseInsensitiveUTF8`](#wordShingleMinHashCaseInsensitiveUTF8) function with the same input.
It is case insensitive.
","wordShingleMinHashArgCaseInsensitiveUTF8(string[, shinglesize, hashnum])","- `string` — String for which to compute the hash. [`String`](/sql-reference/data-types/string)
- `shinglesize` — Optional. The size of a word shingle, any number from `1` to `25`. The default value is `3`. [`UInt8`](/sql-reference/data-types/int-uint)
- `hashnum` — Optional. The number of minimum and maximum hashes used to calculate the result, any number from `1` to `25`. The default value is `6`. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns a tuple with two tuples with `hashnum` word shingles each. [`Tuple(Tuple(String))`](/sql-reference/data-types/tuple)","**Usage example**

```sql title=Query
SELECT wordShingleMinHashArgCaseInsensitiveUTF8('ClickHouse® is a column-oriented database management system (DBMS) for online analytical processing of queries (OLAP).', 1, 3) AS Tuple;
```

```response title=Response
┌─Tuple──────────────────────────────────────────────────────────────────┐
│ (('queries','database','analytical'),('oriented','processing','DBMS')) │
└────────────────────────────────────────────────────────────────────────┘
```

","21.1","Hash"
"25.9.2.1","h3GetResolution",0,0,"","","System","
Defines the resolution of the given [H3](https://h3geo.org/docs/core-library/h3Indexing/) index.
    ","h3GetResolution(h3index)","- `h3index` — Hexagon index number. [`UInt64`](/sql-reference/data-types/int-uint)
","","Returns the resolution of the index with range `[0, 15]` if the index is valid, otherwise returns a random value. [`UInt8`](/sql-reference/data-types/int-uint)","**Get resolution of H3 index**

```sql title=Query
SELECT h3GetResolution(639821929606596015) AS resolution
```

```response title=Response
┌─resolution─┐
│         14 │
└────────────┘
```

","20.1","Geo"
"25.9.2.1","getSetting",0,0,"","","System","
Returns the current value of a setting.
","getSetting(setting_name)","- `setting_Name` — The setting name. [`const String`](/sql-reference/data-types/string)
","","Returns the setting's current value. [`Any`](/sql-reference/data-types)","**Usage example**

```sql title=Query
SELECT getSetting('enable_analyzer');
SET enable_analyzer = false;
SELECT getSetting('enable_analyzer');
```

```response title=Response
┌─getSetting('⋯_analyzer')─┐
│ true                     │
└──────────────────────────┘
┌─getSetting('⋯_analyzer')─┐
│ false                    │
└──────────────────────────┘
```

","20.7","Other"
"25.9.2.1","LpNorm",0,0,"","","System","
Calculates the p-norm of a vector, which is the p-th root of the sum of the p-th powers of the absolute elements of its elements.

Special cases:
- When p=1, it's equivalent to L1Norm (Manhattan distance).
- When p=2, it's equivalent to L2Norm (Euclidean distance).
- When p=∞, it's equivalent to LinfNorm (maximum norm).
    ","LpNorm(vector, p)","- `vector` — Vector or tuple of numeric values. [`Tuple(T)`](/sql-reference/data-types/tuple) or [`Array(T)`](/sql-reference/data-types/array)
- `p` — The power. Possible values are real numbers in the range `[1; inf)`. [`UInt*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns the [Lp-norm](https://en.wikipedia.org/wiki/Norm_(mathematics)#p-norm). [`Float64`](/sql-reference/data-types/float)","**Basic usage**

```sql title=Query
SELECT LpNorm((1, -2), 2)
```

```response title=Response
┌─LpNorm((1, -2), 2)─┐
│   2.23606797749979 │
└────────────────────┘
```

","21.11","Distance"
"25.9.2.1","toYYYYMM",0,0,"","","System","
Converts a date or date with time to a `UInt32` number containing the year and month number (YYYY * 100 + MM).
Accepts a second optional timezone argument. If provided, the timezone must be a string constant.

This function is the opposite of function `YYYYMMDDToDate()`.
    ","toYYYYMM(datetime[, timezone])","- `datetime` — A date or date with time to convert. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
- `timezone` — Optional. Timezone for the conversion. If provided, the timezone must be a string constant. [`String`](/sql-reference/data-types/string)
","","Returns a UInt32 number containing the year and month number (YYYY * 100 + MM). [`UInt32`](/sql-reference/data-types/int-uint)","**Convert current date to YYYYMM format**

```sql title=Query
SELECT toYYYYMM(now(), 'US/Eastern')
```

```response title=Response
┌─toYYYYMM(now(), 'US/Eastern')─┐
│                        202303 │
└───────────────────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","L2Norm",0,0,"","","System","
Calculates the square root of the sum of the squares of the vector elements.
    ","L2Norm(vector)","- `vector` — Vector or tuple of numeric values. [`Tuple(T)`](/sql-reference/data-types/tuple) or [`Array(T)`](/sql-reference/data-types/array)
","","Returns the L2-norm or [Euclidean distance](https://en.wikipedia.org/wiki/Euclidean_distance). [`UInt*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)","**Basic usage**

```sql title=Query
SELECT L2Norm((1, 2))
```

```response title=Response
┌───L2Norm((1, 2))─┐
│ 2.23606797749979 │
└──────────────────┘
```

","21.11","Distance"
"25.9.2.1","extractTextFromHTML",0,0,"","","System","
Extracts text content from HTML or XHTML.

This function removes HTML tags, comments, and script/style elements, leaving only the text content. It handles:
- Removal of all HTML/XML tags
- Removal of comments (`<!-- -->`)
- Removal of script and style elements with their content
- Processing of CDATA sections (copied verbatim)
- Proper whitespace handling and normalization

Note: HTML entities are not decoded and should be processed with a separate function if needed.
","extractTextFromHTML(html)","- `html` — String containing HTML content to extract text from. [`String`](/sql-reference/data-types/string)
","","Returns the extracted text content with normalized whitespace. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT extractTextFromHTML('
<html>
    <head><title>Page Title</title></head>
    <body>
        <p>Hello <b>World</b>!</p>
        <script>alert(""test"");</script>
        <!-- comment -->
    </body>
</html>
');
```

```response title=Response
┌─extractTextFromHTML('<html><head>...')─┐
│ Page Title Hello World!                │
└────────────────────────────────────────┘
```

","21.3","String"
"25.9.2.1","numericIndexedVectorPointwiseGreaterEqual",0,0,"","","System","
Performs pointwise comparison between a numericIndexedVector and either another numericIndexedVector or a numeric constant.
The result is a numericIndexedVector containing the indices where the first vector's value is greater than or equal to the second vector's value, with all corresponding values set to 1.
        ","numericIndexedVectorPointwiseGreaterEqual(v1, v2)","- `v1` — A numericIndexedVector object. [`numericIndexedVector`](/sql-reference/functions/#create-numeric-indexed-vector-object)
- `v2` — A numeric constant or numericIndexedVector object. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`numericIndexedVector`](/sql-reference/functions/#create-numeric-indexed-vector-object)
","","Returns a new numericIndexedVector object. [`numericIndexedVector`](/sql-reference/functions/#create-numeric-indexed-vector-object)","**Usage example**

```sql title=Query
with
    numericIndexedVectorBuild(mapFromArrays([1, 2, 3], arrayMap(x -> toFloat64(x), [10, 20, 50]))) as vec1,
    numericIndexedVectorBuild(mapFromArrays([2, 3, 4], arrayMap(x -> toFloat64(x), [20, 40, 30]))) as vec2
SELECT
    numericIndexedVectorToMap(numericIndexedVectorPointwiseGreaterEqual(vec1, vec2)) AS res1,
    numericIndexedVectorToMap(numericIndexedVectorPointwiseGreaterEqual(vec1, 20)) AS res2;
```

```response title=Response
┌─res1──────────┬─res2──────┐
│ {1:1,2:1,3:1} │ {2:1,3:1} │
└───────────────┴───────────┘
```

","25.7","NumericIndexedVector"
"25.9.2.1","L1Norm",0,0,"","","System","
Calculates the sum of absolute elements of a vector.
    ","L1Norm(vector)","- `vector` — Vector or tuple of numeric values. [`Array(T)`](/sql-reference/data-types/array) or [`Tuple(T)`](/sql-reference/data-types/tuple)
","","Returns the L1-norm or [taxicab geometry](https://en.wikipedia.org/wiki/Taxicab_geometry) distance. [`UInt*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)","**Basic usage**

```sql title=Query
SELECT L1Norm((1, 2))
```

```response title=Response
┌─L1Norm((1, 2))─┐
│              3 │
└────────────────┘
```

","21.11","Distance"
"25.9.2.1","fromUnixTimestamp64Milli",0,0,"","","System","","","","","","","",""
"25.9.2.1","addSeconds",0,0,"","","System","
Adds a specified number of seconds to a date, a date with time or a string-encoded date or date with time.
    ","addSeconds(datetime, num)","- `datetime` — Date or date with time to add specified number of seconds to. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64) or [`String`](/sql-reference/data-types/string)
- `num` — Number of seconds to add. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns `datetime` plus `num` seconds [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64(3)`](/sql-reference/data-types/datetime64)","**Add seconds to different date types**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addSeconds(date, 30) AS add_seconds_with_date,
    addSeconds(date_time, 30) AS add_seconds_with_date_time,
    addSeconds(date_time_string, 30) AS add_seconds_with_date_time_string
```

```response title=Response
┌─add_seconds_with_date─┬─add_seconds_with_date_time─┬─add_seconds_with_date_time_string─┐
│   2024-01-01 00:00:30 │        2024-01-01 00:00:30 │           2024-01-01 00:00:30.000 │
└───────────────────────┴────────────────────────────┴───────────────────────────────────┘
```

**Using alternative INTERVAL syntax**

```sql title=Query
SELECT dateAdd('1998-06-16'::Date, INTERVAL 10 second)
```

```response title=Response
┌─dateAdd('1998-06-16'::Date, INTERVAL 10 second)─┐
│                             1998-06-16 00:00:10 │
└─────────────────────────────────────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","tupleIntDivOrZeroByNumber",0,0,"","","System","
Like [`tupleIntDivByNumber`](#tupleIntDivByNumber) it does integer division of a tuple of numerators by a given denominator, and returns a tuple of the quotients.
It does not throw an error for zero divisors, but rather returns the quotient as zero.
If either the tuple or div contain non-integer elements then the result is calculated by rounding to the nearest integer for each non-integer numerator or divisor.
","tupleIntDivOrZeroByNumber(tuple_num, div)","- `tuple_num` — Tuple of numerator values. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) or [`Tuple(Float*)`](/sql-reference/data-types/tuple) or [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
- `div` — The divisor value. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
","","Returns a tuple of the quotients with `0` for quotients where the divisor is `0`. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) or [`Tuple(Float*)`](/sql-reference/data-types/tuple) or [`Tuple(Decimal)`](/sql-reference/data-types/tuple)","**Basic usage**

```sql title=Query
SELECT tupleIntDivOrZeroByNumber((15, 10, 5), 5)
```

```response title=Response
(3, 2, 1)
```

**With zero divisor**

```sql title=Query
SELECT tupleIntDivOrZeroByNumber((15, 10, 5), 0)
```

```response title=Response
(0, 0, 0)
```

","23.8","Tuple"
"25.9.2.1","h3ToCenterChild",0,0,"","","System","","","","","","","",""
"25.9.2.1","dictGetFloat32",0,0,"","","System","
Retrieves values from a dictionary.

Accepts 3 parameters:
-- name of the dictionary;
-- name of the column of the dictionary or tuple of column names;
-- key value - expression returning dictionary key-type value or tuple-type value - depending on the dictionary configuration;

Returned value: value of the dictionary attribute parsed in the Float32 if key is found, otherwise <null_value> element specified in the dictionary configuration.

Throws an exception if cannot parse the value of the attribute or the value does not match the attribute data type.
","","","","","","","Dictionary"
"25.9.2.1","tupleModuloByNumber",0,0,"","","System","
Returns a tuple of the moduli (remainders) of division operations of a tuple and a given divisor.
","tupleModuloByNumber(tuple_num, div)","- `tuple_num` — Tuple of numerator elements. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) or [`Tuple(Float*)`](/sql-reference/data-types/tuple) or [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
- `div` — The divisor value. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
","","Returns tuple of the remainders of division. An error is thrown for division by zero. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) or [`Tuple(Float*)`](/sql-reference/data-types/tuple) or [`Tuple(Decimal)`](/sql-reference/data-types/tuple)","**Basic usage**

```sql title=Query
SELECT tupleModuloByNumber((15, 10, 5), 2)
```

```response title=Response
(1, 0, 1)
```

","23.8","Tuple"
"25.9.2.1","ngramSimHashUTF8",0,0,"","","System","
Splits a UTF-8 encoded string into n-grams of `ngramsize` symbols and returns the n-gram `simhash`.
It is case sensitive.

Can be used for detection of semi-duplicate strings with [`bitHammingDistance`](../functions/bit-functions.md/#bitHammingDistance).
The smaller the [Hamming distance](https://en.wikipedia.org/wiki/Hamming_distance) of the calculated `simhashes` of two strings, the more likely these strings are the same.
","ngramSimHashUTF8(string[, ngramsize])","- `string` — String for which to compute the hash. [`String`](/sql-reference/data-types/string)
- `ngramsize` — Optional. The size of an n-gram, any number from `1` to `25`. The default value is `3`. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns the computed hash value. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT ngramSimHashUTF8('ClickHouse') AS Hash;
```

```response title=Response
┌───────Hash─┐
│ 1628157797 │
└────────────┘
```

","21.1","Hash"
"25.9.2.1","emptyArrayUInt8",0,0,"","","System","Returns an empty UInt8 array","emptyArrayUInt8()","","","An empty UInt8 array. [`Array(T)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT emptyArrayUInt8
```

```response title=Response
[]
```

","1.1","Arrays"
"25.9.2.1","dictGetUInt8",0,0,"","","System","
Retrieves values from a dictionary.

Accepts 3 parameters:
-- name of the dictionary;
-- name of the column of the dictionary or tuple of column names;
-- key value - expression returning dictionary key-type value or tuple-type value - depending on the dictionary configuration;

Returned value: value of the dictionary attribute parsed in the UInt8 if key is found, otherwise <null_value> element specified in the dictionary configuration.

Throws an exception if cannot parse the value of the attribute or the value does not match the attribute data type.
","","","","","","","Dictionary"
"25.9.2.1","subtractTupleOfIntervals",0,0,"","","System","
Consecutively subtracts a tuple of intervals from a date or a date with time.
    ","subtractTupleOfIntervals(datetime, intervals)","- `datetime` — Date or date with time to subtract intervals from. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
- `intervals` — Tuple of intervals to subtract from `datetime`. [`Tuple(Interval)`](/sql-reference/data-types/tuple)
","","Returns `date` with subtracted `intervals` [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)","**Subtract tuple of intervals from date**

```sql title=Query
WITH toDate('2018-01-01') AS date SELECT subtractTupleOfIntervals(date, (INTERVAL 1 DAY, INTERVAL 1 YEAR))
```

```response title=Response
┌─subtractTupl⋯alYear(1)))─┐
│               2016-12-31 │
└──────────────────────────┘
```

","22.11","Dates and Times"
"25.9.2.1","addTupleOfIntervals",0,0,"","","System","
Consecutively adds a tuple of intervals to a date or a date with time.
    ","addTupleOfIntervals(datetime, intervals)","- `datetime` — Date or date with time to add intervals to. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
- `intervals` — Tuple of intervals to add to `datetime`. [`Tuple(Interval)`](/sql-reference/data-types/tuple)
","","Returns `date` with added `intervals` [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)","**Add tuple of intervals to date**

```sql title=Query
WITH toDate('2018-01-01') AS date
SELECT addTupleOfIntervals(date, (INTERVAL 1 DAY, INTERVAL 1 MONTH, INTERVAL 1 YEAR))
```

```response title=Response
┌─addTupleOfIntervals(date, (toIntervalDay(1), toIntervalMonth(1), toIntervalYear(1)))─┐
│                                                                           2019-02-02 │
└──────────────────────────────────────────────────────────────────────────────────────┘
```

","22.11","Dates and Times"
"25.9.2.1","__scalarSubqueryResult",0,0,"","","System","","","","","","","",""
"25.9.2.1","tupleDivide",0,0,"","","System","
Calculates the division of corresponding elements of two tuples of the same size.

:::note
Division by zero will return `inf`.
:::
","tupleDivide(t1, t2)","- `t1` — First tuple. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) or [`Tuple(Float*)`](/sql-reference/data-types/tuple) or [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
- `t2` — Second tuple. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) or [`Tuple(Float*)`](/sql-reference/data-types/tuple) or [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
","","Returns tuple with the result of division. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) or [`Tuple(Float*)`](/sql-reference/data-types/tuple) or [`Tuple(Decimal)`](/sql-reference/data-types/tuple)","**Basic usage**

```sql title=Query
SELECT tupleDivide((1, 2), (2, 3))
```

```response title=Response
(0.5, 0.6666666666666666)
```

","21.11","Tuple"
"25.9.2.1","tupleMultiply",0,0,"","","System","
Calculates the multiplication of corresponding elements of two tuples of the same size.
","tupleMultiply(t1, t2)","- `t1` — First tuple. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) or [`Tuple(Float*)`](/sql-reference/data-types/tuple) or [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
- `t2` — Second tuple. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) or [`Tuple(Float*)`](/sql-reference/data-types/tuple) or [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
","","Returns a tuple with the results of the multiplications. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) or [`Tuple(Float*)`](/sql-reference/data-types/tuple) or [`Tuple(Decimal)`](/sql-reference/data-types/tuple)","**Basic usage**

```sql title=Query
SELECT tupleMultiply((1, 2), (2, 3))
```

```response title=Response
(2, 6)
```

","21.11","Tuple"
"25.9.2.1","least",0,1,"","","System","
Returns the smallest value among the arguments.
`NULL` arguments are ignored.

- For arrays, returns the lexicographically least array.
- For DateTime types, the result type is promoted to the largest type (e.g., DateTime64 if mixed with DateTime32).

:::note Use setting `least_greatest_legacy_null_behavior` to change `NULL` behavior
Version [24.12](/whats-new/changelog/2024#a-id2412a-clickhouse-release-2412-2024-12-19) introduced a backwards-incompatible change such that `NULL` values are ignored, while previously it returned `NULL` if one of the arguments was `NULL`.
To retain the previous behavior, set setting `least_greatest_legacy_null_behavior` (default: `false`) to `true`.
:::
    ","least(x1[, x2, ...])","- `x1[, x2, ...]` — A single value or multiple values to compare. All arguments must be of comparable types. [`Any`](/sql-reference/data-types)
","","Returns the least value among the arguments, promoted to the largest compatible type. [`Any`](/sql-reference/data-types)","**Numeric types**

```sql title=Query
SELECT least(1, 2, toUInt8(3), 3.) AS result, toTypeName(result) AS type;
-- The type returned is a Float64 as the UInt8 must be promoted to 64 bit for the comparison.
```

```response title=Response
┌─result─┬─type────┐
│      1 │ Float64 │
└────────┴─────────┘
```

**Arrays**

```sql title=Query
SELECT least(['hello'], ['there'], ['world']);
```

```response title=Response
┌─least(['hell⋯ ['world'])─┐
│ ['hello']                │
└──────────────────────────┘
```

**DateTime types**

```sql title=Query
SELECT least(toDateTime32(now() + toIntervalDay(1)), toDateTime64(now(), 3));
-- The type returned is a DateTime64 as the DateTime32 must be promoted to 64 bit for the comparison.
```

```response title=Response
┌─least(toDate⋯(now(), 3))─┐
│  2025-05-27 15:55:20.000 │
└──────────────────────────┘
```

","1.1","Conditional"
"25.9.2.1","tupleMinus",0,0,"","","System","
Calculates the difference between corresponding elements of two tuples of the same size.
","tupleMinus(t1, t2)","- `t1` — First tuple. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) or [`Tuple(Float*)`](/sql-reference/data-types/tuple) or [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
- `t2` — Second tuple. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) or [`Tuple(Float*)`](/sql-reference/data-types/tuple) or [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
","","Returns a tuple containing the results  of the subtractions. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) or [`Tuple(Float*)`](/sql-reference/data-types/tuple) or [`Tuple(Decimal)`](/sql-reference/data-types/tuple)","**Basic usage**

```sql title=Query
SELECT tupleMinus((1, 2), (2, 3))
```

```response title=Response
(-1, -1)
```

","21.11","Tuple"
"25.9.2.1","log10",0,1,"","","System","
Returns the decimal logarithm of the argument.
","log10(x)","- `x` — Number for which to compute the decimal logarithm of. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal*`](/sql-reference/data-types/decimal)
","","Returns the decimal logarithm of `x`. [`Float*`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT log10(100);
```

```response title=Response
2
```

","1.1","Mathematical"
"25.9.2.1","lower",0,1,"","","System","
Converts an ASCII string to lowercase.
","lower(s)","- `s` — A string to convert to lowercase. [`String`](/sql-reference/data-types/string)
","","Returns a lowercase string from `s`. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT lower('CLICKHOUSE')
```

```response title=Response
┌─lower('CLICKHOUSE')─┐
│ clickhouse          │
└─────────────────────┘
```

","1.1","String"
"25.9.2.1","lowerUTF8",0,0,"","","System","Converts a string to lowercase, assuming that the string contains valid UTF-8 encoded text. If this assumption is violated, no exception is thrown and the result is undefined.","lowerUTF8(input)","- `input` — Input string to convert to lowercase. [`String`](/sql-reference/data-types/string)
","","Returns a lowercase string. [`String`](/sql-reference/data-types/string)","**first**

```sql title=Query
SELECT lowerUTF8('München') as Lowerutf8;
```

```response title=Response
münchen
```

","1.1","String"
"25.9.2.1","YYYYMMDDToDate",0,1,"","","System","
Converts a number containing the year, month and day number to a `Date`.
This function is the opposite of function [`toYYYYMMDD()`](/sql-reference/functions/date-time-functions#toYYYYMMDD).
The output is undefined if the input does not encode a valid Date value.
    ","YYYYMMDDToDate(YYYYMMDD)","- `YYYYMMDD` — Number containing the year, month and day. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
","","Returns a `Date` value from the provided arguments [`Date`](/sql-reference/data-types/date)","**Example**

```sql title=Query
SELECT YYYYMMDDToDate(20230911);
```

```response title=Response
┌─toYYYYMMDD(20230911)─┐
│           2023-09-11 │
└──────────────────────┘
```

","23.9","Dates and Times"
"25.9.2.1","subDate",0,1,"","","System","
Subtracts the time interval from the provided date, date with time or string-encoded date or date with time.
If the subtraction results in a value outside the bounds of the data type, the result is undefined.
    ","subDate(datetime, interval)","- `datetime` — The date or date with time from which `interval` is subtracted. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
- `interval` — Interval to subtract. [`Interval`](/sql-reference/data-types/int-uint)
","","Returns date or date with time obtained by subtracting `interval` from `datetime`. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)","**Subtract interval from date**

```sql title=Query
SELECT subDate(toDate('2018-01-01'), INTERVAL 3 YEAR)
```

```response title=Response
┌─subDate(toDate('2018-01-01'), toIntervalYear(3))─┐
│                                       2015-01-01 │
└──────────────────────────────────────────────────┘
```

","23.9","Dates and Times"
"25.9.2.1","ngramMinHashCaseInsensitiveUTF8",0,0,"","","System","
Splits a UTF-8 string into n-grams of `ngramsize` symbols and calculates hash values for each n-gram and returns a tuple with these hashes..
Uses `hashnum` minimum hashes to calculate the minimum hash and `hashnum` maximum hashes to calculate the maximum hash.
It is case insensitive.

Can be used to detect semi-duplicate strings with [`tupleHammingDistance`](../functions/tuple-functions.md/#tuplehammingdistance).
For two strings, if the returned hashes are the same for both strings, then those strings are the same.
","ngramMinHashCaseInsensitiveUTF8(string [, ngramsize, hashnum])","- `string` — String for which to compute the hash. [`String`](/sql-reference/data-types/string)
- `ngramsize` — Optional. The size of an n-gram, any number from `1` to `25`. The default value is `3`. [`UInt8`](/sql-reference/data-types/int-uint)
- `hashnum` — Optional. The number of minimum and maximum hashes used to calculate the result, any number from `1` to `25`. The default value is `6`. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns a tuple with two hashes — the minimum and the maximum. [`Tuple`](/sql-reference/data-types/tuple)","**Usage example**

```sql title=Query
SELECT ngramMinHashCaseInsensitiveUTF8('ClickHouse') AS Tuple;
```

```response title=Response
┌─Tuple───────────────────────────────────────┐
│ (12493625717655877135,13203602793651726206) │
└─────────────────────────────────────────────┘
```

","21.1","Hash"
"25.9.2.1","timeSeriesStoreTags",0,0,"","","System","Stores mapping between the identifier of a time series and its tags in the query context, so that function timeSeriesIdToTags() can extract these tags later.","timeSeriesStoreTags(id, tags_array, separate_tag_name_1, separate_tag_value_1, ...)","- `id` — Identifier of a time series. [`UInt64`](/sql-reference/data-types/int-uint) or [`UInt128`](/sql-reference/data-types/int-uint) or [`UUID`](/sql-reference/data-types/uuid) or [`FixedString(16)`](/sql-reference/data-types/fixedstring)
- `tags_array` — Array of pairs (tag_name, tag_value). [`Array(Tuple(String, String))`](/sql-reference/data-types/array) or [`NULL`](/sql-reference/syntax#null)
- `separate_tag_name_i` — The name of a tag. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring)
- `separate_tag_value_i` — The value of a tag. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring) or [`Nullable(String)`](/sql-reference/data-types/nullable)
","","Returns the first argument, i.e. the identifier of a time series.","**Example**

```sql title=Query
SELECT timeSeriesStoreTags(8374283493092, [('region', 'eu'), ('env', 'dev')], '__name__', 'http_requests_count')
```

```response title=Response
8374283493092
```

","25.8","Time Series"
"25.9.2.1","makeDateTime64",0,1,"","","System","
Creates a `DateTime64` from year, month, day, hour, minute, second, with optional fraction, precision, and timezone.
    ","makeDateTime64(year, month, day, hour, minute, second[, fraction[, precision[, timezone]]])","- `year` — Year number. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
- `month` — Month number (1-12). [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
- `day` — Day of the month (1-31). [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
- `hour` — Hour (0-23). [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
- `minute` — Minute (0-59). [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
- `second` — Second (0-59). [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
- `fraction` — Fractional part of the second. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
- `precision` — Precision for the fractional part (0-9). [`UInt8`](/sql-reference/data-types/int-uint)
- `timezone` — Timezone name. [`String`](/sql-reference/data-types/string)
","","Returns a `DateTime64` value constructed from the provided arguments [`DateTime64`](/sql-reference/data-types/datetime64)","**DateTime64 from year, month, day, hour, minute, second**

```sql title=Query
SELECT makeDateTime64(2023, 5, 15, 10, 30, 45, 779, 5);
```

```response title=Response
┌─makeDateTime64(2023, 5, 15, 10, 30, 45, 779, 5)─┐
│                       2023-05-15 10:30:45.00779 │
└─────────────────────────────────────────────────┘
```

","22.6","Dates and Times"
"25.9.2.1","regionToContinent",0,0,"","","System","","","","","","","",""
"25.9.2.1","makeDate32",0,1,"","","System","
Creates a `Date32` from either:
- a year, month and day
- a year and day of year
    ","makeDate32(year, month, day)
makeDate32(year, day_of_year)","- `year` — Year number. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
- `month` — Month number (1-12). [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
- `day` — Day of the month (1-31). [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
- `day_of_year` — Day of the year (1-365). [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
","","Returns a `Date32` value constructed from the provided arguments [`Date32`](/sql-reference/data-types/date32)","**Date32 from a year, month, day**

```sql title=Query
SELECT makeDate(2023, 2, 28) AS date;
```

```response title=Response
┌───────date─┐
│ 2023-02-28 │
└────────────┘
```

**Date32 from year and day of year**

```sql title=Query
SELECT makeDate(2023, 42) AS date;
```

```response title=Response
┌───────date─┐
│ 2023-02-11 │
└────────────┘
```

","22.6","Dates and Times"
"25.9.2.1","makeDate",0,1,"","","System","
Creates a `Date` from either:
- a year, month and day
- a year and day of year
    ","makeDate(year, month, day)
makeDate(year, day_of_year)","- `year` — Year number. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
- `month` — Month number (1-12). [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
- `day` — Day of the month (1-31). [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
- `day_of_year` — Day of the year (1-365). [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
","","Returns a `Date` value constructed from the provided arguments [`Date`](/sql-reference/data-types/date)","**Date from a year, month, day**

```sql title=Query
SELECT makeDate(2023, 2, 28) AS date;
```

```response title=Response
┌───────date─┐
│ 2023-02-28 │
└────────────┘
```

**Date from year and day of year**

```sql title=Query
SELECT makeDate(2023, 42) AS date;
```

```response title=Response
┌───────date─┐
│ 2023-02-11 │
└────────────┘
```

","22.6","Dates and Times"
"25.9.2.1","filesystemUnreserved",0,0,"","","System","
Returns the total amount of free space on the filesystem hosting the database persistence (previously `filesystemFree`).
See also [`filesystemAvailable`](#fileSystemAvailable).
","filesystemUnreserved([disk_name])","- `disk_name` — Optional. The disk name for which to find the total amount of free space. If omitted, uses the default disk. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring)
","","Returns the amount of free space in bytes. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT formatReadableSize(filesystemUnreserved()) AS ""Free space"";
```

```response title=Response
┌─Free space─┐
│ 32.39 GiB  │
└────────────┘
```

","22.12","Other"
"25.9.2.1","toSecond",0,0,"","","System","
Returns the second component (0-59) of a `DateTime` or `DateTime64` value.
        ","toSecond(datetime)","- `datetime` — Date with time to get the second from. [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
","","Returns the second in the minute (0 - 59) of `datetime`. [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT toSecond(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toSecond(toDateTime('2023-04-21 10:20:30'))─┐
│                                          30 │
└─────────────────────────────────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","filesystemCapacity",0,0,"","","System","
Returns the capacity of the filesystem in bytes.
Needs the [path](../../operations/server-configuration-parameters/settings.md#path) to the data directory to be configured.
","filesystemCapacity([disk_name])","- `disk_name` — Optional. The disk name to get the capacity for. If omitted, uses the default disk. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring)
","","Returns the capacity of the filesystem in bytes. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT formatReadableSize(filesystemCapacity()) AS ""Capacity"";
```

```response title=Response
┌─Capacity──┐
│ 39.32 GiB │
└───────────┘
```

","20.1","Other"
"25.9.2.1","isZeroOrNull",0,0,"","","System","
Checks if the argument is either zero (`0`) or `NULL`.
    ","isZeroOrNull(x)","- `x` — A numeric value. [`UInt`](/sql-reference/data-types/int-uint)
","","Returns `1` if `x` is `NULL` or equal to zero, otherwise `0`. [`UInt8/16/32/64`](/sql-reference/data-types/int-uint) or [`Float32/Float64`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
CREATE TABLE t_null
(
  x Int32,
  y Nullable(Int32)
)
ENGINE = MergeTree
ORDER BY tuple();

INSERT INTO t_null VALUES (1, NULL), (2, 0), (3, 3);

SELECT x FROM t_null WHERE isZeroOrNull(y);
```

```response title=Response
┌─x─┐
│ 1 │
│ 2 │
└───┘
```

","20.3","Null"
"25.9.2.1","toUInt8OrDefault",0,0,"","","System","","","","","","","",""
"25.9.2.1","leftPadUTF8",0,0,"","","System","
Pads a UTF8 string from the left with spaces or a specified string (multiple times, if needed) until the resulting string reaches the given length.
Unlike [`leftPad`](#leftPad) which measures the string length in bytes, the string length is measured in code points.
","leftPadUTF8(string, length[, pad_string])","- `string` — Input string that should be padded. [`String`](/sql-reference/data-types/string)
- `length` — The length of the resulting string. If the value is smaller than the input string length, then the input string is shortened to `length` characters. [`(U)Int*`](/sql-reference/data-types/int-uint)
- `pad_string` — Optional. The string to pad the input string with. If not specified, then the input string is padded with spaces. [`String`](/sql-reference/data-types/string)
","","Returns a left-padded string of the given length. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT leftPadUTF8('абвг', 7, '*'), leftPadUTF8('дежз', 7)
```

```response title=Response
┌─leftPadUTF8('абвг', 7, '*')─┬─leftPadUTF8('дежз', 7)─┐
│ ***абвг                     │    дежз                │
└─────────────────────────────┴────────────────────────┘
```

","21.8","String"
"25.9.2.1","notILike",0,0,"","","System","","","","","","","",""
"25.9.2.1","concatWithSeparator",0,0,"","","System","
Concatenates the provided strings, separating them by the specified separator.
","concatWithSeparator(sep[, exp1, exp2, ...])","- `sep` — The separator to use. [`const String`](/sql-reference/data-types/string) or [`const FixedString`](/sql-reference/data-types/fixedstring)
- `exp1, exp2, ...` — Expression to be concatenated. Arguments which are not of type `String` or `FixedString` are converted to strings using their default serialization. As this decreases performance, it is not recommended to use non-String/FixedString arguments. [`Any`](/sql-reference/data-types)
","","Returns the String created by concatenating the arguments. If any of the argument values is `NULL`, the function returns `NULL`. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT concatWithSeparator('a', '1', '2', '3', '4')
```

```response title=Response
┌─concatWithSeparator('a', '1', '2', '3', '4')─┐
│ 1a2a3a4                                      │
└──────────────────────────────────────────────┘
```

","22.12","String"
"25.9.2.1","toMonthNumSinceEpoch",0,0,"","","System","Returns amount of months passed from year 1970","toMonthNumSinceEpoch(date)","- `date` — A date or date with time. [`Date`](/sql-reference/data-types/date) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
","","Positive integer","**Example**

```sql title=Query
SELECT toMonthNumSinceEpoch(toDate('2024-10-01'))
```

```response title=Response
657
```

","25.3","Dates and Times"
"25.9.2.1","minSampleSizeContinuous",0,0,"","","System","","","","","","","",""
"25.9.2.1","hopEnd",0,0,"","","System","
Returns the exclusive upper bound of the corresponding hopping window.

Since one record can be assigned to multiple hop windows, the function only returns the bound of the first window when hop function is used without `WINDOW VIEW`.
    ","hopEnd(time_attr, hop_interval, window_interval[, timezone])","- `time_attr` — Date and time. [`DateTime`](/sql-reference/data-types/datetime)
- `hop_interval` — Positive Hop interval. [`Interval`](/sql-reference/data-types/int-uint)
- `window_interval` — Positive Window interval. [`Interval`](/sql-reference/data-types/int-uint)
- `timezone` — Optional. Timezone name. [`String`](/sql-reference/data-types/string)
","","Returns the exclusive upper bound of the corresponding hopping window. [`DateTime`](/sql-reference/data-types/datetime)","**Hopping window end**

```sql title=Query
SELECT hopEnd(now(), INTERVAL '1' DAY, INTERVAL '2' DAY)
```

```response title=Response
2024-07-05 00:00:00
```

","22.1","Time Window"
"25.9.2.1","map",0,0,"","","System","","","","","","","",""
"25.9.2.1","rand",0,1,"","","System","
Returns a random `UInt32` number with uniform distribution.

Uses a linear congruential generator with an initial state obtained from the system, which means that while it appears random, it's not truly random and can be predictable if the initial state is known.
For scenarios where true randomness is crucial, consider using alternative methods like system-level calls or integrating with external libraries.
    ","rand([x])","- `x` — Optional and ignored. The only purpose of the argument is to prevent [common subexpression elimination](/sql-reference/functions/overview#common-subexpression-elimination) when the same function call is used multiple times in a query. [`Any`](/sql-reference/data-types)
","","Returns a random number of type `UInt32`. [`UInt32`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT rand();
```

```response title=Response
1569354847
```

","1.1","Random Number"
"25.9.2.1","toUUIDOrZero",0,0,"","","System","
Converts an input value to a value of type [UUID](../data-types/uuid.md) but returns zero UUID in case of an error.
Like [`toUUID`](#touuid) but returns zero UUID (`00000000-0000-0000-0000-000000000000`) instead of throwing an exception on conversion errors.

Supported arguments:
- String representations of UUID in standard format (8-4-4-4-12 hexadecimal digits).
- String representations of UUID without hyphens (32 hexadecimal digits).

Unsupported arguments (return zero UUID):
- Invalid string formats.
- Non-string types.
    ","toUUIDOrZero(x)","- `x` — A string representation of a UUID. [`String`](/sql-reference/data-types/string)
","","Returns a UUID value if successful, otherwise zero UUID (`00000000-0000-0000-0000-000000000000`). [`UUID`](/sql-reference/data-types/uuid)","**Usage example**

```sql title=Query
SELECT
    toUUIDOrZero('550e8400-e29b-41d4-a716-446655440000') AS valid_uuid,
    toUUIDOrZero('invalid-uuid') AS invalid_uuid
```

```response title=Response
┌─valid_uuid───────────────────────────┬─invalid_uuid─────────────────────────┐
│ 550e8400-e29b-41d4-a716-446655440000 │ 00000000-0000-0000-0000-000000000000 │
└──────────────────────────────────────┴──────────────────────────────────────┘
```

","20.12","Type Conversion"
"25.9.2.1","h3GetUnidirectionalEdge",0,0,"","","System","","","","","","","",""
"25.9.2.1","log1p",0,0,"","","System","
Calculates log(1+x).
The calculation log1p(x) is more accurate than log(1+x) for small values of `x`.
","log1p(x)","- `x` — Values from the interval: `-1 < x < +∞`. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal*`](/sql-reference/data-types/decimal)
","","Returns values from the interval: -∞ < log1p(x) < +∞ [`Float64`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT log1p(0)
```

```response title=Response
0
```

","20.12","Mathematical"
"25.9.2.1","tgamma",0,0,"","","System","
Returns the gamma function.
","tgamma(x)","- `x` — The number for which to compute the gamma function of. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal*`](/sql-reference/data-types/decimal)
","","Returns the gamma function value [`Float*`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT tgamma(5);
```

```response title=Response
24
```

","1.1","Mathematical"
"25.9.2.1","SHA512",0,0,"","","System","
Calculates the SHA512 hash of the given string.
    ","SHA512(s)","- `s` — The input string to hash [`String`](/sql-reference/data-types/string)
","","Returns the SHA512 hash of the given input string as a fixed-length string. [`FixedString(64)`](/sql-reference/data-types/fixedstring)","**Usage example**

```sql title=Query
SELECT HEX(SHA512('abc'));
```

```response title=Response
┌─hex(SHA512('abc'))───────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│ DDAF35A193617ABACC417349AE20413112E6FA4E89A97EA20A9EEEE64B55D39A2192992A274FC1A836BA3C23A3FEEBBD454D4423643CE80E2A9AC94FA54CA49F │
└──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

","1.1","Hash"
"25.9.2.1","notLike",0,0,"","","System","","","","","","","",""
"25.9.2.1","shardCount",0,0,"","","System","
Returns the total number of shards for a distributed query.
If a query is not distributed then constant value `0` is returned.
","shardCount()","","","Returns the total number of shards or `0`. [`UInt32`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
-- See shardNum() example above which also demonstrates shardCount()
CREATE TABLE shard_count_example (dummy UInt8)
ENGINE=Distributed(test_cluster_two_shards_localhost, system, one, dummy);
SELECT shardCount() FROM shard_count_example;
```

```response title=Response
┌─shardCount()─┐
│            2 │
│            2 │
└──────────────┘
```

","21.9","Other"
"25.9.2.1","h3GetFaces",0,0,"","","System","","","","","","","",""
"25.9.2.1","__getScalar",0,0,"","","System","","","","","","","",""
"25.9.2.1","dictGetInt32",0,0,"","","System","
Retrieves values from a dictionary.

Accepts 3 parameters:
-- name of the dictionary;
-- name of the column of the dictionary or tuple of column names;
-- key value - expression returning dictionary key-type value or tuple-type value - depending on the dictionary configuration;

Returned value: value of the dictionary attribute parsed in the Int32 if key is found, otherwise <null_value> element specified in the dictionary configuration.

Throws an exception if cannot parse the value of the attribute or the value does not match the attribute data type.
","","","","","","","Dictionary"
"25.9.2.1","mortonEncode",0,0,"","","System","
Calculates the Morton encoding (ZCurve) for a list of unsigned integers.

The function has two modes of operation:
- **Simple**
- *Expanded**

**Simple mode**

Accepts up to 8 unsigned integers as arguments and produces a `UInt64` code.

**Expanded mode**

Accepts a range mask ([Tuple](../data-types/tuple.md)) as the first argument and
up to 8 [unsigned integers](../data-types/int-uint.md) as other arguments.

Each number in the mask configures the amount of range expansion:
* 1 - no expansion
* 2 - 2x expansion
* 3 - 3x expansion
⋮
* Up to 8x expansion.
    ","-- Simplified mode
mortonEncode(args)

-- Expanded mode
mortonEncode(range_mask, args)","- `args` — Up to 8 unsigned integers or columns of the aforementioned type. [`UInt8/16/32/64`](/sql-reference/data-types/int-uint)
- `range_mask` — For the expanded mode, the mask for each argument. The mask is a tuple of unsigned integers from `1` - `8`. Each number in the mask configures the amount of range shrink. [`Tuple(UInt8/16/32/64)`](/sql-reference/data-types/tuple)
","","Returns a `UInt64` code. [`UInt64`](/sql-reference/data-types/int-uint)","**Simple mode**

```sql title=Query
SELECT mortonEncode(1, 2, 3)
```

```response title=Response
53
```

**Expanded mode**

```sql title=Query
-- Range expansion can be beneficial when you need a similar distribution for
-- arguments with wildly different ranges (or cardinality)
-- For example: 'IP Address' (0...FFFFFFFF) and 'Country code' (0...FF).
-- Note: the Tuple size must be equal to the number of the other arguments.
SELECT mortonEncode((1,2), 1024, 16)
```

```response title=Response
1572864
```

**Single argument**

```sql title=Query
-- Morton encoding for one argument is always the argument itself
SELECT mortonEncode(1)
```

```response title=Response
1
```

**Expanded single argument**

```sql title=Query
SELECT mortonEncode(tuple(2), 128)
```

```response title=Response
32768
```

**Column usage**

```sql title=Query
-- First create the table and insert some data
CREATE TABLE morton_numbers(
    n1 UInt32,
    n2 UInt32,
    n3 UInt16,
    n4 UInt16,
    n5 UInt8,
    n6 UInt8,
    n7 UInt8,
    n8 UInt8
)
ENGINE=MergeTree()
ORDER BY n1;
INSERT INTO morton_numbers (*) values(1, 2, 3, 4, 5, 6, 7, 8);

-- Use column names instead of constants as function arguments
SELECT mortonEncode(n1, n2, n3, n4, n5, n6, n7, n8) FROM morton_numbers;
```

```response title=Response
2155374165
```

","24.6","Encoding"
"25.9.2.1","toTypeName",0,0,"","","System","
Returns the type name of the passed argument.
If `NULL` is passed, the function returns type `Nullable(Nothing)`, which corresponds to ClickHouse's internal `NULL` representation.
    ","toTypeName(x)","- `x` — A value of arbitrary type. [`Any`](/sql-reference/data-types)
","","Returns the data type name of the input value. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT toTypeName(123)
```

```response title=Response
┌─toTypeName(123)─┐
│ UInt8           │
└─────────────────┘
```

","1.1","Other"
"25.9.2.1","polygonsUnionCartesian",0,0,"","","System","","","","","","","",""
"25.9.2.1","toDaysSinceYearZero",0,0,"","","System","
For a given date, returns the number of days which have passed since [1 January 0000](https://en.wikipedia.org/wiki/Year_zero) in the
[proleptic Gregorian calendar defined by ISO 8601](https://en.wikipedia.org/wiki/Gregorian_calendar#Proleptic_Gregorian_calendar).

The calculation is the same as in MySQL's [`TO_DAYS`](https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_to-days) function.
    ","toDaysSinceYearZero(date[, time_zone])","- `date` — The date or date with time for which to calculate the number of days since year zero from. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
- `time_zone` — Time zone. [`String`](/sql-reference/data-types/string)
","","Returns the number of days passed since date `0000-01-01`. [`UInt32`](/sql-reference/data-types/int-uint)","**Calculate days since year zero**

```sql title=Query
SELECT toDaysSinceYearZero(toDate('2023-09-08'))
```

```response title=Response
┌─toDaysSinceYearZero(toDate('2023-09-08')))─┐
│                                     713569 │
└────────────────────────────────────────────┘
```

","23.9","Dates and Times"
"25.9.2.1","reinterpretAsUInt16",0,0,"","","System","","","","","","","",""
"25.9.2.1","arraySymmetricDifference",0,0,"","","System","Takes multiple arrays and returns an array with elements that are not present in all source arrays. The result contains only unique values.

:::note
The symmetric difference of _more than two sets_ is [mathematically defined](https://en.wikipedia.org/wiki/Symmetric_difference#n-ary_symmetric_difference)
as the set of all input elements which occur in an odd number of input sets.
In contrast, function `arraySymmetricDifference` simply returns the set of input elements which do not occur in all input sets.
:::
","arraySymmetricDifference(arr1, arr2, ... , arrN)","- `arrN` — N arrays from which to make the new array. [`Array(T)`](/sql-reference/data-types/array). ","","Returns an array of distinct elements not present in all source arrays [`Array(T)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT
arraySymmetricDifference([1, 2], [1, 2], [1, 2]) AS empty_symmetric_difference,
arraySymmetricDifference([1, 2], [1, 2], [1, 3]) AS non_empty_symmetric_difference;
```

```response title=Response
┌─empty_symmetric_difference─┬─non_empty_symmetric_difference─┐
│ []                         │ [3]                            │
└────────────────────────────┴────────────────────────────────┘
```

","25.4","Arrays"
"25.9.2.1","addMilliseconds",0,0,"","","System","
Adds a specified number of milliseconds to a date with time or a string-encoded date with time.
    ","addMilliseconds(datetime, num)","- `datetime` — Date with time to add specified number of milliseconds to. [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64) or [`String`](/sql-reference/data-types/string)
- `num` — Number of milliseconds to add. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns `datetime` plus `num` milliseconds [`DateTime64`](/sql-reference/data-types/datetime64)","**Add milliseconds to different date time types**

```sql title=Query
WITH
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addMilliseconds(date_time, 1000) AS add_milliseconds_with_date_time,
    addMilliseconds(date_time_string, 1000) AS add_milliseconds_with_date_time_string
```

```response title=Response
┌─add_milliseconds_with_date_time─┬─add_milliseconds_with_date_time_string─┐
│         2024-01-01 00:00:01.000 │                2024-01-01 00:00:01.000 │
└─────────────────────────────────┴────────────────────────────────────────┘
```

**Using alternative INTERVAL syntax**

```sql title=Query
SELECT dateAdd('1998-06-16'::DateTime, INTERVAL 10 millisecond)
```

```response title=Response
┌─plus(CAST('1⋯second(10))─┐
│  1998-06-16 00:00:00.010 │
└──────────────────────────┘
```

","22.6","Dates and Times"
"25.9.2.1","multiSearchFirstPositionUTF8",0,0,"","","System","","","","","","","",""
"25.9.2.1","encrypt",0,0,"","","System","
Encrypts plaintext into ciphertext using AES in one of the following modes:

- aes-128-ecb, aes-192-ecb, aes-256-ecb
- aes-128-cbc, aes-192-cbc, aes-256-cbc
- aes-128-ofb, aes-192-ofb, aes-256-ofb
- aes-128-gcm, aes-192-gcm, aes-256-gcm
- aes-128-ctr, aes-192-ctr, aes-256-ctr
- aes-128-cfb, aes-128-cfb1, aes-128-cfb8
        ","encrypt(mode, plaintext, key[, iv, aad])","- `mode` — Encryption mode. [`String`](/sql-reference/data-types/string)
- `plaintext` — Text that should be encrypted. [`String`](/sql-reference/data-types/string)
- `key` — Encryption key. [`String`](/sql-reference/data-types/string)
- `iv` — Initialization vector. Required for `-gcm` modes, optional for others. [`String`](/sql-reference/data-types/string)
- `aad` — Additional authenticated data. It isn't encrypted, but it affects decryption. Works only in `-gcm` modes, for others it throws an exception. [`String`](/sql-reference/data-types/string)
","","Returns binary string ciphertext. [`String`](/sql-reference/data-types/string)","**Example encryption**

```sql title=Query
CREATE TABLE encryption_test
(
    `comment` String,
    `secret` String
)
ENGINE = MergeTree;

INSERT INTO encryption_test VALUES
('aes-256-ofb no IV', encrypt('aes-256-ofb', 'Secret', '12345678910121314151617181920212')),
('aes-256-ofb no IV, different key', encrypt('aes-256-ofb', 'Secret', 'keykeykeykeykeykeykeykeykeykeyke')),
('aes-256-ofb with IV', encrypt('aes-256-ofb', 'Secret', '12345678910121314151617181920212', 'iviviviviviviviv')),
('aes-256-cbc no IV', encrypt('aes-256-cbc', 'Secret', '12345678910121314151617181920212'));

SELECT comment, hex(secret) FROM encryption_test;
```

```response title=Response
┌─comment──────────────────────────┬─hex(secret)──────────────────────┐
│ aes-256-ofb no IV                │ B4972BDC4459                     │
│ aes-256-ofb no IV, different key │ 2FF57C092DC9                     │
│ aes-256-ofb with IV              │ 5E6CB398F653                     │
│ aes-256-cbc no IV                │ 1BC0629A92450D9E73A00E7D02CF4142 │
└──────────────────────────────────┴──────────────────────────────────┘
```

**Example with GCM mode**

```sql title=Query
INSERT INTO encryption_test VALUES
('aes-256-gcm', encrypt('aes-256-gcm', 'Secret', '12345678910121314151617181920212', 'iviviviviviviviv')),

('aes-256-gcm with AAD', encrypt('aes-256-gcm', 'Secret', '12345678910121314151617181920212', 'iviviviviviviviv', 'aad'));

SELECT comment, hex(secret) FROM encryption_test WHERE comment LIKE '%gcm%';
```

```response title=Response
┌─comment──────────────┬─hex(secret)──────────────────────────────────┐
│ aes-256-gcm          │ A8A3CCBC6426CFEEB60E4EAE03D3E94204C1B09E0254 │
│ aes-256-gcm with AAD │ A8A3CCBC6426D9A1017A0A932322F1852260A4AD6837 │
└──────────────────────┴──────────────────────────────────────────────┘
```

","20.12","Encryption"
"25.9.2.1","addYears",0,0,"","","System","
Adds a specified number of years to a date, a date with time or a string-encoded date or date with time.
    ","addYears(datetime, num)","- `datetime` — Date or date with time to add specified number of years to. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64) or [`String`](/sql-reference/data-types/string)
- `num` — Number of years to add. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns `datetime` plus `num` years [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)","**Add years to different date types**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addYears(date, 1) AS add_years_with_date,
    addYears(date_time, 1) AS add_years_with_date_time,
    addYears(date_time_string, 1) AS add_years_with_date_time_string
```

```response title=Response
┌─add_years_with_date─┬─add_years_with_date_time─┬─add_years_with_date_time_string─┐
│          2025-01-01 │      2025-01-01 00:00:00 │         2025-01-01 00:00:00.000 │
└─────────────────────┴──────────────────────────┴─────────────────────────────────┘
```

**Using alternative INTERVAL syntax**

```sql title=Query
SELECT dateAdd('1998-06-16'::Date, INTERVAL 10 year)
```

```response title=Response
┌─plus(CAST('1⋯alYear(10))─┐
│               2008-06-16 │
└──────────────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","toStartOfSecond",0,0,"","","System","
Rounds down a date with time to the start of the seconds.
    ","toStartOfSecond(datetime, [timezone])","- `datetime` — Date and time to truncate sub-seconds from. [`DateTime64`](/sql-reference/data-types/datetime64)
- `timezone` — Optional. Timezone for the returned value. If not specified, the function uses the timezone of the `value` parameter. [`String`](/sql-reference/data-types/string)
","","Returns the input value without sub-seconds. [`DateTime64`](/sql-reference/data-types/datetime64)","**Query without timezone**

```sql title=Query
WITH toDateTime64('2020-01-01 10:20:30.999', 3) AS dt64
SELECT toStartOfSecond(dt64);
```

```response title=Response
┌───toStartOfSecond(dt64)─┐
│ 2020-01-01 10:20:30.000 │
└─────────────────────────┘
```

**Query with timezone**

```sql title=Query
WITH toDateTime64('2020-01-01 10:20:30.999', 3) AS dt64
SELECT toStartOfSecond(dt64, 'Asia/Istanbul');
```

```response title=Response
┌─toStartOfSecond(dt64, 'Asia/Istanbul')─┐
│                2020-01-01 13:20:30.000 │
└────────────────────────────────────────┘
```

","20.5","Dates and Times"
"25.9.2.1","enabledRoles",0,0,"","","System","
Returns an array of the roles which are enabled for the current user.
    ","enabledRoles()","","","Returns an array of role names which are enabled for the current user. [`Array(String)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT enabledRoles();
```

```response title=Response
┌─enabledRoles()─────────────────────────────────────────────────┐
│ ['general_data', 'sql-console-role:jane.smith@clickhouse.com'] │
└────────────────────────────────────────────────────────────────┘
```

","21.9","Other"
"25.9.2.1","concat",0,1,"","","System","
Concatenates the given arguments.

Arguments which are not of types [`String`](../data-types/string.md) or [`FixedString`](../data-types/fixedstring.md) are converted to strings using their default serialization.
As this decreases performance, it is not recommended to use non-String/FixedString arguments.
","concat([s1, s2, ...])","- `s1, s2, ...` — Any number of values of arbitrary type. [`Any`](/sql-reference/data-types)
","","Returns the String created by concatenating the arguments. If any of arguments is `NULL`, the function returns `NULL`. If there are no arguments, it returns an empty string. [`Nullable(String)`](/sql-reference/data-types/nullable)","**String concatenation**

```sql title=Query
SELECT concat('Hello, ', 'World!')
```

```response title=Response
┌─concat('Hello, ', 'World!')─┐
│ Hello, World!               │
└─────────────────────────────┘
```

**Number concatenation**

```sql title=Query
SELECT concat(42, 144)
```

```response title=Response
┌─concat(42, 144)─┐
│ 42144           │
└─────────────────┘
```

","1.1","String"
"25.9.2.1","mapAdd",0,0,"","","System","","","","","","","",""
"25.9.2.1","arrayUnion",0,0,"","","System","Takes multiple arrays and returns an array which contains all elements that are present in one of the source arrays.The result contains only unique values.","arrayUnion(arr1, arr2, ..., arrN)","- `arrN` — N arrays from which to make the new array. [`Array(T)`](/sql-reference/data-types/array)
","","Returns an array with distinct elements from the source arrays [`Array(T)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT
arrayUnion([-2, 1], [10, 1], [-2], []) as num_example,
arrayUnion(['hi'], [], ['hello', 'hi']) as str_example,
arrayUnion([1, 3, NULL], [2, 3, NULL]) as null_example
```

```response title=Response
┌─num_example─┬─str_example────┬─null_example─┐
│ [10,-2,1]   │ ['hello','hi'] │ [3,2,1,NULL] │
└─────────────┴────────────────┴──────────────┘
```

","24.10","Arrays"
"25.9.2.1","multiSearchAllPositions",0,0,"","","System","
Like [`position`](#position) but returns an array of positions (in bytes, starting at 1) for multiple `needle` substrings in a `haystack` string.

All `multiSearch*()` functions only support up to 2^8 needles.
    ","multiSearchAllPositions(haystack, needle1[, needle2, ...])","- `haystack` — String in which the search is performed. [`String`](/sql-reference/data-types/string)
- `needle1[, needle2, ...]` — An array of one or more substrings to be searched. [`Array(String)`](/sql-reference/data-types/array)
","","Returns array of the starting position in bytes and counting from 1, if the substring was found, `0`, if the substring was not found. [`Array(UInt64)`](/sql-reference/data-types/array)","**Multiple needle search**

```sql title=Query
SELECT multiSearchAllPositions('Hello, World!', ['hello', '!', 'world'])
```

```response title=Response
┌─multiSearchAllPositions('Hello, World!', ['hello', '!', 'world'])─┐
│ [0,13,0]                                                          │
└───────────────────────────────────────────────────────────────────┘
```

","20.1","String Search"
"25.9.2.1","toUInt16",0,0,"","","System","
Converts an input value to a value of type [`UInt16`](../data-types/int-uint.md).
Throws an exception in case of an error.

Supported arguments:
- Values or string representations of type (U)Int*.
- Values of type Float*.

Unsupported arguments:
- String representations of Float* values, including `NaN` and `Inf`.
- String representations of binary and hexadecimal values, e.g. `SELECT toUInt16('0xc0fe');`.

:::note
If the input value cannot be represented within the bounds of [`UInt16`](../data-types/int-uint.md), overflow or underflow of the result occurs.
This is not considered an error.
For example: `SELECT toUInt16(65536) == 0;`.
:::

:::note
The function uses [rounding towards zero](https://en.wikipedia.org/wiki/Rounding#Rounding_towards_zero), meaning it truncates fractional digits of numbers.
:::

See also:
- [`toUInt16OrZero`](#toUInt16OrZero).
- [`toUInt16OrNull`](#toUInt16OrNull).
- [`toUInt16OrDefault`](#toUInt16OrDefault).
    ","toUInt16(expr)","- `expr` — Expression returning a number or a string representation of a number. [`Expression`](/sql-reference/data-types/special-data-types/expression)
","","Returns a 16-bit unsigned integer value. [`UInt16`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT
    toUInt16(16),
    toUInt16(16.16),
    toUInt16('16')
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toUInt16(16):    16
toUInt16(16.16): 16
toUInt16('16'):  16
```

","1.1","Type Conversion"
"25.9.2.1","upper",0,1,"","","System","
Converts the ASCII Latin symbols in a string to uppercase.
","upper(s)","- `s` — The string to convert to uppercase. [`String`](/sql-reference/data-types/string)
","","Returns an uppercase string from `s`. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT upper('clickhouse')
```

```response title=Response
┌─upper('clickhouse')─┐
│ CLICKHOUSE          │
└─────────────────────┘
```

","1.1","String"
"25.9.2.1","arrayFlatten",0,0,"","","System","
Converts an array of arrays to a flat array.

Function:

- Applies to any depth of nested arrays.
- Does not change arrays that are already flat.

The flattened array contains all the elements from all source arrays.
","arrayFlatten(arr)","- `arr` — A multidimensional array. [`Array(Array(T))`](/sql-reference/data-types/array)
","","Returns a flattened array from the multidimensional array [`Array(T)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT arrayFlatten([[[1]], [[2], [3]]]);
```

```response title=Response
[1, 2, 3]
```

","20.1","Arrays"
"25.9.2.1","tupleIntDiv",0,0,"","","System","
Performs an integer division with a tuple of numerators and a tuple of denominators. Returns a tuple of quotients.
If either tuple contains non-integer elements then the result is calculated by rounding to the nearest integer for each non-integer numerator or divisor.
Division by 0 causes an error to be thrown.
","tupleIntDiv(tuple_num, tuple_div)","- `tuple_num` — Tuple of numerator values. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) or [`Tuple(Float*)`](/sql-reference/data-types/tuple) or [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
- `tuple_div` — Tuple of divisor values. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) or [`Tuple(Float*)`](/sql-reference/data-types/tuple) or [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
","","Returns a tuple of the quotients. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) or [`Tuple(Float*)`](/sql-reference/data-types/tuple) or [`Tuple(Decimal)`](/sql-reference/data-types/tuple)","**Basic usage**

```sql title=Query
SELECT tupleIntDiv((15, 10, 5), (5, 5, 5))
```

```response title=Response
(3, 2, 1)
```

**With decimals**

```sql title=Query
SELECT tupleIntDiv((15, 10, 5), (5.5, 5.5, 5.5))
```

```response title=Response
(2, 1, 0)
```

","23.8","Tuple"
"25.9.2.1","toInt256OrZero",0,0,"","","System","
Converts an input value to type [Int256](/en/sql-reference/data-types/int-uint) but returns `0` in case of an error.
Like [`toInt256`](#toint256) but returns `0` instead of throwing an exception.

See also:
- [`toInt256`](#toInt256).
- [`toInt256OrNull`](#toInt256OrNull).
- [`toInt256OrDefault`](#toInt256OrDefault).
    ","toInt256OrZero(x)","- `x` — Input value to convert. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal) or [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Date`](/sql-reference/data-types/date) or [`DateTime`](/sql-reference/data-types/datetime)
","","Returns the converted input value, otherwise `0` if conversion fails. [`Int256`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT toInt256OrZero('123')
```

```response title=Response
123
```

**Failed conversion returns zero**

```sql title=Query
SELECT toInt256OrZero('abc')
```

```response title=Response
0
```

","20.8","Type Conversion"
"25.9.2.1","pointInPolygon",0,0,"","","System","
Checks whether the point belongs to the polygon on the plane.

:::note
- You can set `validate_polygons = 0` to bypass geometry validation.
- `pointInPolygon` assumes every polygon is well-formed. If the input is self-intersecting, has mis-ordered rings, or overlapping edges, results become unreliable—especially for points that sit exactly on an edge, a vertex, or inside a self-intersection where the notion of ""inside"" vs. ""outside"" is undefined.
:::
    ","pointInPolygon((x, y), [(a, b), (c, d) ...], ...)","- `(x, y)` — Coordinates of a point on the plane. [`Tuple(Float64, Float64)`](/sql-reference/data-types/tuple)
- `[(a, b), (c, d) ...]` — Polygon vertices as an array of coordinate pairs. Vertices should be in clockwise or counterclockwise order. Minimum 3 vertices required. [`Array(Tuple(Float64, Float64))`](/sql-reference/data-types/array)
- `...` — Optional. Additional arguments for polygons with holes (as separate arrays) or multipolygons (as separate polygons). [`Array(Tuple(Float64, Float64))`](/sql-reference/data-types/array) or [`Polygon`](/sql-reference/data-types/geo#polygon) or [`MultiPolygon`](/sql-reference/data-types/geo#multipolygon)
","","Returns `1` if the point is inside the polygon, `0` if it is not. If the point is on the polygon boundary, the function may return either `0` or `1`. [`UInt8`](/sql-reference/data-types/int-uint)","**Basic usage with a simple polygon**

```sql title=Query
SELECT pointInPolygon((3., 3.), [(6, 0), (8, 4), (5, 8), (0, 2)]) AS res
```

```response title=Response
┌─res─┐
│   1 │
└─────┘
```

","1.1","Geo"
"25.9.2.1","splitByWhitespace",0,0,"","","System","
Splits a string which is separated by whitespace characters into an array of substrings.

:::note
Setting [`splitby_max_substrings_includes_remaining_string`](../../operations/settings/settings.md#splitby_max_substrings_includes_remaining_string) (default: `0`) controls if the remaining string is included in the last element of the result array when argument `max_substrings > 0`.
:::
","splitByWhitespace(s[, max_substrings])","- `s` — The string to split. [`String`](/sql-reference/data-types/string)
- `max_substrings` — Optional. When `max_substrings > 0`, the returned substrings will be no more than `max_substrings`, otherwise the function will return as many substrings as possible. Default value: `0`. [`Int64`](/sql-reference/data-types/int-uint)
","","Returns an array of the selected substrings of `s`. [`Array(String)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT splitByWhitespace('  1!  a,  b.  ');
```

```response title=Response
['1!','a,','b.']
```

","21.9","String Splitting"
"25.9.2.1","tryDecrypt",0,0,"","","System","
Similar to the `decrypt` function, but returns `NULL` if decryption fails when using the wrong key.
        ","tryDecrypt(mode, ciphertext, key[, iv, aad])","- `mode` — Decryption mode. [`String`](/sql-reference/data-types/string)
- `ciphertext` — Encrypted text that should be decrypted. [`String`](/sql-reference/data-types/string)
- `key` — Decryption key. [`String`](/sql-reference/data-types/string)
- `iv` — Optional. Initialization vector. Required for `-gcm` modes, optional for other modes. [`String`](/sql-reference/data-types/string)
- `aad` — Optional. Additional authenticated data. Won't decrypt if this value is incorrect. Works only in `-gcm` modes, for other modes throws an exception. [`String`](/sql-reference/data-types/string)
","","Returns the decrypted String, or `NULL` if decryption fails. [`Nullable(String)`](/sql-reference/data-types/nullable)","**Create table and insert data**

```sql title=Query
-- Let's create a table where user_id is the unique user id, encrypted is an encrypted string field, iv is an initial vector for decrypt/encrypt.
-- Assume that users know their id and the key to decrypt the encrypted field:
CREATE TABLE decrypt_null
(
    dt DateTime,
    user_id UInt32,
    encrypted String,
    iv String
)
ENGINE = MergeTree;

-- Insert some data:
INSERT INTO decrypt_null VALUES
('2022-08-02 00:00:00', 1, encrypt('aes-256-gcm', 'value1', 'keykeykeykeykeykeykeykeykeykey01', 'iv1'), 'iv1'),
('2022-09-02 00:00:00', 2, encrypt('aes-256-gcm', 'value2', 'keykeykeykeykeykeykeykeykeykey02', 'iv2'), 'iv2'),
('2022-09-02 00:00:01', 3, encrypt('aes-256-gcm', 'value3', 'keykeykeykeykeykeykeykeykeykey03', 'iv3'), 'iv3');

-- Try decrypt with one key
SELECT
    dt,
    user_id,
    tryDecrypt('aes-256-gcm', encrypted, 'keykeykeykeykeykeykeykeykeykey02', iv) AS value
FROM decrypt_null
ORDER BY user_id ASC
```

```response title=Response
┌──────────────────dt─┬─user_id─┬─value──┐
│ 2022-08-02 00:00:00 │       1 │ ᴺᵁᴸᴸ   │
│ 2022-09-02 00:00:00 │       2 │ value2 │
│ 2022-09-02 00:00:01 │       3 │ ᴺᵁᴸᴸ   │
└─────────────────────┴─────────┴────────┘
```

","22.10","Encryption"
"25.9.2.1","countSubstrings",0,1,"","","System","","","","","","","",""
"25.9.2.1","parseDateTimeOrZero",0,0,"","","System","","","","","","","",""
"25.9.2.1","reinterpretAsFloat64",0,0,"","","System","","","","","","","",""
"25.9.2.1","s2GetNeighbors",0,0,"","","System","","","","","","","",""
"25.9.2.1","multiSearchAnyCaseInsensitive",0,0,"","","System","","","","","","","",""
"25.9.2.1","ascii",0,1,"","","System","
Returns the ASCII code point of the first character of string `s` as an `Int32`.
","ascii(s)","- `s` — String input. [`String`](/sql-reference/data-types/string)
","","Returns the ASCII code point of the first character. If `s` is empty, the result is `0`. If the first character is not an ASCII character or not part of the Latin-1 supplement range of UTF-16, the result is undefined. [`Int32`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT ascii('234')
```

```response title=Response
┌─ascii('234')─┐
│           50 │
└──────────────┘
```

","22.11","String"
"25.9.2.1","ngramDistanceCaseInsensitiveUTF8",0,0,"","","System","
Provides a case-insensitive UTF-8 variant of [`ngramDistance`](#ngramDistance).
Assumes that `needle` and `haystack` strings are UTF-8 encoded strings and ignores case.
Calculates the 3-gram distance between two UTF-8 strings, ignoring case.
The smaller the returned value, the more similar the strings are.
    ","ngramDistanceCaseInsensitiveUTF8(haystack, needle)","- `haystack` — First UTF-8 encoded comparison string. [`String`](/sql-reference/data-types/string)
- `needle` — Second UTF-8 encoded comparison string. [`String`](/sql-reference/data-types/string)
","","Returns a Float32 number between `0` and `1`. [`Float32`](/sql-reference/data-types/float)","**Case-insensitive UTF-8 3-gram distance**

```sql title=Query
SELECT ngramDistanceCaseInsensitiveUTF8('abcde','CDE')
```

```response title=Response
┌─ngramDistanceCaseInsensitiveUTF8('abcde','CDE')─┐
│                                             0.5 │
└─────────────────────────────────────────────────┘
```

","20.1","String Search"
"25.9.2.1","bitmapMax",0,0,"","","System","Returns the position of the greatest bit set in a bitmap, or `0` if the bitmap is empty.","bitmapMax(bitmap)","- `bitmap` — Bitmap object. [`AggregateFunction(groupBitmap, T)`](/sql-reference/data-types/aggregatefunction). ","","Returns the position of the greatest bit set in the bitmap, otherwise `0` [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT bitmapMax(bitmapBuild([1, 2, 3, 4, 5])) AS res;
```

```response title=Response
┌─res─┐
│   5 │
└─────┘
```

","20.1","Bitmap"
"25.9.2.1","h3GetOriginIndexFromUnidirectionalEdge",0,0,"","","System","","","","","","","",""
"25.9.2.1","blockNumber",0,0,"","","System","
Returns a monotonically increasing sequence number of the [block](../../development/architecture.md#block) containing the row.
The returned block number is updated on a best-effort basis, i.e. it may not be fully accurate.
    ","blockNumber()","","","Sequence number of the data block where the row is located. [`UInt64`](/sql-reference/data-types/int-uint)","**Basic usage**

```sql title=Query
SELECT blockNumber()
FROM
(
    SELECT *
    FROM system.numbers
    LIMIT 10
) SETTINGS max_block_size = 2
```

```response title=Response
┌─blockNumber()─┐
│             7 │
│             7 │
└───────────────┘
┌─blockNumber()─┐
│             8 │
│             8 │
└───────────────┘
┌─blockNumber()─┐
│             9 │
│             9 │
└───────────────┘
┌─blockNumber()─┐
│            10 │
│            10 │
└───────────────┘
┌─blockNumber()─┐
│            11 │
│            11 │
└───────────────┘
```

","1.1","Other"
"25.9.2.1","parseDateTime32BestEffortOrZero",0,0,"","","System","
Same as [`parseDateTime32BestEffort`](#parseDateTime32BestEffort) except that it returns a zero date or a zero date time when it encounters a date format that cannot be processed.
    ","parseDateTime32BestEffortOrZero(time_string[, time_zone])","- `time_string` — String containing a date and time to convert. [`String`](/sql-reference/data-types/string)
- `time_zone` — Optional. Time zone according to which `time_string` is parsed. [`String`](/sql-reference/data-types/string)
","","Returns a `DateTime` object parsed from the string, or zero date (`1970-01-01 00:00:00`) if the parsing fails. [`DateTime`](/sql-reference/data-types/datetime)","**Usage example**

```sql title=Query
SELECT
    parseDateTime32BestEffortOrZero('23/10/2025 12:12:57') AS valid,
    parseDateTime32BestEffortOrZero('invalid date') AS invalid
```

```response title=Response
┌─valid───────────────┬─invalid─────────────┐
│ 2025-10-23 12:12:57 │ 1970-01-01 00:00:00 │
└─────────────────────┴─────────────────────┘
```

","20.9","Type Conversion"
"25.9.2.1","rightUTF8",0,0,"","","System","
Returns a substring of UTF-8 encoded string `s` with a specified `offset` starting from the right.
","rightUTF8(s, offset)","- `s` — The UTF-8 encoded string to calculate a substring from. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring)
- `offset` — The number of bytes of the offset. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns:
- For positive `offset`, a substring of `s` with `offset` many bytes, starting from the right of the string.
- For negative `offset`, a substring of `s` with `length(s) - |offset|` bytes, starting from the right of the string.
- An empty string if `length` is `0`.
     [`String`](/sql-reference/data-types/string)","**Positive offset**

```sql title=Query
SELECT rightUTF8('Привет', 4)
```

```response title=Response
ивет
```

**Negative offset**

```sql title=Query
SELECT rightUTF8('Привет', -4)
```

```response title=Response
ет
```

","22.1","String"
"25.9.2.1","cutURLParameter",0,0,"","","System","
Removes the `name` parameter from a URL, if present.
This function does not encode or decode characters in parameter names, e.g. `Client ID` and `Client%20ID` are treated as different parameter names.
    ","cutURLParameter(url, name)","- `url` — URL. [`String`](/sql-reference/data-types/string)
- `name` — Name of URL parameter. [`String`](/sql-reference/data-types/string) or [`Array(String)`](/sql-reference/data-types/array)
","","URL with `name` URL parameter removed. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT
    cutURLParameter('http://bigmir.net/?a=b&c=d&e=f#g', 'a') AS url_without_a,
    cutURLParameter('http://bigmir.net/?a=b&c=d&e=f#g', ['c', 'e']) AS url_without_c_and_e;
```

```response title=Response
┌─url_without_a────────────────┬─url_without_c_and_e──────┐
│ http://bigmir.net/?c=d&e=f#g │ http://bigmir.net/?a=b#g │
└──────────────────────────────┴──────────────────────────┘
```

","1.1","URL"
"25.9.2.1","positionCaseInsensitiveUTF8",0,0,"","","System","
Like [`positionUTF8`](#positionUTF8) but searches case-insensitively.
    ","positionCaseInsensitiveUTF8(haystack, needle[, start_pos])","- `haystack` — String in which the search is performed. [`String`](/sql-reference/data-types/string) or [`Enum`](/sql-reference/data-types/enum)
- `needle` — Substring to be searched. [`String`](/sql-reference/data-types/string)
- `start_pos` — Optional. Position (1-based) in `haystack` at which the search starts. [`UInt*`](/sql-reference/data-types/int-uint)
","","Returns starting position in bytes and counting from 1, if the substring was found, otherwise `0`, if the substring was not found. [`UInt64`](/sql-reference/data-types/int-uint)","**Case insensitive UTF-8 search**

```sql title=Query
SELECT positionCaseInsensitiveUTF8('Привет мир', 'МИР')
```

```response title=Response
┌─positionCaseInsensitiveUTF8('Привет мир', 'МИР')─┐
│                                                8 │
└──────────────────────────────────────────────────┘
```

","1.1","String Search"
"25.9.2.1","multiSearchFirstPositionCaseInsensitive",0,0,"","","System","","","","","","","",""
"25.9.2.1","subtractHours",0,0,"","","System","
Subtracts a specified number of hours from a date, a date with time or a string-encoded date or date with time.
    ","subtractHours(datetime, num)","- `datetime` — Date or date with time to subtract specified number of hours from. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64) or [`String`](/sql-reference/data-types/string)
- `num` — Number of hours to subtract. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns `datetime` minus `num` hours [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64(3)`](/sql-reference/data-types/datetime64)","**Subtract hours from different date types**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractHours(date, 12) AS subtract_hours_with_date,
    subtractHours(date_time, 12) AS subtract_hours_with_date_time,
    subtractHours(date_time_string, 12) AS subtract_hours_with_date_time_string
```

```response title=Response
┌─subtract_hours_with_date─┬─subtract_hours_with_date_time─┬─subtract_hours_with_date_time_string─┐
│      2023-12-31 12:00:00 │           2023-12-31 12:00:00 │              2023-12-31 12:00:00.000 │
└──────────────────────────┴───────────────────────────────┴──────────────────────────────────────┘
```

**Using alternative INTERVAL syntax**

```sql title=Query
SELECT dateSub('1998-06-16'::Date, INTERVAL 10 hour)
```

```response title=Response
┌─minus(CAST('⋯alHour(10))─┐
│      1998-06-15 14:00:00 │
└──────────────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","geoToS2",0,0,"","","System","","","","","","","",""
"25.9.2.1","indexOf",0,0,"","","System","
Returns the index of the first element with value 'x' (starting from 1) if it is in the array.
If the array does not contain the searched-for value, the function returns `0`.

Elements set to `NULL` are handled as normal values.
    ","indexOf(arr, x)","- `arr` — An array to search in for `x`. [`Array(T)`](/sql-reference/data-types/array)
- `x` — Value of the first matching element in `arr` for which to return an index. [`UInt64`](/sql-reference/data-types/int-uint)
","","Returns the index (numbered from one) of the first `x` in `arr` if it exists. Otherwise, returns `0`. [`UInt64`](/sql-reference/data-types/int-uint)","**Basic example**

```sql title=Query
SELECT indexOf([5, 4, 1, 3], 3)
```

```response title=Response
4
```

**Array with nulls**

```sql title=Query
SELECT indexOf([1, 3, NULL, NULL], NULL)
```

```response title=Response
3
```

","1.1","Arrays"
"25.9.2.1","emptyArrayString",0,0,"","","System","Returns an empty String array","emptyArrayString()","","","An empty String array. [`Array(T)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT emptyArrayString
```

```response title=Response
[]
```

","1.1","Arrays"
"25.9.2.1","tryBase64URLDecode",0,0,"","","System","
Like [`base64URLDecode`](#base64URLDecode), but returns an empty string in case of error.
","tryBase64URLDecode(encoded)","- `encoded` — String column or constant to decode. If the string is not valid Base64-encoded, returns an empty string in case of error. [`String`](/sql-reference/data-types/string)
","","Returns a string containing the decoded value of the argument. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT tryBase64URLDecode('aHR0cHM6Ly9jbGlja2hvdXNlLmNvbQ')
```

```response title=Response
┌─tryBase64URLDecode('aHR0cHM6Ly9jbGlja2hvdXNlLmNvbQ')─┐
│ https://clickhouse.com                               │
└──────────────────────────────────────────────────────┘
```

","18.16","String"
"25.9.2.1","h3IsValid",0,0,"","","System","
Verifies whether the number is a valid [H3](https://h3geo.org/docs/core-library/h3Indexing/) index.
    ","h3IsValid(h3index)","- `h3index` — Hexagon index number. [`UInt64`](/sql-reference/data-types/int-uint)
","","Returns `1` if the number is a valid H3 index, `0` otherwise. [`UInt8`](/sql-reference/data-types/int-uint)","**Check valid H3 index**

```sql title=Query
SELECT h3IsValid(630814730351855103) AS isValid
```

```response title=Response
┌─isValid─┐
│       1 │
└─────────┘
```

**Check invalid H3 index**

```sql title=Query
SELECT h3IsValid(12345) AS isValid
```

```response title=Response
┌─isValid─┐
│       0 │
└─────────┘
```

","20.1","Geo"
"25.9.2.1","emptyArrayUInt32",0,0,"","","System","Returns an empty UInt32 array","emptyArrayUInt32()","","","An empty UInt32 array. [`Array(T)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT emptyArrayUInt32
```

```response title=Response
[]
```

","1.1","Arrays"
"25.9.2.1","concatAssumeInjective",0,0,"","","System","
Like [`concat`](#concat) but assumes that `concat(s1, s2, ...) → sn` is injective,
i.e, it returns different results for different arguments.

Can be used for optimization of `GROUP BY`.
","concatAssumeInjective([s1, s2, ...])","- `s1, s2, ...` — Any number of values of arbitrary type. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring)
","","Returns the string created by concatenating the arguments. If any of argument values is `NULL`, the function returns `NULL`. If no arguments are passed, it returns an empty string. [`String`](/sql-reference/data-types/string)","**Group by optimization**

```sql title=Query
SELECT concat(key1, key2), sum(value) FROM key_val GROUP BY concatAssumeInjective(key1, key2)
```

```response title=Response
┌─concat(key1, key2)─┬─sum(value)─┐
│ Hello, World!      │          3 │
│ Hello, World!      │          2 │
│ Hello, World       │          3 │
└────────────────────┴────────────┘
```

","1.1","String"
"25.9.2.1","toStartOfHour",0,0,"","","System","
Rounds down a date with time to the start of the hour.

:::note
The return type can be configured by setting [`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions).
:::
    ","toStartOfHour(datetime)","- `datetime` — A date with time to round. [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
","","Returns the date with time rounded down to the start of the hour. [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)","**Round down to the start of the hour**

```sql title=Query
SELECT
    toStartOfHour(toDateTime('2023-04-21 10:20:30'));
```

```response title=Response
┌─────────────────res─┬─toTypeName(res)─┐
│ 2023-04-21 10:00:00 │ DateTime        │
└─────────────────────┴─────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","getMergeTreeSetting",0,0,"","","System","
Returns the current value of a MergeTree setting.
","getMergeTreeSetting(setting_name)","- `setting_name` — The setting name. [`String`](/sql-reference/data-types/string)
","","Returns the merge tree setting's current value.","**Usage example**

```sql title=Query
SELECT getMergeTreeSetting('index_granularity');
```

```response title=Response
┌─getMergeTreeSetting('index_granularity')─┐
│                                     8192 │
└──────────────────────────────────────────┘
```

","25.6","Other"
"25.9.2.1","isDecimalOverflow",0,0,"","","System","
Checks if a decimal number has too many digits to fit properly in a Decimal data type with given precision.
    ","isDecimalOverflow(value[, precision])","- `value` — Decimal value to check. [`Decimal`](/sql-reference/data-types/decimal)
- `precision` — Optional. The precision of the Decimal type. If omitted, the initial precision of the first argument is used. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns `1` if the decimal value has more digits than allowed by its precision, `0` if the decimal value satisfies the specified precision. [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT isDecimalOverflow(toDecimal32(1000000000, 0), 9),
       isDecimalOverflow(toDecimal32(1000000000, 0)),
       isDecimalOverflow(toDecimal32(-1000000000, 0), 9),
       isDecimalOverflow(toDecimal32(-1000000000, 0));
```

```response title=Response
┌─isDecimalOverflow(toDecimal32(1000000000, 0), 9)─┬─isDecimalOverflow(toDecimal32(1000000000, 0))─┬─isDecimalOverflow(toDecimal32(-1000000000, 0), 9)─┬─isDecimalOverflow(toDecimal32(-1000000000, 0))─┐
│                                                1 │                                             1 │                                                 1 │                                              1 │
└──────────────────────────────────────────────────┴───────────────────────────────────────────────┴───────────────────────────────────────────────────┴────────────────────────────────────────────────┘
```

","20.8","Decimal"
"25.9.2.1","sinh",0,0,"","","System","
Returns the hyperbolic sine.
","sinh(x)","- `x` — The angle, in radians. Values from the interval: -∞ < x < +∞. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal*`](/sql-reference/data-types/decimal)
","","Returns values from the interval: -∞ < sinh(x) < +∞ [`Float64`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT sinh(0)
```

```response title=Response
0
```

","20.12","Mathematical"
"25.9.2.1","toModifiedJulianDayOrNull",0,0,"","","System","
Similar to [`toModifiedJulianDay()`](#toModifiedJulianDay), but instead of raising exceptions it returns `NULL`.
    ","toModifiedJulianDayOrNull(date)","- `date` — Date in text form. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring)
","","Returns the modified Julian day number for valid `date`, otherwise `null`. [`Nullable(Int32)`](/sql-reference/data-types/nullable)","**Convert date to Modified Julian Day with null handling**

```sql title=Query
SELECT toModifiedJulianDayOrNull('2020-01-01');
SELECT toModifiedJulianDayOrNull('0000-00-00'); -- invalid date, returns NULL
```

```response title=Response
┌─toModifiedJu⋯020-01-01')─┐
│                    58849 │
└──────────────────────────┘
┌─toModifiedJu⋯000-00-00')─┐
│                     ᴺᵁᴸᴸ │
└──────────────────────────┘
```

","21.1","Dates and Times"
"25.9.2.1","multiplyDecimal",0,0,"","","System","
Performs multiplication on two decimals. Result value will be of type [Decimal256](/sql-reference/data-types/decimal).
Result scale can be explicitly specified by `result_scale` argument (const Integer in range `[0, 76]`). If not specified, the result scale is the max scale of given arguments.

:::note
These functions work significantly slower than usual `multiply`.
In case you don't really need controlled precision and/or need fast computation, consider using [multiply](#multiply)
:::
    ","multiplyDecimal(a, b[, result_scale])","- `a` — First value. [`Decimal`](/sql-reference/data-types/decimal)
- `b` — Second value. [`Decimal`](/sql-reference/data-types/decimal)
- `result_scale` — Scale of result. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","The result of multiplication with the given scale. Type: [`Decimal256`](/sql-reference/data-types/decimal)","**Usage example**

```sql title=Query
SELECT multiplyDecimal(toDecimal256(-12, 0), toDecimal32(-2.1, 1), 1)
```

```response title=Response
25.2
```

**Difference with regular multiplication**

```sql title=Query
SELECT multiplyDecimal(toDecimal256(-12, 0), toDecimal32(-2.1, 1), 1)
```

```response title=Response
┌─multiply(toDecimal64(-12.647, 3), toDecimal32(2.1239, 4))─┐
│                                               -26.8609633 │
└───────────────────────────────────────────────────────────┘
┌─multiplyDecimal(toDecimal64(-12.647, 3), toDecimal32(2.1239, 4))─┐
│                                                         -26.8609 │
└──────────────────────────────────────────────────────────────────┘
```

**Decimal overflow**

```sql title=Query
SELECT
    toDecimal64(-12.647987876, 9) AS a,
    toDecimal64(123.967645643, 9) AS b,
    multiplyDecimal(a, b);
SELECT
    toDecimal64(-12.647987876, 9) AS a,
    toDecimal64(123.967645643, 9) AS b,
    a * b;
```

```response title=Response
┌─────────────a─┬─────────────b─┬─multiplyDecimal(toDecimal64(-12.647987876, 9), toDecimal64(123.967645643, 9))─┐
│ -12.647987876 │ 123.967645643 │                                                               -1567.941279108 │
└───────────────┴───────────────┴───────────────────────────────────────────────────────────────────────────────┘
Received exception from server (version 22.11.1):
Code: 407. DB::Exception: Received from localhost:9000. DB::Exception: Decimal math overflow:
While processing toDecimal64(-12.647987876, 9) AS a, toDecimal64(123.967645643, 9) AS b, a * b. (DECIMAL_OVERFLOW)
```

","22.12","Arithmetic"
"25.9.2.1","tumble",0,0,"","","System","
A tumbling time window assigns records to non-overlapping, continuous windows with a fixed duration (`interval`).
    ","tumble(time_attr, interval[, timezone])","- `time_attr` — Date and time. [`DateTime`](/sql-reference/data-types/datetime)
- `interval` — Window interval in Interval. [`Interval`](/sql-reference/data-types/int-uint)
- `timezone` — Optional. Timezone name. [`String`](/sql-reference/data-types/string)
","","Returns the inclusive lower and exclusive upper bound of the corresponding tumbling window. [`Tuple(DateTime, DateTime)`](/sql-reference/data-types/tuple)","**Tumbling window**

```sql title=Query
SELECT tumble(now(), toIntervalDay('1'))
```

```response title=Response
('2024-07-04 00:00:00','2024-07-05 00:00:00')
```

","21.12","Time Window"
"25.9.2.1","ngrams",0,0,"","","System","
Splits a UTF-8 string into n-grams of `ngramsize` symbols.
","ngrams(s, ngram_size)","- `s` — Input string. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring)
- `ngram_size` — The size of an n-gram. [`const UInt8/16/32/64`](/sql-reference/data-types/int-uint)
","","Returns an array with n-grams. [`Array(String)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT ngrams('ClickHouse', 3);
```

```response title=Response
['Cli','lic','ick','ckH','kHo','Hou','ous','use']
```

","21.11","String Splitting"
"25.9.2.1","readWKBPolygon",0,0,"","","System","
                Parses a Well-Known Binary (WKB) representation of a Polygon geometry and returns it in the internal ClickHouse format.
                ","readWKBPolygon(wkt_string)","- `wkb_string` — The input WKB string representing a Polygon geometry. ","","The function returns a ClickHouse internal representation of the Polygon geometry.","**first call**

```sql title=Query
SELECT readWKBPolygon(unhex('01030000000100000005000000000000000000f03f0000000000000000000000000000244000000000000000000000000000002440000000000000244000000000000000000000000000002440000000000000f03f0000000000000000'));
```

```response title=Response
┌─readWKBPolygon(unhex'01030000000200000005000000000000000000000000000000000000000000000000002440000000000000000000000000000024...'))─┐
                │ (1,0),(10,0),(10,10),(0,10),(1,0)]]                                                                                                 │
                └─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

","25.5","Geo"
"25.9.2.1","normalizeQuery",0,0,"","","System","
Replaces literals, sequences of literals and complex aliases (containing whitespace, more than two digits or at least 36 bytes long such as UUIDs) with placeholder `?`.
    ","normalizeQuery(x)","- `x` — Sequence of characters. [`String`](/sql-reference/data-types/string)
","","Returns the given sequence of characters with placeholders. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT normalizeQuery('[1, 2, 3, x]') AS query
```

```response title=Response
┌─query────┐
│ [?.., x] │
└──────────┘
```

","20.8","Other"
"25.9.2.1","randExponential",0,0,"","","System","
Returns a random Float64 number drawn from an [exponential distribution](https://en.wikipedia.org/wiki/Exponential_distribution).
    ","randExponential(lambda[, x])","- `lambda` — Rate parameter or lambda value of the distribution [`Float64`](/sql-reference/data-types/float)
- `x` — Optional and ignored. The only purpose of the argument is to prevent [common subexpression elimination](/sql-reference/functions/overview#common-subexpression-elimination) when the same function call is used multiple times in a query. [`Any`](/sql-reference/data-types)
","","Returns a random Float64 number drawn from the specified exponential distribution. [`Float64`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT randExponential(1/10) FROM numbers(5)
```

```response title=Response
┌─randExponential(divide(1, 10))─┐
│              44.71628934340778 │
│              4.211013337903262 │
│             10.809402553207766 │
│              15.63959406553284 │
│             1.8148392319860158 │
└────────────────────────────────┘
```

","22.10","Random Number"
"25.9.2.1","randomString",0,0,"","","System","
Generates a random string with the specified number of characters.
The returned characters are not necessarily ASCII characters, i.e. they may not be printable.
    ","randomString(length[, x])","- `length` — Length of the string in bytes. [`(U)Int*`](/sql-reference/data-types/int-uint)
- `x` — Optional and ignored. The only purpose of the argument is to prevent [common subexpression elimination](/sql-reference/functions/overview#common-subexpression-elimination) when the same function call is used multiple times in a query. [`Any`](/sql-reference/data-types)
","","Returns a string filled with random bytes. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT randomString(5) AS str FROM numbers(2)
```

```response title=Response
���
�v6B�
```

","20.5","Random Number"
"25.9.2.1","normalizeUTF8NFKD",0,0,"","","System","
Normalizes a UTF-8 string according to the [NFKD normalization form](https://en.wikipedia.org/wiki/Unicode_equivalence#Normal_forms).
","normalizeUTF8NFKD(str)","- `str` — UTF-8 encoded input string. [`String`](/sql-reference/data-types/string)
","","Returns the NFKD normalized form of the UTF-8 string. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT
    'H₂O²' AS original,                            -- H + subscript 2 + O + superscript 2
    normalizeUTF8NFKD('H₂O²') AS nfkd_normalized;  -- Converts to H 2 O 2
```

```response title=Response
┌─original─┬─nfkd_normalized─┐
│ H₂O²     │ H2O2            │
└──────────┴─────────────────┘
```

","21.11","String"
"25.9.2.1","toUnixTimestamp64Milli",0,0,"","","System","","","","","","","",""
"25.9.2.1","firstSignificantSubdomainCustom",0,0,"","","System","","","","","","","",""
"25.9.2.1","simpleJSONExtractBool",0,0,"","","System","
Parses a true/false value from the value of the field named `field_name`.
The result is `UInt8`.
","simpleJSONExtractBool(json, field_name)","- `json` — The JSON in which the field is searched for. [`String`](/sql-reference/data-types/string)
- `field_name` — The name of the field to search for. [`const String`](/sql-reference/data-types/string)
","","Returns `1` if the value of the field is `true`, `0` otherwise. This means this function will return `0` including (and not only) in the following cases:
- If the field doesn't exists.
- If the field contains `true` as a string, e.g.: `{""field"":""true""}`.
- If the field contains `1` as a numerical value. [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
CREATE TABLE jsons
(
    `json` String
)
ENGINE = MergeTree
ORDER BY tuple();

INSERT INTO jsons VALUES ('{""foo"":false,""bar"":true}');
INSERT INTO jsons VALUES ('{""foo"":""true"",""qux"":1}');

SELECT simpleJSONExtractBool(json, 'bar') FROM jsons ORDER BY json;
SELECT simpleJSONExtractBool(json, 'foo') FROM jsons ORDER BY json;
```

```response title=Response
0
1
0
0
```

","21.4","JSON"
"25.9.2.1","normalizeUTF8NFKC",0,0,"","","System","
Normalizes a UTF-8 string according to the [NFKC normalization form](https://en.wikipedia.org/wiki/Unicode_equivalence#Normal_forms).
","normalizeUTF8NFKC(str)","- `str` — UTF-8 encoded input string. [`String`](/sql-reference/data-types/string)
","","Returns the NFKC normalized form of the UTF-8 string. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT
    '① ② ③' AS original,                            -- Circled number characters
    normalizeUTF8NFKC('① ② ③') AS nfkc_normalized;  -- Converts to 1 2 3
```

```response title=Response
┌─original─┬─nfkc_normalized─┐
│ ① ② ③  │ 1 2 3           │
└──────────┴─────────────────┘
```

","21.11","String"
"25.9.2.1","less",0,0,"","","System","Compares two values for less-than relation.","less(a, b)
    -- a < b","- `a` — First value.<sup>[*](#comparison-rules)</sup> - `b` — Second value.<sup>[*](#comparison-rules)</sup> ","","Returns `1` if `a` is less than `b`, otherwise `0` [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT 1 < 2, 2 < 1;
```

```response title=Response
┌─less(1, 2)─┬─less(2, 1)─┐
│          1 │          0 │
└────────────┴────────────┘
```

","1.1","Comparison"
"25.9.2.1","normalizeUTF8NFD",0,0,"","","System","
Normalizes a UTF-8 string according to the [NFD normalization form](https://en.wikipedia.org/wiki/Unicode_equivalence#Normal_forms).
","normalizeUTF8NFD(str)","- `str` — UTF-8 encoded input string. [`String`](/sql-reference/data-types/string)
","","Returns the NFD normalized form of the UTF-8 string. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT
    'é' AS original, -- é (U+00E9)
    length(original),
    normalizeUTF8NFD('é') AS nfd_normalized, -- e + combining acute (U+0065 + U+0301)
    length(nfd_normalized);
```

```response title=Response
┌─original─┬─length(original)─┬─nfd_normalized─┬─length(nfd_normalized)─┐
│ é        │                2 │ é              │                      3 │
└──────────┴──────────────────┴────────────────┴────────────────────────┘
```

","21.11","String"
"25.9.2.1","toDateTime64OrZero",0,0,"","","System","
Converts an input value to a value of type [DateTime64](../data-types/datetime64.md) but returns the lower boundary of [DateTime64](../data-types/datetime64.md) if an invalid argument is received.
The same as [toDateTime64](#todatetime64) but returns lower boundary of [DateTime64](../data-types/datetime64.md) if an invalid argument is received.

See also:
- [toDateTime64](#toDateTime64).
- [toDateTime64OrNull](#toDateTime64OrNull).
- [toDateTime64OrDefault](#toDateTime64OrDefault).
    ","toDateTime64OrZero(x)","- `x` — A string representation of a date with time and subsecond precision. [`String`](/sql-reference/data-types/string)
","","Returns a DateTime64 value if successful, otherwise the lower boundary of DateTime64 (`1970-01-01 00:00:00.000`). [`DateTime64`](/sql-reference/data-types/datetime64)","**Usage example**

```sql title=Query
SELECT toDateTime64OrZero('2025-12-30 13:44:17.123'), toDateTime64OrZero('invalid')
```

```response title=Response
┌─toDateTime64OrZero('2025-12-30 13:44:17.123')─┬─toDateTime64OrZero('invalid')─┐
│                         2025-12-30 13:44:17.123 │             1970-01-01 00:00:00.000 │
└─────────────────────────────────────────────────┴─────────────────────────────────────┘
```

","20.1","Type Conversion"
"25.9.2.1","port",0,0,"","","System","
Returns the port of a URL, or the `default_port` if the URL contains no port or cannot be parsed.
    ","port(url[, default_port])","- `url` — URL. [`String`](/sql-reference/data-types/string)
- `default_port` — Optional. The default port number to be returned. `0` by default. [`UInt16`](/sql-reference/data-types/int-uint)
","","Returns the port of the URL, or the default port if there is no port in the URL or in case of a validation error. [`UInt16`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT port('https://clickhouse.com:8443/docs'), port('https://clickhouse.com/docs', 443);
```

```response title=Response
┌─port('https://clickhouse.com:8443/docs')─┬─port('https://clickhouse.com/docs', 443)─┐
│                                     8443 │                                      443 │
└──────────────────────────────────────────┴──────────────────────────────────────────┘
```

","20.5","URL"
"25.9.2.1","tid",0,0,"","","System","
Returns id of the thread, in which the current [Block](/development/architecture/#block) is processed.
    ","tid()","","","Returns the current thread id. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT tid();
```

```response title=Response
┌─tid()─┐
│  3878 │
└───────┘
```

","20.12","Introspection"
"25.9.2.1","subtractSeconds",0,0,"","","System","
Subtracts a specified number of seconds from a date, a date with time or a string-encoded date or date with time.
    ","subtractSeconds(datetime, num)","- `datetime` — Date or date with time to subtract specified number of seconds from. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64) or [`String`](/sql-reference/data-types/string)
- `num` — Number of seconds to subtract. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns `datetime` minus `num` seconds [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64(3)`](/sql-reference/data-types/datetime64)","**Subtract seconds from different date types**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractSeconds(date, 60) AS subtract_seconds_with_date,
    subtractSeconds(date_time, 60) AS subtract_seconds_with_date_time,
    subtractSeconds(date_time_string, 60) AS subtract_seconds_with_date_time_string
```

```response title=Response
┌─subtract_seconds_with_date─┬─subtract_seconds_with_date_time─┬─subtract_seconds_with_date_time_string─┐
│        2023-12-31 23:59:00 │             2023-12-31 23:59:00 │                2023-12-31 23:59:00.000 │
└────────────────────────────┴─────────────────────────────────┴────────────────────────────────────────┘
```

**Using alternative INTERVAL syntax**

```sql title=Query
SELECT dateSub('1998-06-16'::Date, INTERVAL 10 second)
```

```response title=Response
┌─minus(CAST('⋯Second(10))─┐
│      1998-06-15 23:59:50 │
└──────────────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","multiSearchAllPositionsCaseInsensitive",0,0,"","","System","
Like [`multiSearchAllPositions`](#multiSearchAllPositions) but ignores case.
    ","multiSearchAllPositionsCaseInsensitive(haystack, needle1[, needle2, ...])","- `haystack` — String in which the search is performed. [`String`](/sql-reference/data-types/string)
- `needle1[, needle2, ...]` — An array of one or more substrings to be searched. [`Array(String)`](/sql-reference/data-types/array)
","","Returns array of the starting position in bytes and counting from 1 (if the substring was found), `0` if the substring was not found. [`Array(UInt64)`](/sql-reference/data-types/array)","**Case insensitive multi-search**

```sql title=Query
SELECT multiSearchAllPositionsCaseInsensitive('ClickHouse',['c','h'])
```

```response title=Response
┌─multiSearchA⋯['c', 'h'])─┐
│ [1,6]                    │
└──────────────────────────┘
```

","20.1","String Search"
"25.9.2.1","base32Encode",0,0,"","","System","
Encodes a string using [Base32](https://datatracker.ietf.org/doc/html/rfc4648#section-6).
","base32Encode(plaintext)","- `plaintext` — Plaintext to encode. [`String`](/sql-reference/data-types/string)
","","Returns a string containing the encoded value of the argument. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring)","**Usage example**

```sql title=Query
SELECT base32Encode('Encoded')
```

```response title=Response
┌─base32Encode('Encoded')─┐
│ IVXGG33EMVSA====        │
└─────────────────────────┘
```

","25.6","String"
"25.9.2.1","randConstant",0,0,"","","System","
Generates a single random value that remains constant across all rows in the current query execution.

This function:
- Returns the same random value for every row within a single query
- Produces different values across separate query executions

It is useful for applying consistent random seeds or identifiers across all rows in a dataset
    ","randConstant([x])","- `x` — Optional and ignored. The only purpose of the argument is to prevent [common subexpression elimination](/sql-reference/functions/overview#common-subexpression-elimination) when the same function call is used multiple times in a query. [`Any`](/sql-reference/data-types)
","","Returns a column of type `UInt32` containing the same random value in each row. [`UInt32`](/sql-reference/data-types/int-uint)","**Basic usage**

```sql title=Query
SELECT randConstant() AS random_value;
```

```response title=Response
| random_value |
|--------------|
| 1234567890   |
```

**Usage with parameter**

```sql title=Query
SELECT randConstant(10) AS random_value;
```

```response title=Response
| random_value |
|--------------|
| 9876543210   |
```

","1.1","Random Number"
"25.9.2.1","timezoneOffset",0,0,"","","System","
Returns the timezone offset in seconds from [UTC](https://en.wikipedia.org/wiki/Coordinated_Universal_Time).
The function takes daylight saving time and historical timezone changes at the specified date and time into account.
    ","timeZoneOffset(datetime)","- `datetime` — `DateTime` value to get the timezone offset for. [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
","","Returns the offset from UTC in seconds [`Int32`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT toDateTime('2021-04-21 10:20:30', 'America/New_York') AS Time,
toTypeName(Time) AS Type,
timeZoneOffset(Time) AS Offset_in_seconds,
(Offset_in_seconds / 3600) AS Offset_in_hours;
```

```response title=Response
┌────────────────Time─┬─Type─────────────────────────┬─Offset_in_seconds─┬─Offset_in_hours─┐
│ 2021-04-21 10:20:30 │ DateTime('America/New_York') │            -14400 │              -4 │
└─────────────────────┴──────────────────────────────┴───────────────────┴─────────────────┘
```

","21.6","Dates and Times"
"25.9.2.1","transform",0,0,"","","System","
Transforms a value according to the explicitly defined mapping of some elements to other elements.

There are two variations of this function:
- `transform(x, array_from, array_to, default)` - transforms `x` using mapping arrays with a default value for unmatched elements
- `transform(x, array_from, array_to)` - same transformation but returns the original `x` if no match is found

The function searches for `x` in `array_from` and returns the corresponding element from `array_to` at the same index.
If `x` is not found in `array_from`, it returns either the `default` value (4-parameter version) or the original `x` (3-parameter version).
If multiple matching elements exist in `array_from`, it returns the element corresponding to the first match.

Requirements:
- `array_from` and `array_to` must have the same number of elements
- For 4-parameter version: `transform(T, Array(T), Array(U), U) -> U` where `T` and `U` can be different compatible types
- For 3-parameter version: `transform(T, Array(T), Array(T)) -> T` where all types must be the same
","transform(x, array_from, array_to[, default])","- `x` — Value to transform. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Decimal`](/sql-reference/data-types/decimal) or [`Float*`](/sql-reference/data-types/float) or [`String`](/sql-reference/data-types/string) or [`Date`](/sql-reference/data-types/date) or [`DateTime`](/sql-reference/data-types/datetime)
- `array_from` — Constant array of values to search for matches. [`Array((U)Int*)`](/sql-reference/data-types/array) or [`Array(Decimal)`](/sql-reference/data-types/array) or [`Array(Float*)`](/sql-reference/data-types/array) or [`Array(String)`](/sql-reference/data-types/array) or [`Array(Date)`](/sql-reference/data-types/array) or [`Array(DateTime)`](/sql-reference/data-types/array)
- `array_to` — Constant array of values to return for corresponding matches in `array_from`. [`Array((U)Int*)`](/sql-reference/data-types/array) or [`Array(Decimal)`](/sql-reference/data-types/array) or [`Array(Float*)`](/sql-reference/data-types/array) or [`Array(String)`](/sql-reference/data-types/array) or [`Array(Date)`](/sql-reference/data-types/array) or [`Array(DateTime)`](/sql-reference/data-types/array)
- `default` — Optional. Value to return if `x` is not found in `array_from`. If omitted, returns x unchanged. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Decimal`](/sql-reference/data-types/decimal) or [`Float*`](/sql-reference/data-types/float) or [`String`](/sql-reference/data-types/string) or [`Date`](/sql-reference/data-types/date) or [`DateTime`](/sql-reference/data-types/datetime)
","","Returns the corresponding value from `array_to` if x matches an element in `array_from`, otherwise returns default (if provided) or x (if default not provided). [`Any`](/sql-reference/data-types)","**transform(T, Array(T), Array(U), U) -> U**

```sql title=Query
SELECT
transform(SearchEngineID, [2, 3], ['Yandex', 'Google'], 'Other') AS title,
count() AS c
FROM test.hits
WHERE SearchEngineID != 0
GROUP BY title
ORDER BY c DESC
```

```response title=Response
┌─title─────┬──────c─┐
│ Yandex    │ 498635 │
│ Google    │ 229872 │
│ Other     │ 104472 │
└───────────┴────────┘
```

**transform(T, Array(T), Array(T)) -> T**

```sql title=Query
SELECT
transform(domain(Referer), ['yandex.ru', 'google.ru', 'vkontakte.ru'], ['www.yandex', 'example.com', 'vk.com']) AS s, count() AS c
FROM test.hits
GROUP BY domain(Referer)
ORDER BY count() DESC
LIMIT 10
```

```response title=Response
┌─s──────────────┬───────c─┐
│                │ 2906259 │
│ www.yandex     │  867767 │
│ ███████.ru     │  313599 │
│ mail.yandex.ru │  107147 │
│ ██████.ru      │  100355 │
│ █████████.ru   │   65040 │
│ news.yandex.ru │   64515 │
│ ██████.net     │   59141 │
│ example.com    │   57316 │
└────────────────┴─────────┘
```

","1.1","Other"
"25.9.2.1","arrayLevenshteinDistanceWeighted",0,0,"","","System","
Calculates Levenshtein distance for two arrays with custom weights for each element.
The number of elements for the array and its weights should match.
    ","arrayLevenshteinDistanceWeighted(from, to, from_weights, to_weights)","- `from` — first array. [`Array(T)`](/sql-reference/data-types/array). - `to` — second array. [`Array(T)`](/sql-reference/data-types/array). - `from_weights` — weights for the first array. [`Array((U)Int*|Float*)`](/sql-reference/data-types/array)
- `to_weights` — weights for the second array. [`Array((U)Int*|Float*)`](/sql-reference/data-types/array)
","","Levenshtein distance between the first and the second arrays with custom weights for each element [`Float64`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT arrayLevenshteinDistanceWeighted(['A', 'B', 'C'], ['A', 'K', 'L'], [1.0, 2, 3], [3.0, 4, 5])
```

```response title=Response
14
```

","25.4","Arrays"
"25.9.2.1","BLAKE3",0,0,"","","System","
Calculates BLAKE3 hash string and returns the resulting set of bytes as FixedString.
This cryptographic hash-function is integrated into ClickHouse with BLAKE3 Rust library.
The function is rather fast and shows approximately two times faster performance compared to SHA-2, while generating hashes of the same length as SHA-256.
It returns a BLAKE3 hash as a byte array with type FixedString(32).
    ","BLAKE3(message)","- `message` — The input string to hash. [`String`](/sql-reference/data-types/string)
","","Returns the 32-byte BLAKE3 hash of the input string as a fixed-length string. [`FixedString(32)`](/sql-reference/data-types/fixedstring)","**hash**

```sql title=Query
SELECT hex(BLAKE3('ABC'))
```

```response title=Response
┌─hex(BLAKE3('ABC'))───────────────────────────────────────────────┐
│ D1717274597CF0289694F75D96D444B992A096F1AFD8E7BBFA6EBB1D360FEDFC │
└──────────────────────────────────────────────────────────────────┘
```

","22.10","Hash"
"25.9.2.1","toMinute",0,0,"","","System","
Returns the minute component (0-59) of a `Date` or `DateTime` value.
    ","toMinute(datetime)","- `datetime` — Date with time to get the minute from. [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
","","Returns the minute of the hour (0 - 59) of `datetime`. [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT toMinute(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toMinute(toDateTime('2023-04-21 10:20:30'))─┐
│                                          20 │
└─────────────────────────────────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","atan",0,1,"","","System","
Returns the arc tangent of the argument.
","atan(x)","- `x` — The value for which to find arc tangent of. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal*`](/sql-reference/data-types/decimal)
","","Returns the arc tangent of `x`. [`Float*`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT atan(1);
```

```response title=Response
0.7853981633974483
```

","1.1","Mathematical"
"25.9.2.1","arrayLevenshteinDistance",0,0,"","","System","Calculates the Levenshtein distance for two arrays.","arrayLevenshteinDistance(from, to)","- `from` — The first array. [`Array(T)`](/sql-reference/data-types/array). - `to` — The second array. [`Array(T)`](/sql-reference/data-types/array). ","","Levenshtein distance between the first and the second arrays. [`Float64`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT arrayLevenshteinDistance([1, 2, 4], [1, 2, 3])
```

```response title=Response
1
```

","25.4","Arrays"
"25.9.2.1","ifNotFinite",0,0,"","","System","
Checks whether a floating point value is finite.

You can get a similar result by using the [ternary operator](/sql-reference/functions/conditional-functions#if): `isFinite(x) ? x : y`.
    ","ifNotFinite(x,y)","- `x` — Value to check if infinite. [`Float*`](/sql-reference/data-types/float)
- `y` — Fallback value. [`Float*`](/sql-reference/data-types/float)
","","- `x` if `x` is finite.
- `y` if `x` is not finite.","**Usage example**

```sql title=Query
SELECT 1/0 AS infimum, ifNotFinite(infimum,42)
```

```response title=Response
inf  42
```

","20.3","Arithmetic"
"25.9.2.1","bitmapSubsetInRange",0,0,"","","System","Returns a subset of the bitmap, containing only the set bits in the specified range [start, end). Uses 1-based indexing.","bitmapSubsetInRange(bitmap, start, end)","- `bitmap` — Bitmap to extract the subset from. [`AggregateFunction(groupBitmap, T)`](/sql-reference/data-types/aggregatefunction). - `start` — Start of the range (inclusive). [`UInt*`](/sql-reference/data-types/int-uint) - `end` — End of the range (exclusive). [`UInt*`](/sql-reference/data-types/int-uint) ","","Returns a bitmap containing only the set bits in the specified range [`AggregateFunction(groupBitmap, T)`](/sql-reference/data-types/aggregatefunction)","**Usage example**

```sql title=Query
SELECT bitmapToArray(bitmapSubsetInRange(bitmapBuild([1, 2, 3, 4, 5]), 2, 5)) AS res;
```

```response title=Response
┌─res───────┐
│ [2, 3, 4] │
└───────────┘
```

","20.1","Bitmap"
"25.9.2.1","nullIf",0,1,"","","System","
Returns `NULL` if both arguments are equal.
    ","nullIf(x, y)","- `x` — The first value. [`Any`](/sql-reference/data-types)
- `y` — The second value. [`Any`](/sql-reference/data-types)
","","Returns `NULL` if both arguments are equal, otherwise returns the first argument. [`NULL`](/sql-reference/syntax#null) or [`Nullable(x)`](/sql-reference/data-types/nullable)","**Usage example**

```sql title=Query
SELECT nullIf(1, 1), nullIf(1, 2);
```

```response title=Response
┌─nullIf(1, 1)─┬─nullIf(1, 2)─┐
│         ᴺᵁᴸᴸ │            1 │
└──────────────┴──────────────┘
```

","1.1","Null"
"25.9.2.1","toDecimal256OrNull",0,0,"","","System","
Converts an input value to a value of type [`Decimal(76, S)`](../data-types/decimal.md) but returns `NULL` in case of an error.
Like [`toDecimal256`](#toDecimal256) but returns `NULL` instead of throwing an exception on conversion errors.

Supported arguments:
- Values or string representations of type (U)Int*.
- Values or string representations of type Float*.

Unsupported arguments (return `NULL`):
- Values or string representations of Float* values `NaN` and `Inf` (case-insensitive).
- String representations of binary and hexadecimal values.
- Values that exceed the bounds of `Decimal256`: `(-1 * 10^(76 - S), 1 * 10^(76 - S))`.

See also:
- [`toDecimal256`](#toDecimal256).
- [`toDecimal256OrZero`](#toDecimal256OrZero).
- [`toDecimal256OrDefault`](#toDecimal256OrDefault).
    ","toDecimal256OrNull(expr, S)","- `expr` — Expression returning a number or a string representation of a number. [`Expression`](/sql-reference/data-types/special-data-types/expression)
- `S` — Scale parameter between 0 and 76, specifying how many digits the fractional part of a number can have. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns a Decimal(76, S) value if successful, otherwise `NULL`. [`Decimal256(S)`](/sql-reference/data-types/decimal) or [`NULL`](/sql-reference/syntax#null)","**Usage example**

```sql title=Query
SELECT toDecimal256OrNull('42.7', 2), toDecimal256OrNull('invalid', 2)
```

```response title=Response
┌─toDecimal256OrNull('42.7', 2)─┬─toDecimal256OrNull('invalid', 2)─┐
│                         42.70 │                             ᴺᵁᴸᴸ │
└───────────────────────────────┴──────────────────────────────────┘
```

","20.8","Type Conversion"
"25.9.2.1","multiMatchAny",0,0,"","","System","
Check if at least one of multiple regular expression patterns matches a haystack.

If you only want to search multiple substrings in a string, you can use function [`multiSearchAny`](#multiSearchAny) instead - it works much faster than this function.
    ","multiMatchAny(haystack, pattern1[, pattern2, ...])","- `haystack` — String in which patterns are searched. [`String`](/sql-reference/data-types/string)
- `pattern1[, pattern2, ...]` — An array of one or more regular expression patterns. [`Array(String)`](/sql-reference/data-types/array)
","","Returns `1` if any pattern matches, `0` otherwise. [`UInt8`](/sql-reference/data-types/int-uint)","**Multiple pattern matching**

```sql title=Query
SELECT multiMatchAny('Hello World', ['Hello.*', 'foo.*'])
```

```response title=Response
┌─multiMatchAny('Hello World', ['Hello.*', 'foo.*'])─┐
│                                                  1 │
└────────────────────────────────────────────────────┘
```

**No patterns match**

```sql title=Query
SELECT multiMatchAny('Hello World', ['goodbye.*', 'foo.*'])
```

```response title=Response
┌─multiMatchAny('Hello World', ['goodbye.*', 'foo.*'])─┐
│                                                    0 │
└──────────────────────────────────────────────────────┘
```

","20.1","String Search"
"25.9.2.1","parseDateTime64OrNull",0,0,"","","System","","","","","","","",""
"25.9.2.1","extractKeyValuePairsWithEscaping",0,0,"","","System","Same as `extractKeyValuePairs` but with escaping support.

            Escape sequences supported: `\x`, `\N`, `\a`, `\b`, `\e`, `\f`, `\n`, `\r`, `\t`, `\v` and `\0`.
            Non standard escape sequences are returned as it is (including the backslash) unless they are one of the following:
            `\\`, `'`, `""`, `backtick`, `/`, `=` or ASCII control characters (c <= 31).

            This function will satisfy the use case where pre-escaping and post-escaping are not suitable. For instance, consider the following
            input string: `a: ""aaaa\""bbb""`. The expected output is: `a: aaaa\""bbbb`.
            - Pre-escaping: Pre-escaping it will output: `a: ""aaaa""bbb""` and `extractKeyValuePairs` will then output: `a: aaaa`
            - Post-escaping: `extractKeyValuePairs` will output `a: aaaa\` and post-escaping will keep it as it is.

            Leading escape sequences will be skipped in keys and will be considered invalid for values.

            **Escape sequences with escape sequence support turned on**
            ```sql
            arthur :) select extractKeyValuePairsWithEscaping('age:a\\x0A\\n\\0') as kv

            SELECT extractKeyValuePairsWithEscaping('age:a\\x0A\\n\\0') AS kv

            Query id: 44c114f0-5658-4c75-ab87-4574de3a1645

            ┌─kv───────────────┐
            │ {'age':'a\n\n\0'} │
            └──────────────────┘
            ```","","","","","","","Map"
"25.9.2.1","parseDateTime64OrZero",0,0,"","","System","","","","","","","",""
"25.9.2.1","snowflakeToDateTime64",0,0,"","","System","
<DeprecatedBadge/>

:::warning
This function is deprecated and can only be used if setting [`allow_deprecated_snowflake_conversion_functions`](../../operations/settings/settings.md#allow_deprecated_snowflake_conversion_functions) is enabled.
The function will be removed at some point in future.

Please use function [`snowflakeIDToDateTime64`](#snowflakeIDToDateTime64) instead.
:::

Extracts the timestamp component of a [Snowflake ID](https://en.wikipedia.org/wiki/Snowflake_ID) in [DateTime64](../data-types/datetime64.md) format.

    ","snowflakeToDateTime64(value[, time_zone])","- `value` — Snowflake ID. [`Int64`](/sql-reference/data-types/int-uint)
- `time_zone` — Optional. [Timezone](/operations/server-configuration-parameters/settings.md#timezone). The function parses `time_string` according to the timezone. [`String`](/sql-reference/data-types/string)
","","Returns the timestamp component of `value`. [`DateTime64(3)`](/sql-reference/data-types/datetime64)","**Usage example**

```sql title=Query
SELECT snowflakeToDateTime64(CAST('1426860802823350272', 'Int64'), 'UTC');
```

```response title=Response
┌─snowflakeToDateTime64(CAST('1426860802823350272', 'Int64'), 'UTC')─┐
│                                            2021-08-15 10:58:19.841 │
└────────────────────────────────────────────────────────────────────┘
```

","21.10","UUID"
"25.9.2.1","parseDateTimeOrNull",0,0,"","","System","","","","","","","",""
"25.9.2.1","tupleMultiplyByNumber",0,0,"","","System","
Returns a tuple with all elements multiplied by a number.
","tupleMultiplyByNumber(tuple, number)","- `tuple` — Tuple to multiply. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) or [`Tuple(Float*)`](/sql-reference/data-types/tuple) or [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
- `number` — Multiplier. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
","","Returns a tuple with multiplied elements. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) or [`Tuple(Float*)`](/sql-reference/data-types/tuple) or [`Tuple(Decimal)`](/sql-reference/data-types/tuple)","**Basic usage**

```sql title=Query
SELECT tupleMultiplyByNumber((1, 2), -2.1)
```

```response title=Response
(-2.1, -4.2)
```

","21.11","Tuple"
"25.9.2.1","randomStringUTF8",0,0,"","","System","
Generates a random [UTF-8](https://en.wikipedia.org/wiki/UTF-8) string with the specified number of codepoints.
No codepoints from unassigned [planes](https://en.wikipedia.org/wiki/Plane_(Unicode)) (planes 4 to 13) are returned.
It is still possible that the client interacting with ClickHouse server is not able to display the produced UTF-8 string correctly.
    ","randomStringUTF8(length)","- `length` — Length of the string in code points. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns a string filled with random UTF-8 codepoints. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT randomStringUTF8(13)
```

```response title=Response
┌─randomStringUTF8(13)─┐
│ 𘤗𙉝д兠庇󡅴󱱎󦐪􂕌𔊹𓰛       │
└──────────────────────┘
```

","20.5","Random Number"
"25.9.2.1","max2",0,1,"","","System","
    Returns the bigger of two numeric values `x` and `y`.
    ","max2(x, y)","- `x` — First value [`(U)Int8/16/32/64`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
- `y` — Second value [`(U)Int8/16/32/64`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
","","Returns the bigger value of `x` and `y`. [`Float64`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT max2(-1, 2)
```

```response title=Response
2
```

","21.11","Arithmetic"
"25.9.2.1","mapFromArrays",0,0,"","","System","","","","","","","",""
"25.9.2.1","cutToFirstSignificantSubdomainCustomWithWWWRFC",0,0,"","","System","Similar to `cutToFirstSignificantSubdomainCustomWithWWW` but follows stricter rules according to RFC 3986.","","","","","","","URL"
"25.9.2.1","initialQueryStartTime",0,0,"","","System","
Returns the start time of the initial current query.
`initialQueryStartTime` returns the same results on different shards.
","initialQueryStartTime()","","","Returns the start time of the initial current query. [`DateTime`](/sql-reference/data-types/datetime)","**Usage example**

```sql title=Query
CREATE TABLE tmp (str String) ENGINE = Log;
INSERT INTO tmp (*) VALUES ('a');
SELECT count(DISTINCT t) FROM (SELECT initialQueryStartTime() AS t FROM remote('127.0.0.{1..3}', currentDatabase(), 'tmp') GROUP BY queryID());
```

```response title=Response
┌─count(DISTINCT t)─┐
│                 1 │
└───────────────────┘
```

","25.4","Other"
"25.9.2.1","parseDateTime",0,0,"","","System","","","","","","","",""
"25.9.2.1","empty",0,0,"","","System","
Checks whether the input array is empty.

An array is considered empty if it does not contain any elements.

:::note
Can be optimized by enabling the [`optimize_functions_to_subcolumns` setting](/operations/settings/settings#optimize_functions_to_subcolumns). With `optimize_functions_to_subcolumns = 1` the function reads only [size0](/sql-reference/data-types/array#array-size) subcolumn instead of reading and processing the whole array column. The query `SELECT empty(arr) FROM TABLE;` transforms to `SELECT arr.size0 = 0 FROM TABLE;`.
:::

The function also works for [strings](string-functions.md#empty) or [UUID](uuid-functions.md#empty).
    ","empty(arr)","- `arr` — Input array. [`Array(T)`](/sql-reference/data-types/array)
","","Returns `1` for an empty array or `0` for a non-empty array [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT empty([]);
```

```response title=Response
1
```

","1.1","Arrays"
"25.9.2.1","dotProduct",0,0,"","","System","","","","","","","",""
"25.9.2.1","emptyArrayUInt16",0,0,"","","System","Returns an empty UInt16 array","emptyArrayUInt16()","","","An empty UInt16 array. [`Array(T)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT emptyArrayUInt16
```

```response title=Response
[]
```

","1.1","Arrays"
"25.9.2.1","parseReadableSizeOrZero",0,0,"","","System","
Given a string containing a byte size and `B`, `KiB`, `KB`, `MiB`, `MB`, etc. as a unit (i.e. [ISO/IEC 80000-13](https://en.wikipedia.org/wiki/ISO/IEC_80000) or decimal byte unit), this function returns the corresponding number of bytes.
If the function is unable to parse the input value, it returns `0`.

The inverse operations of this function are [`formatReadableSize`](#formatReadableSize) and [`formatReadableDecimalSize`](#formatReadableDecimalSize).
","parseReadableSizeOrZero(x)","- `x` — Readable size with ISO/IEC 80000-13 or decimal byte unit. [`String`](/sql-reference/data-types/string)
","","Returns the number of bytes, rounded up to the nearest integer, or `0` if unable to parse the input. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT arrayJoin(['1 B', '1 KiB', '3 MB', '5.314 KiB', 'invalid']) AS readable_sizes, parseReadableSizeOrZero(readable_sizes) AS sizes;
```

```response title=Response
┌─readable_sizes─┬───sizes─┐
│ 1 B            │       1 │
│ 1 KiB          │    1024 │
│ 3 MB           │ 3000000 │
│ 5.314 KiB      │    5442 │
│ invalid        │       0 │
└────────────────┴─────────┘
```

","24.6","Other"
"25.9.2.1","parseReadableSize",0,0,"","","System","
Given a string containing a byte size and `B`, `KiB`, `KB`, `MiB`, `MB`, etc. as a unit (i.e. [ISO/IEC 80000-13](https://en.wikipedia.org/wiki/ISO/IEC_80000) or decimal byte unit), this function returns the corresponding number of bytes.
If the function is unable to parse the input value, it throws an exception.

The inverse operations of this function are [`formatReadableSize`](#formatReadableSize) and [`formatReadableDecimalSize`](#formatReadableDecimalSize).
","parseReadableSize(x)","- `x` — Readable size with ISO/IEC 80000-13 or decimal byte unit. [`String`](/sql-reference/data-types/string)
","","Returns the number of bytes, rounded up to the nearest integer. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT arrayJoin(['1 B', '1 KiB', '3 MB', '5.314 KiB']) AS readable_sizes, parseReadableSize(readable_sizes) AS sizes;
```

```response title=Response
┌─readable_sizes─┬───sizes─┐
│ 1 B            │       1 │
│ 1 KiB          │    1024 │
│ 3 MB           │ 3000000 │
│ 5.314 KiB      │    5442 │
└────────────────┴─────────┘
```

","24.6","Other"
"25.9.2.1","parseTimeDelta",0,0,"","","System","
Parse a sequence of numbers followed by something resembling a time unit.

The time delta string uses these time unit specifications:
- `years`, `year`, `yr`, `y`
- `months`, `month`, `mo`
- `weeks`, `week`, `w`
- `days`, `day`, `d`
- `hours`, `hour`, `hr`, `h`
- `minutes`, `minute`, `min`, `m`
- `seconds`, `second`, `sec`, `s`
- `milliseconds`, `millisecond`, `millisec`, `ms`
- `microseconds`, `microsecond`, `microsec`, `μs`, `µs`, `us`
- `nanoseconds`, `nanosecond`, `nanosec`, `ns`

Multiple time units can be combined with separators (space, `;`, `-`, `+`, `,`, `:`).

The length of years and months are approximations: year is 365 days, month is 30.5 days.
    ","parseTimeDelta(timestr)","- `timestr` — A sequence of numbers followed by something resembling a time unit. [`String`](/sql-reference/data-types/string)
","","The number of seconds. [`Float64`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT parseTimeDelta('11s+22min')
```

```response title=Response
┌─parseTimeDelta('11s+22min')─┐
│                        1331 │
└─────────────────────────────┘
```

**Complex time units**

```sql title=Query
SELECT parseTimeDelta('1yr2mo')
```

```response title=Response
┌─parseTimeDelta('1yr2mo')─┐
│                 36806400 │
└──────────────────────────┘
```

","22.7","Other"
"25.9.2.1","toTime64OrNull",0,0,"","","System","
Converts an input value to a value of type `Time64` but returns `NULL` in case of an error.
Like [`toTime64`](#toTime64) but returns `NULL` instead of throwing an exception on conversion errors.

See also:
- [`toTime64`](#toTime64)
- [`toTime64OrZero`](#toTime64OrZero)
    ","toTime64OrNull(x)","- `x` — A string representation of a time with subsecond precision. [`String`](/sql-reference/data-types/string)
","","Returns a Time64 value if successful, otherwise `NULL`. [`Time64`](/sql-reference/data-types/time64) or [`NULL`](/sql-reference/syntax#null)","**Usage example**

```sql title=Query
SELECT toTime64OrNull('12:30:45.123'), toTime64OrNull('invalid')
```

```response title=Response
┌─toTime64OrNull('12:30:45.123')─┬─toTime64OrNull('invalid')─┐
│                   12:30:45.123 │                      ᴺᵁᴸᴸ │
└────────────────────────────────┴───────────────────────────┘
```

","25.6","Type Conversion"
"25.9.2.1","stem",0,0,"","","System","","","","","","","",""
"25.9.2.1","subtractMinutes",0,0,"","","System","
Subtracts a specified number of minutes from a date, a date with time or a string-encoded date or date with time.
    ","subtractMinutes(datetime, num)","- `datetime` — Date or date with time to subtract specified number of minutes from. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64) or [`String`](/sql-reference/data-types/string)
- `num` — Number of minutes to subtract. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns `datetime` minus `num` minutes [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64(3)`](/sql-reference/data-types/datetime64)","**Subtract minutes from different date types**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractMinutes(date, 30) AS subtract_minutes_with_date,
    subtractMinutes(date_time, 30) AS subtract_minutes_with_date_time,
    subtractMinutes(date_time_string, 30) AS subtract_minutes_with_date_time_string
```

```response title=Response
┌─subtract_minutes_with_date─┬─subtract_minutes_with_date_time─┬─subtract_minutes_with_date_time_string─┐
│        2023-12-31 23:30:00 │             2023-12-31 23:30:00 │                2023-12-31 23:30:00.000 │
└────────────────────────────┴─────────────────────────────────┴────────────────────────────────────────┘
```

**Using alternative INTERVAL syntax**

```sql title=Query
SELECT dateSub('1998-06-16'::Date, INTERVAL 10 minute)
```

```response title=Response
┌─minus(CAST('⋯Minute(10))─┐
│      1998-06-15 23:50:00 │
└──────────────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","polygonsEqualsCartesian",0,0,"","","System","","","","","","","",""
"25.9.2.1","arrayProduct",0,0,"","","System","
Returns the product of elements in the source array.

If a lambda function `func` is specified, returns the product of elements of the lambda results.
    ","arrayProduct([func(x[, y1, ..., yN])], source_arr[, cond1_arr, ... , condN_arr])","- `func(x[, y1, ..., yN])` — Optional. A lambda function which operates on elements of the source array (`x`) and condition arrays (`y`). [`Lambda function`](/sql-reference/functions/overview#arrow-operator-and-lambda)
- `source_arr` — The source array to process. [`Array(T)`](/sql-reference/data-types/array)
- `[, cond1_arr, ... , condN_arr]` — Optional. N condition arrays providing additional arguments to the lambda function. [`Array(T)`](/sql-reference/data-types/array)
","","Returns the product of elements in the source array, or the product of elements of the lambda results if provided. [`Float64`](/sql-reference/data-types/float)","**Basic example**

```sql title=Query
SELECT arrayProduct([1, 2, 3, 4]);
```

```response title=Response
24
```

**Usage with lambda function**

```sql title=Query
SELECT arrayProduct(x, y -> x+y, [2, 2], [2, 2]) AS res;
```

```response title=Response
16
```

","21.1","Arrays"
"25.9.2.1","polygonsIntersectionSpherical",0,0,"","","System","","","","","","","",""
"25.9.2.1","gccMurmurHash",0,0,"","","System","
Computes the 64-bit [MurmurHash2](https://github.com/aappleby/smhasher) hash of the input value using the same seed as used by [GCC](https://github.com/gcc-mirror/gcc/blob/41d6b10e96a1de98e90a7c0378437c3255814b16/libstdc%2B%2B-v3/include/bits/functional_hash.h#L191).

It is portable between Clang and GCC builds.
","gccMurmurHash(arg1[, arg2, ...])","- `arg1[, arg2, ...]` — A variable number of arguments for which to compute the hash. [`Any`](/sql-reference/data-types)
","","Returns the calculated hash value of the input arguments. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT
    gccMurmurHash(1, 2, 3) AS res1,
    gccMurmurHash(('a', [1, 2, 3], 4, (4, ['foo', 'bar'], 1, (1, 2)))) AS res2
```

```response title=Response
┌─────────────────res1─┬────────────────res2─┐
│ 12384823029245979431 │ 1188926775431157506 │
└──────────────────────┴─────────────────────┘
```

","20.1","Hash"
"25.9.2.1","visibleWidth",0,0,"","","System","
Calculates the approximate width when outputting values to the console in text format (tab-separated).
This function is used by the system to implement Pretty formats.
`NULL` is represented as a string corresponding to `NULL` in Pretty formats.
    ","visibleWidth(x)","- `x` — A value of any data type. [`Any`](/sql-reference/data-types)
","","Returns the approximate width of the value when displayed in text format. [`UInt64`](/sql-reference/data-types/int-uint)","**Calculate visible width of NULL**

```sql title=Query
SELECT visibleWidth(NULL)
```

```response title=Response
┌─visibleWidth(NULL)─┐
│                  4 │
└────────────────────┘
```

","1.1","Other"
"25.9.2.1","h3PointDistRads",0,0,"","","System","","","","","","","",""
"25.9.2.1","polygonsUnionSpherical",0,0,"","","System","","","","","","","",""
"25.9.2.1","byteSize",0,0,"","","System","
Returns an estimation of the uncompressed byte size of its arguments in memory.
For `String` arguments, the function returns the string length + 8 (length).
If the function has multiple arguments, the function accumulates their byte sizes.
    ","byteSize(arg1[, arg2, ...])","- `arg1[, arg2, ...]` — Values of any data type for which to estimate the uncompressed byte size. [`Any`](/sql-reference/data-types)
","","Returns an estimation of the byte size of the arguments in memory. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT byteSize('string')
```

```response title=Response
┌─byteSize('string')─┐
│                 15 │
└────────────────────┘
```

**Multiple arguments**

```sql title=Query
SELECT byteSize(NULL, 1, 0.3, '')
```

```response title=Response
┌─byteSize(NULL, 1, 0.3, '')─┐
│                         19 │
└────────────────────────────┘
```

","21.1","Other"
"25.9.2.1","IPv4StringToNum",0,0,"","","System","
Converts an IPv4 address string in dotted decimal notation (A.B.C.D format) to its corresponding 32-bit integer representation. (The reverse of [`IPv4NumToString`](#IPv4NumToString)).
If the IPv4 address has an invalid format, an exception is thrown.
    ","IPv4StringToNum(string)","- `string` — IPv4 address string. [`String`](/sql-reference/data-types/string)
","","Returns theIPv4 address. [`UInt32`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
IPv4StringToNum('192.168.0.1')
```

```response title=Response
3232235521
```

","1.1","IP Address"
"25.9.2.1","positionUTF8",0,0,"","","System","
Like [`position`](#position) but assumes `haystack` and `needle` are UTF-8 encoded strings.
    ","positionUTF8(haystack, needle[, start_pos])","- `haystack` — String in which the search is performed. [`String`](/sql-reference/data-types/string) or [`Enum`](/sql-reference/data-types/enum)
- `needle` — Substring to be searched. [`String`](/sql-reference/data-types/string)
- `start_pos` — Optional. Position (1-based) in `haystack` at which the search starts. [`UInt*`](/sql-reference/data-types/int-uint)
","","Returns starting position in bytes and counting from 1, if the substring was found, otherwise `0`, if the substring was not found. [`UInt64`](/sql-reference/data-types/int-uint)","**UTF-8 character counting**

```sql title=Query
SELECT positionUTF8('Motörhead', 'r')
```

```response title=Response
┌─position('Motörhead', 'r')─┐
│                          5 │
└────────────────────────────┘
```

","1.1","String Search"
"25.9.2.1","hasSubsequenceCaseInsensitiveUTF8",0,1,"","","System","","","","","","","",""
"25.9.2.1","pi",0,1,"","","System","
Returns pi (π).
","pi()","","","Returns pi [`Float64`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT pi();
```

```response title=Response
3.141592653589793
```

","1.1","Mathematical"
"25.9.2.1","randCanonical",0,0,"","","System","
Returns a random distributed `Float64` number with uniform distribution between `0` (inclusive) and `1` (exclusive).
    ","randCanonical([x])","- `x` — Optional and ignored. The only purpose of the argument is to prevent [common subexpression elimination](/sql-reference/functions/overview#common-subexpression-elimination) when the same function call is used multiple times in a query. [`Any`](/sql-reference/data-types)
","","Returns a random Float64 number. [`Float64`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT randCanonical();
```

```response title=Response
0.345217890123456
```

","22.11","Random Number"
"25.9.2.1","randPoisson",0,0,"","","System","
Returns a random Float64 number drawn from a [Poisson distribution](https://en.wikipedia.org/wiki/Poisson_distribution) distribution.
    ","randPoisson(n[, x])","- `n` — The mean number of occurrences. [`UInt64`](/sql-reference/data-types/int-uint)
- `x` — Optional and ignored. The only purpose of the argument is to prevent [common subexpression elimination](/sql-reference/functions/overview#common-subexpression-elimination) when the same function call is used multiple times in a query. [`Any`](/sql-reference/data-types)
","","Returns a random Float64 number drawn from the specified Poisson distribution. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT randPoisson(10) FROM numbers(5)
```

```response title=Response
┌─randPoisson(10)─┐
│               8 │
│               8 │
│               7 │
│              10 │
│               6 │
└─────────────────┘
```

","22.10","Random Number"
"25.9.2.1","nowInBlock",0,0,"","","System","
Returns the current date and time at the moment of processing of each block of data. In contrast to the function [`now`](#now), it is not a constant expression, and the returned value will be different in different blocks for long-running queries.

It makes sense to use this function to generate the current time in long-running `INSERT SELECT` queries.
    ","nowInBlock([timezone])","- `timezone` — Optional. Timezone name for the returned value. [`String`](/sql-reference/data-types/string)
","","Returns the current date and time at the moment of processing of each block of data. [`DateTime`](/sql-reference/data-types/datetime)","**Difference with the now() function**

```sql title=Query
SELECT
    now(),
    nowInBlock(),
    sleep(1)
FROM numbers(3)
SETTINGS max_block_size = 1
FORMAT PrettyCompactMonoBlock
```

```response title=Response
┌───────────────now()─┬────────nowInBlock()─┬─sleep(1)─┐
│ 2022-08-21 19:41:19 │ 2022-08-21 19:41:19 │        0 │
│ 2022-08-21 19:41:19 │ 2022-08-21 19:41:20 │        0 │
│ 2022-08-21 19:41:19 │ 2022-08-21 19:41:21 │        0 │
└─────────────────────┴─────────────────────┴──────────┘
```

","22.8","Dates and Times"
"25.9.2.1","randNegativeBinomial",0,0,"","","System","
Returns a random Float64 number drawn from a [negative binomial distribution](https://en.wikipedia.org/wiki/Negative_binomial_distribution).
    ","randNegativeBinomial(experiments, probability[, x])","- `experiments` — The number of experiments. [`UInt64`](/sql-reference/data-types/int-uint)
- `probability` — `The probability of failure in each experiment as a value between `0` and `1`. [`Float64`](/sql-reference/data-types/float)
- `x` — Optional and ignored. The only purpose of the argument is to prevent [common subexpression elimination](/sql-reference/functions/overview#common-subexpression-elimination) when the same function call is used multiple times in a query. [`Any`](/sql-reference/data-types)
","","Returns a random Float64 number drawn from the specified negative binomial distribution [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT randNegativeBinomial(100, .75) FROM numbers(5)
```

```response title=Response
┌─randNegativeBinomial(100, 0.75)─┐
│                              33 │
│                              32 │
│                              39 │
│                              40 │
│                              50 │
└─────────────────────────────────┘
```

","22.10","Random Number"
"25.9.2.1","toUnixTimestamp64Micro",0,0,"","","System","","","","","","","",""
"25.9.2.1","randBinomial",0,0,"","","System","
Returns a random Float64 number drawn from a [binomial distribution](https://en.wikipedia.org/wiki/Binomial_distribution).
    ","randBinomial(experiments, probability[, x])","- `experiments` — The number of experiments [`UInt64`](/sql-reference/data-types/int-uint)
- `probability` — The probability of success in each experiment as a value between `0` and `1` [`Float64`](/sql-reference/data-types/float)
- `x` — Optional and ignored. The only purpose of the argument is to prevent [common subexpression elimination](/sql-reference/functions/overview#common-subexpression-elimination) when the same function call is used multiple times in a query. [`Any`](/sql-reference/data-types)
","","Returns a random Float64 number drawn from the specified binomial distribution. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT randBinomial(100, .75) FROM numbers(5)
```

```response title=Response
┌─randBinomial(100, 0.75)─┐
│                      74 │
│                      78 │
│                      76 │
│                      77 │
│                      80 │
└─────────────────────────┘
```

","22.10","Random Number"
"25.9.2.1","randBernoulli",0,0,"","","System","
Returns a random Float64 number drawn from a [Bernoulli distribution](https://en.wikipedia.org/wiki/Bernoulli_distribution).
    ","randBernoulli(probability[, x])","- `probability` — The probability of success as a value between `0` and `1`. [`Float64`](/sql-reference/data-types/float)
- `x` — Optional and ignored. The only purpose of the argument is to prevent [common subexpression elimination](/sql-reference/functions/overview#common-subexpression-elimination) when the same function call is used multiple times in a query. [`Any`](/sql-reference/data-types)
","","Returns a random Float64 number drawn from the specified Bernoulli distribution. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT randBernoulli(.75) FROM numbers(5)
```

```response title=Response
┌─randBernoulli(0.75)─┐
│                   1 │
│                   1 │
│                   0 │
│                   1 │
│                   1 │
└─────────────────────┘
```

","22.10","Random Number"
"25.9.2.1","numericIndexedVectorPointwiseMultiply",0,0,"","","System","
Performs pointwise multiplication between a numericIndexedVector and either another numericIndexedVector or a numeric constant.
The function returns a new numericIndexedVector.
        ","numericIndexedVectorPointwiseMultiply(v1, v2)","- `v1` — A numericIndexedVector object. [`numericIndexedVector`](/sql-reference/functions/#create-numeric-indexed-vector-object)
- `v2` — A numeric constant or numericIndexedVector object. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`numericIndexedVector`](/sql-reference/functions/#create-numeric-indexed-vector-object)
","","Returns a new numericIndexedVector object. [`numericIndexedVector`](/sql-reference/functions/#create-numeric-indexed-vector-object)","****

```sql title=Query
with
    numericIndexedVectorBuild(mapFromArrays([1, 2, 3], arrayMap(x -> toInt32(x), [10, 20, 30]))) as vec1,
    numericIndexedVectorBuild(mapFromArrays([2, 3, 4], arrayMap(x -> toInt32(x), [10, 20, 30]))) as vec2
SELECT
    numericIndexedVectorToMap(numericIndexedVectorPointwiseMultiply(vec1, vec2)) AS res1,
    numericIndexedVectorToMap(numericIndexedVectorPointwiseMultiply(vec1, 2)) AS res2;
```

```response title=Response
┌─res1──────────┬─res2─────────────┐
│ {2:200,3:600} │ {1:20,2:40,3:60} │
└───────────────┴──────────────────┘
```

","25.7","NumericIndexedVector"
"25.9.2.1","toInt32OrZero",0,0,"","","System","
Like [`toInt32`](#toInt32), this function converts an input value to a value of type [Int32](../data-types/int-uint.md) but returns `0` in case of an error.

Supported arguments:
- String representations of (U)Int*.

Unsupported arguments (return `0`):
- String representations of Float* values, including `NaN` and `Inf`.
- String representations of binary and hexadecimal values, e.g. `SELECT toInt32OrZero('0xc0fe');`.

:::note
If the input value cannot be represented within the bounds of [Int32](../data-types/int-uint.md), overflow or underflow of the result occurs.
This is not considered an error.
:::

See also:
- [`toInt32`](#toInt32).
- [`toInt32OrNull`](#toInt32OrNull).
- [`toInt32OrDefault`](#toInt32OrDefault).
    ","toInt32OrZero(x)","- `x` — A String representation of a number. [`String`](/sql-reference/data-types/string)
","","Returns a value of type Int32, otherwise `0` if the conversion is unsuccessful. [`Int32`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT
    toInt32OrZero('32'),
    toInt32OrZero('abc')
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toInt32OrZero('32'): 32
toInt32OrZero('abc'): 0
```

","1.1","Type Conversion"
"25.9.2.1","randStudentT",0,0,"","","System","
Returns a random Float64 number drawn from a [Student's t-distribution](https://en.wikipedia.org/wiki/Student%27s_t-distribution).
    ","randStudentT(degree_of_freedom[, x])","- `degree_of_freedom` — Degrees of freedom. [`Float64`](/sql-reference/data-types/float)
- `x` — Optional and ignored. The only purpose of the argument is to prevent [common subexpression elimination](/sql-reference/functions/overview#common-subexpression-elimination) when the same function call is used multiple times in a query. [`Any`](/sql-reference/data-types)
","","Returns a random Float64 number drawn from the specified Student's t-distribution. [`Float64`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT randStudentT(10) FROM numbers(5)
```

```response title=Response
┌─────randStudentT(10)─┐
│   1.2217309938538725 │
│   1.7941971681200541 │
│ -0.28192176076784664 │
│   0.2508897721303792 │
│  -2.7858432909761186 │
└──────────────────────┘
```

","22.10","Random Number"
"25.9.2.1","sipHash64",0,0,"","","System","
Produces a 64-bit [SipHash](https://en.wikipedia.org/wiki/SipHash) hash value.

This is a cryptographic hash function. It works at least three times faster than the [`MD5`](#MD5) hash function.

The function [interprets](/sql-reference/functions/type-conversion-functions#reinterpretasstring) all the input parameters as strings and calculates the hash value for each of them.
It then combines the hashes using the following algorithm:

1. The first and the second hash value are concatenated to an array which is hashed.
2. The previously calculated hash value and the hash of the third input parameter are hashed in a similar way.
3. This calculation is repeated for all remaining hash values of the original input.

:::note
the calculated hash values may be equal for the same input values of different argument types.
This affects for example integer types of different size, named and unnamed `Tuple` with the same data, `Map` and the corresponding `Array(Tuple(key, value))` type with the same data.
:::
","sipHash64(arg1[, arg2, ...])","- `arg1[, arg2, ...]` — A variable number of input arguments. [`Any`](/sql-reference/data-types)
","","Returns a computed hash value of the input arguments. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT sipHash64(array('e','x','a'), 'mple', 10, toDateTime('2019-06-15 23:00:00')) AS SipHash, toTypeName(SipHash) AS type;
```

```response title=Response
┌──────────────SipHash─┬─type───┐
│ 11400366955626497465 │ UInt64 │
└──────────────────────┴────────┘
```

","1.1","Hash"
"25.9.2.1","catboostEvaluate",0,0,"","","System","","","","","","","",""
"25.9.2.1","randNormal",0,0,"","","System","
Returns a random Float64 number drawn from a [normal distribution](https://en.wikipedia.org/wiki/Normal_distribution).
    ","randNormal(mean, stddev[, x])","- `mean` — The mean value of distribution [`Float64`](/sql-reference/data-types/float)
- `stddev` — The standard deviation of the distribution [`Float64`](/sql-reference/data-types/float)
- `x` — Optional and ignored. The only purpose of the argument is to prevent [common subexpression elimination](/sql-reference/functions/overview#common-subexpression-elimination) when the same function call is used multiple times in a query. [`Any`](/sql-reference/data-types)
","","Returns a random Float64 number drawn from the specified normal distribution. [`Float64`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT randNormal(10, 2) FROM numbers(5)
```

```response title=Response
┌──randNormal(10, 2)─┐
│ 13.389228911709653 │
│  8.622949707401295 │
│ 10.801887062682981 │
│ 4.5220192605895315 │
│ 10.901239123982567 │
└────────────────────┘
```

","22.10","Random Number"
"25.9.2.1","arrayReverseFill",0,0,"","","System","
The `arrayReverseFill` function sequentially processes a source array from the last
element to the first, evaluating a lambda condition at each position using elements
from the source and condition arrays. When the condition evaluates to false at
position i, the function replaces that element with the element at position i+1
from the current state of the array. The last element is always preserved
regardless of any condition.
    ","arrayReverseFill(func(x[, y1, ..., yN]), source_arr[, cond1_arr, ... , condN_arr])","- `func(x[, y1, ..., yN])` — A lambda function which operates on elements of the source array (`x`) and condition arrays (`y`). [`Lambda function`](/sql-reference/functions/overview#arrow-operator-and-lambda)
- `source_arr` — The source array to process. [`Array(T)`](/sql-reference/data-types/array)
- `[, cond1_arr, ... , condN_arr]` — Optional. N condition arrays providing additional arguments to the lambda function. [`Array(T)`](/sql-reference/data-types/array)
","","Returns an array with elements of the source array replaced by the results of the lambda. [`Array(T)`](/sql-reference/data-types/array)","**Example with a single array**

```sql title=Query
SELECT arrayReverseFill(x -> not isNull(x), [1, null, 2, null]) AS res
```

```response title=Response
[1, 2, 2, NULL]
```

**Example with two arrays**

```sql title=Query
SELECT arrayReverseFill(x, y, z -> x > y AND x < z, [5, 3, 6, 2], [4, 7, 1, 3], [10, 2, 8, 5]) AS res;
```

```response title=Response
[5, 6, 6, 2]
```

","20.1","Arrays"
"25.9.2.1","in",0,0,"","","System","","","","","","","",""
"25.9.2.1","xxh3",0,0,"","","System","Computes a [XXH3](https://github.com/Cyan4973/xxHash) 64-bit hash value.","xxh3(expr)","- `expr` — A list of expressions of any data type. [`Any`](/sql-reference/data-types)
","","Returns the computed 64-bit `xxh3` hash value [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT xxh3('ClickHouse')
```

```response title=Response
18009318874338624809
```

","22.12","Hash"
"25.9.2.1","trimBoth",0,0,"","","System","
Removes the specified characters from the start and end of a string.
By default, removes common whitespace (ASCII) characters.
","trimBoth(s[, trim_characters])","- `s` — String to trim. [`String`](/sql-reference/data-types/string)
- `trim_characters` — Optional. Characters to trim. If not specified, common whitespace characters are removed. [`String`](/sql-reference/data-types/string)
","","Returns the string with specified characters trimmed from both ends. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT trimBoth('$$ClickHouse$$', '$')
```

```response title=Response
┌─trimBoth('$$⋯se$$', '$')─┐
│ ClickHouse               │
└──────────────────────────┘
```

","20.1","String"
"25.9.2.1","normalizeQueryKeepNames",0,0,"","","System","
Replaces literals and sequences of literals with placeholder `?` but does not replace complex aliases (containing whitespace, more than two digits or at least 36 bytes long such as UUIDs).
This helps better analyze complex query logs.
    ","normalizeQueryKeepNames(x)","- `x` — Sequence of characters. [`String`](/sql-reference/data-types/string)
","","Returns the given sequence of characters with placeholders. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT normalizeQuery('SELECT 1 AS aComplexName123'), normalizeQueryKeepNames('SELECT 1 AS aComplexName123')
```

```response title=Response
┌─normalizeQuery('SELECT 1 AS aComplexName123')─┬─normalizeQueryKeepNames('SELECT 1 AS aComplexName123')─┐
│ SELECT ? AS `?`                               │ SELECT ? AS aComplexName123                            │
└───────────────────────────────────────────────┴────────────────────────────────────────────────────────┘
```

","21.2","Other"
"25.9.2.1","getSubcolumn",0,0,"","","System","
Receives the expression or identifier and constant string with the name of subcolumn.

Returns requested subcolumn extracted from the expression.
","","","","","**getSubcolumn**

```sql title=Query
SELECT getSubcolumn(array_col, 'size0'), getSubcolumn(tuple_col, 'elem_name')
```

```response title=Response

```

","","Other"
"25.9.2.1","queryString",0,0,"","","System","
Returns the query string of a URL without the initial question mark, `#` and everything after `#`.
    ","queryString(url)","- `url` — URL. [`String`](/sql-reference/data-types/string)
","","Returns the query string of the URL without the initial question mark and fragment. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT queryString('https://clickhouse.com/docs?query=value&param=123#section');
```

```response title=Response
┌─queryString(⋯3#section')─┐
│ query=value&param=123    │
└──────────────────────────┘
```

","1.1","URL"
"25.9.2.1","toDateTime64",0,0,"","","System","
Converts an input value to a value of type [`DateTime64`](../data-types/datetime64.md).
    ","toDateTime64(expr, scale[, timezone])","- `expr` — Expression returning a number or a string representation of a number. [`Expression`](/sql-reference/data-types/special-data-types/expression)
- `scale` — Tick size (precision): 10^(-scale) seconds. [`UInt8`](/sql-reference/data-types/int-uint)
- `timezone` — Optional. Time zone for the specified `DateTime64` object. [`String`](/sql-reference/data-types/string)
","","Returns a calendar date and time of day, with sub-second precision. [`DateTime64`](/sql-reference/data-types/datetime64)","**The value is within the range**

```sql title=Query
SELECT toDateTime64('2025-01-01 00:00:00.000', 3) AS value, toTypeName(value);
```

```response title=Response
┌───────────────────value─┬─toTypeName(toDateTime64('2025-01-01 00:00:00.000', 3))─┐
│ 2025-01-01 00:00:00.000 │ DateTime64(3)                                          │
└─────────────────────────┴────────────────────────────────────────────────────────┘
```

**As decimal with precision**

```sql title=Query
SELECT toDateTime64(1546300800.000, 3) AS value, toTypeName(value);
-- Without the decimal point the value is still treated as Unix Timestamp in seconds
SELECT toDateTime64(1546300800000, 3) AS value, toTypeName(value);
```

```response title=Response
┌───────────────────value─┬─toTypeName(toDateTime64(1546300800000, 3))─┐
│ 2282-12-31 00:00:00.000 │ DateTime64(3)                              │
└─────────────────────────┴────────────────────────────────────────────┘
```

**With timezone**

```sql title=Query
SELECT toDateTime64('2025-01-01 00:00:00', 3, 'Asia/Istanbul') AS value, toTypeName(value);
```

```response title=Response
┌───────────────────value─┬─toTypeName(toDateTime64('2025-01-01 00:00:00', 3, 'Asia/Istanbul'))─┐
│ 2025-01-01 00:00:00.000 │ DateTime64(3, 'Asia/Istanbul')                                      │
└─────────────────────────┴─────────────────────────────────────────────────────────────────────┘
```

","20.1","Type Conversion"
"25.9.2.1","initializeAggregation",0,0,"","","System","
Calculates the result of an aggregate function based on a single value.
This function can be used to initialize aggregate functions with combinator [-State](../../sql-reference/aggregate-functions/combinators.md#-state).
You can create states of aggregate functions and insert them to columns of type [`AggregateFunction`](../../sql-reference/data-types/aggregatefunction.md) or use initialized aggregates as default values.
    ","initializeAggregation(aggregate_function, arg1[, arg2, ...])","- `aggregate_function` — Name of the aggregation function to initialize. [`String`](/sql-reference/data-types/string)
- `arg1[, arg2, ...]` — Arguments of the aggregate function. [`Any`](/sql-reference/data-types)
","","Returns the result of aggregation for every row passed to the function. The return type is the same as the return type of the function that `initializeAggregation` takes as a first argument. [`Any`](/sql-reference/data-types)","**Basic usage with uniqState**

```sql title=Query
SELECT uniqMerge(state) FROM (SELECT initializeAggregation('uniqState', number % 3) AS state FROM numbers(10000));
```

```response title=Response
┌─uniqMerge(state)─┐
│                3 │
└──────────────────┘
```

**Usage with sumState and finalizeAggregation**

```sql title=Query
SELECT finalizeAggregation(state), toTypeName(state) FROM (SELECT initializeAggregation('sumState', number % 3) AS state FROM numbers(5));
```

```response title=Response
┌─finalizeAggregation(state)─┬─toTypeName(state)─────────────┐
│                          0 │ AggregateFunction(sum, UInt8) │
│                          1 │ AggregateFunction(sum, UInt8) │
│                          2 │ AggregateFunction(sum, UInt8) │
│                          0 │ AggregateFunction(sum, UInt8) │
│                          1 │ AggregateFunction(sum, UInt8) │
└────────────────────────────┴───────────────────────────────┘
```

","20.6","Other"
"25.9.2.1","yesterday",0,0,"","","System","
Accepts zero arguments and returns yesterday's date at one of the moments of query analysis.
    ","yesterday()","","","Returns yesterday's date. [`Date`](/sql-reference/data-types/date)","**Get yesterday's date**

```sql title=Query
SELECT yesterday();
SELECT today() - 1;
```

```response title=Response
┌─yesterday()─┐
│  2025-06-09 │
└─────────────┘
┌─minus(today(), 1)─┐
│        2025-06-09 │
└───────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","wordShingleMinHashArgUTF8",0,0,"","","System","
Splits a UTF-8 string into parts (shingles) of `shinglesize` words each and returns the shingles with minimum and maximum word hashes, calculated by the [`wordShingleMinHashUTF8`](#wordShingleMinHashUTF8) function with the same input.
It is case sensitive.
","wordShingleMinHashArgUTF8(string[, shinglesize, hashnum])","- `string` — String for which to compute the hash. [`String`](/sql-reference/data-types/string)
- `shinglesize` — Optional. The size of a word shingle, any number from `1` to `25`. The default value is `3`. [`UInt8`](/sql-reference/data-types/int-uint)
- `hashnum` — Optional. The number of minimum and maximum hashes used to calculate the result, any number from `1` to `25`. The default value is `6`. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns a tuple with two tuples with `hashnum` word shingles each. [`Tuple(Tuple(String))`](/sql-reference/data-types/tuple)","**Usage example**

```sql title=Query
SELECT wordShingleMinHashArgUTF8('ClickHouse® is a column-oriented database management system (DBMS) for online analytical processing of queries (OLAP).', 1, 3) AS Tuple;
```

```response title=Response
┌─Tuple─────────────────────────────────────────────────────────────────┐
│ (('OLAP','database','analytical'),('online','oriented','processing')) │
└───────────────────────────────────────────────────────────────────────┘
```

","21.1","Hash"
"25.9.2.1","variantElement",0,0,"","","System","
Extracts a column with specified type from a `Variant` column.
","variantElement(variant, type_name, [, default_value])","- `variant` — Variant column - `type_name` — The name of the variant type to extract - `default_value` — The default value that will be used if variant doesn't have variant with specified type. Can be any type. Optional ","","","**Example**

```sql title=Query
CREATE TABLE test (v Variant(UInt64, String, Array(UInt64))) ENGINE = Memory;
INSERT INTO test VALUES (NULL), (42), ('Hello, World!'), ([1, 2, 3]);
SELECT v, variantElement(v, 'String'), variantElement(v, 'UInt64'), variantElement(v, 'Array(UInt64)') FROM test;
```

```response title=Response
┌─v─────────────┬─variantElement(v, 'String')─┬─variantElement(v, 'UInt64')─┬─variantElement(v, 'Array(UInt64)')─┐
│ ᴺᵁᴸᴸ          │ ᴺᵁᴸᴸ                        │                        ᴺᵁᴸᴸ │ []                                 │
│ 42            │ ᴺᵁᴸᴸ                        │                          42 │ []                                 │
│ Hello, World! │ Hello, World!               │                        ᴺᵁᴸᴸ │ []                                 │
│ [1,2,3]       │ ᴺᵁᴸᴸ                        │                        ᴺᵁᴸᴸ │ [1,2,3]                            │
└───────────────┴─────────────────────────────┴─────────────────────────────┴────────────────────────────────────┘
```

","","JSON"
"25.9.2.1","asinh",0,0,"","","System","
Returns the inverse hyperbolic sine.
","asinh(x)","- `x` — Hyperbolic sine of angle. Values from the interval: `-∞ < x < +∞`. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal*`](/sql-reference/data-types/decimal)
","","Returns the angle, in radians. Values from the interval: `-∞ < asinh(x) < +∞`. [`Float64`](/sql-reference/data-types/float)","**Basic usage**

```sql title=Query
SELECT asinh(0)
```

```response title=Response
0
```

","20.12","Mathematical"
"25.9.2.1","randUniform",0,0,"","","System","
Returns a random Float64 number drawn uniformly from the interval $[\min, \max]$.
    ","randUniform(min, max[, x])","- `min` — Left boundary of the range (inclusive). [`Float64`](/sql-reference/data-types/float)
- `max` — Right boundary of the range (inclusive). [`Float64`](/sql-reference/data-types/float)
- `x` — Optional and ignored. The only purpose of the argument is to prevent [common subexpression elimination](/sql-reference/functions/overview#common-subexpression-elimination) when the same function call is used multiple times in a query. [`Any`](/sql-reference/data-types)
","","Returns a random number drawn uniformly from the interval formed by `min` and `max`. [`Float64`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT randUniform(5.5, 10) FROM numbers(5)
```

```response title=Response
┌─randUniform(5.5, 10)─┐
│    8.094978491443102 │
│   7.3181248914450885 │
│    7.177741903868262 │
│    6.483347380953762 │
│    6.122286382885112 │
└──────────────────────┘
```

","22.10","Random Number"
"25.9.2.1","randomFixedString",0,0,"","","System","
Generates a random fixed-size string with the specified number of character.
The returned characters are not necessarily ASCII characters, i.e. they may not be printable.
    ","randomFixedString(length)","- `length` — Length of the string in bytes. [`UInt*`](/sql-reference/data-types/int-uint)
","","Returns a string filled with random bytes. [`FixedString`](/sql-reference/data-types/fixedstring)","**Usage example**

```sql title=Query
SELECT randomFixedString(13) AS rnd, toTypeName(rnd)
```

```response title=Response
┌─rnd──────┬─toTypeName(randomFixedString(13))─┐
│ j▒h㋖HɨZ'▒ │ FixedString(13)                 │
└──────────┴───────────────────────────────────┘
```

","20.5","Random Number"
"25.9.2.1","globalNotNullInIgnoreSet",0,0,"","","System","","","","","","","",""
"25.9.2.1","toUInt64OrZero",0,0,"","","System","
Like [`toUInt64`](#toUInt64), this function converts an input value to a value of type [`UInt64`](../data-types/int-uint.md) but returns `0` in case of an error.

Supported arguments:
- String representations of (U)Int*.

Unsupported arguments (return `0`):
- String representations of Float* values, including `NaN` and `Inf`.
- String representations of binary and hexadecimal values, e.g. `SELECT toUInt64OrZero('0xc0fe');`.

:::note
If the input value cannot be represented within the bounds of [`UInt64`](../data-types/int-uint.md), overflow or underflow of the result occurs.
This is not considered an error.
:::

See also:
- [`toUInt64`](#toUInt64).
- [`toUInt64OrNull`](#toUInt64OrNull).
- [`toUInt64OrDefault`](#toUInt64OrDefault).
    ","toUInt64OrZero(x)","- `x` — A String representation of a number. [`String`](/sql-reference/data-types/string)
","","Returns a value of type UInt64, otherwise `0` if the conversion is unsuccessful. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT
    toUInt64OrZero('64'),
    toUInt64OrZero('abc')
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toUInt64OrZero('64'):  64
toUInt64OrZero('abc'): 0
```

","1.1","Type Conversion"
"25.9.2.1","dictGetUInt16",0,0,"","","System","
Retrieves values from a dictionary.

Accepts 3 parameters:
-- name of the dictionary;
-- name of the column of the dictionary or tuple of column names;
-- key value - expression returning dictionary key-type value or tuple-type value - depending on the dictionary configuration;

Returned value: value of the dictionary attribute parsed in the UInt16 if key is found, otherwise <null_value> element specified in the dictionary configuration.

Throws an exception if cannot parse the value of the attribute or the value does not match the attribute data type.
","","","","","","","Dictionary"
"25.9.2.1","parseDateTime64InJodaSyntaxOrZero",0,0,"","","System","","","","","","","",""
"25.9.2.1","YYYYMMDDhhmmssToDateTime",0,1,"","","System","
Converts a number containing the year, month, day, hour, minute, and second to a `DateTime`.
This function is the opposite of function [`toYYYYMMDDhhmmss()`](/sql-reference/functions/date-time-functions#toYYYYMMDDhhmmss).
The output is undefined if the input does not encode a valid `DateTime` value.
    ","YYYYMMDDhhmmssToDateTime(YYYYMMDDhhmmss[, timezone])","- `YYYYMMDDhhmmss` — Number containing the year, month, day, hour, minute, and second. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
- `timezone` — Timezone name. [`String`](/sql-reference/data-types/string)
","","Returns a `DateTime` value from the provided arguments [`DateTime`](/sql-reference/data-types/datetime)","**Example**

```sql title=Query
SELECT YYYYMMDDToDateTime(20230911131415);
```

```response title=Response
┌──────YYYYMMDDhhmmssToDateTime(20230911131415)─┐
│                           2023-09-11 13:14:15 │
└───────────────────────────────────────────────┘
```

","23.9","Dates and Times"
"25.9.2.1","readWKTPolygon",0,0,"","","System","","","","","","","",""
"25.9.2.1","arrayShiftLeft",0,0,"","","System","
Shifts an array to the left by the specified number of elements.
New elements are filled with the provided argument or the default value of the array element type.
If the number of elements is negative, the array is shifted to the right.
    ","arrayShiftLeft(arr, n[, default])","- `arr` — The array for which to shift the elements.[`Array(T)`](/sql-reference/data-types/array). - `n` — Number of elements to shift.[`(U)Int8/16/32/64`](/sql-reference/data-types/int-uint). - `default` — Optional. Default value for new elements. ","","An array shifted to the left by the specified number of elements [`Array(T)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT arrayShiftLeft([1,2,3,4,5,6], 2) as res;
```

```response title=Response
[3,4,5,6,0,0]
```

**Negative value of n**

```sql title=Query
SELECT arrayShiftLeft([1,2,3,4,5,6], -2) as res;
```

```response title=Response
[0,0,1,2,3,4]
```

**Using a default value**

```sql title=Query
SELECT arrayShiftLeft([1,2,3,4,5,6], 2, 42) as res;
```

```response title=Response
[3,4,5,6,42,42]
```

","23.8","Arrays"
"25.9.2.1","netloc",0,0,"","","System","
Extracts network locality (`username:password@host:port`) from a URL.
    ","netloc(url)","- `url` — URL. [`String`](/sql-reference/data-types/string)
","","Returns `username:password@host:port` from a given URL. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT netloc('http://paul@www.example.com:80/');
```

```response title=Response
┌─netloc('http⋯e.com:80/')─┐
│ paul@www.example.com:80  │
└──────────────────────────┘
```

","20.5","URL"
"25.9.2.1","regionToDistrict",0,0,"","","System","","","","","","","",""
"25.9.2.1","reinterpret",0,0,"","","System","","","","","","","",""
"25.9.2.1","appendTrailingCharIfAbsent",0,0,"","","System","
Appends character `c` to string `s` if `s` is non-empty and does not end with character `c`.
","appendTrailingCharIfAbsent(s, c)","- `s` — Input string. [`String`](/sql-reference/data-types/string)
- `c` — Character to append if absent. [`String`](/sql-reference/data-types/string)
","","Returns string `s` with character `c` appended if `s` does not end with `c`. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT appendTrailingCharIfAbsent('https://example.com', '/');
```

```response title=Response
┌─appendTraili⋯.com', '/')─┐
│ https://example.com/     │
└──────────────────────────┘
```

","1.1","String"
"25.9.2.1","negate",0,0,"","","System","Negates the argument `x`. The result is always signed.","negate(x)","- `x` — The value to negate. ","","Returns -x from x","**Usage example**

```sql title=Query
SELECT negate(10)
```

```response title=Response
-10
```

","1.1","Arithmetic"
"25.9.2.1","queryID",0,0,"","","System","
Returns the ID of the current query.
Other parameters of a query can be extracted from field `query_id` in the [`system.query_log`](../../operations/system-tables/query_log.md) table.

In contrast to [`initialQueryID`](#initialqueryid) function, `queryID` can return different results on different shards.
","queryID()","","","Returns the ID of the current query. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
CREATE TABLE tmp (str String) ENGINE = Log;
INSERT INTO tmp (*) VALUES ('a');
SELECT count(DISTINCT t) FROM (SELECT queryID() AS t FROM remote('127.0.0.{1..3}', currentDatabase(), 'tmp') GROUP BY queryID());
```

```response title=Response
┌─count(DISTINCT t)─┐
│                 3 │
└───────────────────┘
```

","21.9","Other"
"25.9.2.1","reinterpretAsFixedString",0,0,"","","System","","","","","","","",""
"25.9.2.1","reinterpretAsString",0,0,"","","System","","","","","","","",""
"25.9.2.1","sipHash128ReferenceKeyed",0,0,"","","System","
Same as [`sipHash128Reference`](#sipHash128Reference) but additionally takes an explicit key argument instead of using a fixed key.
    ","sipHash128ReferenceKeyed((k0, k1), arg1[, arg2, ...])","- `(k0, k1)` — Tuple of two values representing the key [`Tuple(UInt64, UInt64)`](/sql-reference/data-types/tuple)
- `arg1[, arg2, ...]` — A variable number of input arguments for which to compute the hash. [`Any`](/sql-reference/data-types)
","","Returns the computed 128-bit `SipHash` hash value of the input arguments. [`FixedString(16)`](/sql-reference/data-types/fixedstring)","**Usage example**

```sql title=Query
SELECT hex(sipHash128Reference('foo', '', 3));
```

```response title=Response
┌─hex(sipHash128Reference('foo', '', 3))─┐
│ 4D1BE1A22D7F5933C0873E1698426260       │
└────────────────────────────────────────┘
```

","23.2","Hash"
"25.9.2.1","mapPartialSort",0,0,"","","System","The same as arrayReverseSort.","","","","","**mapPartialSort**

```sql title=Query
SELECT mapPartialSort((k, v) -> v, 2, map('k1', 3, 'k2', 1, 'k3', 2))
```

```response title=Response

```

","23.4","Map"
"25.9.2.1","toLastDayOfMonth",0,0,"","","System","
Rounds up a date or date with time to the last day of the month.

:::note
The return type can be configured by setting [`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions).
:::
    ","toLastDayOfMonth(value)","- `value` — The date or date with time to round up to the last day of the month. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
","","Returns the date of the last day of the month for the given date or date with time. [`Date`](/sql-reference/data-types/date)","**Round up to the last day of the month**

```sql title=Query
SELECT toLastDayOfMonth(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toLastDayOfMonth(toDateTime('2023-04-21 10:20:30'))─┐
│                                          2023-04-30 │
└─────────────────────────────────────────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","randomPrintableASCII",0,0,"","","System","
Generates a random [ASCII](https://en.wikipedia.org/wiki/ASCII#Printable_characters) string with the specified number of characters.

If you pass `length < 0`, the behavior of the function is undefined.
    ","randomPrintableASCII(length[, x])","- `length` — String length in bytes. [`(U)Int*`](/sql-reference/data-types/int-uint)
- `x` — Optional and ignored. The only purpose of the argument is to prevent [common subexpression elimination](/sql-reference/functions/overview#common-subexpression-elimination) when the same function call is used multiple times in a query. [`Any`](/sql-reference/data-types)
","","Returns a string with a random set of ASCII printable characters. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT number, randomPrintableASCII(30) AS str, length(str) FROM system.numbers LIMIT 3
```

```response title=Response
┌─number─┬─str────────────────────────────┬─length(randomPrintableASCII(30))─┐
│      0 │ SuiCOSTvC0csfABSw=UcSzp2.`rv8x │                               30 │
│      1 │ 1Ag NlJ &RCN:*>HVPG;PE-nO""SUFD │                               30 │
│      2 │ /""+<""with:=LjJ Vm!c&hI*m#XTfzz │                               30 │
└────────┴────────────────────────────────┴──────────────────────────────────┘
```

","20.1","Random Number"
"25.9.2.1","notEquals",0,0,"","","System","Compares two values for inequality.","notEquals(a, b)
    -- a != b
    -- a <> b","- `a` — First value.<sup>[*](#comparison-rules)</sup> - `b` — Second value.<sup>[*](#comparison-rules)</sup> ","","Returns `1` if `a` is not equal to `b`, otherwise `0`. [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT 1 != 2, 1 != 1;
```

```response title=Response
┌─notEquals(1, 2)─┬─notEquals(1, 1)─┐
│               1 │               0 │
└─────────────────┴─────────────────┘
```

","1.1","Comparison"
"25.9.2.1","snowflakeToDateTime",0,0,"","","System","
<DeprecatedBadge/>

:::warning
This function is deprecated and can only be used if setting [`allow_deprecated_snowflake_conversion_functions`](../../operations/settings/settings.md#allow_deprecated_snowflake_conversion_functions) is enabled.
The function will be removed at some point in future.

Please use function [`snowflakeIDToDateTime`](#snowflakeIDToDateTime) instead.
:::

Extracts the timestamp component of a [Snowflake ID](https://en.wikipedia.org/wiki/Snowflake_ID) in [DateTime](../data-types/datetime.md) format.
    ","snowflakeToDateTime(value[, time_zone])","- `value` — Snowflake ID. [`Int64`](/sql-reference/data-types/int-uint)
- `time_zone` — Optional. [Timezone](/operations/server-configuration-parameters/settings.md#timezone). The function parses `time_string` according to the timezone. [`String`](/sql-reference/data-types/string)
","","Returns the timestamp component of `value`. [`DateTime`](/sql-reference/data-types/datetime)","**Usage example**

```sql title=Query
SELECT snowflakeToDateTime(CAST('1426860702823350272', 'Int64'), 'UTC');
```

```response title=Response
┌─snowflakeToDateTime(CAST('1426860702823350272', 'Int64'), 'UTC')─┐
│                                              2021-08-15 10:57:56 │
└──────────────────────────────────────────────────────────────────┘
```

","21.10","UUID"
"25.9.2.1","left",0,1,"","","System","
Returns a substring of string `s` with a specified `offset` starting from the left.
","left(s, offset)","- `s` — The string to calculate a substring from. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring)
- `offset` — The number of bytes of the offset. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns:
- For positive `offset`, a substring of `s` with `offset` many bytes, starting from the left of the string.
- For negative `offset`, a substring of `s` with `length(s) - |offset|` bytes, starting from the left of the string.
- An empty string if `length` is `0`.
     [`String`](/sql-reference/data-types/string)","**Positive offset**

```sql title=Query
SELECT left('Hello World', 5)
```

```response title=Response
Helllo
```

**Negative offset**

```sql title=Query
SELECT left('Hello World', -6)
```

```response title=Response
Hello
```

","22.1","String"
"25.9.2.1","reinterpretAsDateTime",0,0,"","","System","","","","","","","",""
"25.9.2.1","toIntervalDay",0,0,"","","System","
Returns an interval of `n` days of data type [`IntervalDay`](../data-types/special-data-types/interval.md).
    ","toIntervalDay(n)","- `n` — Number of days. Integer numbers or string representations thereof, and float numbers. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`String`](/sql-reference/data-types/string)
","","Returns an interval of `n` days. [`Interval`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
WITH
    toDate('2025-06-15') AS date,
    toIntervalDay(5) AS interval_to_days
SELECT date + interval_to_days AS result
```

```response title=Response
┌─────result─┐
│ 2025-06-20 │
└────────────┘
```

","1.1","Type Conversion"
"25.9.2.1","reinterpretAsFloat32",0,0,"","","System","","","","","","","",""
"25.9.2.1","toStartOfMillisecond",0,0,"","","System","
Rounds down a date with time to the start of the milliseconds.
    ","toStartOfMillisecond(datetime, [timezone])","- `datetime` — Date and time. [`DateTime64`](/sql-reference/data-types/datetime64)
- `timezone` — Optional. Timezone for the returned value. If not specified, the function uses the timezone of the `value` parameter. [`String`](/sql-reference/data-types/string)
","","Input value with sub-milliseconds. [`DateTime64`](/sql-reference/data-types/datetime64)","**Query without timezone**

```sql title=Query
WITH toDateTime64('2020-01-01 10:20:30.999999999', 9) AS dt64
SELECT toStartOfMillisecond(dt64);
```

```response title=Response
┌────toStartOfMillisecond(dt64)─┐
│ 2020-01-01 10:20:30.999000000 │
└───────────────────────────────┘
```

**Query with timezone**

```sql title=Query
WITH toDateTime64('2020-01-01 10:20:30.999999999', 9) AS dt64
SELECT toStartOfMillisecond(dt64, 'Asia/Istanbul');
```

```response title=Response
┌─toStartOfMillisecond(dt64, 'Asia/Istanbul')─┐
│               2020-01-01 12:20:30.999000000 │
└─────────────────────────────────────────────┘
```

","22.6","Dates and Times"
"25.9.2.1","reinterpretAsInt64",0,0,"","","System","","","","","","","",""
"25.9.2.1","toTimeWithFixedDate",0,0,"","","System","
Extracts the time component of a date or date with time.
The returned result is an offset to a fixed point in time, currently `1970-01-02`,
but the exact point in time is an implementation detail which may change in future.

`toTime` should therefore not be used standalone.
The main purpose of the function is to calculate the time difference between two dates or dates with time, e.g., `toTime(dt1) - toTime(dt2)`.
    ","toTime(date[, timezone])","- `date` — Date to convert to a time. [`Date`](/sql-reference/data-types/date) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
- `timezone` — Optional. Timezone for the returned value. [`String`](/sql-reference/data-types/string)
","","Returns the time component of a date or date with time in the form of an offset to a fixed point in time (selected as 1970-01-02, currently). [`DateTime`](/sql-reference/data-types/datetime)","**Calculate the time difference between two dates**

```sql title=Query
SELECT toTime('2025-06-15 12:00:00'::DateTime) - toTime('2024-05-10 11:00:00'::DateTime) AS result, toTypeName(result)
```

```response title=Response
┌─result─┬─toTypeName(result)─┐
│   3600 │ Int32              │
└────────┴────────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","reinterpretAsInt16",0,0,"","","System","","","","","","","",""
"25.9.2.1","normalizedQueryHashKeepNames",0,0,"","","System","
Like [`normalizedQueryHash`](#normalizedQueryHash) it returns identical 64 bit hash values without the values of literals for similar queries, but it does not replace complex aliases (containing whitespace, more than two digits or at least 36 bytes long such as UUIDs) with a placeholder before hashing.
Can be helpful in analyzing query logs.
    ","normalizedQueryHashKeepNames(x)","- `x` — Sequence of characters. [`String`](/sql-reference/data-types/string)
","","Returns a 64 bit hash value. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT normalizedQueryHash('SELECT 1 AS `xyz123`') != normalizedQueryHash('SELECT 1 AS `abc123`') AS normalizedQueryHash;
SELECT normalizedQueryHashKeepNames('SELECT 1 AS `xyz123`') != normalizedQueryHashKeepNames('SELECT 1 AS `abc123`') AS normalizedQueryHashKeepNames;
```

```response title=Response
┌─normalizedQueryHash─┐
│                   0 │
└─────────────────────┘
┌─normalizedQueryHashKeepNames─┐
│                            1 │
└──────────────────────────────┘
```

","21.2","Other"
"25.9.2.1","toUInt256OrZero",0,0,"","","System","
Like [`toUInt256`](#toUInt256), this function converts an input value to a value of type [`UInt256`](../data-types/int-uint.md) but returns `0` in case of an error.

Supported arguments:
- String representations of (U)Int*.

Unsupported arguments (return `0`):
- String representations of Float* values, including `NaN` and `Inf`.
- String representations of binary and hexadecimal values, e.g. `SELECT toUInt256OrZero('0xc0fe');`.

:::note
If the input value cannot be represented within the bounds of [`UInt256`](../data-types/int-uint.md), overflow or underflow of the result occurs.
This is not considered an error.
:::

See also:
- [`toUInt256`](#toUInt256).
- [`toUInt256OrNull`](#toUInt256OrNull).
- [`toUInt256OrDefault`](#toUInt256OrDefault).
    ","toUInt256OrZero(x)","- `x` — A String representation of a number. [`String`](/sql-reference/data-types/string)
","","Returns a value of type UInt256, otherwise `0` if the conversion is unsuccessful. [`UInt256`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT
    toUInt256OrZero('256'),
    toUInt256OrZero('abc')
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toUInt256OrZero('256'): 256
toUInt256OrZero('abc'): 0
```

","20.8","Type Conversion"
"25.9.2.1","tupleModulo",0,0,"","","System","
Returns a tuple of the remainders (moduli) of division operations of two tuples.
","tupleModulo(tuple_num, tuple_mod)","- `tuple_num` — Tuple of numerator values. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) or [`Tuple(Float*)`](/sql-reference/data-types/tuple) or [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
- `tuple_mod` — Tuple of modulus values. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) or [`Tuple(Float*)`](/sql-reference/data-types/tuple) or [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
","","Returns tuple of the remainders of division. An error is thrown for division by zero. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) or [`Tuple(Float*)`](/sql-reference/data-types/tuple) or [`Tuple(Decimal)`](/sql-reference/data-types/tuple)","**Basic usage**

```sql title=Query
SELECT tupleModulo((15, 10, 5), (5, 3, 2))
```

```response title=Response
(0, 1, 1)
```

","23.8","Tuple"
"25.9.2.1","toStringCutToZero",0,0,"","","System","","","","","","","",""
"25.9.2.1","toUInt8OrZero",0,0,"","","System","
Like [`toUInt8`](#toUInt8), this function converts an input value to a value of type [`UInt8`](../data-types/int-uint.md) but returns `0` in case of an error.

Supported arguments:
- String representations of (U)Int8/16/32/128/256.

Unsupported arguments (return `0`):
- String representations of ordinary Float* values, including `NaN` and `Inf`.
- String representations of binary and hexadecimal values, e.g. `SELECT toUInt8OrZero('0xc0fe');`.

:::note
If the input value cannot be represented within the bounds of [`UInt8`](../data-types/int-uint.md), overflow or underflow of the result occurs.
This is not considered an error.
:::

See also:
- [`toUInt8`](#toUInt8).
- [`toUInt8OrNull`](#toUInt8OrNull).
- [`toUInt8OrDefault`](#toUInt8OrDefault).
    ","toUInt8OrZero(x)","- `x` — A String representation of a number. [`String`](/sql-reference/data-types/string)
","","Returns a value of type UInt8, otherwise `0` if the conversion is unsuccessful. [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT
    toUInt8OrZero('-8'),
    toUInt8OrZero('abc')
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toUInt8OrZero('-8'):  0
toUInt8OrZero('abc'): 0
```

","1.1","Type Conversion"
"25.9.2.1","not",0,1,"","","System","
Calculates the logical negation of a value.
Zero as an argument is considered `false`, non-zero values are considered `true`.
","not(val)","- `val` — The value. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns:
- `1`, if `val` evaluates to `false`
- `0`, if `val` evaluates to `true`
- `NULL`, if `val` is `NULL`.
         [`Nullable(UInt8)`](/sql-reference/data-types/nullable)","**Basic usage**

```sql title=Query
SELECT NOT(1);
```

```response title=Response
0
```

","1.1","Logical"
"25.9.2.1","reinterpretAsInt8",0,0,"","","System","","","","","","","",""
"25.9.2.1","fromUnixTimestamp",0,0,"","","System","
This function converts a Unix timestamp to a calendar date and a time of a day.

It can be called in two ways:

- When given a single argument of type [`Integer`](../data-types/int-uint.md), it returns a value of type [`DateTime`](../data-types/datetime.md), i.e. behaves like [`toDateTime`](../../sql-reference/functions/type-conversion-functions.md#todatetime).
- When given two or three arguments where the first argument is a value of type [`Integer`](../data-types/int-uint.md), [`Date`](../data-types/date.md), [`Date32`](../data-types/date32.md), [`DateTime`](../data-types/datetime.md) or [`DateTime64`](../data-types/datetime64.md), the second argument is a constant format string and the third argument is an optional constant time zone string, the function returns a value of type [`String`](../data-types/string.md), i.e. it behaves like [`formatDateTime`](#formatDateTime).
  In this case, [MySQL's datetime format style](https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_date-format) is used.
    ","fromUnixTimestamp(timestamp)
fromUnixTimestamp(timestamp[, format[, timezone]])","- `timestamp` — Unix timestamp or date/date with time value. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
- `format` — Optional. Constant format string for output formatting. [`String`](/sql-reference/data-types/string)
- `timezone` — Optional. Constant time zone string. [`String`](/sql-reference/data-types/string)
","","Returns `DateTime` of the timestamp when called with one argument, or a String  when called with two or three arguments. [`DateTime`](/sql-reference/data-types/datetime) or [`String`](/sql-reference/data-types/string)","**Convert Unix timestamp to DateTime**

```sql title=Query
SELECT fromUnixTimestamp(423543535)
```

```response title=Response
┌─fromUnixTimestamp(423543535)─┐
│          1983-06-04 10:58:55 │
└──────────────────────────────┘
```

**Convert Unix timestamp with format**

```sql title=Query
SELECT fromUnixTimestamp(1234334543, '%Y-%m-%d %R:%S') AS DateTime
```

```response title=Response
┌─DateTime────────────┐
│ 2009-02-11 14:42:23 │
└─────────────────────┘
```

","20.8","Dates and Times"
"25.9.2.1","LinfNorm",0,0,"","","System","
Calculates the maximum of absolute elements of a vector.
    ","LinfNorm(vector)","- `vector` — Vector or tuple of numeric values. [`Array(T)`](/sql-reference/data-types/array) or [`Tuple(T)`](/sql-reference/data-types/tuple)
","","Returns the Linf-norm or the maximum absolute value. [`Float64`](/sql-reference/data-types/float)","**Basic usage**

```sql title=Query
SELECT LinfNorm((1, -2))
```

```response title=Response
┌─LinfNorm((1, -2))─┐
│                 2 │
└───────────────────┘
```

","21.11","Distance"
"25.9.2.1","reinterpretAsUInt8",0,0,"","","System","","","","","","","",""
"25.9.2.1","toUInt8",0,0,"","","System","
Converts an input value to a value of type [`UInt8`](../data-types/int-uint.md).
Throws an exception in case of an error.

Supported arguments:
- Values or string representations of type (U)Int*.
- Values of type Float*.

Unsupported arguments:
- String representations of Float* values, including `NaN` and `Inf`.
- String representations of binary and hexadecimal values, e.g. `SELECT toUInt8('0xc0fe');`.

:::note
If the input value cannot be represented within the bounds of [UInt8](../data-types/int-uint.md), overflow or underflow of the result occurs.
This is not considered an error.
For example: `SELECT toUInt8(256) == 0;`.
:::

:::note
The function uses [rounding towards zero](https://en.wikipedia.org/wiki/Rounding#Rounding_towards_zero), meaning it truncates fractional digits of numbers.
:::

See also:
- [`toUInt8OrZero`](#toUInt8OrZero).
- [`toUInt8OrNull`](#toUInt8OrNull).
- [`toUInt8OrDefault`](#toUInt8OrDefault).
    ","toUInt8(expr)","- `expr` — Expression returning a number or a string representation of a number. [`Expression`](/sql-reference/data-types/special-data-types/expression)
","","Returns an 8-bit unsigned integer value. [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT
    toUInt8(8),
    toUInt8(8.8),
    toUInt8('8')
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toUInt8(8):   8
toUInt8(8.8): 8
toUInt8('8'): 8
```

","1.1","Type Conversion"
"25.9.2.1","range",0,0,"","","System","
Returns an array of numbers from `start` to `end - 1` by `step`.

The supported types are:
- `UInt8/16/32/64`
- `Int8/16/32/64]`

- All arguments `start`, `end`, `step` must be one of the above supported types. Elements of the returned array will be a super type of the arguments.
- An exception is thrown if the function returns an array with a total length more than the number of elements specified by setting [`function_range_max_elements_in_block`](../../operations/settings/settings.md#function_range_max_elements_in_block).
- Returns `NULL` if any argument has Nullable(nothing) type. An exception is thrown if any argument has `NULL` value (Nullable(T) type).
    ","range([start, ] end [, step])","- `start` — Optional. The first element of the array. Required if `step` is used. Default value: `0`. - `end` — Required. The number before which the array is constructed. - `step` — Optional. Determines the incremental step between each element in the array. Default value: `1`. ","","Array of numbers from `start` to `end - 1` by `step`. [`Array(T)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT range(5), range(1, 5), range(1, 5, 2), range(-1, 5, 2);
```

```response title=Response
┌─range(5)────┬─range(1, 5)─┬─range(1, 5, 2)─┬─range(-1, 5, 2)─┐
│ [0,1,2,3,4] │ [1,2,3,4]   │ [1,3]          │ [-1,1,3]        │
└─────────────┴─────────────┴────────────────┴─────────────────┘
```

","1.1","Arrays"
"25.9.2.1","kafkaMurmurHash",0,0,"","","System","
Calculates the 32-bit [MurmurHash2](https://github.com/aappleby/smhasher) hash of the input value using the same seed as used by [Kafka](https://github.com/apache/kafka/blob/461c5cfe056db0951d9b74f5adc45973670404d7/clients/src/main/java/org/apache/kafka/common/utils/Utils.java#L482) and without the highest bit to be compatible with [Default Partitioner](https://github.com/apache/kafka/blob/139f7709bd3f5926901a21e55043388728ccca78/clients/src/main/java/org/apache/kafka/clients/producer/internals/BuiltInPartitioner.java#L328).
","kafkaMurmurHash(arg1[, arg2, ...])","- `arg1[, arg2, ...]` — A variable number of parameters for which to compute the hash. [`Any`](/sql-reference/data-types)
","","Returns the calculated hash value of the input arguments. [`UInt32`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT
    kafkaMurmurHash('foobar') AS res1,
    kafkaMurmurHash(array('e','x','a'), 'mple', 10, toDateTime('2019-06-15 23:00:00')) AS res2
```

```response title=Response
┌───────res1─┬─────res2─┐
│ 1357151166 │ 85479775 │
└────────────┴──────────┘
```

","23.4","Hash"
"25.9.2.1","notIn",0,0,"","","System","","","","","","","",""
"25.9.2.1","dictGetUInt8OrDefault",0,0,"","","System","
Retrieves values from a dictionary.

Accepts 4 parameters:
-- name of the dictionary;
-- name of the column of the dictionary or tuple of column names;
-- key value - expression returning dictionary key-type value or tuple-type value - depending on the dictionary configuration;
-- default values returned if the dictionary does not contain a row with the key value;

Returned value: value of the dictionary attribute parsed in the UInt8 if key is found, otherwise default value.

Throws an exception if cannot parse the value of the attribute or the value does not match the attribute data type.
","","","","","","","Dictionary"
"25.9.2.1","arrayIntersect",0,0,"","","System","Takes multiple arrays and returns an array with elements which are present in all source arrays. The result contains only unique values.","arrayIntersect(arr, arr1, ..., arrN)","- `arrN` — N arrays from which to make the new array. [`Array(T)`](/sql-reference/data-types/array). ","","Returns an array with distinct elements that are present in all N arrays [`Array(T)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT
arrayIntersect([1, 2], [1, 3], [2, 3]) AS empty_intersection,
arrayIntersect([1, 2], [1, 3], [1, 4]) AS non_empty_intersection
```

```response title=Response
┌─non_empty_intersection─┬─empty_intersection─┐
│ []                     │ [1]                │
└────────────────────────┴────────────────────┘
```

","1.1","Arrays"
"25.9.2.1","subtractDays",0,0,"","","System","
Subtracts a specified number of days from a date, a date with time or a string-encoded date or date with time.
    ","subtractDays(datetime, num)","- `datetime` — Date or date with time to subtract specified number of days from. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64) or [`String`](/sql-reference/data-types/string)
- `num` — Number of days to subtract. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns `datetime` minus `num` days [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)","**Subtract days from different date types**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractDays(date, 31) AS subtract_days_with_date,
    subtractDays(date_time, 31) AS subtract_days_with_date_time,
    subtractDays(date_time_string, 31) AS subtract_days_with_date_time_string
```

```response title=Response
┌─subtract_days_with_date─┬─subtract_days_with_date_time─┬─subtract_days_with_date_time_string─┐
│              2023-12-01 │          2023-12-01 00:00:00 │             2023-12-01 00:00:00.000 │
└─────────────────────────┴──────────────────────────────┴─────────────────────────────────────┘
```

**Using alternative INTERVAL syntax**

```sql title=Query
SELECT dateSub('1998-06-16'::Date, INTERVAL 10 day)
```

```response title=Response
┌─minus(CAST('⋯valDay(10))─┐
│               1998-06-06 │
└──────────────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","ngramSimHashCaseInsensitive",0,0,"","","System","
Splits a ASCII string into n-grams of `ngramsize` symbols and returns the n-gram `simhash`.
It is case insensitive.

Can be used for detection of semi-duplicate strings with [`bitHammingDistance`](/sql-reference/functions/bit-functions#bitHammingDistance).
The smaller the [Hamming distance](https://en.wikipedia.org/wiki/Hamming_distance) of the calculated `simhashes` of two strings, the more likely these strings are the same.
","ngramSimHashCaseInsensitive(string[, ngramsize])","- `string` — String for which to compute the case insensitive `simhash`. [`String`](/sql-reference/data-types/string)
- `ngramsize` — Optional. The size of an n-gram, any number from `1` to `25`. The default value is `3`. [`UInt8`](/sql-reference/data-types/int-uint)
","","Hash value. [UInt64](../data-types/int-uint.md). [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT ngramSimHashCaseInsensitive('ClickHouse') AS Hash;
```

```response title=Response
┌──────Hash─┐
│ 562180645 │
└───────────┘
```

","21.1","Hash"
"25.9.2.1","repeat",0,1,"","","System","
Concatenates a string as many times with itself as specified.

","repeat(s, n)","- `s` — The string to repeat. [`String`](/sql-reference/data-types/string)
- `n` — The number of times to repeat the string. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","A string containing string `s` repeated `n` times. If `n` <= 0, the function returns the empty string. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT repeat('abc', 10)
```

```response title=Response
┌─repeat('abc', 10)──────────────┐
│ abcabcabcabcabcabcabcabcabcabc │
└────────────────────────────────┘
```

","20.1","String"
"25.9.2.1","formatRow",0,0,"","","System","","","","","","","",""
"25.9.2.1","detectLanguage",0,0,"","","System","","","","","","","",""
"25.9.2.1","tupleElement",0,0,"","","System","
Extracts an element from a tuple by index or name.

For access by index, an 1-based numeric index is expected.
For access by name, the element name can be provided as a string (works only for named tuples).

An optional third argument specifies a default value which is returned instead of throwing an exception when the accessed element does not exist.
All arguments must be constants.

This function has zero runtime cost and implements the operators `x.index` and `x.name`.
","tupleElement(tuple, index|name[, default_value])","- `tuple` — A tuple or array of tuples. [`Tuple(T)`](/sql-reference/data-types/tuple) or [`Array(Tuple(T))`](/sql-reference/data-types/array)
- `index` — Column index, starting from 1. [`const UInt8/16/32/64`](/sql-reference/data-types/int-uint)
- `name` — Name of the element. [`const String`](/sql-reference/data-types/string)
- `default_value` — Default value returned when index is out of bounds or element doesn't exist. [`Any`](/sql-reference/data-types)
","","Returns the element at the specified index or name. [`Any`](/sql-reference/data-types)","**Index access**

```sql title=Query
SELECT tupleElement((1, 'hello'), 2)
```

```response title=Response
hello
```

**Named tuple with table**

```sql title=Query
CREATE TABLE example (values Tuple(name String, age UInt32)) ENGINE = Memory;
INSERT INTO example VALUES (('Alice', 30));
SELECT tupleElement(values, 'name') FROM example;
```

```response title=Response
Alice
```

**With default value**

```sql title=Query
SELECT tupleElement((1, 2), 5, 'not_found')
```

```response title=Response
not_found
```

**Operator syntax**

```sql title=Query
SELECT (1, 'hello').2
```

```response title=Response
hello
```

","1.1","Tuple"
"25.9.2.1","roundAge",0,0,"","","System","
Takes a number representing a human age, compares it to standard age ranges, and returns either the highest or lowest value of the range the number falls within.

- Returns `0`, for `age < 1`.
- Returns `17`, for `1 ≤ age ≤ 17`.
- Returns `18`, for `18 ≤ age ≤ 24`.
- Returns `25`, for `25 ≤ age ≤ 34`.
- Returns `35`, for `35 ≤ age ≤ 44`.
- Returns `45`, for `45 ≤ age ≤ 54`.
- Returns `55`, for `age ≥ 55`.
","roundAge(num)","- `age` — A number representing an age in years. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns either the highest or lowest age of the range `age` falls within. [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT *, roundAge(*) FROM system.numbers WHERE number IN (0, 5, 20, 31, 37, 54, 72);
```

```response title=Response
┌─number─┬─roundAge(number)─┐
│      0 │                0 │
│      5 │               17 │
│     20 │               18 │
│     31 │               25 │
│     37 │               35 │
│     54 │               45 │
│     72 │               55 │
└────────┴──────────────────┘
```

","1.1","Rounding"
"25.9.2.1","SHA224",0,0,"","","System","
Calculates the SHA224 hash of the given string.
    ","SHA224(s)","- `s` — The input value to hash. [`String`](/sql-reference/data-types/string)
","","Returns the SHA224 hash of the given input string as a fixed-length string. [`FixedString(28)`](/sql-reference/data-types/fixedstring)","**Usage example**

```sql title=Query
SELECT HEX(SHA224('abc'));
```

```response title=Response
┌─hex(SHA224('abc'))───────────────────────────────────────┐
│ 23097D223405D8228642A477BDA255B32AADBCE4BDA0B3F7E36C9DA7 │
└──────────────────────────────────────────────────────────┘
```

","1.1","Hash"
"25.9.2.1","toDecimal32OrDefault",0,0,"","","System","","","","","","","",""
"25.9.2.1","partitionId",0,0,"","","System","
Computes the [partition ID](../../engines/table-engines/mergetree-family/custom-partitioning-key.md).

:::note
This function is slow and should not be called for large numbers of rows.
:::
","partitionId(column1[, column2, ...])","- `column1, column2, ...` — Column for which to return the partition ID. ","","Returns the partition ID that the row belongs to. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
DROP TABLE IF EXISTS tab;

CREATE TABLE tab
(
  i int,
  j int
)
ENGINE = MergeTree
PARTITION BY i
ORDER BY tuple();

INSERT INTO tab VALUES (1, 1), (1, 2), (1, 3), (2, 4), (2, 5), (2, 6);

SELECT i, j, partitionId(i), _partition_id FROM tab ORDER BY i, j;
```

```response title=Response
┌─i─┬─j─┬─partitionId(i)─┬─_partition_id─┐
│ 1 │ 1 │ 1              │ 1             │
│ 1 │ 2 │ 1              │ 1             │
│ 1 │ 3 │ 1              │ 1             │
│ 2 │ 4 │ 2              │ 2             │
│ 2 │ 5 │ 2              │ 2             │
│ 2 │ 6 │ 2              │ 2             │
└───┴───┴────────────────┴───────────────┘
```

","21.4","Other"
"25.9.2.1","mapSubtract",0,0,"","","System","","","","","","","",""
"25.9.2.1","roundToExp2",0,0,"","","System","
Rounds a number down to the nearest (whole non-negative) power of two.
If the number is less than one, it returns `0`.
","roundToExp2(num)","- `num` — A number to round. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns `num` rounded down to the nearest (whole non-negative) power of two, otherwise `0` for `num < 1`. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT *, roundToExp2(*) FROM system.numbers WHERE number IN (0, 2, 5, 10, 19, 50)
```

```response title=Response
┌─number─┬─roundToExp2(number)─┐
│      0 │                   0 │
│      2 │                   2 │
│      5 │                   4 │
│     10 │                   8 │
│     19 │                  16 │
│     50 │                  32 │
└────────┴─────────────────────┘
```

","1.1","Rounding"
"25.9.2.1","wordShingleMinHashCaseInsensitiveUTF8",0,0,"","","System","
Splits a UTF-8 string into parts (shingles) of `shinglesize` words, calculates hash values for each word shingle and returns a tuple with these hashes.
Uses `hashnum` minimum hashes to calculate the minimum hash and `hashnum` maximum hashes to calculate the maximum hash.
It is case insensitive.

Can be used to detect semi-duplicate strings with [`tupleHammingDistance`](../functions/tuple-functions.md/#tuplehammingdistance).
For two strings, if the returned hashes are the same for both strings, then those strings are the same.
","wordShingleMinHashCaseInsensitiveUTF8(string[, shinglesize, hashnum])","- `string` — String for which to compute the hash. [`String`](/sql-reference/data-types/string)
- `shinglesize` — Optional. The size of a word shingle, any number from `1` to `25`. The default value is `3`. [`UInt8`](/sql-reference/data-types/int-uint)
- `hashnum` — Optional. The number of minimum and maximum hashes used to calculate the result, any number from `1` to `25`. The default value is `6`. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns a tuple with two hashes — the minimum and the maximum. [`Tuple(UInt64, UInt64)`](/sql-reference/data-types/tuple)","**Usage example**

```sql title=Query
SELECT wordShingleMinHashCaseInsensitiveUTF8('ClickHouse® is a column-oriented database management system (DBMS) for online analytical processing of queries (OLAP).') AS Tuple;
```

```response title=Response
┌─Tuple─────────────────────────────────────┐
│ (3065874883688416519,1634050779997673240) │
└───────────────────────────────────────────┘
```

","21.1","Hash"
"25.9.2.1","s2CapUnion",0,0,"","","System","","","","","","","",""
"25.9.2.1","firstLine",0,0,"","","System","
Returns the first line of a multi-line string.
","firstLine(s)","- `s` — Input string. [`String`](/sql-reference/data-types/string)
","","Returns the first line of the input string or the whole string if there are no line separators. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT firstLine('foo\\nbar\\nbaz')
```

```response title=Response
┌─firstLine('foo\nbar\nbaz')─┐
│ foo                        │
└────────────────────────────┘
```

","23.7","String"
"25.9.2.1","currentProfiles",0,0,"","","System","
Returns an array of the setting profiles for the current user.
","currentProfiles()","","","Returns an array of setting profiles for the current user. [`Array(String)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT currentProfiles();
```

```response title=Response
┌─currentProfiles()─────────────────────────────┐
│ ['default', 'readonly_user', 'web_analytics'] │
└───────────────────────────────────────────────┘
```

","21.9","Other"
"25.9.2.1","CAST",0,1,"","","System","","","","","","","",""
"25.9.2.1","mapUpdate",0,0,"","","System","","","","","","","",""
"25.9.2.1","reinterpretAsUInt256",0,0,"","","System","","","","","","","",""
"25.9.2.1","ngramDistanceUTF8",0,0,"","","System","
Provides a UTF-8 variant of [`ngramDistance`](ngramDistance).
Assumes that `needle` and `haystack` strings are UTF-8 encoded strings.
Calculates the 3-gram distance between two UTF-8 strings.
The smaller the returned value, the more similar the strings are.
    ","ngramDistanceUTF8(haystack, needle)","- `haystack` — First UTF-8 encoded comparison string. [`String`](/sql-reference/data-types/string)
- `needle` — Second UTF-8 encoded comparison string. [`String`](/sql-reference/data-types/string)
","","Returns a Float32 number between `0` and `1`. [`Float32`](/sql-reference/data-types/float)","**UTF-8 3-gram distance**

```sql title=Query
SELECT ngramDistanceUTF8('abcde','cde')
```

```response title=Response
┌─ngramDistanceUTF8('abcde','cde')─┐
│                               0.5 │
└───────────────────────────────────┘
```

","20.1","String Search"
"25.9.2.1","s2RectUnion",0,0,"","","System","","","","","","","",""
"25.9.2.1","dateTimeToUUIDv7",0,0,"","","System","
Converts a [DateTime](../data-types/datetime.md) value to a [UUIDv7](https://en.wikipedia.org/wiki/UUID#Version_7) at the given time.

See section [""UUIDv7 generation""](#uuidv7-generation) for details on UUID structure, counter management, and concurrency guarantees.

:::note
As of September 2025, version 7 UUIDs are in draft status and their layout may change in future.
:::
    ","dateTimeToUUIDv7(value)","- `value` — Date with time. [`DateTime`](/sql-reference/data-types/datetime)
","","Returns a UUIDv7. [`UUID`](/sql-reference/data-types/uuid)","**Usage example**

```sql title=Query
SELECT dateTimeToUUIDv7(toDateTime('2021-08-15 18:57:56', 'Asia/Shanghai'));
```

```response title=Response
┌─dateTimeToUUIDv7(toDateTime('2021-08-15 18:57:56', 'Asia/Shanghai'))─┐
│ 018f05af-f4a8-778f-beee-1bedbc95c93b                                   │
└─────────────────────────────────────────────────────────────────────────┘
```

**multiple UUIDs for the same timestamp**

```sql title=Query
SELECT dateTimeToUUIDv7(toDateTime('2021-08-15 18:57:56'));
SELECT dateTimeToUUIDv7(toDateTime('2021-08-15 18:57:56'));
```

```response title=Response
┌─dateTimeToUUIDv7(t⋯08-15 18:57:56'))─┐
│ 017b4b2d-7720-76ed-ae44-bbcc23a8c550 │
└──────────────────────────────────────┘
┌─dateTimeToUUIDv7(t⋯08-15 18:57:56'))─┐
│ 017b4b2d-7720-76ed-ae44-bbcf71ed0fd3 │
└──────────────────────────────────────┘
```

","25.9","UUID"
"25.9.2.1","filesystemAvailable",0,0,"","","System","
Returns the amount of free space in the filesystem hosting the database persistence.
The returned value is always smaller than the total free space ([`filesystemUnreserved`](../../sql-reference/functions/other-functions.md#filesystemunreserved)) because some space is reserved for the operating system.
    ","filesystemAvailable([disk_name])","- `disk_name` — Optional. The disk name to find the amount of free space for. If omitted, uses the default disk. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring)
","","Returns the amount of remaining space available in bytes. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT formatReadableSize(filesystemAvailable()) AS ""Available space"";
```

```response title=Response
┌─Available space─┐
│ 30.75 GiB       │
└─────────────────┘
```

","20.1","Other"
"25.9.2.1","reinterpretAsDate",0,0,"","","System","","","","","","","",""
"25.9.2.1","s2ToGeo",0,0,"","","System","","","","","","","",""
"25.9.2.1","toMonday",0,0,"","","System","
Rounds down a date or date with time to the Monday of the same week. Returns the date.

:::note
The return type can be configured by setting [`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions).
:::
    ","toMonday(value)","- `value` — Date or date with time to round down to the Monday of the week. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
","","Returns the date of the Monday of the same week for the given date or date with time. [`Date`](/sql-reference/data-types/date)","**Round down to the Monday of the week**

```sql title=Query
SELECT
toMonday(toDateTime('2023-04-21 10:20:30')), -- A Friday
toMonday(toDate('2023-04-24'));              -- Already a Monday
```

```response title=Response
┌─toMonday(toDateTime('2023-04-21 10:20:30'))─┬─toMonday(toDate('2023-04-24'))─┐
│                                  2023-04-17 │                     2023-04-24 │
└─────────────────────────────────────────────┴────────────────────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","toColumnTypeName",0,0,"","","System","
Returns the internal name of the data type of the given value.
Unlike function [`toTypeName`](#toTypeName), the returned data type potentially includes internal wrapper columns like `Const` and `LowCardinality`.
","toColumnTypeName(value)","- `value` — Value for which to return the internal data type. [`Any`](/sql-reference/data-types)
","","Returns the internal data type used to represent the value. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT toColumnTypeName(CAST('2025-01-01 01:02:03' AS DateTime));
```

```response title=Response
┌─toColumnTypeName(CAST('2025-01-01 01:02:03', 'DateTime'))─┐
│ Const(UInt32)                                             │
└───────────────────────────────────────────────────────────┘
```

","1.1","Other"
"25.9.2.1","overlayUTF8",0,0,"","","System","
Replace part of the string `s` with another string `replace`, starting at the 1-based index `offset`.
Assumes that the string contains valid UTF-8 encoded text.
If this assumption is violated, no exception is thrown and the result is undefined.
","overlayUTF8(s, replace, offset[, length])","- `s` — The input string. [`String`](/sql-reference/data-types/string)
- `replace` — The replacement string. [`const String`](/sql-reference/data-types/string)
- `offset` — An integer type `Int` (1-based). If `offset` is negative, it is counted from the end of the input string `s`. [`(U)Int*`](/sql-reference/data-types/int-uint)
- `length` — Optional. Specifies the length of the snippet within the input string `s` to be replaced. If `length` is not specified, the number of characters removed from `s` equals the length of `replace`, otherwise `length` characters are removed. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns a string with replacement. [`String`](/sql-reference/data-types/string)","**UTF-8 replacement**

```sql title=Query
SELECT overlayUTF8('Mein Vater ist aus Österreich.', 'der Türkei', 20) AS res;
```

```response title=Response
┌─res───────────────────────────┐
│ Mein Vater ist aus der Türkei.│
└───────────────────────────────┘
```

","24.9","String"
"25.9.2.1","positiveModuloOrNull",0,1,"","","System","
Calculates the remainder when dividing `a` by `b`. Similar to function `positiveModulo` except that `positiveModuloOrNull` will return NULL
if the right argument is 0.
    ","positiveModuloOrNull(x, y)","- `x` — The dividend. [`(U)Int*`](/sql-reference/data-types/int-uint)/[`Float32/64`](/sql-reference/data-types/float). - `x` — The divisor (modulus). [`(U)Int*`](/sql-reference/data-types/int-uint)/[`Float32/64`](/sql-reference/data-types/float). ","","Returns the difference between `x` and the nearest integer not greater than
`x` divisible by `y`, `null` when the divisor is zero.","**positiveModuloOrNull**

```sql title=Query
SELECT positiveModuloOrNull(5, 0)
```

```response title=Response
\N
```

","25.5","Arithmetic"
"25.9.2.1","sipHash128Reference",0,0,"","","System","
Like [`sipHash128`](/sql-reference/functions/hash-functions#sipHash128) but implements the 128-bit algorithm from the original authors of SipHash.
    ","sipHash128Reference(arg1[, arg2, ...])","- `arg1[, arg2, ...]` — A variable number of input arguments for which to compute the hash. [`Any`](/sql-reference/data-types)
","","Returns the computed 128-bit `SipHash` hash value of the input arguments. [`FixedString(16)`](/sql-reference/data-types/fixedstring)","**Usage example**

```sql title=Query
SELECT hex(sipHash128Reference('foo', '', 3));
```

```response title=Response
┌─hex(sipHash128Reference('foo', '', 3))─┐
│ 4D1BE1A22D7F5933C0873E1698426260       │
└────────────────────────────────────────┘
```

","23.2","Hash"
"25.9.2.1","seriesOutliersDetectTukey",0,0,"","","System","
Detects outliers in series data using [Tukey Fences](https://en.wikipedia.org/wiki/Outlier#Tukey%27s_fences).
    ","seriesOutliersDetectTukey(series[, min_percentile, max_percentile, K])","- `series` — An array of numeric values. [`Array((UInt8/16/32/64))`](/sql-reference/data-types/array) or [`Array(Float*)`](/sql-reference/data-types/array)
- `min_percentile` — Optional. The minimum percentile to be used to calculate inter-quantile range [(IQR)](https://en.wikipedia.org/wiki/Interquartile_range). The value must be in range [0.02,0.98]. The default is 0.25. [`Float*`](/sql-reference/data-types/float)
- `max_percentile` — Optional. The maximum percentile to be used to calculate inter-quantile range (IQR). The value must be in range [0.02,0.98]. The default is 0.75. [`Float*`](/sql-reference/data-types/float)
- `K` — Optional. Non-negative constant value to detect mild or stronger outliers. The default value is 1.5. [`Float*`](/sql-reference/data-types/float)
","","Returns an array of the same length as the input array where each value represents score of possible anomaly of corresponding element in the series. A non-zero score indicates a possible anomaly. [`Array(Float32)`](/sql-reference/data-types/array)","**Basic outlier detection**

```sql title=Query
SELECT seriesOutliersDetectTukey([-3, 2, 15, 3, 5, 6, 4, 5, 12, 45, 12, 3, 3, 4, 5, 6]) AS print_0
```

```response title=Response
┌───────────print_0─────────────────┐
│[0,0,0,0,0,0,0,0,0,27,0,0,0,0,0,0] │
└───────────────────────────────────┘
```

**Custom parameters outlier detection**

```sql title=Query
SELECT seriesOutliersDetectTukey([-3, 2, 15, 3, 5, 6, 4.50, 5, 12, 45, 12, 3.40, 3, 4, 5, 6], 0.2, 0.8, 1.5) AS print_0
```

```response title=Response
┌─print_0──────────────────────────────┐
│ [0,0,0,0,0,0,0,0,0,19.5,0,0,0,0,0,0] │
└──────────────────────────────────────┘
```

","24.2","Time Series"
"25.9.2.1","concatWithSeparatorAssumeInjective",0,0,"","","System","
Like [`concatWithSeparator`](#concatWithSeparator) but assumes that `concatWithSeparator(sep[,exp1, exp2, ... ]) → result` is injective.
A function is called injective if it returns different results for different arguments.

Can be used for optimization of `GROUP BY`.
","concatWithSeparatorAssumeInjective(sep[, exp1, exp2, ... ])","- `sep` — The separator to use. [`const String`](/sql-reference/data-types/string) or [`const FixedString`](/sql-reference/data-types/fixedstring)
- `exp1, exp2, ...` — Expression to be concatenated. Arguments which are not of type `String` or `FixedString` are converted to strings using their default serialization. As this decreases performance, it is not recommended to use non-String/FixedString arguments. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring)
","","Returns the String created by concatenating the arguments. If any of the argument values is `NULL`, the function returns `NULL`. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
CREATE TABLE user_data (
user_id UInt32,
first_name String,
last_name String,
score UInt32
)
ENGINE = MergeTree
ORDER BY tuple();

INSERT INTO user_data VALUES
(1, 'John', 'Doe', 100),
(2, 'Jane', 'Smith', 150),
(3, 'John', 'Wilson', 120),
(4, 'Jane', 'Smith', 90);

SELECT
    concatWithSeparatorAssumeInjective('-', first_name, last_name) as full_name,
    sum(score) as total_score
FROM user_data
GROUP BY concatWithSeparatorAssumeInjective('-', first_name, last_name);
```

```response title=Response
┌─full_name───┬─total_score─┐
│ Jane-Smith  │         240 │
│ John-Doe    │         100 │
│ John-Wilson │         120 │
└─────────────┴─────────────┘
```

","22.12","String"
"25.9.2.1","financialInternalRateOfReturnExtended",0,0,"","","System","
Calculates the Extended Internal Rate of Return (XIRR) for a series of cash flows occurring at irregular intervals. XIRR is the discount rate at which the net present value (NPV) of all cash flows equals zero.

XIRR attempts to solve the following equation (example for `ACT_365F`):

$$
\sum_{i=0}^n \frac{cashflow_i}{(1 + rate)^{(date_i - date_0)/365}} = 0
$$

Arrays should be sorted by date in ascending order. Dates need to be unique.
    ","financialInternalRateOfReturnExtended(cashflow, date [, guess, daycount])","- `cashflow` — An array of cash flows corresponding to the dates in second param. [`Array(Int8/16/32/64)`](/sql-reference/data-types/array) or [`Array(Float*)`](/sql-reference/data-types/array)
- `date` — A sorted array of unique dates corresponding to the cash flows. [`Array(Date)`](/sql-reference/data-types/array) or [`Array(Date32)`](/sql-reference/data-types/array)
- `[, guess]` — Optional. Initial guess (constant value) for the XIRR calculation. [`Float*`](/sql-reference/data-types/float)
- `[, daycount]` — 
Optional day count convention (default 'ACT_365F'). Supported values:
- 'ACT_365F' - Actual/365 Fixed: Uses actual number of days between dates divided by 365
- 'ACT_365_25' - Actual/365.25: Uses actual number of days between dates divided by 365.25
             [`String`](/sql-reference/data-types/string)
","","Returns the XIRR value. If the calculation cannot be performed, it returns NaN. [`Float64`](/sql-reference/data-types/float)","**simple_example**

```sql title=Query
SELECT financialInternalRateOfReturnExtended([-10000, 5750, 4250, 3250], [toDate('2020-01-01'), toDate('2020-03-01'), toDate('2020-10-30'), toDate('2021-02-15')])
```

```response title=Response
0.6342972615260243
```

**simple_example_with_guess**

```sql title=Query
SELECT financialInternalRateOfReturnExtended([-10000, 5750, 4250, 3250], [toDate('2020-01-01'), toDate('2020-03-01'), toDate('2020-10-30'), toDate('2021-02-15')], 0.5)
```

```response title=Response
0.6342972615260243
```

**simple_example_daycount**

```sql title=Query
SELECT round(financialInternalRateOfReturnExtended([100000, -110000], [toDate('2020-01-01'), toDate('2021-01-01')], 0.1, 'ACT_365_25'), 6) AS xirr_365_25
```

```response title=Response
0.099785
```

","25.7","Financial"
"25.9.2.1","cutWWW",0,0,"","","System","
Removes the leading `www.`, if present, from the URL's domain.
    ","cutWWW(url)","- `url` — URL. [`String`](/sql-reference/data-types/string)
","","Returns the URL with leading `www.` removed from the domain. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT cutWWW('http://www.example.com/path?query=value#fragment');
```

```response title=Response
┌─cutWWW('http://www.example.com/path?query=value#fragment')─┐
│ http://example.com/path?query=value#fragment               │
└────────────────────────────────────────────────────────────┘
```

","1.1","URL"
"25.9.2.1","buildId",0,0,"","","System","
Returns the build ID generated by a compiler for the running ClickHouse server binary.
If executed in the context of a distributed table, this function generates a normal column with values relevant to each shard.
Otherwise it produces a constant value.
    ","buildId()","","","Returns the build ID. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT buildId()
```

```response title=Response
┌─buildId()────────────────────────────────┐
│ AB668BEF095FAA6BD26537F197AC2AF48A927FB4 │
└──────────────────────────────────────────┘
```

","20.5","Other"
"25.9.2.1","ngramMinHashCaseInsensitive",0,0,"","","System","
Splits a ASCII string into n-grams of `ngramsize` symbols and calculates hash values for each n-gram and returns a tuple with these hashes
Uses `hashnum` minimum hashes to calculate the minimum hash and `hashnum` maximum hashes to calculate the maximum hash.
It is case insensitive.

Can be used to detect semi-duplicate strings with [`tupleHammingDistance`](../functions/tuple-functions.md/#tuplehammingdistance).
For two strings, if the returned hashes are the same for both strings, then those strings are the same.
","ngramMinHashCaseInsensitive(string[, ngramsize, hashnum])","- `string` — String. [String](../data-types/string.md). - `ngramsize` — The size of an n-gram. Optional. Possible values: any number from `1` to `25`. Default value: `3`. [UInt8](../data-types/int-uint.md). - `hashnum` — The number of minimum and maximum hashes used to calculate the result. Optional. Possible values: any number from `1` to `25`. Default value: `6`. [UInt8](../data-types/int-uint.md). ","","Tuple with two hashes — the minimum and the maximum. [Tuple](../data-types/tuple.md)([UInt64](../data-types/int-uint.md), [UInt64](../data-types/int-uint.md)). [`Tuple`](/sql-reference/data-types/tuple)","**Usage example**

```sql title=Query
SELECT ngramMinHashCaseInsensitive('ClickHouse') AS Tuple;
```

```response title=Response
┌─Tuple──────────────────────────────────────┐
│ (2106263556442004574,13203602793651726206) │
└────────────────────────────────────────────┘
```

","21.1","Hash"
"25.9.2.1","randFisherF",0,0,"","","System","
Returns a random Float64 number drawn from an [F-distribution](https://en.wikipedia.org/wiki/F-distribution).
    ","randFisherF(d1, d2[, x])","- `d1` — d1 degree of freedom in `X = (S1 / d1) / (S2 / d2)`. [`Float64`](/sql-reference/data-types/float)
- `d2` — d2 degree of freedom in `X = (S1 / d1) / (S2 / d2)`. [`Float64`](/sql-reference/data-types/float)
- `x` — Optional and ignored. The only purpose of the argument is to prevent [common subexpression elimination](/sql-reference/functions/overview#common-subexpression-elimination) when the same function call is used multiple times in a query. [`Any`](/sql-reference/data-types)
","","Returns a random Float64 number drawn from the specified F-distribution [`Float64`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT randFisherF(10, 3) FROM numbers(5)
```

```response title=Response
┌─randFisherF(10, 20)─┐
│  0.7204609609506184 │
│  0.9926258472572916 │
│  1.4010752726735863 │
│ 0.34928401507025556 │
│  1.8216216009473598 │
└─────────────────────┘
```

","22.10","Random Number"
"25.9.2.1","firstSignificantSubdomainCustomRFC",0,0,"","","System","","","","","","","",""
"25.9.2.1","serverUUID",0,0,"","","System","
Returns the random and unique UUID (v4) generated when the server is first started.
The UUID is persisted, i.e. the second, third, etc. server start return the same UUID.
    ","serverUUID()","","","Returns the random UUID of the server. [`UUID`](/sql-reference/data-types/uuid)","**Usage example**

```sql title=Query
SELECT serverUUID();
```

```response title=Response
┌─serverUUID()─────────────────────────────┐
│ 7ccc9260-000d-4d5c-a843-5459abaabb5f     │
└──────────────────────────────────────────┘
```

","20.1","Other"
"25.9.2.1","hostName",0,0,"","","System","
Returns the name of the host on which this function was executed.
If the function executes on a remote server (distributed processing), the remote server name is returned.
If the function executes in the context of a distributed table, it generates a normal column with values relevant to each shard.
Otherwise it produces a constant value.
    ","hostName()","","","Returns the host name. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT hostName()
```

```response title=Response
┌─hostName()─┐
│ clickhouse │
└────────────┘
```

","20.5","Other"
"25.9.2.1","L2SquaredNorm",0,0,"","","System","
Calculates the square root of the sum of the squares of the vector elements (the [`L2Norm`](#L2Norm)) squared.
    ","L2SquaredNorm(vector)","- `vector` — Vector or tuple of numeric values. [`Array(T)`](/sql-reference/data-types/array) or [`Tuple(T)`](/sql-reference/data-types/tuple)
","","Returns the L2-norm squared. [`UInt*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)","**Basic usage**

```sql title=Query
SELECT L2SquaredNorm((1, 2))
```

```response title=Response
┌─L2SquaredNorm((1, 2))─┐
│                     5 │
└───────────────────────┘
```

","22.7","Distance"
"25.9.2.1","mapPartialReverseSort",0,0,"","","System","The same as arrayPartialReverseSort.","","","","","**mapPartialReverseSort**

```sql title=Query
SELECT mapPartialReverseSort((k, v) -> v, 2, map('k1', 3, 'k2', 1, 'k3', 2))
```

```response title=Response

```

","23.4","Map"
"25.9.2.1","toJSONString",0,0,"","","System","
Serializes a value to its JSON representation. Various data types and nested structures are supported.
64-bit [integers](../data-types/int-uint.md) or bigger (like `UInt64` or `Int128`) are enclosed in quotes by default. [output_format_json_quote_64bit_integers](/operations/settings/formats#output_format_json_quote_64bit_integers) controls this behavior.
Special values `NaN` and `inf` are replaced with `null`. Enable [output_format_json_quote_denormals](/operations/settings/formats#output_format_json_quote_denormals) setting to show them.
When serializing an [Enum](../data-types/enum.md) value, the function outputs its name.

See also:
- [output_format_json_quote_64bit_integers](/operations/settings/formats#output_format_json_quote_64bit_integers)
- [output_format_json_quote_denormals](/operations/settings/formats#output_format_json_quote_denormals)
    ","toJSONString(value)","- `value` — Value to serialize. Value may be of any data type. [`Any`](/sql-reference/data-types)
","","Returns the JSON representation of the value. [`String`](/sql-reference/data-types/string)","**Map serialization**

```sql title=Query
SELECT toJSONString(map('key1', 1, 'key2', 2));
```

```response title=Response
┌─toJSONString(map('key1', 1, 'key2', 2))─┐
│ {""key1"":1,""key2"":2}                     │
└─────────────────────────────────────────┘
```

**Special values**

```sql title=Query
SELECT toJSONString(tuple(1.25, NULL, NaN, +inf, -inf, [])) SETTINGS output_format_json_quote_denormals = 1;
```

```response title=Response
┌─toJSONString(tuple(1.25, NULL, NaN, plus(inf), minus(inf), []))─┐
│ [1.25,null,""nan"",""inf"",""-inf"",[]]                               │
└─────────────────────────────────────────────────────────────────┘
```

","21.7","JSON"
"25.9.2.1","uptime",0,0,"","","System","
Returns the server's uptime in seconds.
If executed in the context of a distributed table, this function generates a normal column with values relevant to each shard.
Otherwise it produces a constant value.
    ","uptime()","","","Returns the server uptime in seconds. [`UInt32`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT uptime() AS Uptime
```

```response title=Response
┌─Uptime─┐
│  55867 │
└────────┘
```

","1.1","Other"
"25.9.2.1","extractURLParameter",0,0,"","","System","
Returns the value of the `name` parameter in the URL, if present, otherwise an empty string is returned.
If there are multiple parameters with this name, the first occurrence is returned.
The function assumes that the parameter in the `url` parameter is encoded in the same way as in the `name` argument.
    ","extractURLParameter(url, name)","- `url` — URL. [`String`](/sql-reference/data-types/string)
- `name` — Parameter name. [`String`](/sql-reference/data-types/string)
","","Returns the value of the URL parameter with the specified name. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT extractURLParameter('http://example.com/?param1=value1&param2=value2', 'param1');
```

```response title=Response
┌─extractURLPa⋯, 'param1')─┐
│ value1                   │
└──────────────────────────┘
```

","1.1","URL"
"25.9.2.1","zookeeperSessionUptime",0,0,"","","System","
Returns the uptime of the current ZooKeeper session in seconds.
","zookeeperSessionUptime()","","","Returns the uptime of the current ZooKeeper session in seconds. [`UInt32`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT zookeeperSessionUptime();
```

```response title=Response
┌─zookeeperSessionUptime()─┐
│                      286 │
└──────────────────────────┘
```

","21.11","Other"
"25.9.2.1","displayName",0,0,"","","System","
Returns the value of `display_name` from [config](/operations/configuration-files) or the server's Fully Qualified Domain Name (FQDN) if not set.
","displayName()","","","Returns the value of `display_name` from config or server FQDN if not set. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT displayName();
```

```response title=Response
┌─displayName()─┐
│ production    │
└───────────────┘
```

","22.11","Other"
"25.9.2.1","sigmoid",0,0,"","","System","","","","","","","",""
"25.9.2.1","sign",0,1,"","","System","
Returns the sign of a real number.
","sign(x)","- `x` — Values from -∞ to +∞. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Decimal*`](/sql-reference/data-types/decimal) or [`Float*`](/sql-reference/data-types/float)
","","Returns `-1` for `x < 0`, `0` for `x = 0`, `1` for `x > 0`. [`Int8`](/sql-reference/data-types/int-uint)","**Sign for zero**

```sql title=Query
SELECT sign(0)
```

```response title=Response
0
```

**Sign for positive**

```sql title=Query
SELECT sign(1)
```

```response title=Response
1
```

**Sign for negative**

```sql title=Query
SELECT sign(-1)
```

```response title=Response
-1
```

","21.2","Mathematical"
"25.9.2.1","sleepEachRow",0,0,"","","System","
Pauses the execution of a query for a specified number of seconds for each row in the result set.

The `sleepEachRow()` function is primarily used for testing and debugging purposes, similar to the [`sleep()`](#sleep) function.
It allows you to simulate delays or introduce pauses in the processing of each row, which can be useful in scenarios such as:

1. **Testing**: When testing or benchmarking ClickHouse's performance under specific conditions, you can use `sleepEachRow()` to simulate delays or introduce pauses for each row processed.
2. **Debugging**: If you need to examine the state of the system or the execution of a query for each row processed, you can use `sleepEachRow()` to introduce pauses, allowing you to inspect or collect relevant information.
3. **Simulation**: In some cases, you may want to simulate real-world scenarios where delays or pauses occur for each row processed, such as when dealing with external systems or network latencies.

:::warning
Like the `sleep()` function, it's important to use `sleepEachRow()` judiciously and only when necessary, as it can significantly impact the overall performance and responsiveness of your ClickHouse system, especially when dealing with large result sets.
:::
","sleepEachRow(seconds)","- `seconds` — The number of seconds to pause the query execution for each row in the result set to a maximum of 3 seconds. It can be a floating-point value to specify fractional seconds. [`const UInt*`](/sql-reference/data-types/int-uint) or [`const Float*`](/sql-reference/data-types/float)
","","Returns `0` for each row. [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
-- The output will be delayed, with a 0.5-second pause between each row.
SELECT number, sleepEachRow(0.5) FROM system.numbers LIMIT 5;
```

```response title=Response
┌─number─┬─sleepEachRow(0.5)─┐
│      0 │                 0 │
│      1 │                 0 │
│      2 │                 0 │
│      3 │                 0 │
│      4 │                 0 │
└────────┴───────────────────┘
```

","1.1","Other"
"25.9.2.1","sleep",0,0,"","","System","
Pauses the execution of a query by the specified number of seconds.
The function is primarily used for testing and debugging purposes.

The `sleep()` function should generally not be used in production environments, as it can negatively impact query performance and system responsiveness.
However, it can be useful in the following scenarios:

1. **Testing**: When testing or benchmarking ClickHouse, you may want to simulate delays or introduce pauses to observe how the system behaves under certain conditions.
2. **Debugging**: If you need to examine the state of the system or the execution of a query at a specific point in time, you can use `sleep()` to introduce a pause, allowing you to inspect or collect relevant information.
3. **Simulation**: In some cases, you may want to simulate real-world scenarios where delays or pauses occur, such as network latency or external system dependencies.

:::warning
It's important to use the `sleep()` function judiciously and only when necessary, as it can potentially impact the overall performance and responsiveness of your ClickHouse system.
:::

For security reasons, the function can only be executed in the default user profile (with `allow_sleep` enabled).
","sleep(seconds)","- `seconds` — The number of seconds to pause the query execution to a maximum of 3 seconds. It can be a floating-point value to specify fractional seconds. [`const UInt*`](/sql-reference/data-types/int-uint) or [`const Float*`](/sql-reference/data-types/float)
","","Returns `0`. [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
-- This query will pause for 2 seconds before completing.
-- During this time, no results will be returned, and the query will appear to be hanging or unresponsive.
SELECT sleep(2);
```

```response title=Response
┌─sleep(2)─┐
│        0 │
└──────────┘
1 row in set. Elapsed: 2.012 sec.
```

","1.1","Other"
"25.9.2.1","fragment",0,0,"","","System","
Returns the fragment identifier without the initial hash symbol.
    ","fragment(url)","- `url` — URL. [`String`](/sql-reference/data-types/string)
","","Returns the fragment identifier without the initial hash symbol. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT fragment('https://clickhouse.com/docs/getting-started/quick-start/cloud#1-create-a-clickhouse-service');
```

```response title=Response
┌─fragment('http⋯ouse-service')─┐
│ 1-create-a-clickhouse-service │
└───────────────────────────────┘
```

","1.1","URL"
"25.9.2.1","polygonsSymDifferenceSpherical",0,0,"","","System","","","","","","","",""
"25.9.2.1","intExp2",0,0,"","","System","
Like [exp2](#exp2) but returns a `UInt64` number.
","intExp2(x)","- `x` — The exponent. [`Int*`](/sql-reference/data-types/int-uint) or [`UInt*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns 2^x. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT intExp2(3);
```

```response title=Response
8
```

","1.1","Mathematical"
"25.9.2.1","toYearNumSinceEpoch",0,0,"","","System","Returns amount of years passed from year 1970","toYearNumSinceEpoch(date)","- `date` — A date or date with time to convert. [`Date`](/sql-reference/data-types/date) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
","","Positive integer","**Example**

```sql title=Query
SELECT toYearNumSinceEpoch(toDate('2024-10-01'))
```

```response title=Response
54
```

","25.3","Dates and Times"
"25.9.2.1","runningDifference",0,0,"","","System","
Calculates the difference between two consecutive row values in the data block.
Returns `0` for the first row, and for subsequent rows the difference to the previous row.

:::warning Deprecated
Only returns differences inside the currently processed data block.
Because of this error-prone behavior, the function is deprecated.
It is advised to use [window functions](/sql-reference/window-functions) instead.

You can use setting [`allow_deprecated_error_prone_window_functions`](/operations/settings/settings#allow_deprecated_error_prone_window_functions) to allow usage of this function.
:::

The result of the function depends on the affected data blocks and the order of data in the block.
The order of rows during calculation of `runningDifference()` can differ from the order of rows returned to the user.
To prevent that you can create a subquery with [`ORDER BY`](../../sql-reference/statements/select/order-by.md) and call the function from outside the subquery.
Please note that the block size affects the result.
The internal state of `runningDifference` state is reset for each new block.
","runningDifference(x)","- `x` — Column for which to calculate the running difference. [`Any`](/sql-reference/data-types)
","","Returns the difference between consecutive values, with 0 for the first row.","**Usage example**

```sql title=Query
SELECT
    EventID,
    EventTime,
    runningDifference(EventTime) AS delta
FROM
(
    SELECT
        EventID,
        EventTime
    FROM events
    WHERE EventDate = '2025-11-24'
    ORDER BY EventTime ASC
    LIMIT 5
);
```

```response title=Response
┌─EventID─┬───────────EventTime─┬─delta─┐
│    1106 │ 2025-11-24 00:00:04 │     0 │
│    1107 │ 2025-11-24 00:00:05 │     1 │
│    1108 │ 2025-11-24 00:00:05 │     0 │
│    1109 │ 2025-11-24 00:00:09 │     4 │
│    1110 │ 2025-11-24 00:00:10 │     1 │
└─────────┴─────────────────────┴───────┘
```

**Block size impact example**

```sql title=Query
SELECT
    number,
    runningDifference(number + 1) AS diff
FROM numbers(100000)
WHERE diff != 1;
```

```response title=Response
┌─number─┬─diff─┐
│      0 │    0 │
└────────┴──────┘
┌─number─┬─diff─┐
│  65536 │    0 │
└────────┴──────┘
```

","1.1","Other"
"25.9.2.1","getServerPort",0,0,"","","System","
Returns the server's port number for a given protocol.
    ","getServerPort(port_name)","- `port_name` — The name of the port. [`String`](/sql-reference/data-types/string)
","","Returns the server port number. [`UInt16`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT getServerPort('tcp_port');
```

```response title=Response
┌─getServerPort('tcp_port')─┐
│                      9000 │
└───────────────────────────┘
```

","21.10","Other"
"25.9.2.1","formatQuery",0,0,"","","System","Returns a formatted, possibly multi-line, version of the given SQL query. Throws in case of a parsing error.
[example:multiline]","formatQuery(query)","- `query` — The SQL query to be formatted. [String](../../sql-reference/data-types/string.md) ","","The formatted query [`String`](/sql-reference/data-types/string)","**multiline**

```sql title=Query
SELECT formatQuery('select a,    b FRom tab WHERE a > 3 and  b < 3');
```

```response title=Response
SELECT
    a,
    b
FROM tab
WHERE (a > 3) AND (b < 3)
```

","","Other"
"25.9.2.1","parseDateTimeInJodaSyntax",0,0,"","","System","","","","","","","",""
"25.9.2.1","rowNumberInBlock",0,0,"","","System","
For each [block](../../development/architecture.md#block) processed by `rowNumberInBlock`, returns the number of the current row.

The returned number starts from 0 for each block.
    ","rowNumberInBlock()","","","Returns the ordinal number of the row in the data block starting from `0`. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT rowNumberInBlock()
FROM
(
    SELECT *
    FROM system.numbers_mt
    LIMIT 10
) SETTINGS max_block_size = 2
```

```response title=Response
┌─rowNumberInBlock()─┐
│                  0 │
│                  1 │
└────────────────────┘
┌─rowNumberInBlock()─┐
│                  0 │
│                  1 │
└────────────────────┘
┌─rowNumberInBlock()─┐
│                  0 │
│                  1 │
└────────────────────┘
┌─rowNumberInBlock()─┐
│                  0 │
│                  1 │
└────────────────────┘
┌─rowNumberInBlock()─┐
│                  0 │
│                  1 │
└────────────────────┘
```

","1.1","Other"
"25.9.2.1","splitByString",0,0,"","","System","
Splits a string with a constant `separator` consisting of multiple characters into an array of substrings.
If the string `separator` is empty, it will split the string `s` into an array of single characters.

Empty substrings may be selected when:
- A non-empty separator occurs at the beginning or end of the string
- There are multiple consecutive non-empty separators
- The original string `s` is empty while the separator is not empty

:::note
Setting [`splitby_max_substrings_includes_remaining_string`](../../operations/settings/settings.md#splitby_max_substrings_includes_remaining_string) (default: `0`) controls if the remaining string is included in the last element of the result array when argument `max_substrings > 0`.
:::
","splitByString(separator, s[, max_substrings])","- `separator` — The separator. [`String`](/sql-reference/data-types/string)
- `s` — The string to split. [`String`](/sql-reference/data-types/string)
- `max_substrings` — Optional. When `max_substrings > 0`, the returned substrings will be no more than `max_substrings`, otherwise the function will return as many substrings as possible. Default value: `0`. [`Int64`](/sql-reference/data-types/int-uint)
","","Returns an array of selected substrings of `s` [`Array(String)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT splitByString(', ', '1, 2 3, 4,5, abcde');
```

```response title=Response
┌─splitByStrin⋯4,5, abcde')─┐
│ ['1','2 3','4,5','abcde'] │
└───────────────────────────┘
```

**Empty separator**

```sql title=Query
SELECT splitByString('', 'abcde');
```

```response title=Response
┌─splitByString('', 'abcde')─┐
│ ['a','b','c','d','e']      │
└────────────────────────────┘
```

","1.1","String Splitting"
"25.9.2.1","polygonConvexHullCartesian",0,0,"","","System","","","","","","","",""
"25.9.2.1","murmurHash3_32",0,0,"","","System","
Produces a [MurmurHash3](https://github.com/aappleby/smhasher) hash value.

:::note
The calculated hash values may be equal for the same input values of different argument types.
This affects for example integer types of different size, named and unnamed `Tuple` with the same data, `Map` and the corresponding `Array(Tuple(key, value))` type with the same data.
:::
","murmurHash3_32(arg1[, arg2, ...])","- `arg1[, arg2, ...]` — A variable number of input arguments for which to compute the hash. [`Any`](/sql-reference/data-types)
","","Returns the computed hash value of the input arguments. [`UInt32`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT murmurHash3_32(array('e','x','a'), 'mple', 10, toDateTime('2019-06-15 23:00:00')) AS MurmurHash3, toTypeName(MurmurHash3) AS type;
```

```response title=Response
┌─MurmurHash3─┬─type───┐
│     2152717 │ UInt32 │
└─────────────┴────────┘
```

","18.10","Hash"
"25.9.2.1","numericIndexedVectorAllValueSum",0,0,"","","System","
Returns the sum of all values in the numericIndexedVector.
        ","numericIndexedVectorAllValueSum(numericIndexedVector)","- `numericIndexedVector` — A numericIndexedVector object. [`numericIndexedVector`](/sql-reference/functions/#create-numeric-indexed-vector-object)
","","Returns the sum of all values. [`Float64`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT numericIndexedVectorAllValueSum(numericIndexedVectorBuild(mapFromArrays([1, 2, 3], [10, 20, 30]))) AS res;
```

```response title=Response
┌─res─┐
│  60 │
└─────┘
```

","25.7","NumericIndexedVector"
"25.9.2.1","arrayElementOrNull",0,0,"","","System","
Gets the element of the provided array with index `n` where `n` can be any integer type.
If the index falls outside of the bounds of an array, `NULL` is returned instead of a default value.

:::note
Arrays in ClickHouse are one-indexed.
:::

Negative indexes are supported. In this case, it selects the corresponding element numbered from the end. For example, `arr[-1]` is the last item in the array.
","arrayElementOrNull(arrays)","- `arrays` — Arbitrary number of array arguments. [`Array`](/sql-reference/data-types/array)
","","Returns a single combined array from the provided array arguments. [`Array(T)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT arrayElementOrNull(arr, 2) FROM (SELECT [1, 2, 3] AS arr)
```

```response title=Response
2
```

**Negative indexing**

```sql title=Query
SELECT arrayElementOrNull(arr, -1) FROM (SELECT [1, 2, 3] AS arr)
```

```response title=Response
3
```

**Index out of array bounds**

```sql title=Query
SELECT arrayElementOrNull(arr, 4) FROM (SELECT [1, 2, 3] AS arr)
```

```response title=Response
NULL
```

","1.1","Arrays"
"25.9.2.1","toInt16OrZero",0,0,"","","System","
Like [`toInt16`](#toInt16), this function converts an input value to a value of type [Int16](../data-types/int-uint.md) but returns `0` in case of an error.

Supported arguments:
- String representations of (U)Int*.

Unsupported arguments (return `0`):
- String representations of Float* values, including `NaN` and `Inf`.
- String representations of binary and hexadecimal values, e.g. `SELECT toInt16OrZero('0xc0fe');`.

:::note
If the input value cannot be represented within the bounds of [Int16](../data-types/int-uint.md), overflow or underflow of the result occurs.
This is not considered an error.
:::

See also:
- [`toInt16`](#toInt16).
- [`toInt16OrNull`](#toInt16OrNull).
- [`toInt16OrDefault`](#toInt16OrDefault).
    ","toInt16OrZero(x)","- `x` — A String representation of a number. [`String`](/sql-reference/data-types/string)
","","Returns a value of type Int16, otherwise `0` if the conversion is unsuccessful. [`Int16`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT
    toInt16OrZero('16'),
    toInt16OrZero('abc')
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toInt16OrZero('16'): 16
toInt16OrZero('abc'): 0
```

","1.1","Type Conversion"
"25.9.2.1","toWeek",0,0,"","","System","
This function returns the week number for date or datetime. The two-argument form of `toWeek()` enables you to specify whether the week starts
on Sunday or Monday and whether the return value should be in the range from `0` to `53` or from `1` to `53`.

[`toISOWeek()`](#toWeek) is a compatibility function that is equivalent to `toWeek(date,3)`.

The following table describes how the mode argument works.

| Mode | First day of week | Range | Week 1 is the first week ...    |
|------|-------------------|-------|---------------------------------|
| 0    | Sunday            | 0-53  | with a Sunday in this year      |
| 1    | Monday            | 0-53  | with 4 or more days this year   |
| 2    | Sunday            | 1-53  | with a Sunday in this year      |
| 3    | Monday            | 1-53  | with 4 or more days this year   |
| 4    | Sunday            | 0-53  | with 4 or more days this year   |
| 5    | Monday            | 0-53  | with a Monday in this year      |
| 6    | Sunday            | 1-53  | with 4 or more days this year   |
| 7    | Monday            | 1-53  | with a Monday in this year      |
| 8    | Sunday            | 1-53  | contains January 1              |
| 9    | Monday            | 1-53  | contains January 1              |

For mode values with a meaning of ""with 4 or more days this year,"" weeks are numbered according to ISO 8601:1988:

- If the week containing January 1 has 4 or more days in the new year, it is week 1.
- Otherwise, it is the last week of the previous year, and the next week is week 1.

For mode values with a meaning of ""contains January 1"", the week contains January 1 is week 1.
It does not matter how many days in the new year the week contained, even if it contained only one day.
I.e. if the last week of December contains January 1 of the next year, it will be week 1 of the next year.

The first argument can also be specified as [`String`](../data-types/string.md) in a format supported by [`parseDateTime64BestEffort()`](type-conversion-functions.md#parsedatetime64besteffort). Support for string arguments exists only for reasons of compatibility with MySQL which is expected by certain 3rd party tools. As string argument support may in future be made dependent on new MySQL-compatibility settings and because string parsing is generally slow, it is recommended to not use it.
    ","toWeek(datetime[, mode[, time_zone]])","- `datetime` — Date or date with time to get the week number from. [`Date`](/sql-reference/data-types/date) or [`DateTime`](/sql-reference/data-types/datetime)
- `mode` — Optional. A mode `0` to `9` determines the first day of the week and the range of the week number. Default `0`. - `time_zone` — Optional. Time zone. [`String`](/sql-reference/data-types/string)
","","Returns the week number according to the specified mode. [`UInt32`](/sql-reference/data-types/int-uint)","**Get week numbers with different modes**

```sql title=Query
SELECT toDate('2016-12-27') AS date, toWeek(date) AS week0, toWeek(date,1) AS week1, toWeek(date,9) AS week9
```

```response title=Response
┌───────date─┬─week0─┬─week1─┬─week9─┐
│ 2016-12-27 │    52 │    52 │     1 │
└────────────┴───────┴───────┴───────┘
```

","20.1","Dates and Times"
"25.9.2.1","reinterpretAsUInt32",0,0,"","","System","","","","","","","",""
"25.9.2.1","base64URLDecode",0,0,"","","System","
Decodes a string from [Base64](https://en.wikipedia.org/wiki/Base64) representation using URL-safe alphabet, according to RFC 4648.
Throws an exception in case of error.
","base64URLDecode(encoded)","- `encoded` — String column or constant to encode. If the string is not valid Base64-encoded, an exception is thrown. [`String`](/sql-reference/data-types/string)
","","Returns a string containing the decoded value of the argument. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT base64URLDecode('aHR0cHM6Ly9jbGlja2hvdXNlLmNvbQ')
```

```response title=Response
┌─base64URLDecode('aHR0cHM6Ly9jbGlja2hvdXNlLmNvbQ')─┐
│ https://clickhouse.com                            │
└───────────────────────────────────────────────────┘
```

","24.6","String"
"25.9.2.1","arrayDotProduct",0,0,"","","System","
Returns the dot product of two arrays.

:::note
The sizes of the two vectors must be equal. Arrays and Tuples may also contain mixed element types.
:::
","arrayDotProduct(v1, v2)","- `v1` — First vector. [`Array((U)Int* | Float* | Decimal)`](/sql-reference/data-types/array) or [`Tuple((U)Int* | Float* | Decimal)`](/sql-reference/data-types/tuple)
- `v2` — Second vector. [`Array((U)Int* | Float* | Decimal)`](/sql-reference/data-types/array) or [`Tuple((U)Int* | Float* | Decimal)`](/sql-reference/data-types/tuple)
","","The dot product of the two vectors.

:::note
The return type is determined by the type of the arguments. If Arrays or Tuples contain mixed element types then the result type is the supertype.
:::

 [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)","**Array example**

```sql title=Query
SELECT arrayDotProduct([1, 2, 3], [4, 5, 6]) AS res, toTypeName(res);
```

```response title=Response
32    UInt16
```

**Tuple example**

```sql title=Query
SELECT dotProduct((1::UInt16, 2::UInt8, 3::Float32),(4::Int16, 5::Float32, 6::UInt8)) AS res, toTypeName(res);
```

```response title=Response
32    Float64
```

","23.5","Arrays"
"25.9.2.1","punycodeEncode",0,0,"","","System","
Returns the [Punycode](https://en.wikipedia.org/wiki/Punycode) representation of a string.
The string must be UTF8-encoded, otherwise the behavior is undefined.
","punycodeEncode(s)","- `s` — Input value. [`String`](/sql-reference/data-types/string)
","","Returns a Punycode representation of the input value. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT punycodeEncode('München')
```

```response title=Response
┌─punycodeEncode('München')─┐
│ Mnchen-3ya                │
└───────────────────────────┘
```

","24.1","String"
"25.9.2.1","arrayElement",0,0,"","","System","
Gets the element of the provided array with index `n` where `n` can be any integer type.
If the index falls outside of the bounds of an array, it returns a default value (0 for numbers, an empty string for strings, etc.),
except for arguments of a non-constant array and a constant index 0. In this case there will be an error `Array indices are 1-based`.

:::note
Arrays in ClickHouse are one-indexed.
:::

Negative indexes are supported. In this case, the corresponding element is selected, numbered from the end. For example, `arr[-1]` is the last item in the array.

Operator `[n]` provides the same functionality.
    ","arrayElement(arr, n)","- `arr` — The array to search. [`Array(T)`](/sql-reference/data-types/array). - `n` — Position of the element to get. [`(U)Int*`](/sql-reference/data-types/int-uint). ","","Returns a single combined array from the provided array arguments [`Array(T)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT arrayElement(arr, 2) FROM (SELECT [1, 2, 3] AS arr)
```

```response title=Response
2
```

**Negative indexing**

```sql title=Query
SELECT arrayElement(arr, -1) FROM (SELECT [1, 2, 3] AS arr)
```

```response title=Response
3
```

**Using [n] notation**

```sql title=Query
SELECT arr[2] FROM (SELECT [1, 2, 3] AS arr)
```

```response title=Response
2
```

**Index out of array bounds**

```sql title=Query
SELECT arrayElement(arr, 4) FROM (SELECT [1, 2, 3] AS arr)
```

```response title=Response
0
```

","1.1","Arrays"
"25.9.2.1","RIPEMD160",0,0,"","","System","Calculates the RIPEMD-160 hash of the given string.","RIPEMD160(s)","- `s` — The input string to hash. [`String`](/sql-reference/data-types/string)
","","Returns the RIPEMD160 hash of the given input string as a fixed-length string. [`FixedString(20)`](/sql-reference/data-types/fixedstring)","**Usage example**

```sql title=Query
SELECT HEX(RIPEMD160('The quick brown fox jumps over the lazy dog'));
```

```response title=Response
┌─HEX(RIPEMD160('The quick brown fox jumps over the lazy dog'))─┐
│ 37F332F68DB77BD9D7EDD4969571AD671CF9DD3B                      │
└───────────────────────────────────────────────────────────────┘
```

","24.10","Hash"
"25.9.2.1","sqidDecode",0,0,"","","System","
Transforms a [sqid](https://sqids.org/) back into an array of numbers.
    ","sqidDecode(sqid)","- `sqid` — The sqid to decode. [`String`](/sql-reference/data-types/string)
","","Returns an array of numbers from `sqid`. [`Array(UInt64)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT sqidDecode('gXHfJ1C6dN');
```

```response title=Response
┌─sqidDecode('gXHfJ1C6dN')─────┐
│ [1, 2, 3, 4, 5]              │
└──────────────────────────────┘
```

","24.1","Encoding"
"25.9.2.1","arrayReverseSplit",0,0,"","","System","Split a source array into multiple arrays. When `func(x[, y1, ..., yN])` returns something other than zero, the array will be split to the right of the element. The array will not be split after the last element.","arrayReverseSplit(func(x[, y1, ..., yN]), source_arr[, cond1_arr, ... , condN_arr])","- `func(x[, y1, ..., yN])` — A lambda function which operates on elements of the source array (`x`) and condition arrays (`y`). [`Lambda function`](/sql-reference/functions/overview#arrow-operator-and-lambda)
- `source_arr` — The source array to process. [`Lambda function`](/sql-reference/functions/overview#arrow-operator-and-lambda)
- `[, cond1_arr, ... , condN_arr]` — Optional. N condition arrays providing additional arguments to the lambda function. [`Array(T)`](/sql-reference/data-types/array)
","","Returns an array of arrays. [`Array(Array(T))`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT arrayReverseSplit((x, y) -> y, [1, 2, 3, 4, 5], [1, 0, 0, 1, 0]) AS res
```

```response title=Response
[[1], [2, 3, 4], [5]]
```

","20.1","Arrays"
"25.9.2.1","transactionOldestSnapshot",0,0,"","","System","","","","","","","",""
"25.9.2.1","dumpColumnStructure",0,0,"","","System","
Outputs a detailed description of the internal structure of a column and its data type.
","dumpColumnStructure(x)","- `x` — Value for which to get the description of. [`Any`](/sql-reference/data-types)
","","Returns a description of the column structure used for representing the value. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT dumpColumnStructure(CAST('2018-01-01 01:02:03', 'DateTime'));
```

```response title=Response
┌─dumpColumnStructure(CAST('2018-01-01 01:02:03', 'DateTime'))─┐
│ DateTime, Const(size = 1, UInt32(size = 1))                  │
└──────────────────────────────────────────────────────────────┘
```

","1.1","Other"
"25.9.2.1","multiSearchFirstIndex",0,0,"","","System","","","","","","","",""
"25.9.2.1","arrayPopFront",0,0,"","","System","Removes the first item from the array.","arrayPopFront(arr)","- `arr` — The array for which to remove the first element from. [`Array(T)`](/sql-reference/data-types/array)
","","Returns an array identical to `arr` but without the first element of `arr` [`Array(T)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT arrayPopFront([1, 2, 3]) AS res;
```

```response title=Response
[2, 3]
```

","1.1","Arrays"
"25.9.2.1","subtractMilliseconds",0,0,"","","System","
Subtracts a specified number of milliseconds from a date with time or a string-encoded date with time.
    ","subtractMilliseconds(datetime, num)","- `datetime` — Date with time to subtract specified number of milliseconds from. [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64) or [`String`](/sql-reference/data-types/string)
- `num` — Number of milliseconds to subtract. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns `datetime` minus `num` milliseconds [`DateTime64`](/sql-reference/data-types/datetime64)","**Subtract milliseconds from different date time types**

```sql title=Query
WITH
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractMilliseconds(date_time, 1000) AS subtract_milliseconds_with_date_time,
    subtractMilliseconds(date_time_string, 1000) AS subtract_milliseconds_with_date_time_string
```

```response title=Response
┌─subtract_milliseconds_with_date_time─┬─subtract_milliseconds_with_date_time_string─┐
│              2023-12-31 23:59:59.000 │                     2023-12-31 23:59:59.000 │
└──────────────────────────────────────┴─────────────────────────────────────────────┘
```

**Using alternative INTERVAL syntax**

```sql title=Query
SELECT dateSub('1998-06-16'::DateTime, INTERVAL 10 millisecond)
```

```response title=Response
┌─minus(CAST('⋯second(10))─┐
│  1998-06-15 23:59:59.990 │
└──────────────────────────┘
```

","22.6","Dates and Times"
"25.9.2.1","ngramMinHashArg",0,0,"","","System","
Splits a ASCII string into n-grams of `ngramsize` symbols and returns the n-grams with minimum and maximum hashes, calculated by the [`ngramMinHash`](#ngramMinHash) function with the same input.
It is case sensitive.
","ngramMinHashArg(string[, ngramsize, hashnum])","- `string` — String for which to compute the hash. [`String`](/sql-reference/data-types/string)
- `ngramsize` — Optional. The size of an n-gram, any number from `1` to `25`. The default value is `3`. [`UInt8`](/sql-reference/data-types/int-uint)
- `hashnum` — Optional. The number of minimum and maximum hashes used to calculate the result, any number from `1` to `25`. The default value is `6`. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns a tuple with two tuples with `hashnum` n-grams each. [`Tuple(String)`](/sql-reference/data-types/tuple)","**Usage example**

```sql title=Query
SELECT ngramMinHashArg('ClickHouse') AS Tuple;
```

```response title=Response
┌─Tuple─────────────────────────────────────────────────────────────────────────┐
│ (('ous','ick','lic','Hou','kHo','use'),('Hou','lic','ick','ous','ckH','Cli')) │
└───────────────────────────────────────────────────────────────────────────────┘
```

","21.1","Hash"
"25.9.2.1","snowflakeIDToDateTime",0,0,"","","System","
Returns the timestamp component of a [Snowflake ID](https://en.wikipedia.org/wiki/Snowflake_ID) as a value of type [DateTime](../data-types/datetime.md).
    ","snowflakeIDToDateTime(value[, epoch[, time_zone]])","- `value` — Snowflake ID. [`UInt64`](/sql-reference/data-types/int-uint)
- `epoch` — Optional. Epoch of the Snowflake ID in milliseconds since 1970-01-01. Defaults to 0 (1970-01-01). For the Twitter/X epoch (2015-01-01), provide 1288834974657. [`UInt*`](/sql-reference/data-types/int-uint)
- `time_zone` — Optional. [Timezone](/operations/server-configuration-parameters/settings.md#timezone). The function parses `time_string` according to the timezone. [`String`](/sql-reference/data-types/string)
","","Returns the timestamp component of `value`. [`DateTime`](/sql-reference/data-types/datetime)","**Usage example**

```sql title=Query
SELECT snowflakeIDToDateTime(7204436857747984384) AS res
```

```response title=Response
┌─────────────────res─┐
│ 2024-06-06 10:59:58 │
└─────────────────────┘
```

","24.6","UUID"
"25.9.2.1","protocol",0,0,"","","System","
Extracts the protocol from a URL.

Examples of typical returned values: http, https, ftp, mailto, tel, magnet.
    ","protocol(url)","- `url` — URL. [`String`](/sql-reference/data-types/string)
","","Returns the protocol of the URL, or an empty string if it cannot be determined. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT protocol('https://clickhouse.com/');
```

```response title=Response
┌─protocol('https://clickhouse.com/')─┐
│ https                               │
└─────────────────────────────────────┘
```

","1.1","URL"
"25.9.2.1","multiSearchAllPositionsUTF8",0,0,"","","System","
Like [`multiSearchAllPositions`](#multiSearchAllPositions) but assumes `haystack` and the `needle` substrings are UTF-8 encoded strings.
    ","multiSearchAllPositionsUTF8(haystack, needle1[, needle2, ...])","- `haystack` — UTF-8 encoded string in which the search is performed. [`String`](/sql-reference/data-types/string)
- `needle1[, needle2, ...]` — An array of UTF-8 encoded substrings to be searched. [`Array(String)`](/sql-reference/data-types/array)
","","Returns array of the starting position in bytes and counting from 1 (if the substring was found), `0` if the substring was not found. [`Array`](/sql-reference/data-types/array)","**UTF-8 multi-search**

```sql title=Query
SELECT multiSearchAllPositionsUTF8('ClickHouse',['C','H'])
```

```response title=Response
┌─multiSearchAllPositionsUTF8('ClickHouse', ['C', 'H'])─┐
│ [1,6]                                                 │
└───────────────────────────────────────────────────────┘
```

","20.1","String Search"
"25.9.2.1","divideOrNull",0,0,"","","System","
Same as `divide` but returns NULL when dividing by zero.
    ","divideOrNull(x, y)","- `x` — Dividend - `y` — Divisor ","","The quotient of x and y, or NULL.","**Dividing by zero**

```sql title=Query
SELECT divideOrNull(25, 0)
```

```response title=Response
\N
```

","25.5","Arithmetic"
"25.9.2.1","toYearWeek",0,0,"","","System","
Returns the year and week for a date. The year in the result may be different from the year in the date argument for the first and the last week of the year.

The mode argument works like the mode argument of [`toWeek()`](/sql-reference/functions/date-time-functions#toWeek).

Warning: The week number returned by `toYearWeek()` can be different from what the `toWeek()` returns. `toWeek()` always returns week number in the context of the given year, and in case `toWeek()` returns `0`, `toYearWeek()` returns the value corresponding to the last week of previous year. See `prev_yearWeek` in example below.

The first argument can also be specified as [`String`](../data-types/string.md) in a format supported by [`parseDateTime64BestEffort()`](type-conversion-functions.md#parsedatetime64besteffort). Support for string arguments exists only for reasons of compatibility with MySQL which is expected by certain 3rd party tools. As string argument support may in future be made dependent on new MySQL-compatibility settings and because string parsing is generally slow, it is recommended to not use it.
    ","toYearWeek(datetime[, mode[, timezone]])","- `datetime` — Date or date with time to get the year and week of. [`Date`](/sql-reference/data-types/date) or [`DateTime`](/sql-reference/data-types/datetime)
- `mode` — Optional. A mode `0` to `9` determines the first day of the week and the range of the week number. Default `0`. - `timezone` — Optional. Time zone. [`String`](/sql-reference/data-types/string)
","","Returns year and week number as a combined integer value. [`UInt32`](/sql-reference/data-types/int-uint)","**Get year-week combinations with different modes**

```sql title=Query
SELECT toDate('2016-12-27') AS date, toYearWeek(date) AS yearWeek0, toYearWeek(date,1) AS yearWeek1, toYearWeek(date,9) AS yearWeek9, toYearWeek(toDate('2022-01-01')) AS prev_yearWeek
```

```response title=Response
┌───────date─┬─yearWeek0─┬─yearWeek1─┬─yearWeek9─┬─prev_yearWeek─┐
│ 2016-12-27 │    201652 │    201652 │    201701 │        202152 │
└────────────┴───────────┴───────────┴───────────┴───────────────┘
```

","20.1","Dates and Times"
"25.9.2.1","toInt8",0,0,"","","System","
Converts an input value to a value of type [`Int8`](../data-types/int-uint.md).
Throws an exception in case of an error.

Supported arguments:
- Values or string representations of type (U)Int*.
- Values of type Float*.

Unsupported arguments:
- String representations of Float* values, including `NaN` and `Inf`.
- String representations of binary and hexadecimal values, e.g. `SELECT toInt8('0xc0fe');`.

:::note
If the input value cannot be represented within the bounds of [Int8](../data-types/int-uint.md), overflow or underflow of the result occurs.
This is not considered an error.
For example: `SELECT toInt8(128) == -128;`.
:::

:::note
The function uses [rounding towards zero](https://en.wikipedia.org/wiki/Rounding#Rounding_towards_zero), meaning it truncates fractional digits of numbers.
:::

See also:
- [`toInt8OrZero`](#toInt8OrZero).
- [`toInt8OrNull`](#toInt8OrNull).
- [`toInt8OrDefault`](#toInt8OrDefault).
    ","toInt8(expr)","- `expr` — Expression returning a number or a string representation of a number. [`Expression`](/sql-reference/data-types/special-data-types/expression)
","","Returns an 8-bit integer value. [`Int8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT
    toInt8(-8),
    toInt8(-8.8),
    toInt8('-8')
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toInt8(-8):   -8
toInt8(-8.8): -8
toInt8('-8'): -8
```

","1.1","Type Conversion"
"25.9.2.1","numericIndexedVectorBuild",0,0,"","","System","
Creates a NumericIndexedVector from a map. The map's keys represent the vector's index and map's value represents the vector's value.
        ","numericIndexedVectorBuild(map)","- `map` — A mapping from index to value. [`Map`](/sql-reference/data-types/map)
","","Returns a NumericIndexedVector object. [`AggregateFunction`](/sql-reference/data-types/aggregatefunction)","**Usage example**

```sql title=Query
SELECT numericIndexedVectorBuild(mapFromArrays([1, 2, 3], [10, 20, 30])) AS res, toTypeName(res);
```

```response title=Response
┌─res─┬─toTypeName(res)────────────────────────────────────────────┐
│     │ AggregateFunction(groupNumericIndexedVector, UInt8, UInt8) │
└─────┴────────────────────────────────────────────────────────────┘
```

","25.7","NumericIndexedVector"
"25.9.2.1","s2RectContains",0,0,"","","System","","","","","","","",""
"25.9.2.1","equals",0,0,"","","System","Compares two values for equality.","equals(a, b)
        -- a = b
        -- a == b","- `a` — First value.<sup>[*](#comparison-rules)</sup> - `b` — Second value.<sup>[*](#comparison-rules)</sup> ","","Returns `1` if `a` is equal to `b`, otherwise `0` [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT 1 = 1, 1 = 2;
```

```response title=Response
┌─equals(1, 1)─┬─equals(1, 2)─┐
│            1 │            0 │
└──────────────┴──────────────┘
```

","1.1","Comparison"
"25.9.2.1","simpleJSONExtractInt",0,0,"","","System","
Parses `Int64` from the value of the field named `field_name`.
If `field_name` is a string field, it tries to parse a number from the beginning of the string.
If the field does not exist, or it exists but does not contain a number, it returns `0`.
","simpleJSONExtractInt(json, field_name)","- `json` — The JSON in which the field is searched for. [`String`](/sql-reference/data-types/string)
- `field_name` — The name of the field to search for. [`const String`](/sql-reference/data-types/string)
","","Returns the number parsed from the field if the field exists and contains a number, `0` otherwise [`Int64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
CREATE TABLE jsons
(
    `json` String
)
ENGINE = MergeTree
ORDER BY tuple();

INSERT INTO jsons VALUES ('{""foo"":""-4e3""}');
INSERT INTO jsons VALUES ('{""foo"":-3.4}');
INSERT INTO jsons VALUES ('{""foo"":5}');
INSERT INTO jsons VALUES ('{""foo"":""not1number""}');
INSERT INTO jsons VALUES ('{""baz"":2}');

SELECT simpleJSONExtractInt(json, 'foo') FROM jsons ORDER BY json;
```

```response title=Response
0
-4
0
-3
5
```

","21.4","JSON"
"25.9.2.1","toLastDayOfWeek",0,0,"","","System","
Rounds a date or date with time up to the nearest Saturday or Sunday.

:::note
The return type can be configured by setting [`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions).
:::
    ","toLastDayOfWeek(datetime[, mode[, timezone]])","- `datetime` — A date or date with time to convert. [`Date`](/sql-reference/data-types/date) or [`DateTime`](/sql-reference/data-types/datetime) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime64`](/sql-reference/data-types/datetime64)
- `mode` — Determines the first day of the week as described in the `toWeek()` function. Default `0`. [`UInt8`](/sql-reference/data-types/int-uint)
- `timezone` — Optional. The timezone to use for the conversion. If not specified, the server's timezone is used. [`String`](/sql-reference/data-types/string)
","","Returns the date of the nearest Saturday or Sunday, on or after the given date, depending on the mode [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)","**Round up to the nearest Saturday or Sunday**

```sql title=Query
SELECT
    toLastDayOfWeek(toDateTime('2023-04-21 10:20:30')), /* a Friday */
    toLastDayOfWeek(toDateTime('2023-04-21 10:20:30'), 1), /* a Friday */
    toLastDayOfWeek(toDate('2023-04-23')), /* a Sunday */
    toLastDayOfWeek(toDate('2023-04-23'), 1) /* a Sunday */
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toLastDayOfWeek(toDateTime('2023-04-21 10:20:30')):      2023-04-23
toLastDayOfWeek(toDateTime('2023-04-21 10:20:30'), 1):   2023-04-22
toLastDayOfWeek(toDate('2023-04-23')):                   2023-04-23
toLastDayOfWeek(toDate('2023-04-23'), 1):                2023-04-23
```

","23.5","Dates and Times"
"25.9.2.1","synonyms",0,1,"","","System","","","","","","","",""
"25.9.2.1","isConstant",0,0,"","","System","
Returns whether the argument is a constant expression.
A constant expression is an expression whose result is known during query analysis, i.e. before execution.
For example, expressions over [literals](/sql-reference/syntax#literals) are constant expressions.
This function is mostly intended for development, debugging and demonstration.
    ","isConstant(x)","- `x` — An expression to check. [`Any`](/sql-reference/data-types)
","","Returns `1` if `x` is constant, `0` if `x` is non-constant. [`UInt8`](/sql-reference/data-types/int-uint)","**Constant expression**

```sql title=Query
SELECT isConstant(x + 1)
FROM (SELECT 43 AS x)
```

```response title=Response
┌─isConstant(plus(x, 1))─┐
│                      1 │
└────────────────────────┘
```

**Constant with function**

```sql title=Query
WITH 3.14 AS pi
SELECT isConstant(cos(pi))
```

```response title=Response
┌─isConstant(cos(pi))─┐
│                   1 │
└─────────────────────┘
```

**Non-constant expression**

```sql title=Query
SELECT isConstant(number)
FROM numbers(1)
```

```response title=Response
┌─isConstant(number)─┐
│                  0 │
└────────────────────┘
```

**Behavior of the now() function**

```sql title=Query
SELECT isConstant(now())
```

```response title=Response
┌─isConstant(now())─┐
│                 1 │
└───────────────────┘
```

","20.3","Other"
"25.9.2.1","ULIDStringToDateTime",0,0,"","","System","
This function extracts the timestamp from a [ULID]((https://github.com/ulid/spec).
    ","ULIDStringToDateTime(ulid[, timezone])","- `ulid` — Input ULID. [`String`](/sql-reference/data-types/string) or [`FixedString(26)`](/sql-reference/data-types/fixedstring)
- `timezone` — Optional. Timezone name for the returned value. [`String`](/sql-reference/data-types/string)
","","Timestamp with milliseconds precision. [`DateTime64(3)`](/sql-reference/data-types/datetime64)","**Usage example**

```sql title=Query
SELECT ULIDStringToDateTime('01GNB2S2FGN2P93QPXDNB4EN2R')
```

```response title=Response
┌─ULIDStringToDateTime('01GNB2S2FGN2P93QPXDNB4EN2R')─┐
│                            2022-12-28 00:40:37.616 │
└────────────────────────────────────────────────────┘
```

","23.3","ULID"
"25.9.2.1","addNanoseconds",0,0,"","","System","
Adds a specified number of nanoseconds to a date with time or a string-encoded date with time.
    ","addNanoseconds(datetime, num)","- `datetime` — Date with time to add specified number of nanoseconds to. [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64) or [`String`](/sql-reference/data-types/string)
- `num` — Number of nanoseconds to add. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns `datetime` plus `num` nanoseconds [`DateTime64`](/sql-reference/data-types/datetime64)","**Add nanoseconds to different date time types**

```sql title=Query
WITH
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addNanoseconds(date_time, 1000) AS add_nanoseconds_with_date_time,
    addNanoseconds(date_time_string, 1000) AS add_nanoseconds_with_date_time_string
```

```response title=Response
┌─add_nanoseconds_with_date_time─┬─add_nanoseconds_with_date_time_string─┐
│  2024-01-01 00:00:00.000001000 │         2024-01-01 00:00:00.000001000 │
└────────────────────────────────┴───────────────────────────────────────┘
```

**Using alternative INTERVAL syntax**

```sql title=Query
SELECT dateAdd('1998-06-16'::DateTime, INTERVAL 1000 nanosecond)
```

```response title=Response
┌─plus(CAST('199⋯osecond(1000))─┐
│ 1998-06-16 00:00:00.000001000 │
└───────────────────────────────┘
```

","22.6","Dates and Times"
"25.9.2.1","timestamp",0,1,"","","System","
Converts the first argument `expr` to type [`DateTime64(6)`](/sql-reference/data-types/datetime64).
If a second argument `expr_time` is provided, it adds the specified time to the converted value.
    ","timestamp(expr[, expr_time])","- `expr` — Date or date with time. [`String`](/sql-reference/data-types/string)
- `expr_time` — Optional. Time to add to the converted value. [`String`](/sql-reference/data-types/string)
","","Returns the converted value of `expr`, or `expr` with added time [`DateTime64(6)`](/sql-reference/data-types/datetime64)","**Convert date string to DateTime64(6)**

```sql title=Query
SELECT timestamp('2023-12-31') AS ts;
```

```response title=Response
┌─────────────────────────ts─┐
│ 2023-12-31 00:00:00.000000 │
└────────────────────────────┘
```

**Add time to date string**

```sql title=Query
SELECT timestamp('2023-12-31 12:00:00', '12:00:00.11') AS ts;
```

```response title=Response
┌─────────────────────────ts─┐
│ 2024-01-01 00:00:00.110000 │
└────────────────────────────┘
```

","23.9","Dates and Times"
"25.9.2.1","parseDateTime64",0,0,"","","System","","","","","","","",""
"25.9.2.1","reinterpretAsInt256",0,0,"","","System","","","","","","","",""
"25.9.2.1","abs",0,1,"","","System","Calculates the absolute value of `x`. Has no effect if `x` is of an unsigned type. If `x` is of a signed type, it returns an unsigned number.","abs(x)","- `x` — Value to get the absolute value of ","","The absolute value of `x`","**Usage example**

```sql title=Query
SELECT abs(-0.5)
```

```response title=Response
0.5
```

","1.1","Arithmetic"
"25.9.2.1","toValidUTF8",0,0,"","","System","
Converts a string to valid UTF-8 encoding by replacing any invalid UTF-8 characters with the replacement character `�` (U+FFFD).
When multiple consecutive invalid characters are found, they are collapsed into a single replacement character.
","toValidUTF8(s)","- `s` — Any set of bytes represented as the String data type object. [`String`](/sql-reference/data-types/string)
","","Returns a valid UTF-8 string. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT toValidUTF8('\\x61\\xF0\\x80\\x80\\x80b')
```

```response title=Response
c
┌─toValidUTF8('a����b')─┐
│ a�b                   │
└───────────────────────┘
```

","20.1","String"
"25.9.2.1","arrayEnumerateUniq",0,0,"","","System","
Returns an array the same size as the source array, indicating for each element what its position is among elements with the same value.

This function is useful when using `ARRAY JOIN` and aggregation of array elements.

The function can take multiple arrays of the same size as arguments. In this case, uniqueness is considered for tuples of elements in the same positions in all the arrays.
","arrayEnumerateUniq(arr1[, arr2, ... , arrN])","- `arr1` — First array to process. [`Array(T)`](/sql-reference/data-types/array)
- `arr2, ...` — Optional. Additional arrays of the same size for tuple uniqueness. [`Array(UInt32)`](/sql-reference/data-types/array)
","","Returns an array where each element is the position among elements with the same value or tuple. [`Array(T)`](/sql-reference/data-types/array)","**Basic usage**

```sql title=Query
SELECT arrayEnumerateUniq([10, 20, 10, 30]);
```

```response title=Response
[1, 1, 2, 1]
```

**Multiple arrays**

```sql title=Query
SELECT arrayEnumerateUniq([1, 1, 1, 2, 2, 2], [1, 1, 2, 1, 1, 2]);
```

```response title=Response
[1,2,1,1,2,1]
```

**ARRAY JOIN aggregation**

```sql title=Query
-- Each goal ID has a calculation of the number of conversions (each element in the Goals nested data structure is a goal that was reached, which we refer to as a conversion)
-- and the number of sessions. Without ARRAY JOIN, we would have counted the number of sessions as sum(Sign). But in this particular case,
-- the rows were multiplied by the nested Goals structure, so in order to count each session one time after this, we apply a condition to the
-- value of the arrayEnumerateUniq(Goals.ID) function.

SELECT
    Goals.ID AS GoalID,
    sum(Sign) AS Reaches,
    sumIf(Sign, num = 1) AS Visits
FROM test.visits
ARRAY JOIN
    Goals,
    arrayEnumerateUniq(Goals.ID) AS num
WHERE CounterID = 160656
GROUP BY GoalID
ORDER BY Reaches DESC
LIMIT 10
```

```response title=Response
┌──GoalID─┬─Reaches─┬─Visits─┐
│   53225 │    3214 │   1097 │
│ 2825062 │    3188 │   1097 │
│   56600 │    2803 │    488 │
│ 1989037 │    2401 │    365 │
│ 2830064 │    2396 │    910 │
│ 1113562 │    2372 │    373 │
│ 3270895 │    2262 │    812 │
│ 1084657 │    2262 │    345 │
│   56599 │    2260 │    799 │
│ 3271094 │    2256 │    812 │
└─────────┴─────────┴────────┘
```

","1.1","Arrays"
"25.9.2.1","toDayOfWeek",0,0,"","","System","
Returns the number of the day within the week of a `Date` or `DateTime` value.

The two-argument form of `toDayOfWeek()` enables you to specify whether the week starts on Monday or Sunday,
and whether the return value should be in the range from 0 to 6 or 1 to 7.

| Mode | First day of week | Range                                          |
|------|-------------------|------------------------------------------------|
| 0    | Monday            | 1-7: Monday = 1, Tuesday = 2, ..., Sunday = 7  |
| 1    | Monday            | 0-6: Monday = 0, Tuesday = 1, ..., Sunday = 6  |
| 2    | Sunday            | 0-6: Sunday = 0, Monday = 1, ..., Saturday = 6 |
| 3    | Sunday            | 1-7: Sunday = 1, Monday = 2, ..., Saturday = 7 |
        ","toDayOfWeek(datetime[, mode[, timezone]])","- `datetime` — Date or date with time to get the day of week from. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
- `mode` — Optional. Integer specifying the week mode (0-3). Defaults to 0 if omitted. [`UInt8`](/sql-reference/data-types/int-uint)
- `timezone` — Optional. Timezone to use for the conversion. [`String`](/sql-reference/data-types/string)
","","Returns the day of the week for the given `Date` or `DateTime` [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
-- The following date is April 21, 2023, which was a Friday:
SELECT
    toDayOfWeek(toDateTime('2023-04-21')),
    toDayOfWeek(toDateTime('2023-04-21'), 1)
```

```response title=Response
┌─toDayOfWeek(toDateTime('2023-04-21'))─┬─toDayOfWeek(toDateTime('2023-04-21'), 1)─┐
│                                     5 │                                        4 │
└───────────────────────────────────────┴──────────────────────────────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","randChiSquared",0,0,"","","System","
Returns a random Float64 number drawn from a [chi-square distribution](https://en.wikipedia.org/wiki/Chi-squared_distribution).
    ","randChiSquared(degree_of_freedom[, x])","- `degree_of_freedom` — Degrees of freedom. [`Float64`](/sql-reference/data-types/float)
- `x` — Optional and ignored. The only purpose of the argument is to prevent [common subexpression elimination](/sql-reference/functions/overview#common-subexpression-elimination) when the same function call is used multiple times in a query. [`Any`](/sql-reference/data-types)
","","Returns a random Float64 number drawn from the specified chi-square distribution. [`Float64`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT randChiSquared(10) FROM numbers(5)
```

```response title=Response
┌─randChiSquared(10)─┐
│ 10.015463656521543 │
│  9.621799919882768 │
│   2.71785015634699 │
│ 11.128188665931908 │
│  4.902063104425469 │
└────────────────────┘
```

","22.10","Random Number"
"25.9.2.1","toStartOfYear",0,0,"","","System","
Rounds down a date or date with time to the first day of the year. Returns the date as a `Date` object.

:::note
The return type can be configured by setting [`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions).
:::
    ","toStartOfYear(value)","- `value` — The date or date with time to round down. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
","","Returns the first day of the year for the given date/time [`Date`](/sql-reference/data-types/date)","**Round down to the first day of the year**

```sql title=Query
SELECT toStartOfYear(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toStartOfYear(toDateTime('2023-04-21 10:20:30'))─┐
│                                       2023-01-01 │
└──────────────────────────────────────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","demangle",0,0,"","","System","
Converts a symbol to a C++ function name.
The symbol is usually returned by function `addressToSymbol`.
    ","demangle(symbol)","- `symbol` — Symbol from an object file. [`String`](/sql-reference/data-types/string)
","","Returns the name of the C++ function, or an empty string if the symbol is not valid. [`String`](/sql-reference/data-types/string)","**Selecting the first string from the `trace_log` system table**

```sql title=Query
SELECT * FROM system.trace_log LIMIT 1 \G;
```

```response title=Response
-- The `trace` field contains the stack trace at the moment of sampling.
Row 1:
──────
event_date:    2019-11-20
event_time:    2019-11-20 16:57:59
revision:      54429
timer_type:    Real
thread_number: 48
query_id:      724028bf-f550-45aa-910d-2af6212b94ac
trace:         [94138803686098,94138815010911,94138815096522,94138815101224,94138815102091,94138814222988,94138806823642,94138814457211,94138806823642,94138814457211,94138806823642,94138806795179,94138806796144,94138753770094,94138753771646,94138753760572,94138852407232,140399185266395,140399178045583]
```

**Getting a function name for a single address**

```sql title=Query
SET allow_introspection_functions=1;
SELECT demangle(addressToSymbol(94138803686098)) \G;
```

```response title=Response
Row 1:
──────
demangle(addressToSymbol(94138803686098)): DB::IAggregateFunctionHelper<DB::AggregateFunctionSum<unsigned long, unsigned long, DB::AggregateFunctionSumData<unsigned long> > >::addBatchSinglePlace(unsigned long, char*, DB::IColumn const**, DB::Arena*) const
```

**Applying the function to the whole stack trace**

```sql title=Query
SET allow_introspection_functions=1;

-- The arrayMap function allows to process each individual element of the trace array by the demangle function.
-- The result of this processing is shown in the trace_functions column of output.

SELECT
    arrayStringConcat(arrayMap(x -> demangle(addressToSymbol(x)), trace), '\n') AS trace_functions
FROM system.trace_log
LIMIT 1
\G
```

```response title=Response
Row 1:
──────
trace_functions: DB::IAggregateFunctionHelper<DB::AggregateFunctionSum<unsigned long, unsigned long, DB::AggregateFunctionSumData<unsigned long> > >::addBatchSinglePlace(unsigned long, char*, DB::IColumn const**, DB::Arena*) const
DB::Aggregator::executeWithoutKeyImpl(char*&, unsigned long, DB::Aggregator::AggregateFunctionInstruction*, DB::Arena*) const
DB::Aggregator::executeOnBlock(std::vector<COW<DB::IColumn>::immutable_ptr<DB::IColumn>, std::allocator<COW<DB::IColumn>::immutable_ptr<DB::IColumn> > >, unsigned long, DB::AggregatedDataVariants&, std::vector<DB::IColumn const*, std::allocator<DB::IColumn const*> >&, std::vector<std::vector<DB::IColumn const*, std::allocator<DB::IColumn const*> >, std::allocator<std::vector<DB::IColumn const*, std::allocator<DB::IColumn const*> > > >&, bool&)
DB::Aggregator::executeOnBlock(DB::Block const&, DB::AggregatedDataVariants&, std::vector<DB::IColumn const*, std::allocator<DB::IColumn const*> >&, std::vector<std::vector<DB::IColumn const*, std::allocator<DB::IColumn const*> >, std::allocator<std::vector<DB::IColumn const*, std::allocator<DB::IColumn const*> > > >&, bool&)
DB::Aggregator::execute(std::shared_ptr<DB::IBlockInputStream> const&, DB::AggregatedDataVariants&)
DB::AggregatingBlockInputStream::readImpl()
DB::IBlockInputStream::read()
DB::ExpressionBlockInputStream::readImpl()
DB::IBlockInputStream::read()
DB::ExpressionBlockInputStream::readImpl()
DB::IBlockInputStream::read()
DB::AsynchronousBlockInputStream::calculate()
std::_Function_handler<void (), DB::AsynchronousBlockInputStream::next()::{lambda()#1}>::_M_invoke(std::_Any_data const&)
ThreadPoolImpl<ThreadFromGlobalPool>::worker(std::_List_iterator<ThreadFromGlobalPool>)
ThreadFromGlobalPool::ThreadFromGlobalPool<ThreadPoolImpl<ThreadFromGlobalPool>::scheduleImpl<void>(std::function<void ()>, int, std::optional<unsigned long>)::{lambda()#3}>(ThreadPoolImpl<ThreadFromGlobalPool>::scheduleImpl<void>(std::function<void ()>, int, std::optional<unsigned long>)::{lambda()#3}&&)::{lambda()#1}::operator()() const
ThreadPoolImpl<std::thread>::worker(std::_List_iterator<std::thread>)
execute_native_thread_routine
start_thread
clone
```

","20.1","Introspection"
"25.9.2.1","bin",0,1,"","","System","
Returns a string containing the argument's binary representation according
to the following logic for different types:

| Type                       | Description                                                                                                                                                                                                                                                           |
|----------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `(U)Int*`                  | Prints bin digits from the most significant to least significant (big-endian or ""human-readable"" order). It starts with the most significant non-zero byte (leading zero bytes are omitted) but always prints eight digits of every byte if the leading digit is zero.|
| `Date` and `DateTime`      | Formatted as corresponding integers (the number of days since epoch for Date and the value of unix timestamp for DateTime).                                                                                                                                           |
| `String` and `FixedString` | All bytes are simply encoded as eight binary numbers. Zero bytes are not omitted.                                                                                                                                                                                     |
| `Float*` and `Decimal`     | Encoded as their representation in memory. As we support little-endian architecture, they are encoded in little-endian. Zero leading/trailing bytes are not omitted.                                                                                                  |
| `UUID`                     | Encoded as big-endian order string.                                                                                                                                                                                                                                   |
    ","bin(arg)","- `arg` — A value to convert to binary. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring) or [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal) or [`Date`](/sql-reference/data-types/date) or [`DateTime`](/sql-reference/data-types/datetime)
","","Returns a string with the binary representation of the argument. [`String`](/sql-reference/data-types/string)","**Simple integer**

```sql title=Query
SELECT bin(14)
```

```response title=Response
┌─bin(14)──┐
│ 00001110 │
└──────────┘
```

**Float32 numbers**

```sql title=Query
SELECT bin(toFloat32(number)) AS bin_presentation FROM numbers(15, 2)
```

```response title=Response
┌─bin_presentation─────────────────┐
│ 00000000000000000111000001000001 │
│ 00000000000000001000000001000001 │
└──────────────────────────────────┘
```

**Float64 numbers**

```sql title=Query
SELECT bin(toFloat64(number)) AS bin_presentation FROM numbers(15, 2)
```

```response title=Response
┌─bin_presentation─────────────────────────────────────────────────┐
│ 0000000000000000000000000000000000000000000000000010111001000000 │
│ 0000000000000000000000000000000000000000000000000011000001000000 │
└──────────────────────────────────────────────────────────────────┘
```

**UUID conversion**

```sql title=Query
SELECT bin(toUUID('61f0c404-5cb3-11e7-907b-a6006ad3dba0')) AS bin_uuid
```

```response title=Response
┌─bin_uuid─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│ 01100001111100001100010000000100010111001011001100010001111001111001000001111011101001100000000001101010110100111101101110100000 │
└──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

","21.8","Encoding"
"25.9.2.1","toDayOfYear",0,0,"","","System","
Returns the number of the day within the year (1-366) of a `Date` or `DateTime` value.
        ","toDayOfYear(datetime)","- `datetime` — Date or date with time to get the day of year from. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
","","Returns the day of the year of the given Date or DateTime [`UInt16`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT toDayOfYear(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toDayOfYear(toDateTime('2023-04-21 10:20:30'))─┐
│                                            111 │
└────────────────────────────────────────────────┘
```

","18.4","Dates and Times"
"25.9.2.1","dictGet",0,0,"","","System","
Retrieves values from a dictionary.

Accepts 3 parameters:
-- name of the dictionary;
-- name of the column of the dictionary or tuple of column names;
-- key value - expression returning dictionary key-type value or tuple-type value - depending on the dictionary configuration;

Returned value: value of the dictionary attribute parsed in the attribute's data type if key is found, otherwise <null_value> element specified in the dictionary configuration.

Throws an exception if cannot parse the value of the attribute or the value does not match the attribute data type.
","","","","","","","Dictionary"
"25.9.2.1","toLowCardinality",0,0,"","","System","","","","","","","",""
"25.9.2.1","cbrt",0,0,"","","System","
Returns the cubic root of the argument.
","cbrt(x)","- `x` — The value for which to find the cubic root of. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal*`](/sql-reference/data-types/decimal)
","","Returns the cubic root of `x`. [`Float*`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT cbrt(8);
```

```response title=Response
2
```

","1.1","Mathematical"
"25.9.2.1","polygonsIntersectCartesian",0,0,"","","System","
        Returns true if the two [`Polygon`](sql-reference/data-types/geo#polygon) or [`MultiPolygon`](sql-reference/data-types/geo#multipolygon) intersect (share any common area or boundary).
    ","polygonsIntersectCartesian(polygon1, polygon2)","- `polygon1` — A value of type [`Polygon`](/sql-reference/data-types/geo#polygon) or [`MultiPolygon`](/sql-reference/data-types/geo#multipolygon). - `polygon2` — A value of type [`Polygon`](/sql-reference/data-types/geo#polygon) or [`MultiPolygon`](/sql-reference/data-types/geo#multipolygon). ","","Returns true (1) if the two polygons intersect. [`Bool`](/sql-reference/data-types/boolean).","**Usage example**

```sql title=Query
SELECT polygonsIntersectCartesian([[[(2., 2.), (2., 3.), (3., 3.), (3., 2.)]]], [[[(1., 1.), (1., 4.), (4., 4.), (4., 1.), (1., 1.)]]])
```

```response title=Response
┌─polygonsIntersectCartesian()─┐
                │ 1 │
                └───────────────────┘
```

","25.6","Geo"
"25.9.2.1","mapSort",0,0,"","","System","The same as arraySort.","","","","","**mapSort**

```sql title=Query
SELECT mapSort((k, v) -> v, map('k1', 3, 'k2', 1, 'k3', 2))
```

```response title=Response

```

","23.4","Map"
"25.9.2.1","h3CellAreaRads2",0,0,"","","System","","","","","","","",""
"25.9.2.1","toStartOfDay",0,0,"","","System","
Rounds down a date with time to the start of the day.

:::note
The return type can be configured by setting [`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions).
:::
    ","toStartOfDay(datetime)","- `datetime` — A date or date with time to round. [`Date`](/sql-reference/data-types/date) or [`DateTime`](/sql-reference/data-types/datetime)
","","Returns the date with time rounded down to the start of the day. [`Date`](/sql-reference/data-types/date) or [`DateTime`](/sql-reference/data-types/datetime) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime64`](/sql-reference/data-types/datetime64)","**Round down to the start of the day**

```sql title=Query
SELECT toStartOfDay(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toStartOfDay(toDateTime('2023-04-21 10:20:30'))─┐
│                             2023-04-21 00:00:00 │
└─────────────────────────────────────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","readWKBPoint",0,0,"","","System","
    Parses a Well-Known Binary (WKB) representation of a Point geometry and returns it in the internal ClickHouse format.
    ","readWKBPoint(wkt_string)","- `wkb_string` — The input WKB string representing a Point geometry. ","","The function returns a ClickHouse internal representation of the point geometry.","**first call**

```sql title=Query
SELECT readWKBPoint(unhex('010100000000000000000000000000000000000000'));
```

```response title=Response
┌─readWKBPoint(unhex'010100000000000000000000000...'))─┐
    │ (0,0)                                                │
    └──────────────────────────────────────────────────────┘
```

","25.5","Geo"
"25.9.2.1","arrayAUCPR",0,0,"","","System","
Calculates the area under the precision-recall (PR) curve.
A precision-recall curve is created by plotting precision on the y-axis and recall on the x-axis across all thresholds.
The resulting value ranges from 0 to 1, with a higher value indicating better model performance.
The PR AUC is particularly useful for imbalanced datasets, providing a clearer comparison of performance compared to ROC AUC on those cases.
For more details, please see [here](https://developers.google.com/machine-learning/glossary#pr-auc-area-under-the-pr-curve), [here](https://developers.google.com/machine-learning/crash-course/classification/roc-and-auc#expandable-1) and [here](https://en.wikipedia.org/wiki/Receiver_operating_characteristic#Area_under_the_curve).
","arrayAUCPR(scores, labels[, partial_offsets])","- `cores` — Scores prediction model gives. [`Array((U)Int*)`](/sql-reference/data-types/array) or [`Array(Float*)`](/sql-reference/data-types/array)
- `labels` — Labels of samples, usually 1 for positive sample and 0 for negative sample. [`Array((U)Int*)`](/sql-reference/data-types/array) or [`Array(Enum)`](/sql-reference/data-types/array)
- `partial_offsets` — 
- Optional. An [`Array(T)`](/sql-reference/data-types/array) of three non-negative integers for calculating a partial area under the PR curve (equivalent to a vertical band of the PR space) instead of the whole AUC. This option is useful for distributed computation of the PR AUC. The array must contain the following elements [`higher_partitions_tp`, `higher_partitions_fp`, `total_positives`].
    - `higher_partitions_tp`: The number of positive labels in the higher-scored partitions.
    - `higher_partitions_fp`: The number of negative labels in the higher-scored partitions.
    - `total_positives`: The total number of positive samples in the entire dataset.

::::note
When `arr_partial_offsets` is used, the `arr_scores` and `arr_labels` should be only a partition of the entire dataset, containing an interval of scores.
The dataset should be divided into contiguous partitions, where each partition contains the subset of the data whose scores fall within a specific range.
For example:
- One partition could contain all scores in the range [0, 0.5).
- Another partition could contain scores in the range [0.5, 1.0].
::::
 ","","Returns area under the precision-recall (PR) curve. [`Float64`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT arrayAUCPR([0.1, 0.4, 0.35, 0.8], [0, 0, 1, 1]);
```

```response title=Response
┌─arrayAUCPR([0.1, 0.4, 0.35, 0.8], [0, 0, 1, 1])─┐
│                              0.8333333333333333 │
└─────────────────────────────────────────────────┘
```

","20.4","Arrays"
"25.9.2.1","SHA1",0,0,"","","System","
Calculates the SHA1 hash of the given string.
    ","SHA1(s)","- `s` — The input string to hash [`String`](/sql-reference/data-types/string)
","","Returns the SHA1 hash of the given input string as a fixed-length string. [`FixedString(20)`](/sql-reference/data-types/fixedstring)","**Usage example**

```sql title=Query
SELECT HEX(SHA1('abc'));
```

```response title=Response
┌─hex(SHA1('abc'))─────────────────────────┐
│ A9993E364706816ABA3E25717850C26C9CD0D89D │
└──────────────────────────────────────────┘
```

","1.1","Hash"
"25.9.2.1","toModifiedJulianDay",0,0,"","","System","
Converts a [Proleptic Gregorian calendar](https://en.wikipedia.org/wiki/Proleptic_Gregorian_calendar) date in text form `YYYY-MM-DD` to a [Modified Julian Day](https://en.wikipedia.org/wiki/Julian_day#Variants) number in `Int32`. This function supports date from `0000-01-01` to `9999-12-31`. It raises an exception if the argument cannot be parsed as a date, or the date is invalid.
    ","toModifiedJulianDay(date)","- `date` — The date in String form. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring)
","","Returns Modified Julian Day number. [`Int32`](/sql-reference/data-types/int-uint)","**Convert date to Modified Julian Day**

```sql title=Query
SELECT toModifiedJulianDay('2020-01-01')
```

```response title=Response
┌─toModifiedJulianDay('2020-01-01')─┐
│                             58849 │
└───────────────────────────────────┘
```

","21.1","Dates and Times"
"25.9.2.1","farmHash64",0,0,"","","System","
Produces a 64-bit [FarmHash](https://github.com/google/farmhash) using the `Hash64` method.

:::tip
[`farmFingerprint64`](#farmFingerprint64) is preferred for a stable and portable value.
:::

:::note
The calculated hash values may be equal for the same input values of different argument types.
This affects for example integer types of different size, named and unnamed `Tuple` with the same data, `Map` and the corresponding `Array(Tuple(key, value))` type with the same data.
:::
","farmHash64(arg1[, arg2, ...])","- `arg1[, arg2, ...]` — A variable number of input arguments for which to compute the hash. [`Any`](/sql-reference/data-types)
","","Returns the computed hash value of the input arguments. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT farmHash64(array('e','x','a'), 'mple', 10, toDateTime('2019-06-15 23:00:00')) AS FarmHash, toTypeName(FarmHash) AS type;
```

```response title=Response
┌─────────────FarmHash─┬─type───┐
│ 18125596431186471178 │ UInt64 │
└──────────────────────┴────────┘
```

","1.1","Hash"
"25.9.2.1","snowflakeIDToDateTime64",0,0,"","","System","
Returns the timestamp component of a [Snowflake ID](https://en.wikipedia.org/wiki/Snowflake_ID) as a value of type [DateTime64](../data-types/datetime64.md).
    ","snowflakeIDToDateTime64(value[, epoch[, time_zone]])","- `value` — Snowflake ID. [`UInt64`](/sql-reference/data-types/int-uint)
- `epoch` — Optional. Epoch of the Snowflake ID in milliseconds since 1970-01-01. Defaults to 0 (1970-01-01). For the Twitter/X epoch (2015-01-01), provide 1288834974657. [`UInt*`](/sql-reference/data-types/int-uint)
- `time_zone` — Optional. [Timezone](/operations/server-configuration-parameters/settings.md#timezone). The function parses `time_string` according to the timezone. [`String`](/sql-reference/data-types/string)
","","Returns the timestamp component of `value` as a `DateTime64` with scale = 3, i.e. millisecond precision. [`DateTime64`](/sql-reference/data-types/datetime64)","**Usage example**

```sql title=Query
SELECT snowflakeIDToDateTime64(7204436857747984384) AS res
```

```response title=Response
┌─────────────────res─┐
│ 2024-06-06 10:59:58 │
└─────────────────────┘
```

","24.6","UUID"
"25.9.2.1","toMonth",0,0,"","","System","
Returns the month component (1-12) of a `Date` or `DateTime` value.
    ","toMonth(datetime)","- `datetime` — Date or date with time to get the month from. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
","","Returns the month of the given date/time [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT toMonth(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toMonth(toDateTime('2023-04-21 10:20:30'))─┐
│                                          4 │
└────────────────────────────────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","greatest",0,1,"","","System","
Returns the greatest value among the arguments.
`NULL` arguments are ignored.

- For arrays, returns the lexicographically greatest array.
- For `DateTime` types, the result type is promoted to the largest type (e.g., `DateTime64` if mixed with `DateTime32`).

:::note Use setting `least_greatest_legacy_null_behavior` to change `NULL` behavior
Version [24.12](/whats-new/changelog/2024#a-id2412a-clickhouse-release-2412-2024-12-19) introduced a backwards-incompatible change such that `NULL` values are ignored, while previously it returned `NULL` if one of the arguments was `NULL`.
To retain the previous behavior, set setting `least_greatest_legacy_null_behavior` (default: `false`) to `true`.
:::
    ","greatest(x1[, x2, ...])","- `x1[, x2, ...]` — One or multiple values to compare. All arguments must be of comparable types. [`Any`](/sql-reference/data-types)
","","Returns the greatest value among the arguments, promoted to the largest compatible type. [`Any`](/sql-reference/data-types)","**Numeric types**

```sql title=Query
SELECT greatest(1, 2, toUInt8(3), 3.) AS result, toTypeName(result) AS type;
-- The type returned is a Float64 as the UInt8 must be promoted to 64 bit for the comparison.
```

```response title=Response
┌─result─┬─type────┐
│      3 │ Float64 │
└────────┴─────────┘
```

**Arrays**

```sql title=Query
SELECT greatest(['hello'], ['there'], ['world']);
```

```response title=Response
┌─greatest(['hello'], ['there'], ['world'])─┐
│ ['world']                                 │
└───────────────────────────────────────────┘
```

**DateTime types**

```sql title=Query
SELECT greatest(toDateTime32(now() + toIntervalDay(1)), toDateTime64(now(), 3));
-- The type returned is a DateTime64 as the DateTime32 must be promoted to 64 bit for the comparison.
```

```response title=Response
┌─greatest(toD⋯(now(), 3))─┐
│  2025-05-28 15:50:53.000 │
└──────────────────────────┘
```

","1.1","Conditional"
"25.9.2.1","financialInternalRateOfReturn",0,0,"","","System","
Calculates the Internal Rate of Return (IRR) for a series of cash flows occurring at regular intervals.
IRR is the discount rate at which the Net Present Value (NPV) equals zero.

IRR attempts to solve the following equation:

$$
\sum_{i=0}^n \frac{cashflow_i}{(1 + irr)^i} = 0
$$
    ","financialInternalRateOfReturn(cashflows[, guess])","- `cashflows` — Array of cash flows. Each value represents a payment (negative value) or income (positive value). [`Array(Int8/16/32/64)`](/sql-reference/data-types/array) or [`Array(Float*)`](/sql-reference/data-types/array)
- `[, guess]` — Optional initial guess (constant value) for the internal rate of return (default 0.1). [`Float*`](/sql-reference/data-types/float)
","","Returns the internal rate of return or `NaN` if the calculation cannot converge, input array is empty or has only one element, all cash flows are zero, or other calculation errors occur. [`Float64`](/sql-reference/data-types/float)","**simple_example**

```sql title=Query
SELECT financialInternalRateOfReturn([-100, 39, 59, 55, 20])
```

```response title=Response
0.2809484211599611
```

**simple_example_with_guess**

```sql title=Query
SELECT financialInternalRateOfReturn([-100, 39, 59, 55, 20], 0.1)
```

```response title=Response
0.2809484211599611
```

","25.7","Financial"
"25.9.2.1","toRelativeMinuteNum",0,0,"","","System","
Converts a date or date with time to the number of minutes elapsed since a certain fixed point in the past.
The exact point in time is an implementation detail, and therefore this function is not intended to be used standalone.
The main purpose of the function is to calculate the difference in minutes between two dates or dates with time, e.g., `toRelativeMinuteNum(dt1) - toRelativeMinuteNum(dt2)`.
    ","toRelativeMinuteNum(date)","- `date` — Date or date with time. [`Date`](/sql-reference/data-types/date) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
","","Returns the number of minutes from a fixed reference point in the past. [`UInt32`](/sql-reference/data-types/int-uint)","**Get relative minute numbers**

```sql title=Query
SELECT toRelativeMinuteNum(toDateTime('2023-01-01 00:30:00')) - toRelativeMinuteNum(toDateTime('2023-01-01 00:00:00')) AS minutes_difference
```

```response title=Response
┌─minutes_difference─┐
│                 30 │
└────────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","hypot",0,1,"","","System","
Returns the length of the hypotenuse of a right-angle triangle.
Hypot avoids problems that occur when squaring very large or very small numbers.
","hypot(x, y)","- `x` — The first cathetus of a right-angle triangle. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal*`](/sql-reference/data-types/decimal)
- `y` — The second cathetus of a right-angle triangle. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal*`](/sql-reference/data-types/decimal)
","","Returns the length of the hypotenuse of a right-angle triangle. [`Float64`](/sql-reference/data-types/float)","**Basic usage**

```sql title=Query
SELECT hypot(1, 1)
```

```response title=Response
1.4142135623730951
```

","20.12","Mathematical"
"25.9.2.1","initcap",0,1,"","","System","
Converts the first letter of each word to upper case and the rest to lower case.
Words are sequences of alphanumeric characters separated by non-alphanumeric characters.

:::note
Because `initcap` converts only the first letter of each word to upper case you may observe unexpected behaviour for words containing apostrophes or capital letters.
This is a known behaviour and there are no plans to fix it currently.
:::
","initcap(s)","- `s` — Input string. [`String`](/sql-reference/data-types/string)
","","Returns `s` with the first letter of each word converted to upper case. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT initcap('building for fast')
```

```response title=Response
┌─initcap('building for fast')─┐
│ Building For Fast            │
└──────────────────────────────┘
```

**Example of known behavior for words containing apostrophes or capital letters**

```sql title=Query
SELECT initcap('John''s cat won''t eat.');
```

```response title=Response
┌─initcap('Joh⋯n\'t eat.')─┐
│ John'S Cat Won'T Eat.    │
└──────────────────────────┘
```

","23.7","String"
"25.9.2.1","dictGetDateTimeOrDefault",0,0,"","","System","
Retrieves values from a dictionary.

Accepts 4 parameters:
-- name of the dictionary;
-- name of the column of the dictionary or tuple of column names;
-- key value - expression returning dictionary key-type value or tuple-type value - depending on the dictionary configuration;
-- default values returned if the dictionary does not contain a row with the key value;

Returned value: value of the dictionary attribute parsed in the DateTime if key is found, otherwise default value.

Throws an exception if cannot parse the value of the attribute or the value does not match the attribute data type.
","","","","","","","Dictionary"
"25.9.2.1","file",0,0,"","","System","
Reads a file as a string and loads the data into the specified column.
The file content is not interpreted.

Also see the [`file`](../table-functions/file.md) table function.
        ","file(path[, default])","- `path` — The path of the file relative to the `user_files_path`. Supports wildcards `*`, `**`, `?`, `{abc,def}` and `{N..M}` where `N`, `M` are numbers and `'abc', 'def'` are strings. [`String`](/sql-reference/data-types/string)
- `default` — The value returned if the file does not exist or cannot be accessed. [`String`](/sql-reference/data-types/string) or [`NULL`](/sql-reference/syntax#null)
","","Returns the file content as a string. [`String`](/sql-reference/data-types/string)","**Insert files into a table**

```sql title=Query
INSERT INTO table SELECT file('a.txt'), file('b.txt');
```

```response title=Response

```

","21.3","Other"
"25.9.2.1","toRelativeMonthNum",0,0,"","","System","
Converts a date or date with time to the number of months elapsed since a certain fixed point in the past.
The exact point in time is an implementation detail, and therefore this function is not intended to be used standalone.
The main purpose of the function is to calculate the difference in months between two dates or dates with time, e.g., `toRelativeMonthNum(dt1) - toRelativeMonthNum(dt2)`.
    ","toRelativeMonthNum(date)","- `date` — Date or date with time. [`Date`](/sql-reference/data-types/date) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
","","Returns the number of months from a fixed reference point in the past. [`UInt32`](/sql-reference/data-types/int-uint)","**Get relative month numbers**

```sql title=Query
SELECT toRelativeMonthNum(toDate('2023-04-01')) - toRelativeMonthNum(toDate('2023-01-01')) AS months_difference
```

```response title=Response
┌─months_difference─┐
│                 3 │
└───────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","multiFuzzyMatchAny",0,0,"","","System","","","","","","","",""
"25.9.2.1","toDecimal256",0,0,"","","System","
Converts an input value to a value of type [`Decimal(76, S)`](../data-types/decimal.md) with scale of `S`. Throws an exception in case of an error.

Supported arguments:
- Values or string representations of type (U)Int*.
- Values or string representations of type Float*.

Unsupported arguments:
- Values or string representations of Float* values `NaN` and `Inf` (case-insensitive).
- String representations of binary and hexadecimal values, e.g. `SELECT toDecimal256('0xc0fe', 1);`.

:::note
An overflow can occur if the value of `expr` exceeds the bounds of `Decimal256`:`(-1*10^(76 - S), 1*10^(76 - S))`.
Excessive digits in a fraction are discarded (not rounded).
Excessive digits in the integer part will lead to an exception.
:::

:::warning
Conversions drop extra digits and could operate in an unexpected way when working with Float32/Float64 inputs as the operations are performed using floating point instructions.
For example: `toDecimal256(1.15, 2)` is equal to `1.14` because 1.15 * 100 in floating point is 114.99.
You can use a String input so the operations use the underlying integer type: `toDecimal256('1.15', 2) = 1.15`
:::
    ","toDecimal256(expr, S)","- `expr` — Expression returning a number or a string representation of a number. [`Expression`](/sql-reference/data-types/special-data-types/expression)
- `S` — Scale parameter between 0 and 76, specifying how many digits the fractional part of a number can have. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns a value of type `Decimal(76, S)`. [`Decimal256(S)`](/sql-reference/data-types/decimal)","**Usage example**

```sql title=Query
SELECT
    toDecimal256(99, 1) AS a, toTypeName(a) AS type_a,
    toDecimal256(99.67, 2) AS b, toTypeName(b) AS type_b,
    toDecimal256('99.67', 3) AS c, toTypeName(c) AS type_c
FORMAT Vertical
```

```response title=Response
Row 1:
──────
a:      99
type_a: Decimal(76, 1)
b:      99.67
type_b: Decimal(76, 2)
c:      99.67
type_c: Decimal(76, 3)
```

","20.8","Type Conversion"
"25.9.2.1","asin",0,1,"","","System","
Calculates the arcsine of the argument.

Takes arbitrary numeric type, which includes floating point and integer numbers, as well as big integers and decimals and returns Float64.

For arguments in range [-1, 1] it returns the value in range of [-pi() / 2, pi() / 2].

It represents an inverse function to function 'sin' on this range:
[example:inverse]

It always returns Float64, even if the argument has Float32 type:
[example:float32]

For arguments outside of this range, it returns nan:
[example:nan]

Every self-respectful data scientist knows how to apply arcsine to improve ads click-through rate with ClickHouse.
For more details, see [https://en.wikipedia.org/wiki/Inverse_trigonometric_functions].
","","","","","**inverse**

```sql title=Query
SELECT asin(1.0) = pi() / 2, sin(asin(1)), asin(sin(1))
```

```response title=Response

```

**float32**

```sql title=Query
SELECT toTypeName(asin(1.0::Float32))
```

```response title=Response

```

**nan**

```sql title=Query
SELECT asin(1.1), asin(-2), asin(inf), asin(nan)
```

```response title=Response

```

","","Mathematical"
"25.9.2.1","cutFragment",0,0,"","","System","
Removes the fragment identifier, including the number sign, from a URL.
    ","cutFragment(url)","- `url` — URL. [`String`](/sql-reference/data-types/string)
","","Returns the URL with fragment identifier removed. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT cutFragment('http://example.com/path?query=value#fragment123');
```

```response title=Response
┌─cutFragment('http://example.com/path?query=value#fragment123')─┐
│ http://example.com/path?query=value                            │
└────────────────────────────────────────────────────────────────┘
```

","1.1","URL"
"25.9.2.1","h3Line",0,0,"","","System","","","","","","","",""
"25.9.2.1","multiSearchFirstPositionCaseInsensitiveUTF8",0,0,"","","System","","","","","","","",""
"25.9.2.1","tokens",0,0,"","","System","
Splits a string into tokens using the given tokenizer.
The default tokenizer uses non-alphanumeric ASCII characters as separators.

In case of the `split` tokenizer, if the tokens do not form a [prefix code](https://en.wikipedia.org/wiki/Prefix_code), you likely want that the matching prefers longer separators first.
To do so, pass the separators in order of descending length.
For example, with separators = `['%21', '%']` string `%21abc` would be tokenized as `['abc']`, whereas separators = `['%', '%21']` would tokenize to `['21ac']` (which is likely not what you wanted).
","tokens(value[, tokenizer[, ngrams[, separators]]])","- `value` — The input string. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring)
- `tokenizer` — The tokenizer to use. Valid arguments are `default`, `ngram`, `split`, and `no_op`. Optional, if not set explicitly, defaults to `default`. [`const String`](/sql-reference/data-types/string)
- `ngrams` — Only relevant if argument `tokenizer` is `ngram`: An optional parameter which defines the length of the ngrams. If not set explicitly, defaults to `3`. [`const UInt8`](/sql-reference/data-types/int-uint)
- `separators` — Only relevant if argument `tokenizer` is `split`: An optional parameter which defines the separator strings. If not set explicitly, defaults to `[' ']`. [`const Array(String)`](/sql-reference/data-types/array)
","","Returns the resulting array of tokens from input string. [`Array`](/sql-reference/data-types/array)","**Default tokenizer**

```sql title=Query
SELECT tokens('test1,;\\\\ test2,;\\\\ test3,;\\\\   test4') AS tokens;
```

```response title=Response
['test1','test2','test3','test4']
```

**Ngram tokenizer**

```sql title=Query
SELECT tokens('abc def', 'ngram', 3) AS tokens;
```

```response title=Response
['abc','bc ','c d',' de','def']
```

","21.11","String Splitting"
"25.9.2.1","emptyArrayFloat64",0,0,"","","System","Returns an empty Float64 array","emptyArrayFloat64()","","","An empty Float64 array. [`Array(T)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT emptyArrayFloat64
```

```response title=Response
[]
```

","1.1","Arrays"
"25.9.2.1","multiSearchAnyUTF8",0,0,"","","System","","","","","","","",""
"25.9.2.1","mapConcat",0,0,"","","System","The same as arrayConcat.","","","","","**mapConcat**

```sql title=Query
SELECT mapConcat(map('k1', 'v1'), map('k2', 'v2'))
```

```response title=Response

```

","23.4","Map"
"25.9.2.1","subtractNanoseconds",0,0,"","","System","
Subtracts a specified number of nanoseconds from a date with time or a string-encoded date with time.
    ","subtractNanoseconds(datetime, num)","- `datetime` — Date with time to subtract specified number of nanoseconds from. [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64) or [`String`](/sql-reference/data-types/string)
- `num` — Number of nanoseconds to subtract. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns `datetime` minus `num` nanoseconds [`DateTime64`](/sql-reference/data-types/datetime64)","**Subtract nanoseconds from different date time types**

```sql title=Query
WITH
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractNanoseconds(date_time, 1000) AS subtract_nanoseconds_with_date_time,
    subtractNanoseconds(date_time_string, 1000) AS subtract_nanoseconds_with_date_time_string
```

```response title=Response
┌─subtract_nanoseconds_with_date_time─┬─subtract_nanoseconds_with_date_time_string─┐
│       2023-12-31 23:59:59.999999000 │              2023-12-31 23:59:59.999999000 │
└─────────────────────────────────────┴────────────────────────────────────────────┘
```

**Using alternative INTERVAL syntax**

```sql title=Query
SELECT dateSub('1998-06-16'::DateTime, INTERVAL 10 nanosecond)
```

```response title=Response
┌─minus(CAST('19⋯anosecond(10))─┐
│ 1998-06-15 23:59:59.999999990 │
└───────────────────────────────┘
```

","20.1","Dates and Times"
"25.9.2.1","queryStringAndFragment",0,0,"","","System","
Returns the query string and fragment identifier of a URL.
    ","queryStringAndFragment(url)","- `url` — URL. [`String`](/sql-reference/data-types/string)
","","Returns the query string and fragment identifier of the URL. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT queryStringAndFragment('https://clickhouse.com/docs?query=value&param=123#section');
```

```response title=Response
┌─queryStringAnd⋯=123#section')─┐
│ query=value&param=123#section │
└───────────────────────────────┘
```

","1.1","URL"
"25.9.2.1","toUInt32OrDefault",0,0,"","","System","","","","","","","",""
"25.9.2.1","emptyArrayFloat32",0,0,"","","System","Returns an empty Float32 array","emptyArrayFloat32()","","","An empty Float32 array. [`Array(T)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT emptyArrayFloat32
```

```response title=Response
[]
```

","1.1","Arrays"
"25.9.2.1","multiFuzzyMatchAllIndices",0,0,"","","System","","","","","","","",""
"25.9.2.1","emptyArrayInt32",0,0,"","","System","Returns an empty Int32 array","emptyArrayInt32()","","","An empty Int32 array. [`Array(T)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT emptyArrayInt32
```

```response title=Response
[]
```

","1.1","Arrays"
"25.9.2.1","getMaxTableNameLengthForDatabase",0,0,"","","System","Returns the maximum table name length in a specified database.","getMaxTableNameLengthForDatabase(database_name)","- `database_name` — The name of the specified database. [`String`](/sql-reference/data-types/string)
","","Returns the length of the maximum table name, an Integer","**typical**

```sql title=Query
SELECT getMaxTableNameLengthForDatabase('default');
```

```response title=Response
┌─getMaxTableNameLengthForDatabase('default')─┐
            │                                         206 │
            └─────────────────────────────────────────────┘
```

","","Other"
"25.9.2.1","parseDateTime64InJodaSyntaxOrNull",0,0,"","","System","","","","","","","",""
"25.9.2.1","polygonPerimeterSpherical",0,0,"","","System","","","","","","","",""
"25.9.2.1","polygonsIntersectionCartesian",0,0,"","","System","","","","","","","",""
"25.9.2.1","wkt",0,0,"","","System","","","","","","","",""
"25.9.2.1","soundex",0,1,"","","System","
Returns the [Soundex code](https://en.wikipedia.org/wiki/Soundex) of a string.
","soundex(s)","- `s` — Input string. [`String`](/sql-reference/data-types/string)
","","Returns the Soundex code of the input string. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT soundex('aksel')
```

```response title=Response
┌─soundex('aksel')─┐
│ A240             │
└──────────────────┘
```

","23.4","String"
"25.9.2.1","bitmapHasAny",0,0,"","","System","Checks if the first bitmap contains any set bits of the second bitmap.","bitmapHasAny(bitmap1, bitmap2)","- `bitmap1` — First bitmap object. [`AggregateFunction(groupBitmap, T)`](/sql-reference/data-types/aggregatefunction). - `bitmap2` — Second bitmap object. [`AggregateFunction(groupBitmap, T)`](/sql-reference/data-types/aggregatefunction). ","","Returns `1` if any bits of the second bitmap are present in the first bitmap, otherwise `0` [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT bitmapHasAny(bitmapBuild([1, 2, 3]), bitmapBuild([3, 4, 5])) AS res;
```

```response title=Response
┌─res─┐
│  1  │
└─────┘
```

","20.1","Bitmap"
"25.9.2.1","generateSnowflakeID",0,0,"","","System","
Generates a [Snowflake ID](https://en.wikipedia.org/wiki/Snowflake_ID).

Function `generateSnowflakeID` guarantees that the counter field within a timestamp increments monotonically across all function invocations in concurrently running threads and queries.

See section [""Snowflake ID generation""](#snowflake-id-generation) for implementation details.
    ","generateSnowflakeID([expr, [machine_id]])","- `expr` — An arbitrary [expression](/sql-reference/syntax#expressions) used to bypass [common subexpression elimination](/sql-reference/functions/overview#common-subexpression-elimination) if the function is called multiple times in a query. The value of the expression has no effect on the returned Snowflake ID. Optional. - `machine_id` — A machine ID, the lowest 10 bits are used. [Int64](../data-types/int-uint.md). Optional. ","","Returns the Snowflake ID. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
CREATE TABLE tab (id UInt64)
ENGINE = MergeTree()
ORDER BY tuple();

INSERT INTO tab SELECT generateSnowflakeID();

SELECT * FROM tab;
```

```response title=Response
┌──────────────────id─┐
│ 7199081390080409600 │
└─────────────────────┘
```

**Multiple Snowflake IDs generated per row**

```sql title=Query
SELECT generateSnowflakeID(1), generateSnowflakeID(2);
```

```response title=Response
┌─generateSnowflakeID(1)─┬─generateSnowflakeID(2)─┐
│    7199081609652224000 │    7199081609652224001 │
└────────────────────────┴────────────────────────┘
```

**With expression and a machine ID**

```sql title=Query
SELECT generateSnowflakeID('expr', 1);
```

```response title=Response
┌─generateSnowflakeID('expr', 1)─┐
│            7201148511606784002 │
└────────────────────────────────┘
```

","24.6","UUID"
"25.9.2.1","array",0,0,"","","System","
Creates an array from the function arguments.

The arguments should be constants and have types that share a common supertype.
At least one argument must be passed, because otherwise it isn't clear which type of array to create.
This means that you can't use this function to create an empty array. To do so, use the `emptyArray*` function.

Use the `[ ]` operator for the same functionality.
    ","array(x1 [, x2, ..., xN])","- `x1` — Constant value of any type T. If only this argument is provided, the array will be of type T. - `[, x2, ..., xN]` — Additional N constant values sharing a common supertype with `x1` ","","Returns an array, where 'T' is the smallest common type out of the passed arguments. [`Array(T)`](/sql-reference/data-types/array)","**Valid usage**

```sql title=Query
SELECT array(toInt32(1), toUInt16(2), toInt8(3)) AS a, toTypeName(a)
```

```response title=Response
┌─a───────┬─toTypeName(a)─┐
│ [1,2,3] │ Array(Int32)  │
└─────────┴───────────────┘
```

**Invalid usage**

```sql title=Query
SELECT array(toInt32(5), toDateTime('1998-06-16'), toInt8(5)) AS a, toTypeName(a)
```

```response title=Response
Received exception from server (version 25.4.3):
Code: 386. DB::Exception: Received from localhost:9000. DB::Exception:
There is no supertype for types Int32, DateTime, Int8 ...
```

","1.1","Arrays"
"25.9.2.1","simpleJSONExtractString",0,0,"","","System","
Parses `String` in double quotes from the value of the field named `field_name`.

**Implementation details**

There is currently no support for code points in the format `\uXXXX\uYYYY` that are not from the basic multilingual plane (they are converted to CESU-8 instead of UTF-8).
","simpleJSONExtractString(json, field_name)","- `json` — The JSON in which the field is searched for. [`String`](/sql-reference/data-types/string)
- `field_name` — The name of the field to search for. [`const String`](/sql-reference/data-types/string)
","","Returns the unescaped value of a field as a string, including separators. An empty string is returned if the field doesn't contain a double quoted string, if unescaping fails or if the field doesn't exist [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
CREATE TABLE jsons
(
    `json` String
)
ENGINE = MergeTree
ORDER BY tuple();

INSERT INTO jsons VALUES ('{""foo"":""\\n\\u0000""}');
INSERT INTO jsons VALUES ('{""foo"":""\\u263""}');
INSERT INTO jsons VALUES ('{""foo"":""\\u263a""}');
INSERT INTO jsons VALUES ('{""foo"":""hello}');

SELECT simpleJSONExtractString(json, 'foo') FROM jsons ORDER BY json;
```

```response title=Response
\n\0

☺
```

","21.4","JSON"
"25.9.2.1","toUInt128",0,0,"","","System","
Converts an input value to a value of type [`UInt128`](/sql-reference/functions/type-conversion-functions#touint128).
Throws an exception in case of an error.
The function uses rounding towards zero, meaning it truncates fractional digits of numbers.

Supported arguments:
- Values or string representations of type (U)Int*.
- Values of type Float*.

Unsupported arguments:
- String representations of Float* values, including `NaN` and `Inf`.
- String representations of binary and hexadecimal values, e.g. `SELECT toUInt128('0xc0fe');`.

:::note
If the input value cannot be represented within the bounds of UInt128, the result over or under flows.
This is not considered an error.
:::

See also:
- [`toUInt128OrZero`](#toUInt128OrZero).
- [`toUInt128OrNull`](#toUInt128OrNull).
- [`toUInt128OrDefault`](#toUInt128OrDefault).
    ","toUInt128(expr)","- `expr` — Expression returning a number or a string representation of a number. [`Expression`](/sql-reference/data-types/special-data-types/expression)
","","Returns a 128-bit unsigned integer value. [`UInt128`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT
    toUInt128(128),
    toUInt128(128.8),
    toUInt128('128')
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toUInt128(128):   128
toUInt128(128.8): 128
toUInt128('128'): 128
```

","1.1","Type Conversion"
"25.9.2.1","emptyArrayUInt64",0,0,"","","System","Returns an empty UInt64 array","emptyArrayUInt64()","","","An empty UInt64 array. [`Array(T)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT emptyArrayUInt64
```

```response title=Response
[]
```

","1.1","Arrays"
"25.9.2.1","mapKeys",0,0,"","","System","Returns an array with the keys of map.","","","","","**mapKeys**

```sql title=Query
SELECT mapKeys(map('k1', 'v1', 'k2', 'v2'))
```

```response title=Response

```

","21.2","Map"
"25.9.2.1","arrayEnumerate",0,0,"","","System","
Returns the array `[1, 2, 3, ..., length (arr)]`

This function is normally used with the [`ARRAY JOIN`](/sql-reference/statements/select/array-join) clause. It allows counting something just
once for each array after applying `ARRAY JOIN`.
This function can also be used in higher-order functions. For example, you can use it to get array indexes for elements that match a condition.
","arrayEnumerate(arr)","- `arr` — The array to enumerate. [`Array`](/sql-reference/data-types/array)
","","Returns the array `[1, 2, 3, ..., length (arr)]`. [`Array(UInt32)`](/sql-reference/data-types/array)","**Basic example with ARRAY JOIN**

```sql title=Query
CREATE TABLE test
(
    `id` UInt8,
    `tag` Array(String),
    `version` Array(String)
)
ENGINE = MergeTree
ORDER BY id;

INSERT INTO test VALUES (1, ['release-stable', 'dev', 'security'], ['2.4.0', '2.6.0-alpha', '2.4.0-sec1']);

SELECT
    id,
    tag,
    version,
    seq
FROM test
ARRAY JOIN
    tag,
    version,
    arrayEnumerate(tag) AS seq
```

```response title=Response
┌─id─┬─tag────────────┬─version─────┬─seq─┐
│  1 │ release-stable │ 2.4.0       │   1 │
│  1 │ dev            │ 2.6.0-alpha │   2 │
│  1 │ security       │ 2.4.0-sec1  │   3 │
└────┴────────────────┴─────────────┴─────┘
```

","1.1","Arrays"
"25.9.2.1","tupleNegate",0,0,"","","System","
Calculates the negation of the tuple elements.
","tupleNegate(t)","- `t` — Tuple to negate. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) or [`Tuple(Float*)`](/sql-reference/data-types/tuple) or [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
","","Returns a tuple with the result of negation. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) or [`Tuple(Float*)`](/sql-reference/data-types/tuple) or [`Tuple(Decimal)`](/sql-reference/data-types/tuple)","**Basic usage**

```sql title=Query
SELECT tupleNegate((1, 2))
```

```response title=Response
(-1, -2)
```

","21.11","Tuple"
"25.9.2.1","toRelativeQuarterNum",0,0,"","","System","
Converts a date or date with time to the number of quarters elapsed since a certain fixed point in the past.
The exact point in time is an implementation detail, and therefore this function is not intended to be used standalone.
The main purpose of the function is to calculate the difference in quarters between two dates or dates with time, e.g., `toRelativeQuarterNum(dt1) - toRelativeQuarterNum(dt2)`.
    ","toRelativeQuarterNum(date)","- `date` — Date or date with time. [`Date`](/sql-reference/data-types/date) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
","","Returns the number of quarters from a fixed reference point in the past. [`UInt32`](/sql-reference/data-types/int-uint)","**Get relative quarter numbers**

```sql title=Query
SELECT toRelativeQuarterNum(toDate('2023-04-01')) - toRelativeQuarterNum(toDate('2023-01-01')) AS quarters_difference
```

```response title=Response
┌─quarters_difference─┐
│                   1 │
└─────────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","widthBucket",0,0,"","","System","
Returns the number of the bucket in which `operand` falls in a histogram having `count` equal-width buckets spanning the range `low` to `high`. Returns `0` if `operand < low`, and returns `count+1` if `operand >= high`.

`operand`, `low`, `high` can be any native number type. `count` can only be unsigned native integer and its value cannot be zero.

**Syntax**

```sql
widthBucket(operand, low, high, count)
```

There is also a case insensitive alias called `WIDTH_BUCKET` to provide compatibility with other databases.

**Example**

Query:
[example:simple]

Result:

```text
┌─widthBucket(10.15, -8.6, 23, 18)─┐
│                               11 │
└──────────────────────────────────┘
```
","","","","","**simple**

```sql title=Query
SELECT widthBucket(10.15, -8.6, 23, 18)
```

```response title=Response

```

","","Mathematical"
"25.9.2.1","logTrace",0,0,"","","System","
Emits a trace log message to the server log for each [Block](/development/architecture/#block).
    ","logTrace(message)","- `message` — Message that is emitted to the server log. [`const String`](/sql-reference/data-types/string)
","","Returns `0` always. [`UInt8`](/sql-reference/data-types/int-uint)","**Basic example**

```sql title=Query
SELECT logTrace('logTrace message');
```

```response title=Response
┌─logTrace('logTrace message')─┐
│                            0 │
└──────────────────────────────┘
```

","20.12","Introspection"
"25.9.2.1","minus",0,0,"","","System","
Calculates the difference of two values `a` and `b`. The result is always signed.
Similar to plus, it is possible to subtract an integer from a date or date with time.
Additionally, subtraction between date with time is supported, resulting in the time difference between them.
    ","minus(x, y)","- `x` — Minuend. - `y` — Subtrahend. ","","x minus y","**Subtracting two numbers**

```sql title=Query
SELECT minus(10, 5)
```

```response title=Response
5
```

**Subtracting an integer and a date**

```sql title=Query
SELECT minus(toDate('2025-01-01'),5)
```

```response title=Response
2024-12-27
```

","1.1","Arithmetic"
"25.9.2.1","toIntervalWeek",0,0,"","","System","
Returns an interval of `n` weeks of data type [`IntervalWeek`](../../sql-reference/data-types/special-data-types/interval.md).
    ","toIntervalWeek(n)","- `n` — Number of weeks. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`String`](/sql-reference/data-types/string)
","","Returns an interval of `n` weeks. [`Interval`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
WITH
    toDate('2025-06-15') AS date,
    toIntervalWeek(1) AS interval_to_week
SELECT date + interval_to_week AS result
```

```response title=Response
┌─────result─┐
│ 2025-06-22 │
└────────────┘
```

","1.1","Type Conversion"
"25.9.2.1","replaceAll",0,0,"","","System","
Replaces all occurrences of the substring `pattern` in `haystack` by the `replacement` string.
","replaceAll(haystack, pattern, replacement)","- `haystack` — The input string to search in. [`String`](/sql-reference/data-types/string)
- `pattern` — The substring to find and replace. [`const String`](/sql-reference/data-types/string)
- `replacement` — The string to replace the pattern with. [`const String`](/sql-reference/data-types/string)
","","Returns a string with all occurrences of pattern replaced. [`String`](/sql-reference/data-types/string)","**Replace all occurrences**

```sql title=Query
SELECT replaceAll('Hello, Hello world', 'Hello', 'Hi') AS res;
```

```response title=Response
┌─res──────────┐
│ Hi, Hi world │
└──────────────┘
```

","1.1","String Replacement"
"25.9.2.1","toUnixTimestamp64Second",0,0,"","","System","","","","","","","",""
"25.9.2.1","toRelativeSecondNum",0,0,"","","System","
Converts a date or date with time to the number of seconds elapsed since a certain fixed point in the past.
The exact point in time is an implementation detail, and therefore this function is not intended to be used standalone.
The main purpose of the function is to calculate the difference in seconds between two dates or dates with time, e.g., `toRelativeSecondNum(dt1) - toRelativeSecondNum(dt2)`.
    ","toRelativeSecondNum(date)","- `date` — Date or date with time. [`Date`](/sql-reference/data-types/date) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
","","Returns the number of seconds from a fixed reference point in the past. [`UInt32`](/sql-reference/data-types/int-uint)","**Get relative second numbers**

```sql title=Query
SELECT toRelativeSecondNum(toDateTime('2023-01-01 00:01:00')) - toRelativeSecondNum(toDateTime('2023-01-01 00:00:00')) AS seconds_difference
```

```response title=Response
┌─seconds_difference─┐
│                 60 │
└────────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","bitmapToArray",0,0,"","","System","Converts a bitmap to an array of unsigned integers. It is the opposite of function [`bitmapBuild`](/sql-reference/functions/bitmap-functions#bitmapBuild).","bitmapToArray(bitmap)","- `bitmap` — Bitmap to convert. [`AggregateFunction(groupBitmap, T)`](/sql-reference/data-types/aggregatefunction). ","","Returns an array of unsigned integers contained in the bitmap [`Array(UInt*)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT bitmapToArray(bitmapBuild([1, 2, 3, 4, 5])) AS res;
```

```response title=Response
┌─res─────────────┐
│ [1, 2, 3, 4, 5] │
└─────────────────┘
```

","20.1","Bitmap"
"25.9.2.1","arrayMax",0,0,"","","System","
Returns the maximum element in the source array.

If a lambda function `func` is specified, returns the maximum element of the lambda results.
    ","arrayMax([func(x[, y1, ..., yN])], source_arr[, cond1_arr, ... , condN_arr])","- `func(x[, y1, ..., yN])` — Optional. A lambda function which operates on elements of the source array (`x`) and condition arrays (`y`). [`Lambda function`](/sql-reference/functions/overview#arrow-operator-and-lambda)
- `source_arr` — The source array to process. [`Array(T)`](/sql-reference/data-types/array)
- `[, cond1_arr, ... , condN_arr]` — Optional. N condition arrays providing additional arguments to the lambda function. [`Array(T)`](/sql-reference/data-types/array)
","","Returns the maximum element in the source array, or the maximum element of the lambda results if provided.","**Basic example**

```sql title=Query
SELECT arrayMax([5, 3, 2, 7]);
```

```response title=Response
7
```

**Usage with lambda function**

```sql title=Query
SELECT arrayMax(x, y -> x/y, [4, 8, 12, 16], [1, 2, 1, 2]);
```

```response title=Response
12
```

","21.1","Arrays"
"25.9.2.1","toRelativeYearNum",0,0,"","","System","
Converts a date or date with time to the number of years elapsed since a certain fixed point in the past.
The exact point in time is an implementation detail, and therefore this function is not intended to be used
standalone. The main purpose of the function is to calculate the difference in years between two dates or dates with time, e.g., `toRelativeYearNum(dt1) - toRelativeYearNum(dt2)`.
    ","toRelativeYearNum(date)","- `date` — Date or date with time. [`Date`](/sql-reference/data-types/date) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
","","Returns the number of years from a fixed reference point in the past. [`UInt16`](/sql-reference/data-types/int-uint)","**Get relative year numbers**

```sql title=Query
SELECT toRelativeYearNum('2010-10-01'::DateTime) - toRelativeYearNum('2000-01-01'::DateTime)
```

```response title=Response
┌─minus(toRela⋯ateTime')))─┐
│                       10 │
└──────────────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","LpNormalize",0,0,"","","System","
Calculates the unit vector of a given vector (the elements of the tuple are the coordinates) in `Lp` space (using [p-norm](https://en.wikipedia.org/wiki/Norm_(mathematics)#p-norm)).
        ","LpNormalize(tuple, p)","- `tuple` — A tuple of numeric values. [`Tuple(T)`](/sql-reference/data-types/tuple)
- `p` — The power. Possible values are any number in the range range from `[1; inf)`. [`UInt*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns the unit vector. [`Tuple(Float64)`](/sql-reference/data-types/tuple)","**Basic usage**

```sql title=Query
SELECT LpNormalize((3, 4), 5)
```

```response title=Response
┌─LpNormalize((3, 4), 5)──────────────────┐
│ (0.7187302630182624,0.9583070173576831) │
└─────────────────────────────────────────┘
```

","21.11","Distance"
"25.9.2.1","toYYYYMMDD",0,0,"","","System","
Converts a date or date with time to a `UInt32` number containing the year and month number (YYYY * 10000 + MM * 100 + DD). Accepts a second optional timezone argument. If provided, the timezone must be a string constant.
    ","toYYYYMMDD(datetime[, timezone])","- `datetime` — A date or date with time to convert. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
- `timezone` — Optional. Timezone for the conversion. If provided, the timezone must be a string constant. [`String`](/sql-reference/data-types/string)
","","Returns a `UInt32` number containing the year, month and day (YYYY * 10000 + MM * 100 + DD). [`UInt32`](/sql-reference/data-types/int-uint)","**Convert current date to YYYYMMDD format**

```sql title=Query
SELECT toYYYYMMDD(now(), 'US/Eastern')
```

```response title=Response
┌─toYYYYMMDD(now(), 'US/Eastern')─┐
│                        20230302 │
└─────────────────────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","toStartOfFifteenMinutes",0,0,"","","System","
Rounds down the date with time to the start of the fifteen-minute interval.

:::note
The return type can be configured by setting [`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions).
:::
    ","toStartOfFifteenMinutes(datetime)","- `datetime` — A date or date with time to round. [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
","","Returns the date with time rounded to the start of the nearest fifteen-minute interval [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)","**Example**

```sql title=Query
SELECT
    toStartOfFifteenMinutes(toDateTime('2023-04-21 10:17:00')),
    toStartOfFifteenMinutes(toDateTime('2023-04-21 10:20:00')),
    toStartOfFifteenMinutes(toDateTime('2023-04-21 10:23:00'))
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toStartOfFifteenMinutes(toDateTime('2023-04-21 10:17:00')): 2023-04-21 10:15:00
toStartOfFifteenMinutes(toDateTime('2023-04-21 10:20:00')): 2023-04-21 10:15:00
toStartOfFifteenMinutes(toDateTime('2023-04-21 10:23:00')): 2023-04-21 10:15:00
```

","1.1","Dates and Times"
"25.9.2.1","toRelativeWeekNum",0,0,"","","System","
Converts a date or date with time to the number of weeks elapsed since a certain fixed point in the past.
The exact point in time is an implementation detail, and therefore this function is not intended to be used standalone.
The main purpose of the function is to calculate the difference in weeks between two dates or dates with time, e.g., `toRelativeWeekNum(dt1) - toRelativeWeekNum(dt2)`.
    ","toRelativeWeekNum(date)","- `date` — Date or date with time. [`Date`](/sql-reference/data-types/date) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
","","Returns the number of weeks from a fixed reference point in the past. [`UInt32`](/sql-reference/data-types/int-uint)","**Get relative week numbers**

```sql title=Query
SELECT toRelativeWeekNum(toDate('2023-01-08')) - toRelativeWeekNum(toDate('2023-01-01')) AS weeks_difference
```

```response title=Response
┌─weeks_difference─┐
│                1 │
└──────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","wordShingleMinHashArg",0,0,"","","System","
Splits a ASCII string into parts (shingles) of `shinglesize` words each and returns the shingles with minimum and maximum word hashes, calculated by the wordShingleMinHash function with the same input.
It is case sensitive.
","wordShingleMinHashArg(string[, shinglesize, hashnum])","- `string` — String for which to compute the hash. [`String`](/sql-reference/data-types/string)
- `shinglesize` — Optional. The size of a word shingle, any number from `1` to `25`. The default value is `3`. [`UInt8`](/sql-reference/data-types/int-uint)
- `hashnum` — Optional. The number of minimum and maximum hashes used to calculate the result, any number from `1` to `25`. The default value is `6`. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns a tuple with two tuples with `hashnum` word shingles each. [`Tuple(Tuple(String))`](/sql-reference/data-types/tuple)","**Usage example**

```sql title=Query
SELECT wordShingleMinHashArg('ClickHouse® is a column-oriented database management system (DBMS) for online analytical processing of queries (OLAP).', 1, 3) AS Tuple;
```

```response title=Response
┌─Tuple─────────────────────────────────────────────────────────────────┐
│ (('OLAP','database','analytical'),('online','oriented','processing')) │
└───────────────────────────────────────────────────────────────────────┘
```

","1.1","Hash"
"25.9.2.1","arrayROCAUC",0,0,"","","System","
Calculates the area under the receiver operating characteristic (ROC) curve.
A ROC curve is created by plotting True Positive Rate (TPR) on the y-axis and False Positive Rate (FPR) on the x-axis across all thresholds.
The resulting value ranges from zero to one, with a higher value indicating better model performance.

The ROC AUC (also known as simply AUC) is a concept in machine learning.
For more details, please see [here](https://developers.google.com/machine-learning/glossary#pr-auc-area-under-the-pr-curve), [here](https://developers.google.com/machine-learning/crash-course/classification/roc-and-auc#expandable-1) and [here](https://en.wikipedia.org/wiki/Receiver_operating_characteristic#Area_under_the_curve).
","arrayROCAUC(scores, labels[, scale[, partial_offsets]])","- `scores` — Scores prediction model gives. [`Array((U)Int*)`](/sql-reference/data-types/array) or [`Array(Float*)`](/sql-reference/data-types/array)
- `labels` — Labels of samples, usually 1 for positive sample and 0 for negative sample. [`Array((U)Int*)`](/sql-reference/data-types/array) or [`Enum`](/sql-reference/data-types/enum)
- `scale` — Optional. Decides whether to return the normalized area. If false, returns the area under the TP (true positives) x FP (false positives) curve instead. Default value: true. [`Bool`](/sql-reference/data-types/boolean)
- `partial_offsets` — 
- An array of four non-negative integers for calculating a partial area under the ROC curve (equivalent to a vertical band of the ROC space) instead of the whole AUC. This option is useful for distributed computation of the ROC AUC. The array must contain the following elements [`higher_partitions_tp`, `higher_partitions_fp`, `total_positives`, `total_negatives`]. [Array](/sql-reference/data-types/array) of non-negative [Integers](../data-types/int-uint.md). Optional.
    - `higher_partitions_tp`: The number of positive labels in the higher-scored partitions.
    - `higher_partitions_fp`: The number of negative labels in the higher-scored partitions.
    - `total_positives`: The total number of positive samples in the entire dataset.
    - `total_negatives`: The total number of negative samples in the entire dataset.

::::note
When `arr_partial_offsets` is used, the `arr_scores` and `arr_labels` should be only a partition of the entire dataset, containing an interval of scores.
The dataset should be divided into contiguous partitions, where each partition contains the subset of the data whose scores fall within a specific range.
For example:
- One partition could contain all scores in the range [0, 0.5).
- Another partition could contain scores in the range [0.5, 1.0].
::::
 ","","Returns area under the receiver operating characteristic (ROC) curve. [`Float64`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT arrayROCAUC([0.1, 0.4, 0.35, 0.8], [0, 0, 1, 1]);
```

```response title=Response
0.75
```

","20.4","Arrays"
"25.9.2.1","toStartOfFiveMinutes",0,0,"","","System","
Rounds down a date with time to the start of the nearest five-minute interval.

:::note
The return type can be configured by setting [`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions).
:::
    ","toStartOfFiveMinutes(datetime)","- `datetime` — A date with time to round. [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
","","Returns the date with time rounded to the start of the nearest five-minute interval [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)","**Example**

```sql title=Query
SELECT
    toStartOfFiveMinutes(toDateTime('2023-04-21 10:17:00')),
    toStartOfFiveMinutes(toDateTime('2023-04-21 10:20:00')),
    toStartOfFiveMinutes(toDateTime('2023-04-21 10:23:00'))
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toStartOfFiveMinutes(toDateTime('2023-04-21 10:17:00')): 2023-04-21 10:15:00
toStartOfFiveMinutes(toDateTime('2023-04-21 10:20:00')): 2023-04-21 10:20:00
toStartOfFiveMinutes(toDateTime('2023-04-21 10:23:00')): 2023-04-21 10:20:00
```

","22.6","Dates and Times"
"25.9.2.1","sparseGrams",0,0,"","","System","
Finds all substrings of a given string that have a length of at least `n`,
where the hashes of the (n-1)-grams at the borders of the substring
are strictly greater than those of any (n-1)-gram inside the substring.
Uses `CRC32` as a hash function.
","sparseGrams(s[, min_ngram_length, max_ngram_length])","- `s` — An input string. [`String`](/sql-reference/data-types/string)
- `min_ngram_length` — Optional. The minimum length of extracted ngram. The default and minimal value is 3. [`UInt*`](/sql-reference/data-types/int-uint)
- `max_ngram_length` — Optional. The maximum length of extracted ngram. The default value is 100. Should be not less than `min_ngram_length`. [`UInt*`](/sql-reference/data-types/int-uint)
","","Returns an array of selected substrings. [`Array(String)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT sparseGrams('alice', 3)
```

```response title=Response
┌─sparseGrams('alice', 3)────────────┐
│ ['ali','lic','lice','ice']         │
└────────────────────────────────────┘
```

","25.5","String"
"25.9.2.1","IPv4ToIPv6",0,0,"","","System","
Interprets a (big endian) 32-bit number as an IPv4 address, which is then interpreted as the corresponding IPv6 address in `FixedString(16)` format.
    ","IPv4ToIPv6(x)","- `x` — IPv4 address. [`UInt32`](/sql-reference/data-types/int-uint)
","","Returns an IPv6 address in binary format. [`FixedString(16)`](/sql-reference/data-types/fixedstring)","**Usage example**

```sql title=Query
SELECT IPv6NumToString(IPv4ToIPv6(IPv4StringToNum('192.168.0.1'))) AS addr;
```

```response title=Response
┌─addr───────────────┐
│ ::ffff:192.168.0.1 │
└────────────────────┘
```

","1.1","IP Address"
"25.9.2.1","toStartOfMicrosecond",0,0,"","","System","
Rounds down a date with time to the start of the microseconds.
    ","toStartOfMicrosecond(datetime, [timezone])","- `datetime` — Date and time. [`DateTime64`](/sql-reference/data-types/datetime64)
- `timezone` — Optional. Timezone for the returned value. If not specified, the function uses the timezone of the `value` parameter. [`String`](/sql-reference/data-types/string)
","","Input value with sub-microseconds [`DateTime64`](/sql-reference/data-types/datetime64)","**Query without timezone**

```sql title=Query
WITH toDateTime64('2020-01-01 10:20:30.999999999', 9) AS dt64
SELECT toStartOfMicrosecond(dt64);
```

```response title=Response
┌────toStartOfMicrosecond(dt64)─┐
│ 2020-01-01 10:20:30.999999000 │
└───────────────────────────────┘
```

**Query with timezone**

```sql title=Query
WITH toDateTime64('2020-01-01 10:20:30.999999999', 9) AS dt64
SELECT toStartOfMicrosecond(dt64, 'Asia/Istanbul');
```

```response title=Response
┌─toStartOfMicrosecond(dt64, 'Asia/Istanbul')─┐
│               2020-01-01 12:20:30.999999000 │
└─────────────────────────────────────────────┘
```

","22.6","Dates and Times"
"25.9.2.1","reinterpretAsUInt128",0,0,"","","System","","","","","","","",""
"25.9.2.1","toInt8OrNull",0,0,"","","System","
Like [`toInt8`](#toInt8), this function converts an input value to a value of type [Int8](../data-types/int-uint.md) but returns `NULL` in case of an error.

Supported arguments:
- String representations of (U)Int*.

Unsupported arguments (return `NULL`):
- String representations of Float* values, including `NaN` and `Inf`.
- String representations of binary and hexadecimal values, e.g. `SELECT toInt8OrNull('0xc0fe');`.

:::note
If the input value cannot be represented within the bounds of [Int8](../data-types/int-uint.md), overflow or underflow of the result occurs.
This is not considered an error.
:::

See also:
- [`toInt8`](#toInt8).
- [`toInt8OrZero`](#toInt8OrZero).
- [`toInt8OrDefault`](#toInt8OrDefault).
    ","toInt8OrNull(x)","- `x` — A String representation of a number. [`String`](/sql-reference/data-types/string)
","","Returns a value of type Int8, otherwise `NULL` if the conversion is unsuccessful. [`Int8`](/sql-reference/data-types/int-uint) or [`NULL`](/sql-reference/syntax#null)","**Usage example**

```sql title=Query
SELECT
    toInt8OrNull('-8'),
    toInt8OrNull('abc')
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toInt8OrNull('-8'):  -8
toInt8OrNull('abc'): \N
```

","1.1","Type Conversion"
"25.9.2.1","regionToPopulation",0,0,"","","System","","","","","","","",""
"25.9.2.1","format",0,0,"","","System","
Format the `pattern` string with the values (strings, integers, etc.) listed in the arguments, similar to formatting in Python.
The pattern string can contain replacement fields surrounded by curly braces `{}`.
Anything not contained in braces is considered literal text and copied verbatim into the output.
Literal brace character can be escaped by two braces: `{{` and `}}`.
Field names can be numbers (starting from zero) or empty (then they are implicitly given monotonically increasing numbers).
","format(pattern, s0[, s1, ...])","- `pattern` — The format string containing placeholders. [`String`](/sql-reference/data-types/string)
- `s0[, s1, ...]` — One or more values to substitute into the pattern. [`Any`](/sql-reference/data-types)
","","Returns a formatted string. [`String`](/sql-reference/data-types/string)","**Numbered placeholders**

```sql title=Query
SELECT format('{1} {0} {1}', 'World', 'Hello')
```

```response title=Response
┌─format('{1} {0} {1}', 'World', 'Hello')─┐
│ Hello World Hello                       │
└─────────────────────────────────────────┘
```

**Implicit numbering**

```sql title=Query
SELECT format('{} {}', 'Hello', 'World')
```

```response title=Response
┌─format('{} {}', 'Hello', 'World')─┐
│ Hello World                       │
└───────────────────────────────────┘
```

","20.1","String Replacement"
"25.9.2.1","toStartOfISOYear",0,0,"","","System","
Rounds down a date or date with time to the first day of the ISO year, which can be different than a regular year. See [ISO week date](https://en.wikipedia.org/wiki/ISO_week_date).

:::note
The return type can be configured by setting [`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions).
:::
    ","toStartOfISOYear(value)","- `value` — The date or date with time to round down to the first day of the ISO year. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
","","Returns the first day of the ISO year for the given date or date with time. [`Date`](/sql-reference/data-types/date)","**Round down to the first day of the ISO year**

```sql title=Query
SELECT toStartOfISOYear(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toStartOfISOYear(toDateTime('2023-04-21 10:20:30'))─┐
│                                          2023-01-02 │
└─────────────────────────────────────────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","arrayDistinct",0,0,"","","System","Returns an array containing only the distinct elements of an array.","arrayDistinct(arr)","- `arr` — Array for which to extract distinct elements. [`Array(T)`](/sql-reference/data-types/array)
","","Returns an array containing the distinct elements [`Array(T)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT arrayDistinct([1, 2, 2, 3, 1]);
```

```response title=Response
[1,2,3]
```

","1.1","Arrays"
"25.9.2.1","byteSwap",0,1,"","","System","
Reverses the bytes of an integer, i.e. changes its [endianness](https://en.wikipedia.org/wiki/Endianness).

The below example can be worked out in the following manner:

1. Convert the base-10 integer to its equivalent hexadecimal format in big-endian format, i.e. 3351772109 -> C7 C7 FB CD (4 bytes)
2. Reverse the bytes, i.e. C7 C7 FB CD -> CD FB C7 C7
3. Convert the result back to an integer assuming big-endian, i.e. CD FB C7 C7 -> 3455829959
One use case of this function is reversing IPv4s:

```result
┌─toIPv4(byteSwap(toUInt32(toIPv4('205.251.199.199'))))─┐
│ 199.199.251.205                                       │
└───────────────────────────────────────────────────────┘
```
    ","byteSwap(x)","- `x` — An integer value. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns `x` with bytes reversed. [`(U)Int*`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT byteSwap(3351772109)
```

```response title=Response
3455829959
```

**8-bit**

```sql title=Query
SELECT byteSwap(54)
```

```response title=Response
54
```

**16-bit**

```sql title=Query
SELECT byteSwap(4135)
```

```response title=Response
10000
```

**32-bit**

```sql title=Query
SELECT byteSwap(3351772109)
```

```response title=Response
3455829959
```

**64-bit**

```sql title=Query
SELECT byteSwap(123294967295)
```

```response title=Response
18439412204227788800
```

","23.10","Arithmetic"
"25.9.2.1","arrayCount",0,0,"","","System","
Returns the number of elements for which `func(arr1[i], ..., arrN[i])` returns true.
If `func` is not specified, it returns the number of non-zero elements in the array.

`arrayCount` is a [higher-order function](/sql-reference/functions/overview#higher-order-functions).
    ","arrayCount([func, ] arr1, ...)","- `func` — Optional. Function to apply to each element of the array(s). [`Lambda function`](/sql-reference/functions/overview#arrow-operator-and-lambda)
- `arr1, ..., arrN` — N arrays. [`Array(T)`](/sql-reference/data-types/array)
","","Returns the number of elements for which `func` returns true. Otherwise, returns the number of non-zero elements in the array. [`UInt32`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT arrayCount(x -> (x % 2), groupArray(number)) FROM numbers(10)
```

```response title=Response
5
```

","1.1","Arrays"
"25.9.2.1","hasColumnInTable",0,0,"","","System","
Checks if a specific column exists in a database table.
For elements in a nested data structure, the function checks for the existence of a column.
For the nested data structure itself, the function returns `0`.
    ","hasColumnInTable([hostname[, username[, password]],]database, table, column)","- `database` — Name of the database. [`const String`](/sql-reference/data-types/string)
- `table` — Name of the table. [`const String`](/sql-reference/data-types/string)
- `column` — Name of the column. [`const String`](/sql-reference/data-types/string)
- `hostname` — Optional. Remote server name to perform the check on. [`const String`](/sql-reference/data-types/string)
- `username` — Optional. Username for remote server. [`const String`](/sql-reference/data-types/string)
- `password` — Optional. Password for remote server. [`const String`](/sql-reference/data-types/string)
","","Returns `1` if the given column exists, `0` otherwise. [`UInt8`](/sql-reference/data-types/int-uint)","**Check an existing column**

```sql title=Query
SELECT hasColumnInTable('system','metrics','metric')
```

```response title=Response
1
```

**Check a non-existing column**

```sql title=Query
SELECT hasColumnInTable('system','metrics','non-existing_column')
```

```response title=Response
0
```

","1.1","Other"
"25.9.2.1","toRelativeHourNum",0,0,"","","System","
Converts a date or date with time to the number of hours elapsed since a certain fixed point in the past.
The exact point in time is an implementation detail, and therefore this function is not intended to be used standalone.
The main purpose of the function is to calculate the difference in hours between two dates or dates with time, e.g., `toRelativeHourNum(dt1) - toRelativeHourNum(dt2)`.
    ","toRelativeHourNum(date)","- `date` — Date or date with time. [`Date`](/sql-reference/data-types/date) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
","","Returns the number of hours from a fixed reference point in the past. [`UInt32`](/sql-reference/data-types/int-uint)","**Get relative hour numbers**

```sql title=Query
SELECT toRelativeHourNum(toDateTime('2023-01-01 12:00:00')) - toRelativeHourNum(toDateTime('2023-01-01 00:00:00')) AS hours_difference
```

```response title=Response
┌─hours_difference─┐
│               12 │
└──────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","CRC64",0,1,"","","System","
Calculates the CRC64 checksum of a string using the CRC-64-ECMA polynomial.
","CRC64(s)","- `s` — String to calculate CRC64 for. [`String`](/sql-reference/data-types/string)
","","Returns the CRC64 checksum of the string. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT CRC64('ClickHouse');
```

```response title=Response
┌──CRC64('ClickHouse')─┐
│ 12126588151325169346 │
└──────────────────────┘
```

","20.1","String"
"25.9.2.1","bitNot",0,0,"","","System","Performs the bitwise NOT operation.","bitNot(a)","- `a` — Value for which to apply bitwise NOT operation. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`String`](/sql-reference/data-types/string)
","","Returns the result of `~a` i.e `a` with bits flipped.","**Usage example**

```sql title=Query
SELECT
    CAST('5', 'UInt8') AS original,
    bin(original) AS original_binary,
    bitNot(original) AS result,
    bin(bitNot(original)) AS result_binary;
```

```response title=Response
┌─original─┬─original_binary─┬─result─┬─result_binary─┐
│        5 │ 00000101        │    250 │ 11111010      │
└──────────┴─────────────────┴────────┴───────────────┘
```

","1.1","Bit"
"25.9.2.1","joinGet",0,0,"","","System","
Allows you to extract data from a table the same way as from a dictionary.
Gets data from Join tables using the specified join key.

:::note
Only supports tables created with the `ENGINE = Join(ANY, LEFT, <join_keys>)` [statement](/engines/table-engines/special/join).
:::
","joinGet(join_storage_table_name, value_column, join_keys)","- `join_storage_table_name` — An identifier which indicates where to perform the search. The identifier is searched in the default database (see parameter `default_database` in the config file). To override the default database, use the `USE database_name` query or specify the database and the table through a dot, like `database_name.table_name`. [`String`](/sql-reference/data-types/string)
- `value_column` — The name of the column of the table that contains required data. [`const String`](/sql-reference/data-types/string)
- `join_keys` — A list of join keys. [`Any`](/sql-reference/data-types)
","","Returns list of values corresponded to list of keys. [`Any`](/sql-reference/data-types)","**Usage example**

```sql title=Query
CREATE TABLE db_test.id_val(`id` UInt32, `val` UInt32) ENGINE = Join(ANY, LEFT, id);
INSERT INTO db_test.id_val VALUES (1,11)(2,12)(4,13);

SELECT joinGet(db_test.id_val, 'val', toUInt32(1));
```

```response title=Response
┌─joinGet(db_test.id_val, 'val', toUInt32(1))─┐
│                                          11 │
└─────────────────────────────────────────────┘
```

**Usage with table from current database**

```sql title=Query
USE db_test;
SELECT joinGet(id_val, 'val', toUInt32(2));
```

```response title=Response
┌─joinGet(id_val, 'val', toUInt32(2))─┐
│                                  12 │
└─────────────────────────────────────┘
```

**Using arrays as join keys**

```sql title=Query
CREATE TABLE some_table (id1 UInt32, id2 UInt32, name String) ENGINE = Join(ANY, LEFT, id1, id2);
INSERT INTO some_table VALUES (1, 11, 'a') (2, 12, 'b') (3, 13, 'c');

SELECT joinGet(some_table, 'name', 1, 11);
```

```response title=Response
┌─joinGet(some_table, 'name', 1, 11)─┐
│ a                                  │
└────────────────────────────────────┘
```

","18.16","Other"
"25.9.2.1","multiSearchAnyCaseInsensitiveUTF8",0,0,"","","System","","","","","","","",""
"25.9.2.1","upperUTF8",0,0,"","","System","
Converts a string to uppercase, assuming that the string contains valid UTF-8 encoded text.
If this assumption is violated, no exception is thrown and the result is undefined.

:::note
This function doesn't detect the language, e.g. for Turkish the result might not be exactly correct (i/İ vs. i/I).
If the length of the UTF-8 byte sequence is different for upper and lower case of a code point (such as `ẞ` and `ß`), the result may be incorrect for that code point.
:::
","upperUTF8(s)","- `s` — A string type. [`String`](/sql-reference/data-types/string)
","","A String data type value. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT upperUTF8('München') AS Upperutf8
```

```response title=Response
┌─Upperutf8─┐
│ MÜNCHEN   │
└───────────┘
```

","1.1","String"
"25.9.2.1","validateNestedArraySizes",0,0,"","","System","","","","","","","",""
"25.9.2.1","toStartOfInterval",0,0,"","","System","
This function generalizes other `toStartOf*()` functions with `toStartOfInterval(date_or_date_with_time, INTERVAL x unit [, time_zone])` syntax.

For example,
- `toStartOfInterval(t, INTERVAL 1 YEAR)` returns the same as `toStartOfYear(t)`,
- `toStartOfInterval(t, INTERVAL 1 MONTH)` returns the same as `toStartOfMonth(t)`,
- `toStartOfInterval(t, INTERVAL 1 DAY)` returns the same as `toStartOfDay(t)`,
- `toStartOfInterval(t, INTERVAL 15 MINUTE)` returns the same as `toStartOfFifteenMinutes(t)`.

The calculation is performed relative to specific points in time:

| Interval    | Start                  |
|-------------|------------------------|
| YEAR        | year 0                 |
| QUARTER     | 1900 Q1                |
| MONTH       | 1900 January           |
| WEEK        | 1970, 1st week (01-05) |
| DAY         | 1970-01-01             |
| HOUR        | (*)                    |
| MINUTE      | 1970-01-01 00:00:00    |
| SECOND      | 1970-01-01 00:00:00    |
| MILLISECOND | 1970-01-01 00:00:00    |
| MICROSECOND | 1970-01-01 00:00:00    |
| NANOSECOND  | 1970-01-01 00:00:00    |
(*) hour intervals are special: the calculation is always performed relative to 00:00:00 (midnight) of the current day. As a result, only
hour values between 1 and 23 are useful.

If unit `WEEK` was specified, `toStartOfInterval` assumes that weeks start on Monday. Note that this behavior is different from that of function `toStartOfWeek` in which weeks start by default on Sunday.

The second overload emulates TimescaleDB's `time_bucket()` function, respectively PostgreSQL's `date_bin()` function.
        ","toStartOfInterval(value, INTERVAL x unit[, time_zone])
toStartOfInterval(value, INTERVAL x unit[, origin[, time_zone]])","- `value` — Date or date with time value to round down. [`Date`](/sql-reference/data-types/date) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
- `x` — Interval length number. - `unit` — Interval unit: YEAR, QUARTER, MONTH, WEEK, DAY, HOUR, MINUTE, SECOND, MILLISECOND, MICROSECOND, NANOSECOND. - `time_zone` — Optional. Time zone name as a string. - `origin` — Optional. Origin point for calculation (second overload only). ","","Returns the start of the interval containing the input value. [`DateTime`](/sql-reference/data-types/datetime)","**Basic interval rounding**

```sql title=Query
SELECT toStartOfInterval(toDateTime('2023-01-15 14:30:00'), INTERVAL 1 MONTH)
```

```response title=Response
┌─toStartOfInt⋯alMonth(1))─┐
│               2023-01-01 │
└──────────────────────────┘
```

**Using origin point**

```sql title=Query
SELECT toStartOfInterval(toDateTime('2023-01-01 14:45:00'), INTERVAL 1 MINUTE, toDateTime('2023-01-01 14:35:30'))
```

```response title=Response
┌─toStartOfInt⋯14:35:30'))─┐
│      2023-01-01 14:44:30 │
└──────────────────────────┘
```

","20.1","Dates and Times"
"25.9.2.1","JSONExtractRawCaseInsensitive",0,0,"","","System","
Returns part of the JSON as an unparsed string using case-insensitive key matching. This function is similar to [`JSONExtractRaw`](#jsonextractraw).
        ","JSONExtractRawCaseInsensitive(json [, indices_or_keys]...)","- `json` — JSON string to parse [`String`](/sql-reference/data-types/string)
- `indices_or_keys` — Optional. Indices or keys to navigate to the field. Keys use case-insensitive matching [`String`](/sql-reference/data-types/string) or [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns the raw JSON string of the extracted element. [`String`](/sql-reference/data-types/string)","**object**

```sql title=Query
SELECT JSONExtractRawCaseInsensitive('{""Object"": {""key"": ""value""}}', 'OBJECT')
```

```response title=Response
{""key"":""value""}
```

","25.8","JSON"
"25.9.2.1","toStartOfMonth",0,0,"","","System","
Rounds down a date or date with time to the first day of the month.

:::note
The return type can be configured by setting [`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions).
:::
    ","toStartOfMonth(value)","- `value` — The date or date with time to round down to the first day of the month. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
","","Returns the first day of the month for the given date or date with time. [`Date`](/sql-reference/data-types/date)","**Round down to the first day of the month**

```sql title=Query
SELECT toStartOfMonth(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toStartOfMonth(toDateTime('2023-04-21 10:20:30'))─┐
│                                        2023-04-01 │
└───────────────────────────────────────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","structureToCapnProtoSchema",0,0,"","","System","
Function that converts ClickHouse table structure to CapnProto format schema
","","","","","**random**

```sql title=Query
SELECT structureToCapnProtoSchema('s String, x UInt32', 'MessageName') format TSVRaw
```

```response title=Response
struct MessageName
{
    s @0 : Data;
    x @1 : UInt32;
}
```

","","Other"
"25.9.2.1","variantType",0,0,"","","System","
Returns the variant type name for each row of `Variant` column. If row contains NULL, it returns 'None' for it.
","variantType(variant)","- `variant` — Variant column ","","","**Example**

```sql title=Query
CREATE TABLE test (v Variant(UInt64, String, Array(UInt64))) ENGINE = Memory;
INSERT INTO test VALUES (NULL), (42), ('Hello, World!'), ([1, 2, 3]);
SELECT variantType(v) FROM test;
```

```response title=Response
┌─variantType(v)─┐
│ None           │
│ UInt64         │
│ String         │
│ Array(UInt64)  │
└────────────────┘
```

","","JSON"
"25.9.2.1","mapExtractKeyLike",0,0,"","","System","Returns a map with elements which key matches the specified pattern.","","","","","**mapExtractKeyLike**

```sql title=Query
SELECT mapExtractKeyLike(map('k1-1', 1, 'k2-1', 2), 'k1%')
```

```response title=Response

```

","23.4","Map"
"25.9.2.1","toUnixTimestamp",0,0,"","","System","
Converts a `String`, `Date`, or `DateTime` to a Unix timestamp (seconds since `1970-01-01 00:00:00 UTC`) as `UInt32`.
    ","toUnixTimestamp(date, [timezone])","- `date` — Value to convert. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64) or [`String`](/sql-reference/data-types/string)
- `timezone` — Optional. Timezone to use for conversion. If not specified, the server's timezone is used. [`String`](/sql-reference/data-types/string)
","","Returns the Unix timestamp. [`UInt32`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT
'2017-11-05 08:07:47' AS dt_str,
toUnixTimestamp(dt_str) AS from_str,
toUnixTimestamp(dt_str, 'Asia/Tokyo') AS from_str_tokyo,
toUnixTimestamp(toDateTime(dt_str)) AS from_datetime,
toUnixTimestamp(toDateTime64(dt_str, 0)) AS from_datetime64,
toUnixTimestamp(toDate(dt_str)) AS from_date,
toUnixTimestamp(toDate32(dt_str)) AS from_date32
FORMAT Vertical;
```

```response title=Response
Row 1:
──────
dt_str:          2017-11-05 08:07:47
from_str:        1509869267
from_str_tokyo:  1509836867
from_datetime:   1509869267
from_datetime64: 1509869267
from_date:       1509840000
from_date32:     1509840000
```

","1.1","Dates and Times"
"25.9.2.1","clamp",0,0,"","","System","
Restricts a value to be within the specified minimum and maximum bounds.

If the value is less than the minimum, returns the minimum. If the value is greater than the maximum, returns the maximum. Otherwise, returns the value itself.

All arguments must be of comparable types. The result type is the largest compatible type among all arguments.
    ","clamp(value, min, max)","- `value` — The value to clamp. - `min` — The minimum bound. - `max` — The maximum bound. ","","Returns the value, restricted to the [min, max] range.","**Basic usage**

```sql title=Query
SELECT clamp(5, 1, 10) AS result;
```

```response title=Response
┌─result─┐
│      5 │
└────────┘
```

**Value below minimum**

```sql title=Query
SELECT clamp(-3, 0, 7) AS result;
```

```response title=Response
┌─result─┐
│      0 │
└────────┘
```

**Value above maximum**

```sql title=Query
SELECT clamp(15, 0, 7) AS result;
```

```response title=Response
┌─result─┐
│      7 │
└────────┘
```

","24.5","Conditional"
"25.9.2.1","h3GetRes0Indexes",0,0,"","","System","","","","","","","",""
"25.9.2.1","tupleIntDivByNumber",0,0,"","","System","
Performs integer division of a tuple of numerators by a given denominator, and returns a tuple of the quotients.
If either of the input parameters contain non-integer elements then the result is calculated by rounding to the nearest integer for each non-integer numerator or divisor.
An error will be thrown for division by 0.
","tupleIntDivByNumber(tuple_num, div)","- `tuple_num` — Tuple of numerator values. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) or [`Tuple(Float*)`](/sql-reference/data-types/tuple) or [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
- `div` — The divisor value. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
","","Returns a tuple of the quotients. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) or [`Tuple(Float*)`](/sql-reference/data-types/tuple) or [`Tuple(Decimal)`](/sql-reference/data-types/tuple)","**Basic usage**

```sql title=Query
SELECT tupleIntDivByNumber((15, 10, 5), 5)
```

```response title=Response
(3, 2, 1)
```

**With decimals**

```sql title=Query
SELECT tupleIntDivByNumber((15.2, 10.7, 5.5), 5.8)
```

```response title=Response
(2, 1, 0)
```

","23.8","Tuple"
"25.9.2.1","mapContainsValueLike",0,0,"","","System","Checks whether map contains value LIKE specified pattern.","","","","","**mapContainsValueLike**

```sql title=Query
SELECT mapContainsValueLike(map(1, 'v1-1', '2, 'v2-2'), 'v1%')
```

```response title=Response

```

","25.5","Map"
"25.9.2.1","tanh",0,1,"","","System","
Returns the hyperbolic tangent.
","tanh(x)","- `x` — The angle in radians. Values from the interval: -∞ < x < +∞. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal*`](/sql-reference/data-types/decimal)
","","Returns values from the interval: -1 < tanh(x) < 1 [`Float*`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT tanh(0)
```

```response title=Response
0
```

","20.1","Mathematical"
"25.9.2.1","s2RectIntersection",0,0,"","","System","","","","","","","",""
"25.9.2.1","timeDiff",0,1,"","","System","
Returns the count of the specified `unit` boundaries crossed between the `startdate` and the `enddate`.
The difference is calculated using relative units. For example, the difference between 2021-12-29 and 2022-01-01 is 3 days for unit day
(see [`toRelativeDayNum`](#toRelativeDayNum)), 1 month for unit month (see [`toRelativeMonthNum`](#toRelativeMonthNum)) and 1 year for unit year
(see [`toRelativeYearNum`](#toRelativeYearNum)).

If the unit `week` was specified, then `timeDiff` assumes that weeks start on Monday.
Note that this behavior is different from that of function `toWeek()` in which weeks start by default on Sunday.

For an alternative to [`timeDiff`](#timeDiff), see function [`age`](#age).
    ","date_diff(unit, startdate, enddate, [timezone])","- `unit` — The type of interval for result.

| Unit        | Possible values                           |
|-------------|-------------------------------------------|
| nanosecond  | `nanosecond`, `nanoseconds`, `ns`         |
| microsecond | `microsecond`, `microseconds`, `us`, `u`  |
| millisecond | `millisecond`, `milliseconds`, `ms`       |
| second      | `second`, `seconds`, `ss`, `s`            |
| minute      | `minute`, `minutes`, `mi`, `n`            |
| hour        | `hour`, `hours`, `hh`, `h`                |
| day         | `day`, `days`, `dd`, `d`                  |
| week        | `week`, `weeks`, `wk`, `ww`               |
| month       | `month`, `months`, `mm`, `m`              |
| quarter     | `quarter`, `quarters`, `qq`, `q`          |
| year        | `year`, `years`, `yyyy`, `yy`             |
 - `startdate` — The first time value to subtract (the subtrahend). [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
- `enddate` — The second time value to subtract from (the minuend). [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
- `timezone` — Optional. Timezone name. If specified, it is applied to both `startdate` and `enddate`. If not specified, timezones of `startdate` and `enddate` are used. If they are not the same, the result is unspecified. [`String`](/sql-reference/data-types/string)
","","Returns the difference between `enddate` and `startdate` expressed in `unit`. [`Int64`](/sql-reference/data-types/int-uint)","**Calculate date difference in hours**

```sql title=Query
SELECT timeDiff('hour', toDateTime('2018-01-01 22:00:00'), toDateTime('2018-01-02 23:00:00')) AS res
```

```response title=Response
┌─res─┐
│  25 │
└─────┘
```

**Calculate date difference in different units**

```sql title=Query
SELECT
    toDate('2022-01-01') AS e,
    toDate('2021-12-29') AS s,
    timeDiff('day', s, e) AS day_diff,
    timeDiff('month', s, e) AS month_diff,
    timeDiff('year', s, e) AS year_diff
```

```response title=Response
┌──────────e─┬──────────s─┬─day_diff─┬─month_diff─┬─year_diff─┐
│ 2022-01-01 │ 2021-12-29 │        3 │          1 │         1 │
└────────────┴────────────┴──────────┴────────────┴───────────┘
```

","23.4","Dates and Times"
"25.9.2.1","mapContainsKeyLike",0,0,"","","System","Checks whether map contains key LIKE specified pattern.","","","","","**mapContainsKeyLike**

```sql title=Query
SELECT mapContainsKeyLike(map('k1-1', 1, 'k2-1', 2), 'k1%')
```

```response title=Response

```

","23.4","Map"
"25.9.2.1","runningAccumulate",0,0,"","","System","
Accumulates the states of an aggregate function for each row of a data block.

:::warning Deprecated
The state is reset for each new block of data.
Due to this error-prone behavior the function has been deprecated, and you are advised to use [window functions](/sql-reference/window-functions) instead.
You can use setting [`allow_deprecated_error_prone_window_functions`](/operations/settings/settings#allow_deprecated_error_prone_window_functions) to allow usage of this function.
:::
","runningAccumulate(agg_state[, grouping])","- `agg_state` — State of the aggregate function. [`AggregateFunction`](/sql-reference/data-types/aggregatefunction)
- `grouping` — Optional. Grouping key. The state of the function is reset if the `grouping` value is changed. It can be any of the supported data types for which the equality operator is defined. [`Any`](/sql-reference/data-types)
","","Returns the accumulated result for each row. [`Any`](/sql-reference/data-types)","**Usage example with initializeAggregation**

```sql title=Query
WITH initializeAggregation('sumState', number) AS one_row_sum_state
SELECT
    number,
    finalizeAggregation(one_row_sum_state) AS one_row_sum,
    runningAccumulate(one_row_sum_state) AS cumulative_sum
FROM numbers(5);
```

```response title=Response
┌─number─┬─one_row_sum─┬─cumulative_sum─┐
│      0 │           0 │              0 │
│      1 │           1 │              1 │
│      2 │           2 │              3 │
│      3 │           3 │              6 │
│      4 │           4 │             10 │
└────────┴─────────────┴────────────────┘
```

","1.1","Other"
"25.9.2.1","exp2",0,0,"","","System","
Returns 2 to the power of the given argument.
","exp2(x)","- `x` — The exponent. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal*`](/sql-reference/data-types/decimal)
","","Returns 2^x [`Float*`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT exp2(3);
```

```response title=Response
8
```

","1.1","Mathematical"
"25.9.2.1","L2Distance",0,0,"","","System","
Calculates the distance between two points (the elements of the vectors are the coordinates) in Euclidean space ([Euclidean distance](https://en.wikipedia.org/wiki/Euclidean_distance)).
    ","L2Distance(vector1, vector2)","- `vector1` — First vector. [`Tuple(T)`](/sql-reference/data-types/tuple) or [`Array(T)`](/sql-reference/data-types/array)
- `vector2` — Second vector. [`Tuple(T)`](/sql-reference/data-types/tuple) or [`Array(T)`](/sql-reference/data-types/array)
","","Returns the 2-norm distance. [`Float64`](/sql-reference/data-types/float)","**Basic usage**

```sql title=Query
SELECT L2Distance((1, 2), (2, 3))
```

```response title=Response
┌─L2Distance((1, 2), (2, 3))─┐
│         1.4142135623730951 │
└────────────────────────────┘
```

","21.11","Distance"
"25.9.2.1","decodeURLFormComponent",0,0,"","","System","
Decodes URL-encoded strings using form encoding rules ([RFC-1866](https://www.rfc-editor.org/rfc/rfc1866.html)), where `+` signs are converted to spaces and percent-encoded characters are decoded.
    ","decodeURLFormComponent(url)","- `url` — URL. [`String`](/sql-reference/data-types/string)
","","Returns the decoded URL. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT decodeURLFormComponent('http://127.0.0.1:8123/?query=SELECT%201+2%2B3') AS DecodedURL;
```

```response title=Response
┌─DecodedURL────────────────────────────────┐
│ http://127.0.0.1:8123/?query=SELECT 1 2+3 │
└───────────────────────────────────────────┘
```

","1.1","URL"
"25.9.2.1","bitmapHasAll",0,0,"","","System","Checks if the first bitmap contains all set bits of the second bitmap.","bitmapHasAll(bitmap1, bitmap2)","- `bitmap1` — First bitmap object. [`AggregateFunction(groupBitmap, T)`](/sql-reference/data-types/aggregatefunction). - `bitmap2` — Second bitmap object. [`AggregateFunction(groupBitmap, T)`](/sql-reference/data-types/aggregatefunction). ","","Returns `1` if all set bits of the second bitmap are present in the first bitmap, otherwise `0` [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT bitmapHasAll(bitmapBuild([1, 2, 3]), bitmapBuild([2, 3])) AS res;
```

```response title=Response
┌─res─┐
│  1  │
└─────┘
```

","20.1","Bitmap"
"25.9.2.1","base58Decode",0,0,"","","System","
Decodes a [Base58](https://datatracker.ietf.org/doc/html/draft-msporny-base58-03#section-3) string.
If the string is not valid Base58-encoded, an exception is thrown.
","base58Decode(encoded)","- `encoded` — String column or constant to decode. [`String`](/sql-reference/data-types/string)
","","Returns a string containing the decoded value of the argument. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT base58Decode('JxF12TrwUP45BMd');
```

```response title=Response
┌─base58Decode⋯rwUP45BMd')─┐
│ Hello World              │
└──────────────────────────┘
```

","22.7","String"
"25.9.2.1","timeSeriesIdToTags",0,0,"","","System","Finds tags associated with the specified identifier of a time series.","timeSeriesIdToTags(id)","- `id` — Identifier of a time series. [`UInt64`](/sql-reference/data-types/int-uint) or [`UInt128`](/sql-reference/data-types/int-uint) or [`UUID`](/sql-reference/data-types/uuid) or [`FixedString(16)`](/sql-reference/data-types/fixedstring)
","","Returns an array of pairs (tag_name, tag_value). [`Array(Tuple(String, String))`](/sql-reference/data-types/array)","**Example**

```sql title=Query
SELECT timeSeriesStoreTags(8374283493092, [('region', 'eu'), ('env', 'dev')], '__name__', 'http_requests_count') AS id, timeSeriesIdToTags(id)
```

```response title=Response
8374283493092    [('__name__', ''http_requests_count''), ('env', 'dev'), ('region', 'eu')]
```

","25.8","Time Series"
"25.9.2.1","mapReverseSort",0,0,"","","System","The same as arrayReverseSort.","","","","","**mapReverseSort**

```sql title=Query
SELECT mapReverseSort((k, v) -> v, map('k1', 3, 'k2', 1, 'k3', 2))
```

```response title=Response

```

","23.4","Map"
"25.9.2.1","h3EdgeLengthKm",0,0,"","","System","
Calculates the average length of an [H3](https://h3geo.org/docs/core-library/h3Indexing/) hexagon edge in kilometers.
    ","h3EdgeLengthKm(resolution)","- `resolution` — Index resolution with range `[0, 15]`. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns the average length of an [H3](#h3-index) hexagon edge in kilometers. [`Float64`](/sql-reference/data-types/float)","**Get edge length for maximum resolution**

```sql title=Query
SELECT h3EdgeLengthKm(15) AS edgeLengthKm
```

```response title=Response
┌─edgeLengthKm─┐
│  0.000509713 │
└──────────────┘
```

","20.1","Geo"
"25.9.2.1","parseDateTime64BestEffortUSOrNull",0,0,"","","System","
Same as [`parseDateTime64BestEffort`](#parsedatetime64besteffort), except that this function prefers US date format (`MM/DD/YYYY` etc.) in case of ambiguity and returns `NULL` when it encounters a date format that cannot be processed.
    ","parseDateTime64BestEffortUSOrNull(time_string[, precision[, time_zone]])","- `time_string` — String containing a date or date with time to convert. [`String`](/sql-reference/data-types/string)
- `precision` — Optional. Required precision. `3` for milliseconds, `6` for microseconds. Default: `3`. [`UInt8`](/sql-reference/data-types/int-uint)
- `time_zone` — Optional. Timezone. The function parses `time_string` according to the timezone. [`String`](/sql-reference/data-types/string)
","","Returns `time_string` converted to [`DateTime64`](../../sql-reference/data-types/datetime64.md) using US format preference, or `NULL` if the input cannot be parsed. [`DateTime64`](/sql-reference/data-types/datetime64) or [`NULL`](/sql-reference/syntax#null)","**Usage example**

```sql title=Query
SELECT parseDateTime64BestEffortUSOrNull('02/10/2025 12:30:45.123') AS valid_us,
       parseDateTime64BestEffortUSOrNull('invalid') AS invalid
```

```response title=Response
┌─valid_us────────────────┬─invalid─┐
│ 2025-02-10 12:30:45.123 │    ᴺᵁᴸᴸ │
└─────────────────────────┴─────────┘
```

","22.8","Type Conversion"
"25.9.2.1","moduloLegacy",0,0,"","","System","","","","","","","",""
"25.9.2.1","h3kRing",0,0,"","","System","
Lists all the [H3](#H3-index) hexagons in the radius of `k` from the given hexagon in random order.
    ","h3kRing(h3index, k)","- `h3index` — H3 index of the origin hexagon. [`UInt64`](/sql-reference/data-types/int-uint)
- `k` — Radius [`UInt*`](/sql-reference/data-types/int-uint)
","","Returns an array of H3 indexes that are within `k` rings of the origin hexagon. [`Array(UInt64)`](/sql-reference/data-types/array)","**Get all hexagons within 1 ring of the origin**

```sql title=Query
SELECT arrayJoin(h3kRing(644325529233966508, 1)) AS h3index
```

```response title=Response
┌────────────h3index─┐
│ 644325529233966508 │
│ 644325529233966497 │
│ 644325529233966510 │
│ 644325529233966504 │
│ 644325529233966509 │
│ 644325529233966355 │
│ 644325529233966354 │
└────────────────────┘
```

","20.1","Geo"
"25.9.2.1","dictGetOrNull",0,0,"","","System","
Retrieves values from a dictionary.

Accepts 3 parameters:
-- name of the dictionary;
-- name of the column of the dictionary or tuple of column names;
-- key value - expression returning dictionary key-type value or tuple-type value - depending on the dictionary configuration;

Returned value: value of the dictionary attribute parsed in the attribute's data type if key is found, otherwise NULL.

Throws an exception if cannot parse the value of the attribute or the value does not match the attribute data type.
","","","","","","","Dictionary"
"25.9.2.1","arrayShingles",0,0,"","","System","Generates an array of shingles (similar to ngrams for strings), i.e. consecutive sub-arrays with a specified length of the input array.","arrayShingles(arr, l)","- `arr` — Array for which to generate an array of shingles. [`Array(T)`](/sql-reference/data-types/array)
- `l` — The length of each shingle. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","An array of generated shingles [`Array(T)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT arrayShingles([1, 2, 3, 4], 3) as res;
```

```response title=Response
[[1, 2, 3], [2, 3, 4]]
```

","24.1","Arrays"
"25.9.2.1","inIgnoreSet",0,0,"","","System","","","","","","","",""
"25.9.2.1","dictGetUUID",0,0,"","","System","
Retrieves values from a dictionary.

Accepts 3 parameters:
-- name of the dictionary;
-- name of the column of the dictionary or tuple of column names;
-- key value - expression returning dictionary key-type value or tuple-type value - depending on the dictionary configuration;

Returned value: value of the dictionary attribute parsed in the UUID if key is found, otherwise <null_value> element specified in the dictionary configuration.

Throws an exception if cannot parse the value of the attribute or the value does not match the attribute data type.
","","","","","","","Dictionary"
"25.9.2.1","L1Distance",0,0,"","","System","
Calculates the distance between two points (the elements of the vectors are the coordinates) in `L1` space (1-norm ([taxicab geometry](https://en.wikipedia.org/wiki/Taxicab_geometry) distance)).
    ","L1Distance(vector1, vector2)","- `vector1` — First vector. [`Tuple(T)`](/sql-reference/data-types/tuple) or [`Array(T)`](/sql-reference/data-types/array)
- `vector2` — Second vector. [`Tuple(T)`](/sql-reference/data-types/tuple) or [`Array(T)`](/sql-reference/data-types/array)
","","Returns the 1-norm distance. [`UInt32`](/sql-reference/data-types/int-uint) or [`Float64`](/sql-reference/data-types/float)","**Basic usage**

```sql title=Query
SELECT L1Distance((1, 2), (2, 3))
```

```response title=Response
┌─L1Distance((1, 2), (2, 3))─┐
│                          2 │
└────────────────────────────┘
```

","21.11","Distance"
"25.9.2.1","mapContainsKey",0,0,"","","System","Checks whether the map has the specified key.","","","","","**mapContainsKey**

```sql title=Query
SELECT mapContainsKey(map('k1', 'v1', 'k2', 'v2'), 'k1')
```

```response title=Response

```

","25.5","Map"
"25.9.2.1","notNullInIgnoreSet",0,0,"","","System","","","","","","","",""
"25.9.2.1","mapValues",0,0,"","","System","Returns an array with the values of map.","","","","","**mapValues**

```sql title=Query
SELECT mapValues(map('k1', 'v1', 'k2', 'v2'))
```

```response title=Response

```

","21.2","Map"
"25.9.2.1","match",0,0,"","","System","
Checks if a provided string matches the provided regular expression pattern.

This function uses the RE2 regular expression library. Please refer to [re2](https://github.com/google/re2/wiki/Syntax) for supported syntax.

Matching works under UTF-8 assumptions, e.g. `¥` uses two bytes internally but matching treats it as a single codepoint.
The regular expression must not contain NULL bytes.
If the haystack or the pattern are not valid UTF-8, the behavior is undefined.

Unlike re2's default behavior, `.` matches line breaks. To disable this, prepend the pattern with `(?-s)`.

The pattern is automatically anchored at both ends (as if the pattern started with '^' and ended with '$').

If you only like to find substrings, you can use functions [`like`](#like) or [`position`](#position) instead - they work much faster than this function.

Alternative operator syntax: `haystack REGEXP pattern`.
    ","match(haystack, pattern)","- `haystack` — String in which the pattern is searched. [`String`](/sql-reference/data-types/string)
- `pattern` — Regular expression pattern. [`const String`](/sql-reference/data-types/string)
","","Returns `1` if the pattern matches, `0` otherwise. [`UInt8`](/sql-reference/data-types/int-uint)","**Basic pattern matching**

```sql title=Query
SELECT match('Hello World', 'Hello.*')
```

```response title=Response
┌─match('Hello World', 'Hello.*')─┐
│                               1 │
└─────────────────────────────────┘
```

**Pattern not matching**

```sql title=Query
SELECT match('Hello World', 'goodbye.*')
```

```response title=Response
┌─match('Hello World', 'goodbye.*')─┐
│                                 0 │
└───────────────────────────────────┘
```

","1.1","String Search"
"25.9.2.1","mortonDecode",0,0,"","","System","
Decodes a Morton encoding (ZCurve) into the corresponding unsigned integer tuple.

As with the `mortonEncode` function, this function has two modes of operation:
- **Simple**
- **Expanded**

**Simple mode**

Accepts a resulting tuple size as the first argument and the code as the second argument.

**Expanded mode**

Accepts a range mask (tuple) as the first argument and the code as the second argument.
Each number in the mask configures the amount of range shrink:

* `1` - no shrink
* `2` - 2x shrink
* `3` - 3x shrink
⋮
* Up to 8x shrink.

Range expansion can be beneficial when you need a similar distribution for
arguments with wildly different ranges (or cardinality). For example: 'IP Address' `(0...FFFFFFFF)`
and 'Country code' `(0...FF)`. As with the encode function, this is limited to
8 numbers at most.
    ","-- Simple mode
mortonDecode(tuple_size, code)

-- Expanded mode
mortonDecode(range_mask, code)","- `tuple_size` — Integer value no more than 8. [`UInt8/16/32/64`](/sql-reference/data-types/int-uint)
- `range_mask` — For the expanded mode, the mask for each argument. The mask is a tuple of unsigned integers. Each number in the mask configures the amount of range shrink. [`Tuple(UInt8/16/32/64)`](/sql-reference/data-types/tuple)
- `code` — UInt64 code. [`UInt64`](/sql-reference/data-types/int-uint)
","","Returns a tuple of the specified size. [`Tuple(UInt64)`](/sql-reference/data-types/tuple)","**Simple mode**

```sql title=Query
SELECT mortonDecode(3, 53)
```

```response title=Response
[""1"", ""2"", ""3""]
```

**Single argument**

```sql title=Query
SELECT mortonDecode(1, 1)
```

```response title=Response
[""1""]
```

**Expanded mode, shrinking one argument**

```sql title=Query
SELECT mortonDecode(tuple(2), 32768)
```

```response title=Response
[""128""]
```

**Column usage**

```sql title=Query
-- First create the table and insert some data
CREATE TABLE morton_numbers(
    n1 UInt32,
    n2 UInt32,
    n3 UInt16,
    n4 UInt16,
    n5 UInt8,
    n6 UInt8,
    n7 UInt8,
    n8 UInt8
)
ENGINE=MergeTree()
ORDER BY n1;
INSERT INTO morton_numbers (*) values(1, 2, 3, 4, 5, 6, 7, 8);

-- Use column names instead of constants as function arguments
SELECT untuple(mortonDecode(8, mortonEncode(n1, n2, n3, n4, n5, n6, n7, n8))) FROM morton_numbers;
```

```response title=Response
1 2 3 4 5 6 7 8
```

","24.6","Encoding"
"25.9.2.1","subBitmap",0,0,"","","System","Returns a subset of the bitmap, starting from position `offset`. The maximum cardinality of the returned bitmap is `cardinality_limit`.","subBitmap(bitmap, offset, cardinality_limit)","- `bitmap` — Bitmap object. [`AggregateFunction(groupBitmap, T)`](/sql-reference/data-types/aggregatefunction). - `offset` — Number of set bits to skip from the beginning (zero-based). [`UInt32`](/sql-reference/data-types/int-uint) - `cardinality_limit` — Maximum number of set bits to include in the subset. [`UInt32`](/sql-reference/data-types/int-uint) ","","Returns a bitmap containing at most `limit` set bits, starting after skipping `offset` set bits in ascending order [`AggregateFunction(groupBitmap, T)`](/sql-reference/data-types/aggregatefunction)","**Usage example**

```sql title=Query
SELECT bitmapToArray(subBitmap(bitmapBuild([1, 2, 3, 4, 5]), 2, 2)) AS res;
```

```response title=Response
┌─res────┐
│ [3, 4] │
└────────┘
```

","21.9","Bitmap"
"25.9.2.1","decrypt",0,0,"","","System","
This function decrypts an AES-encrypted binary string using the following modes:

- aes-128-ecb, aes-192-ecb, aes-256-ecb
- aes-128-cbc, aes-192-cbc, aes-256-cbc
- aes-128-ofb, aes-192-ofb, aes-256-ofb
- aes-128-gcm, aes-192-gcm, aes-256-gcm
- aes-128-ctr, aes-192-ctr, aes-256-ctr
- aes-128-cfb, aes-128-cfb1, aes-128-cfb8
        ","decrypt(mode, ciphertext, key[, iv, aad])","- `mode` — Decryption mode. [`String`](/sql-reference/data-types/string)
- `ciphertext` — Encrypted text that should be decrypted. [`String`](/sql-reference/data-types/string)
- `key` — Decryption key. [`String`](/sql-reference/data-types/string)
- `iv` — Initialization vector. Required for `-gcm` modes, optional for others. [`String`](/sql-reference/data-types/string)
- `aad` — Additional authenticated data. Won't decrypt if this value is incorrect. Works only in `-gcm` modes, for others throws an exception. [`String`](/sql-reference/data-types/string)
","","Returns decrypted plaintext. [`String`](/sql-reference/data-types/string)","**Correctly decrypting encrypted data**

```sql title=Query
-- Re-using the table from the encrypt function example
SELECT comment, hex(secret) FROM encryption_test;
```

```response title=Response
┌─comment──────────────┬─hex(secret)──────────────────────────────────┐
│ aes-256-gcm          │ A8A3CCBC6426CFEEB60E4EAE03D3E94204C1B09E0254 │
│ aes-256-gcm with AAD │ A8A3CCBC6426D9A1017A0A932322F1852260A4AD6837 │
└──────────────────────┴──────────────────────────────────────────────┘
┌─comment──────────────────────────┬─hex(secret)──────────────────────┐
│ aes-256-ofb no IV                │ B4972BDC4459                     │
│ aes-256-ofb no IV, different key │ 2FF57C092DC9                     │
│ aes-256-ofb with IV              │ 5E6CB398F653                     │
│ aes-256-cbc no IV                │ 1BC0629A92450D9E73A00E7D02CF4142 │
└──────────────────────────────────┴──────────────────────────────────┘
```

**Incorrectly decrypting encrypted data**

```sql title=Query
SELECT comment, decrypt('aes-256-cfb128', secret, '12345678910121314151617181920212') AS plaintext FROM encryption_test
```

```response title=Response
-- Notice how only a portion of the data was properly decrypted, and the rest is gibberish since either `mode`, `key`, or `iv` were different upon encryption.
┌─comment──────────────┬─plaintext──┐
│ aes-256-gcm          │ OQ�E
                             �t�7T�\���\�   │
│ aes-256-gcm with AAD │ OQ�E
                             �\��si����;�o�� │
└──────────────────────┴────────────┘
┌─comment──────────────────────────┬─plaintext─┐
│ aes-256-ofb no IV                │ Secret    │
│ aes-256-ofb no IV, different key │ �4�
                                        �         │
│ aes-256-ofb with IV              │ ���6�~        │
│aes-256-cbc no IV                │ �2*4�h3c�4w��@
└──────────────────────────────────┴───────────┘
```

","20.12","Encryption"
"25.9.2.1","base64Decode",0,0,"","","System","
Decodes a string from [Base64](https://en.wikipedia.org/wiki/Base64) representation, according to RFC 4648.
Throws an exception in case of error.

","base64Decode(encoded)","- `encoded` — String column or constant to decode. If the string is not valid Base64-encoded, an exception is thrown. [`String`](/sql-reference/data-types/string)
","","Returns the decoded string. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT base64Decode('Y2xpY2tob3VzZQ==')
```

```response title=Response
┌─base64Decode('Y2xpY2tob3VzZQ==')─┐
│ clickhouse                       │
└──────────────────────────────────┘
```

","18.16","String"
"25.9.2.1","defaultValueOfArgumentType",0,0,"","","System","
Returns the default value for a given data type.
Does not include default values for custom columns set by the user.
","defaultValueOfArgumentType(expression)","- `expression` — Arbitrary type of value or an expression that results in a value of an arbitrary type. [`Any`](/sql-reference/data-types)
","","Returns `0` for numbers, an empty string for strings or `NULL` for Nullable types. [`UInt8`](/sql-reference/data-types/int-uint) or [`String`](/sql-reference/data-types/string) or [`NULL`](/sql-reference/syntax#null)","**Usage example**

```sql title=Query
SELECT defaultValueOfArgumentType(CAST(1 AS Int8));
```

```response title=Response
┌─defaultValueOfArgumentType(CAST(1, 'Int8'))─┐
│                                           0 │
└─────────────────────────────────────────────┘
```

**Nullable example**

```sql title=Query
SELECT defaultValueOfArgumentType(CAST(1 AS Nullable(Int8)));
```

```response title=Response
┌─defaultValueOfArgumentType(CAST(1, 'Nullable(Int8)'))─┐
│                                                  ᴺᵁᴸᴸ │
└───────────────────────────────────────────────────────┘
```

","1.1","Other"
"25.9.2.1","arrayPopBack",0,0,"","","System","Removes the last element from the array.","arrayPopBack(arr)","- `arr` — The array for which to remove the last element from. [`Array(T)`](/sql-reference/data-types/array)
","","Returns an array identical to `arr` but without the last element of `arr` [`Array(T)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT arrayPopBack([1, 2, 3]) AS res;
```

```response title=Response
[1, 2]
```

","1.1","Arrays"
"25.9.2.1","arrayAvg",0,0,"","","System","
Returns the average of elements in the source array.

If a lambda function `func` is specified, returns the average of elements of the lambda results.
    ","arrayAvg([func(x[, y1, ..., yN])], source_arr[, cond1_arr, ... , condN_arr])","- `func(x[, y1, ..., yN])` — Optional. A lambda function which operates on elements of the source array (`x`) and condition arrays (`y`). [`Lambda function`](/sql-reference/functions/overview#arrow-operator-and-lambda)
- `source_arr` — The source array to process. [`Array(T)`](/sql-reference/data-types/array)
- `[, cond1_arr, ... , condN_arr]` — Optional. N condition arrays providing additional arguments to the lambda function. [`Array(T)`](/sql-reference/data-types/array)
","","Returns the average of elements in the source array, or the average of elements of the lambda results if provided. [`Float64`](/sql-reference/data-types/float)","**Basic example**

```sql title=Query
SELECT arrayAvg([1, 2, 3, 4]);
```

```response title=Response
2.5
```

**Usage with lambda function**

```sql title=Query
SELECT arrayAvg(x, y -> x*y, [2, 3], [2, 3]) AS res;
```

```response title=Response
6.5
```

","21.1","Arrays"
"25.9.2.1","arrayLastOrNull",0,0,"","","System","
Returns the last element in the source array for which a lambda `func(x [, y1, y2, ... yN])` returns true, otherwise it returns `NULL`.
    ","arrayLastOrNull(func(x[, y1, ..., yN]), source_arr[, cond1_arr, ... , condN_arr])","- `func(x [, y1, ..., yN])` — A lambda function which operates on elements of the source array (`x`) and condition arrays (`y`). [Lambda function](/sql-reference/functions/overview#arrow-operator-and-lambda). - `source_arr` — The source array to process. [`Array(T)`](/sql-reference/data-types/array). - `[, cond1_arr, ... , condN_arr]` — Optional. N condition arrays providing additional arguments to the lambda function. [`Array(T)`](/sql-reference/data-types/array). ","","Returns the last element of the source array for which `λ` is not true, otherwise returns `NULL`.","**Usage example**

```sql title=Query
SELECT arrayLastOrNull(x, y -> x=y, ['a', 'b', 'c'], ['a', 'b', 'c'])
```

```response title=Response
c
```

**No match**

```sql title=Query
SELECT arrayLastOrNull(x, y -> x=y, [0, 1, 2], [3, 3, 3]) AS res, toTypeName(res)
```

```response title=Response
NULL Nullable(UInt8)
```

","1.1","Arrays"
"25.9.2.1","mapExtractValueLike",0,0,"","","System","Returns a map with elements which value matches the specified pattern.","","","","","**mapExtractValueLike**

```sql title=Query
SELECT mapExtractValueLike(map('k1-1', 'v1-1', 'k2-1', 'v2-1'), 'v1%')
```

```response title=Response

```

","25.5","Map"
"25.9.2.1","isDynamicElementInSharedData",0,0,"","","System","
Returns true for rows in Dynamic column that are not separated into subcolumns and stored inside shared variant in binary form.
","isDynamicElementInSharedData(dynamic)","- `dynamic` — Dynamic column ","","","**Example**

```sql title=Query
CREATE TABLE test (d Dynamic(max_types=2)) ENGINE = Memory;
INSERT INTO test VALUES (NULL), (42), ('Hello, World!'), ([1, 2, 3]);
SELECT d, isDynamicElementInSharedData(d) FROM test;
```

```response title=Response
┌─d─────────────┬─isDynamicElementInSharedData(d)─┐
│ ᴺᵁᴸᴸ          │ false              │
│ 42            │ false              │
│ Hello, World! │ true               │
│ [1,2,3]       │ true               │
└───────────────┴────────────────────┘
```

","","JSON"
"25.9.2.1","tcpPort",0,0,"","","System","
Returns the [native interface](../../interfaces/tcp.md) TCP port number listened to by the server.
If executed in the context of a distributed table, this function generates a normal column with values relevant to each shard.
Otherwise it produces a constant value.
    ","tcpPort()","","","Returns the TCP port number. [`UInt16`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT tcpPort()
```

```response title=Response
┌─tcpPort()─┐
│      9000 │
└───────────┘
```

","20.12","Other"
"25.9.2.1","encodeXMLComponent",0,0,"","","System","
Escapes characters to place string into XML text node or attribute.
","encodeXMLComponent(s)","- `s` — String to escape. [`String`](/sql-reference/data-types/string)
","","Returns the escaped string. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT
    '<tag>Hello & ""World""</tag>' AS original,
    encodeXMLComponent('<tag>Hello & ""World""</tag>') AS xml_encoded;
```

```response title=Response
┌─original───────────────────┬─xml_encoded──────────────────────────────────────────┐
│ <tag>Hello & ""World""</tag> │ &lt;tag&gt;Hello &amp; &quot;World&quot;&lt;/tag&gt; │
└────────────────────────────┴──────────────────────────────────────────────────────┘
```

","21.1","String"
"25.9.2.1","changeHour",0,0,"","","System","Changes the hour component of a date or date time.","changeHour(date_or_datetime, value)","- `date_or_datetime` — The value to change. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
- `value` — The new value. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns a value of the same type as `date_or_datetime` with modified hour component. [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)","**Usage example**

```sql title=Query
SELECT changeHour('2024-01-01 12:00:00'::DateTime, 5)
```

```response title=Response
2024-01-01 05:00:00
```

","24.7","Dates and Times"
"25.9.2.1","wordShingleMinHashArgCaseInsensitive",0,0,"","","System","
Splits a ASCII string into parts (shingles) of `shinglesize` words each and returns the shingles with minimum and maximum word hashes, calculated by the [`wordShingleMinHashCaseInsensitive`](#wordShingleMinHashCaseInsensitive) function with the same input.
It is case insensitive.
","wordShingleMinHashArgCaseInsensitive(string[, shinglesize, hashnum])","- `string` — String for which to compute the hash. [`String`](/sql-reference/data-types/string)
- `shinglesize` — Optional. The size of a word shingle, any number from `1` to `25`. The default value is `3`. [`UInt8`](/sql-reference/data-types/int-uint)
- `hashnum` — Optional. The number of minimum and maximum hashes used to calculate the result, any number from `1` to `25`. The default value is `6`. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns a tuple with two tuples with `hashnum` word shingles each. [`Tuple(Tuple(String))`](/sql-reference/data-types/tuple)","**Usage example**

```sql title=Query
SELECT wordShingleMinHashArgCaseInsensitive('ClickHouse® is a column-oriented database management system (DBMS) for online analytical processing of queries (OLAP).', 1, 3) AS Tuple;
```

```response title=Response
┌─Tuple──────────────────────────────────────────────────────────────────┐
│ (('queries','database','analytical'),('oriented','processing','DBMS')) │
└────────────────────────────────────────────────────────────────────────┘
```

","21.1","Hash"
"25.9.2.1","subtractWeeks",0,0,"","","System","
Subtracts a specified number of weeks from a date, a date with time or a string-encoded date or date with time.
    ","subtractWeeks(datetime, num)","- `datetime` — Date or date with time to subtract specified number of weeks from. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64) or [`String`](/sql-reference/data-types/string)
- `num` — Number of weeks to subtract. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns `datetime` minus `num` weeks [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)","**Subtract weeks from different date types**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractWeeks(date, 1) AS subtract_weeks_with_date,
    subtractWeeks(date_time, 1) AS subtract_weeks_with_date_time,
    subtractWeeks(date_time_string, 1) AS subtract_weeks_with_date_time_string
```

```response title=Response
┌─subtract_weeks_with_date─┬─subtract_weeks_with_date_time─┬─subtract_weeks_with_date_time_string─┐
│               2023-12-25 │           2023-12-25 00:00:00 │              2023-12-25 00:00:00.000 │
└──────────────────────────┴───────────────────────────────┴──────────────────────────────────────┘
```

**Using alternative INTERVAL syntax**

```sql title=Query
SELECT dateSub('1998-06-16'::Date, INTERVAL 10 week)
```

```response title=Response
┌─minus(CAST('⋯alWeek(10))─┐
│               1998-04-07 │
└──────────────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","tupleConcat",0,0,"","","System","
Combines tuples passed as arguments.
","tupleConcat(tuple1[, tuple2, [...]])","- `tupleN` — Arbitrary number of arguments of Tuple type. [`Tuple(T)`](/sql-reference/data-types/tuple)
","","Returns a tuple containing all elements from the input tuples. [`Tuple(T)`](/sql-reference/data-types/tuple)","**Usage example**

```sql title=Query
SELECT tupleConcat((1, 2), ('a',), (true, false))
```

```response title=Response
(1, 2, 'a', true, false)
```

","23.8","Tuple"
"25.9.2.1","toUUID",0,0,"","","System","
Converts a String value to a UUID value.
    ","toUUID(string)","- `string` — UUID as a string. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring)
","","Returns a UUID from the string representation of the UUID. [`UUID`](/sql-reference/data-types/uuid)","**Usage example**

```sql title=Query
SELECT toUUID('61f0c404-5cb3-11e7-907b-a6006ad3dba0') AS uuid
```

```response title=Response
┌─────────────────────────────────uuid─┐
│ 61f0c404-5cb3-11e7-907b-a6006ad3dba0 │
└──────────────────────────────────────┘
```

","1.1","Type Conversion"
"25.9.2.1","arrayLast",0,0,"","","System","
Returns the last element in the source array for which a lambda `func(x [, y1, y2, ... yN])` returns true, otherwise it returns a default value.
    ","arrayLast(func(x[, y1, ..., yN]), source[, cond1, ... , condN_arr])","- `func(x[, y1, ..., yN])` — A lambda function which operates on elements of the source array (`x`) and condition arrays (`y`). [Lambda function](/sql-reference/functions/overview#arrow-operator-and-lambda). - `source` — The source array to process. [`Array(T)`](/sql-reference/data-types/array). - `[, cond1, ... , condN]` — Optional. N condition arrays providing additional arguments to the lambda function. [`Array(T)`](/sql-reference/data-types/array). ","","Returns the last element of the source array for which `func` is true, otherwise returns the default value of `T`.","**Usage example**

```sql title=Query
SELECT arrayLast(x, y -> x=y, ['a', 'b', 'c'], ['a', 'b', 'c'])
```

```response title=Response
c
```

**No match**

```sql title=Query
SELECT arrayFirst(x, y -> x=y, [0, 1, 2], [3, 3, 3]) AS res, toTypeName(res)
```

```response title=Response
0 UInt8
```

","1.1","Arrays"
"25.9.2.1","MD4",0,0,"","","System","
Calculates the MD4 hash of the given string.
    ","MD4(s)","- `s` — The input string to hash. [`String`](/sql-reference/data-types/string)
","","Returns the MD4 hash of the given input string as a fixed-length string. [`FixedString(16)`](/sql-reference/data-types/fixedstring)","**Usage example**

```sql title=Query
SELECT HEX(MD4('abc'));
```

```response title=Response
┌─hex(MD4('abc'))──────────────────┐
│ A448017AAF21D8525FC10AE87AA6729D │
└──────────────────────────────────┘
```

","21.11","Hash"
"25.9.2.1","moduloOrZero",0,0,"","","System","
Like modulo but returns zero when the divisor is zero, as opposed to an
exception with the modulo function.
    ","moduloOrZero(a, b)","- `a` — The dividend. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
- `b` — The divisor (modulus). [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns the remainder of a % b, or `0` when the divisor is `0`.","**Usage example**

```sql title=Query
SELECT moduloOrZero(5, 0)
```

```response title=Response
0
```

","20.3","Arithmetic"
"25.9.2.1","s2CapContains",0,0,"","","System","","","","","","","",""
"25.9.2.1","defaultValueOfTypeName",0,0,"","","System","
Returns the default value for the given type name.
    ","defaultValueOfTypeName(type)","- `type` — A string representing a type name. [`String`](/sql-reference/data-types/string)
","","Returns the default value for the given type name: `0` for numbers, an empty string for strings, or `NULL` for Nullable [`UInt8`](/sql-reference/data-types/int-uint) or [`String`](/sql-reference/data-types/string) or [`NULL`](/sql-reference/syntax#null)","**Usage example**

```sql title=Query
SELECT defaultValueOfTypeName('Int8');
```

```response title=Response
┌─defaultValueOfTypeName('Int8')─┐
│                              0 │
└────────────────────────────────┘
```

**Nullable example**

```sql title=Query
SELECT defaultValueOfTypeName('Nullable(Int8)');
```

```response title=Response
┌─defaultValueOfTypeName('Nullable(Int8)')─┐
│                                     ᴺᵁᴸᴸ │
└──────────────────────────────────────────┘
```

","1.1","Other"
"25.9.2.1","tuplePlus",0,0,"","","System","
Calculates the sum of corresponding elements of two tuples of the same size.
","tuplePlus(t1, t2)","- `t1` — First tuple. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) or [`Tuple(Float*)`](/sql-reference/data-types/tuple) or [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
- `t2` — Second tuple. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) or [`Tuple(Float*)`](/sql-reference/data-types/tuple) or [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
","","Returns a tuple containing the sums of corresponding input tuple arguments. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) or [`Tuple(Float*)`](/sql-reference/data-types/tuple) or [`Tuple(Decimal)`](/sql-reference/data-types/tuple)","**Basic usage**

```sql title=Query
SELECT tuplePlus((1, 2), (2, 3))
```

```response title=Response
(3, 5)
```

","21.11","Tuple"
"25.9.2.1","readWKTPoint",0,0,"","","System","","","","","","","",""
"25.9.2.1","firstSignificantSubdomain",0,0,"","","System","
Returns the ""first significant subdomain"".

The first significant subdomain is a second-level domain if it is 'com', 'net', 'org', or 'co'.
Otherwise, it is a third-level domain.

For example, firstSignificantSubdomain('https://news.clickhouse.com/') = 'clickhouse', firstSignificantSubdomain ('https://news.clickhouse.com.tr/') = 'clickhouse'.

The list of ""insignificant"" second-level domains and other implementation details may change in the future.
        ","","","","","**firstSignificantSubdomain**

```sql title=Query
SELECT firstSignificantSubdomain('https://news.clickhouse.com/')
```

```response title=Response

```

","","URL"
"25.9.2.1","h3HexAreaKm2",0,0,"","","System","
Returns average hexagon area in square kilometers at the given [H3](#h3-index) resolution.
    ","h3HexAreaKm2(resolution)","- `resolution` — Index resolution with range `[0, 15]`. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns the average area of an H3 hexagon in square kilometers for the given resolution. [`Float64`](/sql-reference/data-types/float)","**Get hexagon area at resolution 13**

```sql title=Query
SELECT h3HexAreaKm2(13) AS area
```

```response title=Response
┌──────area─┐
│ 0.0000439 │
└───────────┘
```

","22.1","Geo"
"25.9.2.1","now",0,1,"","","System","
Returns the current date and time at the moment of query analysis. The function is a constant expression.
    ","now([timezone])","- `timezone` — Optional. Timezone name for the returned value. [`String`](/sql-reference/data-types/string)
","","Returns the current date and time. [`DateTime`](/sql-reference/data-types/datetime)","**Query without timezone**

```sql title=Query
SELECT now()
```

```response title=Response
┌───────────────now()─┐
│ 2020-10-17 07:42:09 │
└─────────────────────┘
```

**Query with specified timezone**

```sql title=Query
SELECT now('Asia/Istanbul')
```

```response title=Response
┌─now('Asia/Istanbul')─┐
│  2020-10-17 10:42:23 │
└──────────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","arrayCumSumNonNegative",0,0,"","","System","Returns an array of the partial (running) sums of the elements in the source array, replacing any negative running sum with zero. If a lambda function is specified, the sum is computed from applying the lambda to the array elements at each position.","arrayCumSumNonNegative([func,] arr1[, arr2, ... , arrN])","- `func` — Optional. A lambda function to apply to the array elements at each position. [`Lambda function`](/sql-reference/functions/overview#arrow-operator-and-lambda)
- `arr1` — The source array of numeric values. [`Array(T)`](/sql-reference/data-types/array)
- `[arr2, ..., arrN]` — Optional. Additional arrays of the same size, passed as arguments to the lambda function if specified. [`Array(T)`](/sql-reference/data-types/array)
","","Returns an array of the partial sums of the elements in the source array, with any negative running sum replaced by zero. The result type matches the input array's numeric type. [`Array(T)`](/sql-reference/data-types/array)","**Basic usage**

```sql title=Query
SELECT arrayCumSumNonNegative([1, 1, -4, 1]) AS res
```

```response title=Response
[1, 2, 0, 1]
```

**With lambda**

```sql title=Query
SELECT arrayCumSumNonNegative(x -> x * 2, [1, -2, 3]) AS res
```

```response title=Response
[2, 0, 6]
```

","18.12","Arrays"
"25.9.2.1","detectCharset",0,0,"","","System","","","","","","","",""
"25.9.2.1","dynamicType",0,0,"","","System","
Returns the variant type name for each row of `Dynamic` column. If row contains NULL, it returns 'None' for it.
","dynamicType(dynamic)","- `dynamic` — Dynamic column ","","","**Example**

```sql title=Query
CREATE TABLE test (d Dynamic) ENGINE = Memory;
INSERT INTO test VALUES (NULL), (42), ('Hello, World!'), ([1, 2, 3]);
SELECT d, dynamicType(d) FROM test;
```

```response title=Response
┌─d─────────────┬─dynamicType(d)─┐
│ ᴺᵁᴸᴸ          │ None           │
│ 42            │ Int64          │
│ Hello, World! │ String         │
│ [1,2,3]       │ Array(Int64)   │
└───────────────┴────────────────┘
```

","","JSON"
"25.9.2.1","translateUTF8",0,0,"","","System","
Like [`translate`](#translate) but assumes `s`, `from` and `to` are UTF-8 encoded strings.
","translateUTF8(s, from, to)","- `s` — UTF-8 input string to translate. [`String`](/sql-reference/data-types/string)
- `from` — A constant UTF-8 string containing characters to replace. [`const String`](/sql-reference/data-types/string)
- `to` — A constant UTF-8 string containing replacement characters. [`const String`](/sql-reference/data-types/string)
","","Returns a `String` data type value. [`String`](/sql-reference/data-types/string)","**UTF-8 character translation**

```sql title=Query
SELECT translateUTF8('Münchener Straße', 'üß', 'us') AS res;
```

```response title=Response
┌─res──────────────┐
│ Munchener Strase │
└──────────────────┘
```

","22.7","String Replacement"
"25.9.2.1","emptyArrayInt8",0,0,"","","System","Returns an empty Int8 array","emptyArrayInt8()","","","An empty Int8 array. [`Array(T)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT emptyArrayInt8
```

```response title=Response
[]
```

","1.1","Arrays"
"25.9.2.1","has",0,0,"","","System","Returns whether the array contains the specified element.","has(arr, x)","- `arr` — The source array. [`Array(T)`](/sql-reference/data-types/array)
- `x` — The value to search for in the array. ","","Returns `1` if the array contains the specified element, otherwise `0`. [`UInt8`](/sql-reference/data-types/int-uint)","**Basic usage**

```sql title=Query
SELECT has([1, 2, 3], 2)
```

```response title=Response
1
```

**Not found**

```sql title=Query
SELECT has([1, 2, 3], 4)
```

```response title=Response
0
```

","1.1","Arrays"
"25.9.2.1","leftPad",0,0,"","","System","
Pads a string from the left with spaces or with a specified string (multiple times, if needed) until the resulting string reaches the specified `length`.
","leftPad(string, length[, pad_string])","- `string` — Input string that should be padded. [`String`](/sql-reference/data-types/string)
- `length` — The length of the resulting string. If the value is smaller than the input string length, then the input string is shortened to `length` characters. [`(U)Int*`](/sql-reference/data-types/int-uint)
- `pad_string` — Optional. The string to pad the input string with. If not specified, then the input string is padded with spaces. [`String`](/sql-reference/data-types/string)
","","Returns a left-padded string of the given length. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT leftPad('abc', 7, '*'), leftPad('def', 7)
```

```response title=Response
┌─leftPad('abc', 7, '*')─┬─leftPad('def', 7)─┐
│ ****abc                │     def           │
└────────────────────────┴───────────────────┘
```

","21.8","String"
"25.9.2.1","tupleToNameValuePairs",0,0,"","","System","
Converts a tuple to an array of `(name, value)` pairs.
For example, tuple `Tuple(n1 T1, n2 T2, ...)` is converted to `Array(Tuple('n1', T1), Tuple('n2', T2), ...)`.
All values in the tuple must be of the same type.
","tupleToNameValuePairs(tuple)","- `tuple` — Named tuple with any types of values. [`Tuple(n1 T1[, n2 T2, ...])`](/sql-reference/data-types/tuple)
","","Returns an array with `(name, value)` pairs. [`Array(Tuple(String, T))`](/sql-reference/data-types/array)","**Named tuple**

```sql title=Query
SELECT tupleToNameValuePairs(tuple(1593 AS user_ID, 2502 AS session_ID))
```

```response title=Response
[('1', 1593), ('2', 2502)]
```

**Unnamed tuple**

```sql title=Query
SELECT tupleToNameValuePairs(tuple(3, 2, 1))
```

```response title=Response
[('1', 3), ('2', 2), ('3', 1)]
```

","21.9","Tuple"
"25.9.2.1","simpleJSONExtractRaw",0,0,"","","System","
Returns the value of the field named `field_name` as a `String`, including separators.
","simpleJSONExtractRaw(json, field_name)","- `json` — The JSON in which the field is searched for. [`String`](/sql-reference/data-types/string)
- `field_name` — The name of the field to search for. [`const String`](/sql-reference/data-types/string)
","","Returns the value of the field as a string, including separators if the field exists, or an empty string otherwise [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
CREATE TABLE jsons
(
    `json` String
)
ENGINE = MergeTree
ORDER BY tuple();

INSERT INTO jsons VALUES ('{""foo"":""-4e3""}');
INSERT INTO jsons VALUES ('{""foo"":-3.4}');
INSERT INTO jsons VALUES ('{""foo"":5}');
INSERT INTO jsons VALUES ('{""foo"":{""def"":[1,2,3]}}');
INSERT INTO jsons VALUES ('{""baz"":2}');

SELECT simpleJSONExtractRaw(json, 'foo') FROM jsons ORDER BY json;
```

```response title=Response
""-4e3""
-3.4
5
{""def"":[1,2,3]}
```

","21.4","JSON"
"25.9.2.1","accurateCastOrNull",0,0,"","","System","","","","","","","",""
"25.9.2.1","length",0,1,"","","System","
Calculates the length of a string or array.

- For String or FixedString arguments: calculates the number of bytes in the string.
- For Array arguments: calculates the number of elements in the array.
- If applied to a FixedString argument, the function is a constant expression.

Please note that the number of bytes in a string is not the same as the number of
Unicode ""code points"" and it is not the same as the number of Unicode ""grapheme clusters""
(what we usually call ""characters"") and it is not the same as the visible string width.

It is ok to have ASCII NULL bytes in strings, and they will be counted as well.
    ","length(x)","- `x` — Value for which to calculate the number of bytes (for String/FixedString) or elements (for Array). [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring) or [`Array(T)`](/sql-reference/data-types/array)
","","Returns the number of number of bytes in the String/FixedString `x` / the number of elements in array `x` [`UInt64`](/sql-reference/data-types/int-uint)","**String example**

```sql title=Query
SELECT length('Hello, world!')
```

```response title=Response
13
```

**Array example**

```sql title=Query
SELECT length(['Hello', 'world'])
```

```response title=Response
2
```

**constexpr example**

```sql title=Query
WITH 'hello' || toString(number) AS str
SELECT str,
isConstant(length(str)) AS str_length_is_constant,
isConstant(length(str::FixedString(6))) AS fixed_str_length_is_constant
FROM numbers(3)
```

```response title=Response
┌─str────┬─str_length_is_constant─┬─fixed_str_length_is_constant─┐
│ hello0 │                      0 │                            1 │
│ hello1 │                      0 │                            1 │
│ hello2 │                      0 │                            1 │
└────────┴────────────────────────┴──────────────────────────────┘
```

**unicode example**

```sql title=Query
SELECT 'ёлка' AS str1, length(str1), lengthUTF8(str1), normalizeUTF8NFKD(str1) AS str2, length(str2), lengthUTF8(str2)
```

```response title=Response
┌─str1─┬─length(str1)─┬─lengthUTF8(str1)─┬─str2─┬─length(str2)─┬─lengthUTF8(str2)─┐
│ ёлка │            8 │                4 │ ёлка │           10 │                5 │
└──────┴──────────────┴──────────────────┴──────┴──────────────┴──────────────────┘
```

**ascii_vs_utf8 example**

```sql title=Query
SELECT 'ábc' AS str, length(str), lengthUTF8(str)
```

```response title=Response
┌─str─┬─length(str)──┬─lengthUTF8(str)─┐
│ ábc │            4 │               3 │
└─────┴──────────────┴─────────────────┘
```

","1.1","Arrays"
"25.9.2.1","h3ToGeo",0,0,"","","System","
Returns the centroid latitude and longitude corresponding to the provided [H3](https://h3geo.org/docs/core-library/h3Indexing/) index.

:::note
In ClickHouse v24.12 or older, `h3ToGeo()` accepts arguments in the order `(lon, lat)`. As per ClickHouse v25.1, the returned values are ordered `(lat, lon)`.
The previous behavior can be restored using setting `h3togeo_lon_lat_result_order = true`.
:::
    ","h3ToGeo(h3Index)","- `h3Index` — H3 index. [`UInt64`](/sql-reference/data-types/int-uint)
","","Returns a tuple consisting of two values `(lat, lon)` where `lat` is latitude and `lon` is longitude. [`Tuple(Float64, Float64)`](/sql-reference/data-types/tuple)","**Get coordinates from H3 index**

```sql title=Query
SELECT h3ToGeo(644325524701193974) AS coordinates
```

```response title=Response
┌─coordinates───────────────────────────┐
│ (55.71290243145668,37.79506616830252) │
└───────────────────────────────────────┘
```

","21.9","Geo"
"25.9.2.1","arrayEnumerateDense",0,0,"","","System","Returns an array of the same size as the source array, indicating where each element first appears in the source array.","arrayEnumerateDense(arr)","- `arr` — The array to enumerate. [`Array(T)`](/sql-reference/data-types/array)
","","Returns an array of the same size as `arr`, indicating where each element first appears in the source array [`Array(T)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT arrayEnumerateDense([10, 20, 10, 30])
```

```response title=Response
[1,2,1,3]
```

","18.12","Arrays"
"25.9.2.1","parseDateTime64BestEffortOrNull",0,0,"","","System","
Same as [`parseDateTime64BestEffort`](#parsedatetime64besteffort) except that it returns `NULL` when it encounters a date format that cannot be processed.
    ","parseDateTime64BestEffortOrNull(time_string[, precision[, time_zone]])","- `time_string` — String containing a date or date with time to convert. [`String`](/sql-reference/data-types/string)
- `precision` — Optional. Required precision. `3` for milliseconds, `6` for microseconds. Default: `3`. [`UInt8`](/sql-reference/data-types/int-uint)
- `time_zone` — Optional. Timezone. The function parses `time_string` according to the timezone. [`String`](/sql-reference/data-types/string)
","","Returns `time_string` converted to [`DateTime64`](../../sql-reference/data-types/datetime64.md), or `NULL` if the input cannot be parsed. [`DateTime64`](/sql-reference/data-types/datetime64) or [`NULL`](/sql-reference/syntax#null)","**Usage example**

```sql title=Query
SELECT parseDateTime64BestEffortOrNull('2025-01-01 01:01:00.123') AS valid,
       parseDateTime64BestEffortOrNull('invalid') AS invalid
```

```response title=Response
┌─valid───────────────────┬─invalid─┐
│ 2025-01-01 01:01:00.123 │    ᴺᵁᴸᴸ │
└─────────────────────────┴─────────┘
```

","20.1","Type Conversion"
"25.9.2.1","domainRFC",0,0,"","","System","
Extracts the hostname from a URL.
Similar to [`domain`](#domain), but [RFC 3986](https://datatracker.ietf.org/doc/html/rfc3986) conformant.
    ","domainRFC(url)","- `url` — URL. [`String`](/sql-reference/data-types/string)
","","Returns the host name if the input string can be parsed as a URL, otherwise an empty string. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT
    domain('http://user:password@example.com:8080/path?query=value#fragment'),
    domainRFC('http://user:password@example.com:8080/path?query=value#fragment');
```

```response title=Response
┌─domain('http://user:password@example.com:8080/path?query=value#fragment')─┬─domainRFC('http://user:password@example.com:8080/path?query=value#fragment')─┐
│                                                                           │ example.com                                                                  │
└───────────────────────────────────────────────────────────────────────────┴──────────────────────────────────────────────────────────────────────────────┘
```

","22.10","URL"
"25.9.2.1","bitmapSubsetLimit",0,0,"","","System","Returns a subset of a bitmap from position `range_start` with at most `cardinality_limit` set bits. Uses 1-based indexing.","bitmapSubsetLimit(bitmap, range_start, cardinality_limit)","- `bitmap` — Bitmap object. [`AggregateFunction(groupBitmap, T)`](/sql-reference/data-types/aggregatefunction). - `range_start` — Start of the range (inclusive). [`UInt32`](/sql-reference/data-types/int-uint) - `cardinality_limit` — Maximum cardinality of the subset. [`UInt32`](/sql-reference/data-types/int-uint) ","","Returns a bitmap containing at most `cardinality_limit` set bits, starting from `range_start` [`AggregateFunction(groupBitmap, T)`](/sql-reference/data-types/aggregatefunction)","**Usage example**

```sql title=Query
SELECT bitmapToArray(bitmapSubsetLimit(bitmapBuild([1, 5, 3, 2, 8]), 3, 2)) AS res;
```

```response title=Response
┌─res────┐
│ [5, 3] │
└────────┘
```

","20.1","Bitmap"
"25.9.2.1","mapExists",0,0,"","","System","The same as arrayExists.","","","","","**mapExists**

```sql title=Query
SELECT mapExists((k, v) -> v = 1, map('k1', 1, 'k2', 2))
```

```response title=Response

```

","23.4","Map"
"25.9.2.1","endsWith",0,0,"","","System","
Checks whether a string ends with the provided suffix.
","endsWith(s, suffix)","- `s` — String to check. [`String`](/sql-reference/data-types/string)
- `suffix` — Suffix to check for. [`String`](/sql-reference/data-types/string)
","","Returns `1` if `s` ends with `suffix`, otherwise `0`. [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT endsWith('ClickHouse', 'House');
```

```response title=Response
┌─endsWith('Cl⋯', 'House')─┐
│                        1 │
└──────────────────────────┘
```

","1.1","String"
"25.9.2.1","rand64",0,0,"","","System","
Returns a random distributed `UInt64` number with uniform distribution.

Uses a linear congruential generator with an initial state obtained from the system, which means that while it appears random, it's not truly random and can be predictable if the initial state is known.
For scenarios where true randomness is crucial, consider using alternative methods like system-level calls or integrating with external libraries.
    ","rand64([x])","- `x` — Optional and ignored. The only purpose of the argument is to prevent [common subexpression elimination](/sql-reference/functions/overview#common-subexpression-elimination) when the same function call is used multiple times in a query. [`Any`](/sql-reference/data-types)
","","Returns a random UInt64 number with uniform distribution. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT rand64();
```

```response title=Response
15030268859237645412
```

","1.1","Random Number"
"25.9.2.1","arrayNormalizedGini",0,0,"","","System","Calculates the normalized Gini coefficient.","arrayNormalizedGini(predicted, label)","- `predicted` — The predicted value. [`Array(T)`](/sql-reference/data-types/array)
- `label` — The actual value. [`Array(T)`](/sql-reference/data-types/array)
","","A tuple containing the Gini coefficients of the predicted values, the Gini coefficient of the normalized values, and the normalized Gini coefficient (= the ratio of the former two Gini coefficients) [`Tuple(Float64, Float64, Float64)`](/sql-reference/data-types/tuple)","**Usage example**

```sql title=Query
SELECT arrayNormalizedGini([0.9, 0.3, 0.8, 0.7],[6, 1, 0, 2]);
```

```response title=Response
(0.18055555555555558, 0.2638888888888889, 0.6842105263157896)
```

","25.1","Arrays"
"25.9.2.1","rowNumberInAllBlocks",0,0,"","","System","
Returns a unique row number for each row processed.
    ","rowNumberInAllBlocks()","","","Returns the ordinal number of the row in the data block starting from `0`. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT rowNumberInAllBlocks()
FROM
(
    SELECT *
    FROM system.numbers_mt
    LIMIT 10
)
SETTINGS max_block_size = 2
```

```response title=Response
┌─rowNumberInAllBlocks()─┐
│                      0 │
│                      1 │
└────────────────────────┘
┌─rowNumberInAllBlocks()─┐
│                      4 │
│                      5 │
└────────────────────────┘
┌─rowNumberInAllBlocks()─┐
│                      2 │
│                      3 │
└────────────────────────┘
┌─rowNumberInAllBlocks()─┐
│                      6 │
│                      7 │
└────────────────────────┘
┌─rowNumberInAllBlocks()─┐
│                      8 │
│                      9 │
└────────────────────────┘
```

","1.1","Other"
"25.9.2.1","multiSearchFirstIndexCaseInsensitive",0,0,"","","System","","","","","","","",""
"25.9.2.1","JSONExtractFloat",0,0,"","","System","
Parses JSON and extracts a value of Float type.
        ","JSONExtractFloat(json[, indices_or_keys, ...])","- `json` — JSON string to parse. [`String`](/sql-reference/data-types/string)
- `indices_or_keys` — A list of zero or more arguments each of which can be either string or integer. [`String`](/sql-reference/data-types/string) or [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns a Float value if it exists, otherwise returns `0`. [`Float64`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT JSONExtractFloat('{""a"": ""hello"", ""b"": [-100, 200.0, 300]}', 'b', 2) AS res;
```

```response title=Response
┌─res─┐
│ 200 │
└─────┘
```

","20.1","JSON"
"25.9.2.1","tuple",0,0,"","","System","
Returns a tuple by grouping input arguments.

For columns C1, C2, ... with the types T1, T2, ..., it returns a named Tuple(C1 T1, C2 T2, ...) type tuple containing these columns if their names are unique and can be treated as unquoted identifiers, otherwise a Tuple(T1, T2, ...) is returned. There is no cost to execute the function.
Tuples are normally used as intermediate values for an argument of IN operators, or for creating a list of formal parameters of lambda functions. Tuples can't be written to a table.

The function implements the operator `(x, y, ...)`.
","","","","","**typical**

```sql title=Query
SELECT tuple(1, 2)
```

```response title=Response
(1,2)
```

","","Tuple"
"25.9.2.1","atanh",0,0,"","","System","
Returns the inverse hyperbolic tangent.
","atanh(x)","- `x` — Hyperbolic tangent of angle. Values from the interval: -1 < x < 1. `(U)Int*`, `Float*` or `Decimal*`. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal*`](/sql-reference/data-types/decimal)
","","Returns the angle, in radians. Values from the interval: -∞ < atanh(x) < +∞ [`Float64`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT atanh(0)
```

```response title=Response
0
```

","20.12","Mathematical"
"25.9.2.1","kql_array_sort_desc",0,0,"","","System","","","","","","","",""
"25.9.2.1","bitmapTransform",0,0,"","","System","
Changes up to N bits in a bitmap by swapping specific bit values in `from_array` with corresponding ones in `to_array`.
    ","bitmapTransform(bitmap, from_array, to_array)","- `bitmap` — Bitmap object. [`AggregateFunction(groupBitmap, T)`](/sql-reference/data-types/aggregatefunction). - `from_array` — Array of original set bits to be replaced. [`Array(T)`](/sql-reference/data-types/array). - `to_array` — Array of new set bits to replace with. [`Array(T)`](/sql-reference/data-types/array). ","","Returns a bitmap with elements transformed according to the given mapping [`AggregateFunction(groupBitmap, T)`](/sql-reference/data-types/aggregatefunction)","**Usage example**

```sql title=Query
SELECT bitmapToArray(bitmapTransform(bitmapBuild([1, 2, 3, 4, 5]), [2, 4], [20, 40])) AS res;
```

```response title=Response
┌─res───────────────┐
│ [1, 3, 5, 20, 40] │
└───────────────────┘
```

","20.1","Bitmap"
"25.9.2.1","cutIPv6",0,0,"","","System","
Accepts a `FixedString(16)` value containing the IPv6 address in binary format.
Returns a string containing the address of the specified number of bytes removed in text format.
    ","cutIPv6(x, bytesToCutForIPv6, bytesToCutForIPv4)","- `x` — IPv6 address in binary format. [`FixedString(16)`](/sql-reference/data-types/fixedstring) or [`IPv6`](/sql-reference/data-types/ipv6)
- `bytesToCutForIPv6` — Number of bytes to cut for IPv6. [`UInt8`](/sql-reference/data-types/int-uint)
- `bytesToCutForIPv4` — Number of bytes to cut for IPv4. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns a string containing the IPv6 address in text format with specified bytes removed. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
WITH
    IPv6StringToNum('2001:0DB8:AC10:FE01:FEED:BABE:CAFE:F00D') AS ipv6,
    IPv4ToIPv6(IPv4StringToNum('192.168.0.1')) AS ipv4
SELECT
    cutIPv6(ipv6, 2, 0),
    cutIPv6(ipv4, 0, 2)
```

```response title=Response
┌─cutIPv6(ipv6, 2, 0)─────────────────┬─cutIPv6(ipv4, 0, 2)─┐
│ 2001:db8:ac10:fe01:feed:babe:cafe:0 │ ::ffff:192.168.0.0  │
└─────────────────────────────────────┴─────────────────────┘
```

","1.1","IP Address"
"25.9.2.1","revision",0,1,"","","System","
Returns the current ClickHouse server revision.
    ","revision()","","","Returns the current ClickHouse server revision. [`UInt32`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT revision()
```

```response title=Response
┌─revision()─┐
│      54485 │
└────────────┘
```

","22.7","Other"
"25.9.2.1","arrayShuffle",0,1,"","","System","
Returns an array of the same size as the original array containing the elements in shuffled order.
Elements are reordered in such a way that each possible permutation of those elements has equal probability of appearance.

:::note
This function will not materialize constants.
:::
    ","arrayShuffle(arr [, seed])","- `arr` — The array to shuffle. [`Array(T)`](/sql-reference/data-types/array)
- `seed (optional)` — Optional. The seed to be used with random number generation. If not provided a random one is used. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Array with elements shuffled [`Array(T)`](/sql-reference/data-types/array)","**Example without seed (unstable results)**

```sql title=Query
SELECT arrayShuffle([1, 2, 3, 4]);
```

```response title=Response
[1,4,2,3]
```

**Example without seed (stable results)**

```sql title=Query
SELECT arrayShuffle([1, 2, 3, 4], 41);
```

```response title=Response
[3,2,1,4]
```

","23.2","Arrays"
"25.9.2.1","generateRandomStructure",0,0,"","","System","
Generates a random table structure.
This function takes 2 optional constant arguments:
the number of columns in the result structure (random by default) and random seed (random by default)
The maximum number of columns is 128.
The function returns a value of type String.
","","","","","**random**

```sql title=Query
SELECT generateRandomStructure()
```

```response title=Response
c1 UInt32, c2 FixedString(25)
```

**with specified number of columns**

```sql title=Query
SELECT generateRandomStructure(3)
```

```response title=Response
c1 String, c2 Array(Int32), c3 LowCardinality(String)
```

**with specified seed**

```sql title=Query
SELECT generateRandomStructure(1, 42)
```

```response title=Response
c1 UInt128
```

","","Random Number"
"25.9.2.1","isNullable",0,0,"","","System","
Checks whether the argument's data type is `Nullable` (i.e it allows `NULL` values).
    ","isNullable(x)","- `x` — A value of any data type. [`Any`](/sql-reference/data-types)
","","Returns `1` if `x` is of a `Nullable` data type, otherwise `0`. [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
CREATE TABLE tab (
    ordinary_col UInt32,
    nullable_col Nullable(UInt32)
)
ENGINE = MergeTree
ORDER BY tuple();
INSERT INTO tab (ordinary_col, nullable_col) VALUES (1,1), (2, 2), (3,3);
SELECT isNullable(ordinary_col), isNullable(nullable_col) FROM tab;
```

```response title=Response
┌───isNullable(ordinary_col)──┬───isNullable(nullable_col)──┐
│                           0 │                           1 │
│                           0 │                           1 │
│                           0 │                           1 │
└─────────────────────────────┴─────────────────────────────┘
```

","22.7","Null"
"25.9.2.1","regexpExtract",0,0,"","","System","Extracts the first string in haystack that matches the regexp pattern and corresponds to the regex group index.","","","","","","","String Search"
"25.9.2.1","sqidEncode",0,0,"","","System","
Transforms numbers into a [sqid](https://sqids.org/), a Youtube-like ID string.
    ","sqidEncode(n1[, n2, ...])","- `n1[, n2, ...]` — Arbitrarily many numbers. [`UInt8/16/32/64`](/sql-reference/data-types/int-uint)
","","Returns a hash ID [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT sqidEncode(1, 2, 3, 4, 5);
```

```response title=Response
┌─sqidEncode(1, 2, 3, 4, 5)─┐
│ gXHfJ1C6dN                │
└───────────────────────────┘
```

","24.1","Encoding"
"25.9.2.1","fromUnixTimestampInJodaSyntax",0,0,"","","System","
This function converts a Unix timestamp to a calendar date and a time of a day.

It can be called in two ways:

When given a single argument of type [`Integer`](../data-types/int-uint.md), it returns a value of type [`DateTime`](../data-types/datetime.md), i.e. behaves like [`toDateTime`](../../sql-reference/functions/type-conversion-functions.md#todatetime).

When given two or three arguments where the first argument is a value of type [`Integer`](../data-types/int-uint.md), [`Date`](../data-types/date.md), [`Date32`](../data-types/date32.md), [`DateTime`](../data-types/datetime.md) or [`DateTime64`](../data-types/datetime64.md), the second argument is a constant format string and the third argument is an optional constant time zone string, the function returns a value of type [`String`](../data-types/string.md), i.e. it behaves like [`formatDateTimeInJodaSyntax`](#formatDateTimeInJodaSyntax). In this case, [Joda datetime format style](https://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html) is used.
    ","fromUnixTimestampInJodaSyntax(timestamp)
fromUnixTimestampInJodaSyntax(timestamp, format[, timezone])","- `timestamp` — Unix timestamp or date/time value. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
- `format` — Optional. Constant format string using Joda syntax for output formatting. [`String`](/sql-reference/data-types/string)
- `timezone` — Optional. Constant time zone string. [`String`](/sql-reference/data-types/string)
","","Returns a date with time when called with one argument, or a String when called with two or three arguments.} [`DateTime`](/sql-reference/data-types/datetime) or [`String`](/sql-reference/data-types/string)","**Convert Unix timestamp with Joda format**

```sql title=Query
SELECT fromUnixTimestampInJodaSyntax(1234334543, 'yyyy-MM-dd HH:mm:ss', 'UTC') AS DateTime
```

```response title=Response
┌─DateTime────────────┐
│ 2009-02-11 06:42:23 │
└─────────────────────┘
```

","23.1","Dates and Times"
"25.9.2.1","arrayFold",0,0,"","","System","Applies a lambda function to one or more equally-sized arrays and collects the result in an accumulator.","arrayFold(λ(acc, x1 [, x2, x3, ... xN]), arr1 [, arr2, arr3, ... arrN], acc)","- `λ(x, x1 [, x2, x3, ... xN])` — A lambda function `λ(acc, x1 [, x2, x3, ... xN]) → F(acc, x1 [, x2, x3, ... xN])` where `F` is an operation applied to `acc` and array values from `x` with the result of `acc` re-used. [`Lambda function`](/sql-reference/functions/overview#arrow-operator-and-lambda)
- `arr1 [, arr2, arr3, ... arrN]` — N arrays over which to operate. [`Array(T)`](/sql-reference/data-types/array)
- `acc` — Accumulator value with the same type as the return type of the Lambda function. ","","Returns the final `acc` value.","**Usage example**

```sql title=Query
SELECT arrayFold(acc,x -> acc + x*2, [1, 2, 3, 4], 3::Int64) AS res;
```

```response title=Response
23
```

**Fibonacci sequence**

```sql title=Query
SELECT arrayFold(acc, x -> (acc.2, acc.2 + acc.1),range(number),(1::Int64, 0::Int64)).1 AS fibonacci FROM numbers(1,10);
```

```response title=Response
┌─fibonacci─┐
│         0 │
│         1 │
│         1 │
│         2 │
│         3 │
│         5 │
│         8 │
│        13 │
│        21 │
│        34 │
└───────────┘
```

**Example using multiple arrays**

```sql title=Query
SELECT arrayFold(
(acc, x, y) -> acc + (x * y),
[1, 2, 3, 4],
[10, 20, 30, 40],
0::Int64
) AS res;
```

```response title=Response
300
```

","23.10","Arrays"
"25.9.2.1","arrayMin",0,0,"","","System","
Returns the minimum element in the source array.

If a lambda function `func` is specified, returns the minimum element of the lambda results.
    ","arrayMin([func(x[, y1, ..., yN])], source_arr[, cond1_arr, ... , condN_arr])","- `func(x[, y1, ..., yN])` — Optional. A lambda function which operates on elements of the source array (`x`) and condition arrays (`y`). [`Lambda function`](/sql-reference/functions/overview#arrow-operator-and-lambda)
- `source_arr` — The source array to process. [`Array(T)`](/sql-reference/data-types/array)
- `cond1_arr, ...` — Optional. N condition arrays providing additional arguments to the lambda function. [`Array(T)`](/sql-reference/data-types/array)
","","Returns the minimum element in the source array, or the minimum element of the lambda results if provided.","**Basic example**

```sql title=Query
SELECT arrayMin([5, 3, 2, 7]);
```

```response title=Response
2
```

**Usage with lambda function**

```sql title=Query
SELECT arrayMin(x, y -> x/y, [4, 8, 12, 16], [1, 2, 1, 2]);
```

```response title=Response
4
```

","21.1","Arrays"
"25.9.2.1","basename",0,0,"","","System","
Extracts the tail of a string following its last slash or backslash.
This function is often used to extract the filename from a path.
    ","basename(expr)","- `expr` — A string expression. Backslashes must be escaped. [`String`](/sql-reference/data-types/string)
","","Returns the tail of the input string after its last slash or backslash. If the input string ends with a slash or backslash, the function returns an empty string. Returns the original string if there are no slashes or backslashes. [`String`](/sql-reference/data-types/string)","**Extract filename from Unix path**

```sql title=Query
SELECT 'some/long/path/to/file' AS a, basename(a)
```

```response title=Response
┌─a──────────────────────┬─basename('some/long/path/to/file')─┐
│ some/long/path/to/file │ file                               │
└────────────────────────┴────────────────────────────────────┘
```

**Extract filename from Windows path**

```sql title=Query
SELECT 'some\\long\\path\\to\\file' AS a, basename(a)
```

```response title=Response
┌─a──────────────────────┬─basename('some\\long\\path\\to\\file')─┐
│ some\long\path\to\file │ file                                   │
└────────────────────────┴────────────────────────────────────────┘
```

**String with no path separators**

```sql title=Query
SELECT 'some-file-name' AS a, basename(a)
```

```response title=Response
┌─a──────────────┬─basename('some-file-name')─┐
│ some-file-name │ some-file-name             │
└────────────────┴────────────────────────────┘
```

","20.1","String"
"25.9.2.1","toISOWeek",0,0,"","","System","","","","","","","",""
"25.9.2.1","radians",0,1,"","","System","
Converts degrees to radians.
","radians(x)","- `x` — Input in degrees. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal*`](/sql-reference/data-types/decimal)
","","Returns value in radians [`Float64`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT radians(180)
```

```response title=Response
3.141592653589793
```

","22.2","Mathematical"
"25.9.2.1","toBool",0,0,"","","System","","","","","","","",""
"25.9.2.1","toUInt32OrNull",0,0,"","","System","
Like [`toUInt32`](#toUInt32), this function converts an input value to a value of type [`UInt32`](../data-types/int-uint.md) but returns `NULL` in case of an error.

Supported arguments:
- String representations of (U)Int8/16/32/128/256.

Unsupported arguments (return `NULL`):
- String representations of Float* values, including `NaN` and `Inf`.
- String representations of binary and hexadecimal values, e.g. `SELECT toUInt32OrNull('0xc0fe');`.

:::note
If the input value cannot be represented within the bounds of [`UInt32`](../data-types/int-uint.md), overflow or underflow of the result occurs.
This is not considered an error.
:::

See also:
- [`toUInt32`](#toUInt32).
- [`toUInt32OrZero`](#toUInt32OrZero).
- [`toUInt32OrDefault`](#toUInt32OrDefault).
    ","toUInt32OrNull(x)","- `x` — A String representation of a number. [`String`](/sql-reference/data-types/string)
","","Returns a value of type `UInt32`, otherwise `NULL` if the conversion is unsuccessful. [`UInt32`](/sql-reference/data-types/int-uint) or [`NULL`](/sql-reference/syntax#null)","**Usage example**

```sql title=Query
SELECT
    toUInt32OrNull('32'),
    toUInt32OrNull('abc')
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toUInt32OrNull('32'):  32
toUInt32OrNull('abc'): \N
```

","1.1","Type Conversion"
"25.9.2.1","accurateCast",0,0,"","","System","","","","","","","",""
"25.9.2.1","mapFilter",0,0,"","","System","The same as arrayFilter.","","","","","**mapFilter**

```sql title=Query
SELECT mapFilter((k, v) -> v > 1, map('k1', 1, 'k2', 2))
```

```response title=Response

```

","22.3","Map"
"25.9.2.1","arrayCompact",0,0,"","","System","Removes consecutive duplicate elements from an array, including `null` values. The order of values in the resulting array is determined by the order in the source array.","arrayCompact(arr)","- `arr` — An array to remove duplicates from. [`Array(T)`](/sql-reference/data-types/array)
","","Returns an array without duplicate values [`Array(T)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT arrayCompact([1, 1, nan, nan, 2, 3, 3, 3]);
```

```response title=Response
[1,nan,2,3]
```

","20.1","Arrays"
"25.9.2.1","kql_array_sort_asc",0,0,"","","System","","","","","","","",""
"25.9.2.1","h3ToParent",0,0,"","","System","","","","","","","",""
"25.9.2.1","makeDateTime",0,1,"","","System","
Creates a `DateTime` from year, month, day, hour, minute, and second, with optional timezone.
    ","makeDateTime(year, month, day, hour, minute, second[, timezone])","- `year` — Year number. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
- `month` — Month number (1-12). [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
- `day` — Day of the month (1-31). [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
- `hour` — Hour (0-23). [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
- `minute` — Minute (0-59). [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
- `second` — Second (0-59). [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
- `timezone` — Timezone name. [`String`](/sql-reference/data-types/string)
","","Returns a `DateTime` value constructed from the provided arguments [`DateTime`](/sql-reference/data-types/datetime)","**DateTime from year, month, day, hour, minute, second**

```sql title=Query
SELECT makeDateTime(2023, 2, 28, 17, 12, 33) AS DateTime;
```

```response title=Response
┌────────────DateTime─┐
│ 2023-02-28 17:12:33 │
└─────────────────────┘
```

","22.6","Dates and Times"
"25.9.2.1","getSizeOfEnumType",0,0,"","","System","
Returns the number of fields in the given [`Enum`](../../sql-reference/data-types/enum.md).
","getSizeOfEnumType(x)","- `x` — Value of type `Enum`. [`Enum`](/sql-reference/data-types/enum)
","","Returns the number of fields with `Enum` input values. [`UInt8/16`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT getSizeOfEnumType(CAST('a' AS Enum8('a' = 1, 'b' = 2))) AS x;
```

```response title=Response
┌─x─┐
│ 2 │
└───┘
```

","1.1","Other"
"25.9.2.1","encodeURLFormComponent",0,0,"","","System","
Encodes strings using form encoding rules ([RFC-1866](https://www.rfc-editor.org/rfc/rfc1866.html)), where spaces are converted to + signs and special characters are percent-encoded.
    ","encodeURLFormComponent(url)","- `url` — URL. [`String`](/sql-reference/data-types/string)
","","Returns the encoded URL. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT encodeURLFormComponent('http://127.0.0.1:8123/?query=SELECT 1 2+3') AS EncodedURL;
```

```response title=Response
┌─EncodedURL────────────────────────────────────────────────┐
│ http%3A%2F%2F127.0.0.1%3A8123%2F%3Fquery%3DSELECT+1+2%2B3 │
└───────────────────────────────────────────────────────────┘
```

","22.3","URL"
"25.9.2.1","toIntervalMicrosecond",0,0,"","","System","
Returns an interval of `n` microseconds of data type [`IntervalMicrosecond`](../../sql-reference/data-types/special-data-types/interval.md).
    ","toIntervalMicrosecond(n)","- `n` — Number of microseconds. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`String`](/sql-reference/data-types/string)
","","Returns an interval of `n` microseconds. [`Interval`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
WITH
    toDateTime('2025-06-15') AS date,
    toIntervalMicrosecond(30) AS interval_to_microseconds
SELECT date + interval_to_microseconds AS result
```

```response title=Response
┌─────────────────────result─┐
│ 2025-06-15 00:00:00.000030 │
└────────────────────────────┘
```

","22.6","Type Conversion"
"25.9.2.1","L1Normalize",0,0,"","","System","
Calculates the unit vector of a given vector (the elements of the tuple are the coordinates) in `L1` space ([taxicab geometry](https://en.wikipedia.org/wiki/Taxicab_geometry)).
    ","L1Normalize(tuple)","- `tuple` — A tuple of numeric values. [`Tuple(T)`](/sql-reference/data-types/tuple)
","","Returns the unit vector. [`Tuple(Float64)`](/sql-reference/data-types/tuple)","**Basic usage**

```sql title=Query
SELECT L1Normalize((1, 2))
```

```response title=Response
┌─L1Normalize((1, 2))─────────────────────┐
│ (0.3333333333333333,0.6666666666666666) │
└─────────────────────────────────────────┘
```

","21.11","Distance"
"25.9.2.1","toInterval",0,0,"","","System","Creates an interval from a value and a unit.","","","","","","","Type Conversion"
"25.9.2.1","toStartOfQuarter",0,0,"","","System","
Rounds down a date or date with time to the first day of the quarter. The first day of the quarter is either 1 January, 1 April, 1 July, or 1 October.

:::note
The return type can be configured by setting [`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions).
:::
    ","toStartOfQuarter(value)","- `value` — The date or date with time to round down to the first day of the quarter. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
","","Returns the first day of the quarter for the given date or date with time. [`Date`](/sql-reference/data-types/date)","**Round down to the first day of the quarter**

```sql title=Query
SELECT toStartOfQuarter(toDateTime('2023-04-21 10:20:30'))
```

```response title=Response
┌─toStartOfQuarter(toDateTime('2023-04-21 10:20:30'))─┐
│                                          2023-04-01 │
└─────────────────────────────────────────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","arrayReverse",0,0,"","","System","
Reverses the order of elements of a given array.

:::note
Function `reverse(arr)` performs the same functionality but works on other data-types
in addition to Arrays.
:::
","arrayReverse(arr)","- `arr` — The array to reverse. [`Array(T)`](/sql-reference/data-types/array)
","","Returns an array of the same size as the original array containing the elements in reverse order [`Array(T)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT arrayReverse([1, 2, 3])
```

```response title=Response
[3,2,1]
```

","1.1","Arrays"
"25.9.2.1","icebergTruncate",0,0,"","","System","Implements logic of iceberg truncate transform: https://iceberg.apache.org/spec/#truncate-transform-details.","icebergTruncate(N, value)","- `value` — The value to transform. [`String`](/sql-reference/data-types/string) or [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Decimal`](/sql-reference/data-types/decimal)
","","The same type as the argument","**Example**

```sql title=Query
SELECT icebergTruncate(3, 'iceberg')
```

```response title=Response
ice
```

","25.3","Other"
"25.9.2.1","toDecimal64",0,0,"","","System","
Converts an input value to a value of type [`Decimal(18, S)`](../data-types/decimal.md) with scale of `S`.
Throws an exception in case of an error.

Supported arguments:
- Values or string representations of type (U)Int*.
- Values or string representations of type Float*.

Unsupported arguments:
- Values or string representations of Float* values `NaN` and `Inf` (case-insensitive).
- String representations of binary and hexadecimal values, e.g. `SELECT toDecimal64('0xc0fe', 1);`.

:::note
An overflow can occur if the value of `expr` exceeds the bounds of `Decimal64`:`(-1*10^(18 - S), 1*10^(18 - S))`.
Excessive digits in a fraction are discarded (not rounded).
Excessive digits in the integer part will lead to an exception.
:::

:::warning
Conversions drop extra digits and could operate in an unexpected way when working with Float32/Float64 inputs as the operations are performed using floating point instructions.
For example: `toDecimal64(1.15, 2)` is equal to `1.14` because 1.15 * 100 in floating point is 114.99.
You can use a String input so the operations use the underlying integer type: `toDecimal64('1.15', 2) = 1.15`
:::
    ","toDecimal64(expr, S)","- `expr` — Expression returning a number or a string representation of a number. [`Expression`](/sql-reference/data-types/special-data-types/expression)
- `S` — Scale parameter between 0 and 18, specifying how many digits the fractional part of a number can have. [`UInt8`](/sql-reference/data-types/int-uint)
","","Returns a decimal value. [`Decimal(18, S)`](/sql-reference/data-types/decimal)","**Usage example**

```sql title=Query
SELECT
    toDecimal64(2, 1) AS a, toTypeName(a) AS type_a,
    toDecimal64(4.2, 2) AS b, toTypeName(b) AS type_b,
    toDecimal64('4.2', 3) AS c, toTypeName(c) AS type_c
FORMAT Vertical
```

```response title=Response
Row 1:
──────
a:      2.0
type_a: Decimal(18, 1)
b:      4.20
type_b: Decimal(18, 2)
c:      4.200
type_c: Decimal(18, 3)
```

","18.12","Type Conversion"
"25.9.2.1","now64",0,1,"","","System","
Returns the current date and time with sub-second precision at the moment of query analysis. The function is a constant expression.
    ","now64([scale], [timezone])","- `scale` — Optional. Tick size (precision): 10^-precision seconds. Valid range: [0 : 9]. Typically, are used - 3 (default) (milliseconds), 6 (microseconds), 9 (nanoseconds). [`UInt8`](/sql-reference/data-types/int-uint)
- `timezone` — Optional. Timezone name for the returned value. [`String`](/sql-reference/data-types/string)
","","Returns current date and time with sub-second precision. [`DateTime64`](/sql-reference/data-types/datetime64)","**Query with default and custom precision**

```sql title=Query
SELECT now64(), now64(9, 'Asia/Istanbul')
```

```response title=Response
┌─────────────────now64()─┬─────now64(9, 'Asia/Istanbul')─┐
│ 2022-08-21 19:34:26.196 │ 2022-08-21 22:34:26.196542766 │
└─────────────────────────┴───────────────────────────────┘
```

","20.1","Dates and Times"
"25.9.2.1","tupleNames",0,0,"","","System","
Converts a tuple into an array of column names. For a tuple in the form `Tuple(a T, b T, ...)`, it returns an array of strings representing the named columns of the tuple. If the tuple elements do not have explicit names, their indices will be used as the column names instead.
","","","","","**typical**

```sql title=Query
SELECT tupleNames(tuple(1 as a, 2 as b))
```

```response title=Response
['a','b']
```

","","Tuple"
"25.9.2.1","URLHash",0,0,"","","System","
A fast, decent-quality non-cryptographic hash function for a string obtained from a URL using some type of normalization.

This hash function has two modes:

| Mode             | Description                                                                                                                                                                                 |
|------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|`URLHash(url)`    | Calculates a hash from a string without one of the trailing symbols `/`,`?` or `#` at the end, if present.                                                                                  |
|`URLHash(url, N)` | Calculates a hash from a string up to the N level in the URL hierarchy, without one of the trailing symbols `/`,`?` or `#` at the end, if present. Levels are the same as in `URLHierarchy`.|
","URLHash(url[, N])","- `url` — URL string to hash. [`String`](/sql-reference/data-types/string)
- `N` — Optional. Level in the URL hierarchy. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns the computed hash value of `url`. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT URLHash('https://www.clickhouse.com')
```

```response title=Response
┌─URLHash('htt⋯house.com')─┐
│     13614512636072854701 │
└──────────────────────────┘
```

**Hash of url with specified level**

```sql title=Query
SELECT URLHash('https://www.clickhouse.com/docs', 0);
SELECT URLHash('https://www.clickhouse.com/docs', 1);
```

```response title=Response
-- hash of https://www.clickhouse.com
┌─URLHash('htt⋯m/docs', 0)─┐
│     13614512636072854701 │
└──────────────────────────┘
-- hash of https://www.clickhouse.com/docs
┌─URLHash('htt⋯m/docs', 1)─┐
│     13167253331440520598 │
└──────────────────────────┘
```

","1.1","Hash"
"25.9.2.1","topLevelDomainRFC",0,0,"","","System","
Extracts the the top-level domain from a URL.
Similar to [`topLevelDomain`](#topleveldomain), but conforms to [RFC 3986](https://datatracker.ietf.org/doc/html/rfc3986).
    ","topLevelDomainRFC(url)","- `url` — URL. [`String`](/sql-reference/data-types/string)
","","Domain name if the input string can be parsed as a URL. Otherwise, an empty string. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT topLevelDomain('http://foo:foo%41bar@foo.com'), topLevelDomainRFC('http://foo:foo%41bar@foo.com');
```

```response title=Response
┌─topLevelDomain('http://foo:foo%41bar@foo.com')─┬─topLevelDomainRFC('http://foo:foo%41bar@foo.com')─┐
│                                                │ com                                               │
└────────────────────────────────────────────────┴───────────────────────────────────────────────────┘
```

","22.10","URL"
"25.9.2.1","bitSlice",0,0,"","","System","Returns a substring starting with the bit from the 'offset' index that is 'length' bits long.","bitSlice(s, offset[, length])","- `s` — The String or Fixed String to slice. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring)
- `offset` — 
Returns the starting bit position (1-based indexing).
- Positive values: count from the beginning of the string.
- Negative values: count from the end of the string.

         [`(U)Int8/16/32/64`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
- `length` — 
Optional. The number of bits to extract.
- Positive values: extract `length` bits.
- Negative values: extract from the offset to `(string_length - |length|)`.
- Omitted: extract from offset to end of string.
- If length is not a multiple of 8, the result is padded with zeros on the right.
         [`(U)Int8/16/32/64`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns a string containing the extracted bits, represented as a binary sequence. The result is always padded to byte boundaries (multiples of 8 bits) [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT bin('Hello'), bin(bitSlice('Hello', 1, 8));
SELECT bin('Hello'), bin(bitSlice('Hello', 1, 2));
SELECT bin('Hello'), bin(bitSlice('Hello', 1, 9));
SELECT bin('Hello'), bin(bitSlice('Hello', -4, 8));
```

```response title=Response
┌─bin('Hello')─────────────────────────────┬─bin(bitSlice('Hello', 1, 8))─┐
│ 0100100001100101011011000110110001101111 │ 01001000                     │
└──────────────────────────────────────────┴──────────────────────────────┘
┌─bin('Hello')─────────────────────────────┬─bin(bitSlice('Hello', 1, 2))─┐
│ 0100100001100101011011000110110001101111 │ 01000000                     │
└──────────────────────────────────────────┴──────────────────────────────┘
┌─bin('Hello')─────────────────────────────┬─bin(bitSlice('Hello', 1, 9))─┐
│ 0100100001100101011011000110110001101111 │ 0100100000000000             │
└──────────────────────────────────────────┴──────────────────────────────┘
┌─bin('Hello')─────────────────────────────┬─bin(bitSlice('Hello', -4, 8))─┐
│ 0100100001100101011011000110110001101111 │ 11110000                      │
└──────────────────────────────────────────┴───────────────────────────────┘
```

","22.2","Bit"
"25.9.2.1","firstSignificantSubdomainRFC",0,0,"","","System","Returns the ""first significant subdomain"" according to RFC 1034.","","","","","","","URL"
"25.9.2.1","shardNum",0,0,"","","System","
Returns the index of a shard which processes a part of data in a distributed query.
Indices begin from `1`.
If a query is not distributed then a constant value `0` is returned.
","shardNum()","","","Returns the shard index or a constant `0`. [`UInt32`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
CREATE TABLE shard_num_example (dummy UInt8)
ENGINE=Distributed(test_cluster_two_shards_localhost, system, one, dummy);
SELECT dummy, shardNum(), shardCount() FROM shard_num_example;
```

```response title=Response
┌─dummy─┬─shardNum()─┬─shardCount()─┐
│     0 │          1 │            2 │
│     0 │          2 │            2 │
└───────┴────────────┴──────────────┘
```

","21.9","Other"
"25.9.2.1","parseDateTimeInJodaSyntaxOrZero",0,0,"","","System","","","","","","","",""
"25.9.2.1","startsWithUTF8",0,0,"","","System","
Checks if a string starts with the provided prefix.
Assumes that the string contains valid UTF-8 encoded text.
If this assumption is violated, no exception is thrown and the result is undefined.
","startsWithUTF8(str, prefix)","- `s` — String to check. [`String`](/sql-reference/data-types/string)
- `prefix` — Prefix to check for. [`String`](/sql-reference/data-types/string)
","","Returns `1` if `s` starts with `prefix`, otherwise `0`. [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT startsWithUTF8('приставка', 'при')
```

```response title=Response
┌─startsWithUT⋯ка', 'при')─┐
│                        1 │
└──────────────────────────┘
```

","23.8","String"
"25.9.2.1","portRFC",0,0,"","","System","
Returns the port or `default_port` if the URL contains no port or cannot be parsed.
Similar to [`port`](#port), but [RFC 3986](https://datatracker.ietf.org/doc/html/rfc3986) conformant.
    ","portRFC(url[, default_port])","- `url` — URL. [`String`](/sql-reference/data-types/string)
- `default_port` — Optional. The default port number to be returned. `0` by default. [`UInt16`](/sql-reference/data-types/int-uint)
","","Returns the port or the default port if there is no port in the URL or in case of a validation error. [`UInt16`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT port('http://user:password@example.com:8080/'), portRFC('http://user:password@example.com:8080/');
```

```response title=Response
┌─port('http:/⋯com:8080/')─┬─portRFC('htt⋯com:8080/')─┐
│                        0 │                     8080 │
└──────────────────────────┴──────────────────────────┘
```

","22.10","URL"
"25.9.2.1","nowInBlock64",0,0,"","","System","
Returns the current date and time at the moment of processing of each block of data in milliseconds. In contrast to the function [now64](#now64), it is not a constant expression, and the returned value will be different in different blocks for long-running queries.

It makes sense to use this function to generate the current time in long-running INSERT SELECT queries.
    ","nowInBlock([scale[, timezone]])","- `scale` — Optional. Tick size (precision): 10^-precision seconds. Valid range: [0 : 9]. Typically, are used - 3 (default) (milliseconds), 6 (microseconds), 9 (nanoseconds). [`UInt8`](/sql-reference/data-types/int-uint)
- `timezone` — Optional. Timezone name for the returned value. [`String`](/sql-reference/data-types/string)
","","Returns the current date and time at the moment of processing of each block of data with sub-second precision. [`DateTime64`](/sql-reference/data-types/datetime64)","**Difference with the now64() function**

```sql title=Query
SELECT
    now64(),
    nowInBlock64(),
    sleep(1)
FROM numbers(3)
SETTINGS max_block_size = 1
FORMAT PrettyCompactMonoBlock
```

```response title=Response
┌─────────────────now64()─┬──────────nowInBlock64()─┬─sleep(1)─┐
│ 2025-07-29 17:07:29.526 │ 2025-07-29 17:07:29.534 │        0 │
│ 2025-07-29 17:07:29.526 │ 2025-07-29 17:07:30.535 │        0 │
│ 2025-07-29 17:07:29.526 │ 2025-07-29 17:07:31.535 │        0 │
└─────────────────────────┴─────────────────────────┴──────────┘
```

","25.8","Dates and Times"
"25.9.2.1","readWKBLineString",0,0,"","","System","
    Parses a Well-Known Binary (WKB) representation of a LineString geometry and returns it in the internal ClickHouse format.
    ","readWKBLineString(wkt_string)","- `wkb_string` — The input WKB string representing a LineString geometry. ","","The function returns a ClickHouse internal representation of the linestring geometry.","**first call**

```sql title=Query
SELECT readWKBLineString(unhex('010200000004000000000000000000f03f000000000000f03f0000000000000040000000000000004000000000000008400000000000000840000000000000f03f000000000000f03f'));
```

```response title=Response
┌─readWKBLineString(unhex'0102000000040000000000...'))─┐
    │ [(1,1),(2,2),(3,3),(1,1)]                            │
    └──────────────────────────────────────────────────────┘
```

","25.5","Geo"
"25.9.2.1","bitTest",0,0,"","","System","Takes any number and converts it into [binary form](https://en.wikipedia.org/wiki/Binary_number), then returns the value of the bit at a specified position. Counting is done right-to-left, starting at 0.","bitTest(a, i)","- `a` — Number to convert. [`(U)Int8/16/32/64`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
- `i` — Position of the bit to return. [`(U)Int8/16/32/64`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns the value of the bit at position `i` in the binary representation of `a` [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT bin(2), bitTest(2, 1);
```

```response title=Response
┌─bin(2)───┬─bitTest(2, 1)─┐
│ 00000010 │             1 │
└──────────┴───────────────┘
```

","1.1","Bit"
"25.9.2.1","countSubstringsCaseInsensitive",0,0,"","","System","","","","","","","",""
"25.9.2.1","topLevelDomain",0,0,"","","System","
Extracts the the top-level domain from a URL.

:::note
The URL can be specified with or without a protocol.
For examples

```text
svn+ssh://some.svn-hosting.com:80/repo/trunk
some.svn-hosting.com:80/repo/trunk
https://clickhouse.com/time/
    ","topLevelDomain(url)","- `url` — URL. [`String`](/sql-reference/data-types/string)
","","Returns the domain name if the input string can be parsed as a URL. Otherwise, an empty string. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT topLevelDomain('svn+ssh://www.some.svn-hosting.com:80/repo/trunk');
```

```response title=Response
┌─topLevelDomain('svn+ssh://www.some.svn-hosting.com:80/repo/trunk')─┐
│ com                                                                │
└────────────────────────────────────────────────────────────────────┘
```

","1.1","URL"
"25.9.2.1","decodeURLComponent",0,0,"","","System","
Takes a URL-encoded string as input and decodes it back to its original, readable form.
    ","decodeURLComponent(url)","- `url` — URL. [`String`](/sql-reference/data-types/string)
","","Returns the decoded URL. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT decodeURLComponent('http://127.0.0.1:8123/?query=SELECT%201%3B') AS DecodedURL;
```

```response title=Response
┌─DecodedURL─────────────────────────────┐
│ http://127.0.0.1:8123/?query=SELECT 1; │
└────────────────────────────────────────┘
```

","1.1","URL"
"25.9.2.1","base32Decode",0,0,"","","System","
Decodes a [Base32](https://datatracker.ietf.org/doc/html/rfc4648#section-6) (RFC 4648) string.
If the string is not valid Base32-encoded, an exception is thrown.
","base32Decode(encoded)","- `encoded` — String column or constant. [`String`](/sql-reference/data-types/string)
","","Returns a string containing the decoded value of the argument. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT base32Decode('IVXGG33EMVSA====');
```

```response title=Response
┌─base32Decode('IVXGG33EMVSA====')─┐
│ Encoded                          │
└──────────────────────────────────┘
```

","25.6","String"
"25.9.2.1","timezoneOf",0,0,"","","System","
Returns the timezone name of a [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64) value.
    ","timeZoneOf(datetime)","- `datetime` — A value of type. [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
- `timezone` — Optional. Timezone name to convert the `datetime` value's timezone to. [`String`](/sql-reference/data-types/string)
","","Returns the timezone name for `datetime` [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT timezoneOf(now());
```

```response title=Response
┌─timezoneOf(now())─┐
│ Europe/Amsterdam  │
└───────────────────┘
```

","21.4","Dates and Times"
"25.9.2.1","tupleDivideByNumber",0,0,"","","System","
Returns a tuple with all elements divided by a number.

:::note
Division by zero will return `inf`.
:::
","tupleDivideByNumber(tuple, number)","- `tuple` — Tuple to divide. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) or [`Tuple(Float*)`](/sql-reference/data-types/tuple) or [`Tuple(Decimal)`](/sql-reference/data-types/tuple)
- `number` — Divider. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
","","Returns a tuple with divided elements. [`Tuple((U)Int*)`](/sql-reference/data-types/tuple) or [`Tuple(Float*)`](/sql-reference/data-types/tuple) or [`Tuple(Decimal)`](/sql-reference/data-types/tuple)","**Basic usage**

```sql title=Query
SELECT tupleDivideByNumber((1, 2), 0.5)
```

```response title=Response
(2, 4)
```

","21.11","Tuple"
"25.9.2.1","toUInt16OrZero",0,0,"","","System","
Like [`toUInt16`](#toUInt16), this function converts an input value to a value of type [`UInt16`](../data-types/int-uint.md) but returns `0` in case of an error.

Supported arguments:
- String representations of (U)Int8/16/32/128/256.

Unsupported arguments (return `0`):
- String representations of Float* values, including `NaN` and `Inf`.
- String representations of binary and hexadecimal values, e.g. `SELECT toUInt16OrZero('0xc0fe');`.

:::note
If the input value cannot be represented within the bounds of [`UInt16`](../data-types/int-uint.md), overflow or underflow of the result occurs.
This is not considered an error.
:::

See also:
- [`toUInt16`](#toUInt16).
- [`toUInt16OrNull`](#toUInt16OrNull).
- [`toUInt16OrDefault`](#toUInt16OrDefault).
    ","toUInt16OrZero(x)","- `x` — A String representation of a number. [`String`](/sql-reference/data-types/string)
","","Returns a value of type UInt16, otherwise `0` if the conversion is unsuccessful. [`UInt16`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT
    toUInt16OrZero('16'),
    toUInt16OrZero('abc')
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toUInt16OrZero('16'):  16
toUInt16OrZero('abc'): 0
```

","1.1","Type Conversion"
"25.9.2.1","toString",0,0,"","","System","
Converts values to their string representation.
For DateTime arguments, the function can take a second String argument containing the name of the time zone.
","toString(value[, timezone])","- `value` — Value to convert to string. [`Any`](/sql-reference/data-types)
- `timezone` — Optional. Timezone name for DateTime conversion. [`String`](/sql-reference/data-types/string)
","","Returns a string representation of the input value. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT
    now() AS ts,
    time_zone,
    toString(ts, time_zone) AS str_tz_datetime
FROM system.time_zones
WHERE time_zone LIKE 'Europe%'
LIMIT 10
```

```response title=Response
┌──────────────────ts─┬─time_zone─────────┬─str_tz_datetime─────┐
│ 2023-09-08 19:14:59 │ Europe/Amsterdam  │ 2023-09-08 21:14:59 │
│ 2023-09-08 19:14:59 │ Europe/Andorra    │ 2023-09-08 21:14:59 │
│ 2023-09-08 19:14:59 │ Europe/Astrakhan  │ 2023-09-08 23:14:59 │
│ 2023-09-08 19:14:59 │ Europe/Athens     │ 2023-09-08 22:14:59 │
│ 2023-09-08 19:14:59 │ Europe/Belfast    │ 2023-09-08 20:14:59 │
└─────────────────────┴───────────────────┴─────────────────────┘
```

","1.1","Type Conversion"
"25.9.2.1","emptyArrayDateTime",0,0,"","","System","Returns an empty DateTime array","emptyArrayDateTime()","","","An empty DateTime array. [`Array(T)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT emptyArrayDateTime
```

```response title=Response
[]
```

","1.1","Arrays"
"25.9.2.1","indexOfAssumeSorted",0,0,"","","System","
Returns the index of the first element with value 'x' (starting from `1`) if it is in the array.
If the array does not contain the searched-for value, the function returns `0`.

:::note
Unlike the `indexOf` function, this function assumes that the array is sorted in
ascending order. If the array is not sorted, results are undefined.
:::
    ","indexOfAssumeSorted(arr, x)","- `arr` — A sorted array to search. [`Array(T)`](/sql-reference/data-types/array)
- `x` — Value of the first matching element in sorted `arr` for which to return an index. [`UInt64`](/sql-reference/data-types/int-uint)
","","Returns the index (numbered from one) of the first `x` in `arr` if it exists. Otherwise, returns `0`. [`UInt64`](/sql-reference/data-types/int-uint)","**Basic example**

```sql title=Query
SELECT indexOfAssumeSorted([1, 3, 3, 3, 4, 4, 5], 4)
```

```response title=Response
5
```

","24.12","Arrays"
"25.9.2.1","xor",0,0,"","","System","
Calculates the logical exclusive disjunction of two or more values.
For more than two input values, the function first xor-s the first two values, then xor-s the result with the third value etc.
Zero as an argument is considered `false`, non-zero values are considered `true`.
","xor(val1, val2[, ...])","- `val1, val2[, ...]` — List of at least two values. [`Nullable((U)Int*)`](/sql-reference/data-types/nullable) or [`Nullable(Float*)`](/sql-reference/data-types/nullable)
","","Returns:
- `1`, for two values: if one of the values evaluates to `false` and other does not
- `0`, for two values: if both values evaluate to `false` or to both `true`
- `NULL`, if at least one of the inputs is `NULL`.
         [`Nullable(UInt8)`](/sql-reference/data-types/nullable)","**Basic usage**

```sql title=Query
SELECT xor(0, 1, 1);
```

```response title=Response
0
```

","1.1","Logical"
"25.9.2.1","JSONExtractInt",0,0,"","","System","
Parses JSON and extracts a value of Int type.
        ","JSONExtractInt(json[, indices_or_keys, ...])","- `json` — JSON string to parse. [`String`](/sql-reference/data-types/string)
- `indices_or_keys` — A list of zero or more arguments each of which can be either string or integer. [`String`](/sql-reference/data-types/string) or [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Returns an Int value if it exists, otherwise returns `0`. [`Int64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT JSONExtractInt('{""a"": ""hello"", ""b"": [-100, 200.0, 300]}', 'b', 1) AS res;
```

```response title=Response
┌─res─┐
│ 200 │
└─────┘
```

","20.1","JSON"
"25.9.2.1","subtractMonths",0,0,"","","System","
Subtracts a specified number of months from a date, a date with time or a string-encoded date or date with time.
    ","subtractMonths(datetime, num)","- `datetime` — Date or date with time to subtract specified number of months from. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64) or [`String`](/sql-reference/data-types/string)
- `num` — Number of months to subtract. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns `datetime` minus `num` months [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)","**Subtract months from different date types**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    subtractMonths(date, 1) AS subtract_months_with_date,
    subtractMonths(date_time, 1) AS subtract_months_with_date_time,
    subtractMonths(date_time_string, 1) AS subtract_months_with_date_time_string
```

```response title=Response
┌─subtract_months_with_date─┬─subtract_months_with_date_time─┬─subtract_months_with_date_time_string─┐
│                2023-12-01 │            2023-12-01 00:00:00 │               2023-12-01 00:00:00.000 │
└───────────────────────────┴────────────────────────────────┴───────────────────────────────────────┘
```

**Using alternative INTERVAL syntax**

```sql title=Query
SELECT dateSub('1998-06-16'::Date, INTERVAL 10 month)
```

```response title=Response
┌─minus(CAST('⋯lMonth(10))─┐
│               1997-08-16 │
└──────────────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","generateSerialID",0,0,"","","System","
Generates and returns sequential numbers starting from the previous counter value.
This function takes a constant string argument - a series identifier.

The server should be configured with Keeper.
The series are stored in Keeper nodes under the path, which can be configured in `series_keeper_path` in the server configuration.
","generateSerialID('series_identifier')","- `series_identifier` — Series identifier, (a short constant String) ","","Returns sequential numbers starting from the previous counter value.","**first call**

```sql title=Query
SELECT generateSerialID('id1')
```

```response title=Response
┌─generateSerialID('id1')──┐
│                        1 │
└──────────────────────────┘
```

**second call**

```sql title=Query
SELECT generateSerialID('id1')
```

```response title=Response
┌─generateSerialID('id1')──┐
│                        2 │
└──────────────────────────┘
```

**column call**

```sql title=Query
SELECT *, generateSerialID('id1') FROM test_table
```

```response title=Response
┌─CounterID─┬─UserID─┬─ver─┬─generateSerialID('id1')──┐
│         1 │      3 │   3 │                        3 │
│         1 │      1 │   1 │                        4 │
│         1 │      2 │   2 │                        5 │
│         1 │      5 │   5 │                        6 │
│         1 │      4 │   4 │                        7 │
└───────────┴────────┴─────┴──────────────────────────┘
```

","","Other"
"25.9.2.1","toUInt256",0,0,"","","System","
Converts an input value to a value of type UInt256.
Throws an exception in case of an error.
The function uses rounding towards zero, meaning it truncates fractional digits of numbers.

Supported arguments:
- Values or string representations of type (U)Int*.
- Values of type Float*.

Unsupported arguments:
- String representations of Float* values, including `NaN` and `Inf`.
- String representations of binary and hexadecimal values, e.g. `SELECT toUInt256('0xc0fe');`.

:::note
If the input value cannot be represented within the bounds of UInt256, the result over or under flows.
This is not considered an error.
:::

See also:
- [`toUInt256OrZero`](#toUInt256OrZero).
- [`toUInt256OrNull`](#toUInt256OrNull).
- [`toUInt256OrDefault`](#toUInt256OrDefault).
    ","toUInt256(expr)","- `expr` — Expression returning a number or a string representation of a number. [`Expression`](/sql-reference/data-types/special-data-types/expression)
","","Returns a 256-bit unsigned integer value. [`UInt256`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT
    toUInt256(256),
    toUInt256(256.256),
    toUInt256('256')
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toUInt256(256):     256
toUInt256(256.256): 256
toUInt256('256'):   256
```

","1.1","Type Conversion"
"25.9.2.1","arraySimilarity",0,0,"","","System","
Calculates the similarity of two arrays from `0` to `1` based on weighted Levenshtein distance.
","arraySimilarity(from, to, from_weights, to_weights)","- `from` — first array [`Array(T)`](/sql-reference/data-types/array)
- `to` — second array [`Array(T)`](/sql-reference/data-types/array)
- `from_weights` — weights for the first array. [`Array((U)Int*|Float*)`](/sql-reference/data-types/array)
- `to_weights` — weights for the second array. [`Array((U)Int*|Float*)`](/sql-reference/data-types/array)
","","Returns the similarity between `0` and `1` of the two arrays based on the weighted Levenshtein distance [`Float64`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT arraySimilarity(['A', 'B', 'C'], ['A', 'K', 'L'], [1.0, 2, 3], [3.0, 4, 5]);
```

```response title=Response
0.2222222222222222
```

","25.4","Arrays"
"25.9.2.1","arrayEnumerateUniqRanked",0,0,"","","System","
Returns an array (or multi-dimensional array) with the same dimensions as the source array,
indicating for each element what it's position is among elements with the same value.
It allows for enumeration of a multi-dimensional array with the ability to specify how deep to look inside the array.
","arrayEnumerateUniqRanked(clear_depth, arr, max_array_depth)","- `clear_depth` — Enumerate elements at the specified level separately. Positive integer less than or equal to `max_arr_depth`. [`UInt*`](/sql-reference/data-types/int-uint)
- `arr` — N-dimensional array to enumerate. [`Array(T)`](/sql-reference/data-types/array)
- `max_array_depth` — The maximum effective depth. Positive integer less than or equal to the depth of `arr`. [`UInt*`](/sql-reference/data-types/int-uint)
","","Returns an N-dimensional array the same size as `arr` with each element showing the position of that element in relation to other elements of the same value. [`Array(T)`](/sql-reference/data-types/array)","**Example 1**

```sql title=Query
-- With clear_depth=1 and max_array_depth=1, the result of arrayEnumerateUniqRanked
-- is identical to that which arrayEnumerateUniq would give for the same array.

SELECT arrayEnumerateUniqRanked(1, [1, 2, 1], 1);
```

```response title=Response
[1, 1, 2]
```

**Example 2**

```sql title=Query
-- with clear_depth=1 and max_array_depth=1, the result of arrayEnumerateUniqRanked
-- is identical to that which arrayEnumerateUniqwould give for the same array.

SELECT arrayEnumerateUniqRanked(1, [[1, 2, 3], [2, 2, 1], [3]], 2);"", ""[[1, 1, 1], [2, 3, 2], [2]]
```

```response title=Response
[1, 1, 2]
```

**Example 3**

```sql title=Query
-- In this example, arrayEnumerateUniqRanked is used to obtain an array indicating,
-- for each element of the multidimensional array, what its position is among elements
-- of the same value. For the first row of the passed array, [1, 2, 3], the corresponding
-- result is [1, 1, 1], indicating that this is the first time 1, 2 and 3 are encountered.
-- For the second row of the provided array, [2, 2, 1], the corresponding result is [2, 3, 3],
-- indicating that 2 is encountered for a second and third time, and 1 is encountered
-- for the second time. Likewise, for the third row of the provided array [3] the
-- corresponding result is [2] indicating that 3 is encountered for the second time.

SELECT arrayEnumerateUniqRanked(1, [[1, 2, 3], [2, 2, 1], [3]], 2);
```

```response title=Response
[[1, 1, 1], [2, 3, 2], [2]]
```

**Example 4**

```sql title=Query
-- Changing clear_depth=2, results in elements being enumerated separately for each row.
SELECT arrayEnumerateUniqRanked(2,[[1, 2, 3],[2, 2, 1],[3]], 2);
```

```response title=Response
[[1, 1, 1], [1, 2, 1], [1]]
```

","20.1","Arrays"
"25.9.2.1","or",0,0,"","","System","
Calculates the logical disjunction of two or more values.

Setting [`short_circuit_function_evaluation`](https://clickhouse.com/docs/operations/settings/settings#short_circuit_function_evaluation) controls whether short-circuit evaluation is used.
If enabled, `val_i` is evaluated only if `((NOT val_1) AND (NOT val_2) AND ... AND (NOT val_{i-1}))` is `true`.

For example, with short-circuit evaluation, no division-by-zero exception is thrown when executing the query `SELECT or(number = 0, intDiv(1, number) != 0) FROM numbers(5)`.
Zero as an argument is considered `false`, non-zero values are considered `true`.
","or(val1, val2[, ...])","- `val1, val2[, ...]` — List of at least two values. [`Nullable((U)Int*)`](/sql-reference/data-types/nullable) or [`Nullable(Float*)`](/sql-reference/data-types/nullable)
","","Returns:
- `1`, if at least one argument evaluates to `true`
- `0`, if all arguments evaluate to `false`
- `NULL`, if all arguments evaluate to `false` and at least one argument is `NULL`
         [`Nullable(UInt8)`](/sql-reference/data-types/nullable)","**Basic usage**

```sql title=Query
SELECT or(1, 0, 0, 2, NULL);
```

```response title=Response
1
```

**With NULL**

```sql title=Query
SELECT or(0, NULL);
```

```response title=Response
ᴺᵁᴸᴸ
```

","1.1","Logical"
"25.9.2.1","JSONSharedDataPaths",0,0,"","","System","
Returns the list of paths that are stored in shared data structure in JSON column.
        ","JSONSharedDataPaths(json)","- `json` — JSON column. [`JSON`](/sql-reference/data-types/newjson)
","","Returns an array of paths stored in shared data structure in the JSON column. [`Array(String)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
CREATE TABLE test (json JSON(max_dynamic_paths=1)) ENGINE = Memory;
INSERT INTO test FORMAT JSONEachRow {""json"" : {""a"" : 42}}, {""json"" : {""b"" : ""Hello""}}, {""json"" : {""a"" : [1, 2, 3], ""c"" : ""2020-01-01""}}
SELECT json, JSONSharedDataPaths(json) FROM test;
```

```response title=Response
┌─json─────────────────────────────────┬─JSONSharedDataPaths(json)─┐
│ {""a"":""42""}                           │ []                        │
│ {""b"":""Hello""}                        │ ['b']                     │
│ {""a"":[""1"",""2"",""3""],""c"":""2020-01-01""} │ ['c']                     │
└──────────────────────────────────────┴───────────────────────────┘
```

","24.8","JSON"
"25.9.2.1","arrayExists",0,0,"","","System","
Returns `1` if there is at least one element in a source array for which `func(x[, y1, y2, ... yN])` returns true. Otherwise, it returns `0`.
","arrayExists(func(x[, y1, ..., yN]), source_arr[, cond1_arr, ... , condN_arr])","- `func(x[, y1, ..., yN])` — A lambda function which operates on elements of the source array (`x`) and condition arrays (`y`). [`Lambda function`](/sql-reference/functions/overview#arrow-operator-and-lambda)
- `source_arr` — The source array to process. [`Array(T)`](/sql-reference/data-types/array)
- `[, cond1_arr, ... , condN_arr]` — Optional. N condition arrays providing additional arguments to the lambda function. [`Array(T)`](/sql-reference/data-types/array)
","","Returns `1` if the lambda function returns true for at least one element, `0` otherwise [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT arrayExists(x, y -> x=y, [1, 2, 3], [0, 0, 0])
```

```response title=Response
0
```

","1.1","Arrays"
"25.9.2.1","parseDateTimeInJodaSyntaxOrNull",0,0,"","","System","","","","","","","",""
"25.9.2.1","multiMatchAllIndices",0,0,"","","System","","","","","","","",""
"25.9.2.1","hasThreadFuzzer",0,0,"","","System","
Returns whether the thread fuzzer is enabled.
THis function is only useful for testing and debugging.
    ","hasThreadFuzzer()","","","Returns whether Thread Fuzzer is effective. [`UInt8`](/sql-reference/data-types/int-uint)","**Check Thread Fuzzer status**

```sql title=Query
SELECT hasThreadFuzzer()
```

```response title=Response
┌─hasThreadFuzzer()─┐
│                 0 │
└───────────────────┘
```

","20.6","Other"
"25.9.2.1","stringBytesEntropy",0,0,"","","System","
Calculates Shannon's entropy of byte distribution in a string.
","stringBytesEntropy(s)","- `s` — The string to analyze. [`String`](/sql-reference/data-types/string)
","","Returns Shannon's entropy of byte distribution in the string. [`Float64`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT stringBytesEntropy('Hello, world!')
```

```response title=Response
┌─stringBytesEntropy('Hello, world!')─┐
│                         3.07049960  │
└─────────────────────────────────────┘
```

","25.6","String"
"25.9.2.1","arrayPushFront",0,0,"","","System","Adds one element to the beginning of the array.","arrayPushFront(arr, x)","- `arr` — The array for which to add value `x` to the end of. [`Array(T)`](/sql-reference/data-types/array). - `x` — 
- Single value to add to the start of the array. [`Array(T)`](/sql-reference/data-types/array).

:::note
- Only numbers can be added to an array with numbers, and only strings can be added to an array of strings.
- When adding numbers, ClickHouse automatically sets the type of `x` for the data type of the array.
- Can be `NULL`. The function adds a `NULL` element to an array, and the type of array elements converts to `Nullable`.

For more information about the types of data in ClickHouse, see [Data types](/sql-reference/data-types).
:::
     ","","Returns an array identical to `arr` but with an additional value `x` at the beginning of the array [`Array(T)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT arrayPushFront(['b'], 'a') AS res;
```

```response title=Response
['a','b']
```

","1.1","Arrays"
"25.9.2.1","addQuarters",0,0,"","","System","
Adds a specified number of quarters to a date, a date with time or a string-encoded date or date with time.
    ","addQuarters(datetime, num)","- `datetime` — Date or date with time to add specified number of quarters to. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64) or [`String`](/sql-reference/data-types/string)
- `num` — Number of quarters to add. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns `datetime` plus `num` quarters [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)","**Add quarters to different date types**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addQuarters(date, 1) AS add_quarters_with_date,
    addQuarters(date_time, 1) AS add_quarters_with_date_time,
    addQuarters(date_time_string, 1) AS add_quarters_with_date_time_string
```

```response title=Response
┌─add_quarters_with_date─┬─add_quarters_with_date_time─┬─add_quarters_with_date_time_string─┐
│             2024-04-01 │         2024-04-01 00:00:00 │            2024-04-01 00:00:00.000 │
└────────────────────────┴─────────────────────────────┴────────────────────────────────────┘
```

**Using alternative INTERVAL syntax**

```sql title=Query
SELECT dateAdd('1998-06-16'::Date, INTERVAL 10 quarter)
```

```response title=Response
┌─plus(CAST('1⋯uarter(10))─┐
│               2000-12-16 │
└──────────────────────────┘
```

","20.1","Dates and Times"
"25.9.2.1","multiply",0,0,"","","System","Calculates the product of two values `x` and `y`.","multiply(x, y)","- `x` — factor. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
- `y` — factor. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
","","Returns the product of x and y","**Multiplying two numbers**

```sql title=Query
SELECT multiply(5,5)
```

```response title=Response
25
```

","1.1","Arithmetic"
"25.9.2.1","ilike",0,0,"","","System","","","","","","","",""
"25.9.2.1","arrayJoin",0,0,"","","System","
The `arrayJoin` function takes a row that contains an array and unfolds it, generating multiple rows – one for each element in the array.
This is in contrast to Regular Functions in ClickHouse which map input values to output values within the same row,
and Aggregate Functions which take a group of rows and ""compress"" or ""reduce"" them into a single summary row
(or a single value within a summary row if used with `GROUP BY`).

All the values in the columns are simply copied, except the values in the column where this function is applied;
these are replaced with the corresponding array value.
","arrayJoin(arr)","- `arr` — An array to unfold. [`Array(T)`](/sql-reference/data-types/array)
","","Returns a set of rows unfolded from `arr`.","**Basic usage**

```sql title=Query
SELECT arrayJoin([1, 2, 3] AS src) AS dst, 'Hello', src
```

```response title=Response
┌─dst─┬─\'Hello\'─┬─src─────┐
│   1 │ Hello     │ [1,2,3] │
│   2 │ Hello     │ [1,2,3] │
│   3 │ Hello     │ [1,2,3] │
└─────┴───────────┴─────────┘
```

**arrayJoin affects all sections of the query**

```sql title=Query
-- The arrayJoin function affects all sections of the query, including the WHERE section. Notice the result 2, even though the subquery returned 1 row.

SELECT sum(1) AS impressions
FROM
(
    SELECT ['Istanbul', 'Berlin', 'Bobruisk'] AS cities
)
WHERE arrayJoin(cities) IN ['Istanbul', 'Berlin'];
```

```response title=Response
┌─impressions─┐
│           2 │
└─────────────┘
```

**Using multiple arrayJoin functions**

```sql title=Query
- A query can use multiple arrayJoin functions. In this case, the transformation is performed multiple times and the rows are multiplied.

SELECT
    sum(1) AS impressions,
    arrayJoin(cities) AS city,
    arrayJoin(browsers) AS browser
FROM
(
    SELECT
        ['Istanbul', 'Berlin', 'Bobruisk'] AS cities,
        ['Firefox', 'Chrome', 'Chrome'] AS browsers
)
GROUP BY
    2,
    3
```

```response title=Response
┌─impressions─┬─city─────┬─browser─┐
│           2 │ Istanbul │ Chrome  │
│           1 │ Istanbul │ Firefox │
│           2 │ Berlin   │ Chrome  │
│           1 │ Berlin   │ Firefox │
│           2 │ Bobruisk │ Chrome  │
│           1 │ Bobruisk │ Firefox │
└─────────────┴──────────┴─────────┘
```

**Unexpected results due to optimizations**

```sql title=Query
-- Using multiple arrayJoin with the same expression may not produce the expected result due to optimizations.
-- For these cases, consider modifying the repeated array expression with extra operations that do not affect join result.
- e.g. arrayJoin(arraySort(arr)), arrayJoin(arrayConcat(arr, []))

SELECT
    arrayJoin(dice) as first_throw,
    /* arrayJoin(dice) as second_throw */ -- is technically correct, but will annihilate result set
    arrayJoin(arrayConcat(dice, [])) as second_throw -- intentionally changed expression to force re-evaluation
FROM (
    SELECT [1, 2, 3, 4, 5, 6] as dice
);
```

```response title=Response
┌─first_throw─┬─second_throw─┐
│           1 │            1 │
│           1 │            2 │
│           1 │            3 │
│           1 │            4 │
│           1 │            5 │
│           1 │            6 │
│           2 │            1 │
│           2 │            2 │
│           2 │            3 │
│           2 │            4 │
│           2 │            5 │
│           2 │            6 │
│           3 │            1 │
│           3 │            2 │
│           3 │            3 │
│           3 │            4 │
│           3 │            5 │
│           3 │            6 │
│           4 │            1 │
│           4 │            2 │
│           4 │            3 │
│           4 │            4 │
│           4 │            5 │
│           4 │            6 │
│           5 │            1 │
│           5 │            2 │
│           5 │            3 │
│           5 │            4 │
│           5 │            5 │
│           5 │            6 │
│           6 │            1 │
│           6 │            2 │
│           6 │            3 │
│           6 │            4 │
│           6 │            5 │
│           6 │            6 │
└─────────────┴──────────────┘
```

**Using the ARRAY JOIN syntax**

```sql title=Query
-- Note the ARRAY JOIN syntax in the `SELECT` query below, which provides broader possibilities.
-- ARRAY JOIN allows you to convert multiple arrays with the same number of elements at a time.

SELECT
    sum(1) AS impressions,
    city,
    browser
FROM
(
    SELECT
        ['Istanbul', 'Berlin', 'Bobruisk'] AS cities,
        ['Firefox', 'Chrome', 'Chrome'] AS browsers
)
ARRAY JOIN
    cities AS city,
    browsers AS browser
GROUP BY
    2,
    3
```

```response title=Response
┌─impressions─┬─city─────┬─browser─┐
│           1 │ Istanbul │ Firefox │
│           1 │ Berlin   │ Chrome  │
│           1 │ Bobruisk │ Chrome  │
└─────────────┴──────────┴─────────┘
```

**Using Tuple**

```sql title=Query
-- You can also use Tuple

SELECT
    sum(1) AS impressions,
    (arrayJoin(arrayZip(cities, browsers)) AS t).1 AS city,
    t.2 AS browser
FROM
(
    SELECT
        ['Istanbul', 'Berlin', 'Bobruisk'] AS cities,
        ['Firefox', 'Chrome', 'Chrome'] AS browsers
)
GROUP BY
    2,
    3
```

```response title=Response
┌─impressions─┬─city─────┬─browser─┐
│           1 │ Istanbul │ Firefox │
│           1 │ Berlin   │ Chrome  │
│           1 │ Bobruisk │ Chrome  │
└─────────────┴──────────┴─────────┘
```

","1.1","Arrays"
"25.9.2.1","arrayMap",0,0,"","","System","
Returns an array obtained from the original arrays by applying a lambda function to each element.
","arrayMap(func, arr)","- `func` — A lambda function which operates on elements of the source array (`x`) and condition arrays (`y`). [`Lambda function`](/sql-reference/functions/overview#arrow-operator-and-lambda)
- `arr` — N arrays to process. [`Array(T)`](/sql-reference/data-types/array)
","","Returns an array from the lambda results [`Array(T)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT arrayMap(x -> (x + 2), [1, 2, 3]) as res;
```

```response title=Response
[3, 4, 5]
```

**Creating a tuple of elements from different arrays**

```sql title=Query
SELECT arrayMap((x, y) -> (x, y), [1, 2, 3], [4, 5, 6]) AS res
```

```response title=Response
[(1, 4),(2, 5),(3, 6)]
```

","1.1","Arrays"
"25.9.2.1","multiSearchFirstIndexUTF8",0,0,"","","System","","","","","","","",""
"25.9.2.1","moduloOrNull",0,0,"","","System","
Calculates the remainder when dividing `a` by `b`. Similar to function `modulo` except that `moduloOrNull` will return NULL
if the right argument is 0.
    ","moduloOrNull(x, y)","- `x` — The dividend. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
- `y` — The divisor (modulus). [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns the remainder of the division of `x` by `y`, or null when the divisor is zero.","**moduloOrNull by zero**

```sql title=Query
SELECT moduloOrNull(5, 0)
```

```response title=Response
\N
```

","25.5","Arithmetic"
"25.9.2.1","parseDateTimeBestEffortUS",0,0,"","","System","
This function behaves like [`parseDateTimeBestEffort`](#parseDateTimeBestEffort) for ISO date formats, e.g. `YYYY-MM-DD hh:mm:ss`, and other date formats where the month and date components can be unambiguously extracted, e.g. `YYYYMMDDhhmmss`, `YYYY-MM`, `DD hh`, or `YYYY-MM-DD hh:mm:ss ±h:mm`.
If the month and the date components cannot be unambiguously extracted, e.g. `MM/DD/YYYY`, `MM-DD-YYYY`, or `MM-DD-YY`, it prefers the US date format instead of `DD/MM/YYYY`, `DD-MM-YYYY`, or `DD-MM-YY`.
As an exception to the previous statement, if the month is bigger than 12 and smaller or equal than 31, this function falls back to the behavior of [`parseDateTimeBestEffort`](#parseDateTimeBestEffort), e.g. `15/08/2020` is parsed as `2020-08-15`.
    ","parseDateTimeBestEffortUS(time_string[, time_zone])","- `time_string` — String containing a date and time to convert. [`String`](/sql-reference/data-types/string)
- `time_zone` — Optional. Time zone according to which `time_string` is parsed. [`String`](/sql-reference/data-types/string)
","","Returns `time_string` as a `DateTime` using US date format preference for ambiguous cases. [`DateTime`](/sql-reference/data-types/datetime)","**Usage example**

```sql title=Query
SELECT parseDateTimeBestEffortUS('02/10/2025') AS us_format,
       parseDateTimeBestEffortUS('15/08/2025') AS fallback_to_standard
```

```response title=Response
┌─us_format───────────┬─fallback_to_standard─┐
│ 2025-02-10 00:00:00 │  2025-08-15 00:00:00 │
└─────────────────────┴──────────────────────┘
```

","1.1","Type Conversion"
"25.9.2.1","mapPopulateSeries",0,0,"","","System","","","","","","","",""
"25.9.2.1","arrayFirstIndex",0,0,"","","System","
Returns the index of the first element in the source array for which `func(x[, y1, y2, ... yN])` returns true, otherwise it returns '0'.
","arrayFirstIndex(func(x[, y1, ..., yN]), source_arr[, cond1_arr, ... , condN_arr])","- `func(x[, y1, ..., yN])` — A lambda function which operates on elements of the source array (`x`) and condition arrays (`y`). [Lambda function](/sql-reference/functions/overview#arrow-operator-and-lambda). - `source_arr` — The source array to process. [`Array(T)`](/sql-reference/data-types/array). - `[, cond1_arr, ... , condN_arr]` — Optional. N condition arrays providing additional arguments to the lambda function. [`Array(T)`](/sql-reference/data-types/array). ","","Returns the index of the first element of the source array for which `func` is true, otherwise returns `0` [`UInt32`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT arrayFirstIndex(x, y -> x=y, ['a', 'b', 'c'], ['c', 'b', 'a'])
```

```response title=Response
2
```

**No match**

```sql title=Query
SELECT arrayFirstIndex(x, y -> x=y, ['a', 'b', 'c'], ['d', 'e', 'f'])
```

```response title=Response
0
```

","1.1","Arrays"
"25.9.2.1","arrayPartialShuffle",0,1,"","","System","
Returns an array of the same size as the original array where elements in range `[1..limit]` are a random
subset of the original array. Remaining `(limit..n]` shall contain the elements not in `[1..limit]` range in undefined order.
Value of limit shall be in range `[1..n]`. Values outside of that range are equivalent to performing full `arrayShuffle`:

:::note
This function will not materialize constants.

The value of `limit` should be in the range `[1..N]`. Values outside of that range are equivalent to performing full [`arrayShuffle`](#arrayShuffle).
:::
    ","arrayPartialShuffle(arr [, limit[, seed]])","- `arr` — The array to shuffle. [`Array(T)`](/sql-reference/data-types/array)
- `seed` — Optional. The seed to be used with random number generation. If not provided, a random one is used. [`(U)Int*`](/sql-reference/data-types/int-uint)
- `limit` — Optional. The number to limit element swaps to, in the range `[1..N]`. [`(U)Int*`](/sql-reference/data-types/int-uint)
","","Array with elements partially shuffled. [`Array(T)`](/sql-reference/data-types/array)","**no_limit1**

```sql title=Query
SELECT arrayPartialShuffle([1, 2, 3, 4], 0)
```

```response title=Response
[2, 4, 3, 1]
```

**no_limit2**

```sql title=Query
SELECT arrayPartialShuffle([1, 2, 3, 4])
```

```response title=Response
[4, 1, 3, 2]
```

**random_seed**

```sql title=Query
SELECT arrayPartialShuffle([1, 2, 3, 4], 2)
```

```response title=Response
[3, 4, 1, 2]
```

**explicit_seed**

```sql title=Query
SELECT arrayPartialShuffle([1, 2, 3, 4], 2, 41)
```

```response title=Response
[3, 2, 1, 4]
```

**materialize**

```sql title=Query
SELECT arrayPartialShuffle(materialize([1, 2, 3, 4]), 2, 42), arrayPartialShuffle([1, 2, 3], 2, 42) FROM numbers(10)
```

```response title=Response
┌─arrayPartial⋯4]), 2, 42)─┬─arrayPartial⋯ 3], 2, 42)─┐
│ [3,2,1,4]                │ [3,2,1]                  │
│ [3,2,1,4]                │ [3,2,1]                  │
│ [4,3,2,1]                │ [3,2,1]                  │
│ [1,4,3,2]                │ [3,2,1]                  │
│ [3,4,1,2]                │ [3,2,1]                  │
│ [1,2,3,4]                │ [3,2,1]                  │
│ [1,4,3,2]                │ [3,2,1]                  │
│ [1,4,3,2]                │ [3,2,1]                  │
│ [3,1,2,4]                │ [3,2,1]                  │
│ [1,3,2,4]                │ [3,2,1]                  │
└──────────────────────────┴──────────────────────────┘
```

","23.2","Arrays"
"25.9.2.1","h3UnidirectionalEdgeIsValid",0,0,"","","System","","","","","","","",""
"25.9.2.1","serverTimezone",0,0,"","","System","
Returns the timezone of the server, i.e. the value of the [`timezone`](/operations/server-configuration-parameters/settings#timezone) setting.
If the function is executed in the context of a distributed table, then it generates a normal column with values relevant to each shard. Otherwise, it produces a constant value.
    ","serverTimeZone()","","","Returns the server timezone as a [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT serverTimeZone()
```

```response title=Response
┌─serverTimeZone()─┐
│ UTC              │
└──────────────────┘
```

","23.6","Dates and Times"
"25.9.2.1","substringUTF8",0,0,"","","System","
Returns the substring of a string `s` which starts at the specified byte index `offset` for Unicode code points.
Byte counting starts from `1` with the following logic:
- If `offset` is `0`, an empty string is returned.
- If `offset` is negative, the substring starts `pos` characters from the end of the string, rather than from the beginning.

An optional argument `length` specifies the maximum number of bytes the returned substring may have.

:::note
This function assumes that the string contains valid UTF-8 encoded text.
If this assumption is violated, no exception is thrown and the result is undefined.
:::
","substringUTF8(s, offset[, length])","- `s` — The string to calculate a substring from. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring) or [`Enum`](/sql-reference/data-types/enum)
- `offset` — The starting position of the substring in `s`. [`Int`](/sql-reference/data-types/int-uint) or [`UInt`](/sql-reference/data-types/int-uint)
- `length` — The maximum length of the substring. Optional. [`Int`](/sql-reference/data-types/int-uint) or [`UInt`](/sql-reference/data-types/int-uint)
","","Returns a substring of `s` with `length` many bytes, starting at index `offset`. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT 'Täglich grüßt das Murmeltier.' AS str, substringUTF8(str, 9), substringUTF8(str, 9, 5)
```

```response title=Response
Täglich grüßt das Murmeltier.    grüßt das Murmeltier.    grüßt
```

","1.1","String"
"25.9.2.1","JSONMergePatch",0,0,"","","System","
Returns the merged JSON object string which is formed by merging multiple JSON objects.
    ","jsonMergePatch(json1[, json2, ...])","- `json1[, json2, ...]` — One or more strings with valid JSON. [`String`](/sql-reference/data-types/string)
","","Returns the merged JSON object string, if the JSON object strings are valid. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT jsonMergePatch('{""a"":1}', '{""name"": ""joey""}', '{""name"": ""tom""}', '{""name"": ""zoey""}') AS res;
```

```response title=Response
┌─res───────────────────┐
│ {""a"":1,""name"":""zoey""} │
└───────────────────────┘
```

","23.10","JSON"
"25.9.2.1","arrayFirst",0,0,"","","System","
Returns the first element in the source array for which `func(x[, y1, y2, ... yN])` returns true, otherwise it returns a default value.
    ","arrayFirst(func(x[, y1, ..., yN]), source_arr[, cond1_arr, ... , condN_arr])","- `func(x[, y1, ..., yN])` — A lambda function which operates on elements of the source array (`x`) and condition arrays (`y`). [Lambda function](/sql-reference/functions/overview#arrow-operator-and-lambda). - `source_arr` — The source array to process. [`Array(T)`](/sql-reference/data-types/array). - `[, cond1_arr, ... , condN_arr]` — Optional. N condition arrays providing additional arguments to the lambda function. [`Array(T)`](/sql-reference/data-types/array). ","","Returns the first element of the source array for which `λ` is true, otherwise returns the default value of `T`.","**Usage example**

```sql title=Query
SELECT arrayFirst(x, y -> x=y, ['a', 'b', 'c'], ['c', 'b', 'a'])
```

```response title=Response
b
```

**No match**

```sql title=Query
SELECT arrayFirst(x, y -> x=y, [0, 1, 2], [3, 3, 3]) AS res, toTypeName(res)
```

```response title=Response
0 UInt8
```

","1.1","Arrays"
"25.9.2.1","toIntervalYear",0,0,"","","System","
Returns an interval of `n` years of data type [`IntervalYear`](../../sql-reference/data-types/special-data-types/interval.md).
    ","toIntervalYear(n)","- `n` — Number of years. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`String`](/sql-reference/data-types/string)
","","Returns an interval of `n` years. [`Interval`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
WITH
    toDate('2024-06-15') AS date,
    toIntervalYear(1) AS interval_to_year
SELECT date + interval_to_year AS result
```

```response title=Response
┌─────result─┐
│ 2025-06-15 │
└────────────┘
```

","1.1","Type Conversion"
"25.9.2.1","addInterval",0,0,"","","System","
Adds an interval to another interval or tuple of intervals.

:::note
Intervals of the same type will be combined into a single interval. For instance if `toIntervalDay(1)` and `toIntervalDay(2)` are passed then the result will be `(3)` rather than `(1,1)`.
:::
    ","addInterval(interval_1, interval_2)","- `interval_1` — First interval or tuple of intervals. [`Interval`](/sql-reference/data-types/int-uint) or [`Tuple(Interval)`](/sql-reference/data-types/tuple)
- `interval_2` — Second interval to be added. [`Interval`](/sql-reference/data-types/int-uint)
","","Returns a tuple of intervals [`Tuple(Interval)`](/sql-reference/data-types/tuple)","**Add intervals**

```sql title=Query
SELECT addInterval(INTERVAL 1 DAY, INTERVAL 1 MONTH);
SELECT addInterval((INTERVAL 1 DAY, INTERVAL 1 YEAR), INTERVAL 1 MONTH);
SELECT addInterval(INTERVAL 2 DAY, INTERVAL 1 DAY)
```

```response title=Response
┌─addInterval(toIntervalDay(1), toIntervalMonth(1))─┐
│ (1,1)                                             │
└───────────────────────────────────────────────────┘
┌─addInterval((toIntervalDay(1), toIntervalYear(1)), toIntervalMonth(1))─┐
│ (1,1,1)                                                                │
└────────────────────────────────────────────────────────────────────────┘
┌─addInterval(toIntervalDay(2), toIntervalDay(1))─┐
│ (3)                                             │
└─────────────────────────────────────────────────┘
```

","22.11","Dates and Times"
"25.9.2.1","polygonAreaCartesian",0,0,"","","System","","","","","","","",""
"25.9.2.1","arrayUniq",0,0,"","","System","
For a single argument passed, counts the number of different elements in the array.
For multiple arguments passed, it counts the number of different **tuples** made of elements at matching positions across multiple arrays.

For example `SELECT arrayUniq([1,2], [3,4], [5,6])` will form the following tuples:
* Position 1: (1,3,5)
* Position 2: (2,4,6)

It will then count the number of unique tuples. In this case `2`.

All arrays passed must have the same length.

:::tip
If you want to get a list of unique items in an array, you can use `arrayReduce('groupUniqArray', arr)`.
:::
","arrayUniq(arr1[, arr2, ..., arrN])","- `arr1` — Array for which to count the number of unique elements. [`Array(T)`](/sql-reference/data-types/array)
- `[, arr2, ..., arrN]` — Optional. Additional arrays used to count the number of unique tuples of elements at corresponding positions in multiple arrays. [`Array(T)`](/sql-reference/data-types/array)
","","For a single argument returns the number of unique
elements. For multiple arguments returns the number of unique tuples made from
elements at corresponding positions across the arrays.
 [`UInt32`](/sql-reference/data-types/int-uint)","**Single argument**

```sql title=Query
SELECT arrayUniq([1, 1, 2, 2])
```

```response title=Response
2
```

**Multiple argument**

```sql title=Query
SELECT arrayUniq([1, 2, 3, 1], [4, 5, 6, 4])
```

```response title=Response
3
```

","1.1","Arrays"
"25.9.2.1","divideDecimal",0,0,"","","System","
Performs division on two decimals. Result value will be of type [Decimal256](/sql-reference/data-types/decimal).
Result scale can be explicitly specified by `result_scale` argument (const Integer in range `[0, 76]`). If not specified, the result scale is the max scale of given arguments.

:::note
These function work significantly slower than usual `divide`.
In case you don't really need controlled precision and/or need fast computation, consider using [divide](#divide).
:::
    ","divideDecimal(x, y[, result_scale])","- `x` — First value: [Decimal](/sql-reference/data-types/decimal). - `y` — Second value: [Decimal](/sql-reference/data-types/decimal). - `result_scale` — Scale of result. Type [Int/UInt](/sql-reference/data-types/int-uint). ","","The result of division with given scale. [`Decimal256`](/sql-reference/data-types/decimal)","**Example 1**

```sql title=Query
divideDecimal(toDecimal256(-12, 0), toDecimal32(2.1, 1), 10)
```

```response title=Response
┌─divideDecimal(toDecimal256(-12, 0), toDecimal32(2.1, 1), 10)─┐
│                                                -5.7142857142 │
└──────────────────────────────────────────────────────────────┘
```

**Example 2**

```sql title=Query
SELECT toDecimal64(-12, 1) / toDecimal32(2.1, 1);
SELECT toDecimal64(-12, 1) as a, toDecimal32(2.1, 1) as b, divideDecimal(a, b, 1), divideDecimal(a, b, 5);
```

```response title=Response
┌─divide(toDecimal64(-12, 1), toDecimal32(2.1, 1))─┐
│                                             -5.7 │
└──────────────────────────────────────────────────┘
┌───a─┬───b─┬─divideDecimal(toDecimal64(-12, 1), toDecimal32(2.1, 1), 1)─┬─divideDecimal(toDecimal64(-12, 1), toDecimal32(2.1, 1), 5)─┐
│ -12 │ 2.1 │                                                       -5.7 │                                                   -5.71428 │
└─────┴─────┴────────────────────────────────────────────────────────────┴────────────────────────────────────────────────────────────┘
```

","22.12","Arithmetic"
"25.9.2.1","globalVariable",0,0,"","","System","","","","","","","",""
"25.9.2.1","numericIndexedVectorPointwiseDivide",0,0,"","","System","
Performs pointwise division between a numericIndexedVector and either another numericIndexedVector or a numeric constant.
The function returns a new numericIndexedVector.
        ","numericIndexedVectorPointwiseDivide(v1, v2)","- `v1` — A numericIndexedVector object. [`numericIndexedVector`](/sql-reference/functions/#create-numeric-indexed-vector-object)
- `v2` — A numeric constant or numericIndexedVector object. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns a new numericIndexedVector object. [`numericIndexedVector`](/sql-reference/functions/#create-numeric-indexed-vector-object)","**Usage example**

```sql title=Query
with
    numericIndexedVectorBuild(mapFromArrays([1, 2, 3], arrayMap(x -> toFloat64(x), [10, 20, 30]))) as vec1,
    numericIndexedVectorBuild(mapFromArrays([2, 3, 4], arrayMap(x -> toFloat64(x), [10, 20, 30]))) as vec2
SELECT
    numericIndexedVectorToMap(numericIndexedVectorPointwiseDivide(vec1, vec2)) AS res1,
    numericIndexedVectorToMap(numericIndexedVectorPointwiseDivide(vec1, 2)) AS res2;
```

```response title=Response
┌─res1────────┬─res2────────────┐
│ {2:2,3:1.5} │ {1:5,2:10,3:15} │
└─────────────┴─────────────────┘
```

","25.7","NumericIndexedVector"
"25.9.2.1","tryBase64Decode",0,0,"","","System","
Like [`base64Decode`](#base64Decode), but returns an empty string in case of error.
","tryBase64Decode(encoded)","- `encoded` — String column or constant to decode. If the string is not valid Base64-encoded, returns an empty string in case of error. [`String`](/sql-reference/data-types/string)
","","Returns a string containing the decoded value of the argument. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT tryBase64Decode('Y2xpY2tob3VzZQ==')
```

```response title=Response
┌─tryBase64Decode('Y2xpY2tob3VzZQ==')─┐
│ clickhouse                          │
└─────────────────────────────────────┘
```

","18.16","String"
"25.9.2.1","isValidASCII",0,0,"","","System","Returns 1 if the input String or FixedString contains only ASCII bytes (0x00–0x7F), otherwise 0.","","","","","**isValidASCII**

```sql title=Query
SELECT isValidASCII('hello') AS is_ascii, isValidASCII('你好') AS is_not_ascii
```

```response title=Response

```

","25.9","String"
"25.9.2.1","LinfDistance",0,0,"","","System","
Calculates the distance between two points (the elements of the vectors are the coordinates) in `L_{inf}` space ([maximum norm](https://en.wikipedia.org/wiki/Norm_(mathematics)#Maximum_norm_(special_case_of:_infinity_norm,_uniform_norm,_or_supremum_norm))).
    ","LinfDistance(vector1, vector2)","- `vector1` — First vector. [`Tuple(T)`](/sql-reference/data-types/tuple) or [`Array(T)`](/sql-reference/data-types/array)
- `vector2` — Second vector. [`Tuple(T)`](/sql-reference/data-types/tuple) or [`Array(T)`](/sql-reference/data-types/array)
","","Returns the Infinity-norm distance. [`Float64`](/sql-reference/data-types/float)","**Basic usage**

```sql title=Query
SELECT LinfDistance((1, 2), (2, 3))
```

```response title=Response
┌─LinfDistance((1, 2), (2, 3))─┐
│                            1 │
└──────────────────────────────┘
```

","21.11","Distance"
"25.9.2.1","polygonsIntersectSpherical",0,0,"","","System","
        Returns true if the two [`Polygon`](sql-reference/data-types/geo#polygon) or [`MultiPolygon`](sql-reference/data-types/geo#multipolygon) intersect (share any common area or boundary).
    ","polygonsIntersectSpherical(polygon1, polygon2)","- `polygon1` — A value of type [`Polygon`](/sql-reference/data-types/geo#polygon) or [`MultiPolygon`](/sql-reference/data-types/geo#multipolygon). - `polygon2` — A value of type [`Polygon`](/sql-reference/data-types/geo#polygon) or [`MultiPolygon`](/sql-reference/data-types/geo#multipolygon). ","","Returns true (1) if the two polygons intersect (share any common area or boundary). [`Bool`](/sql-reference/data-types/boolean).","**Usage example**

```sql title=Query
SELECT polygonsIntersectSpherical([[[(2., 2.), (2., 3.), (3., 3.), (3., 2.)]]], [[[(1., 1.), (1., 4.), (4., 4.), (4., 1.), (1., 1.)]]])
```

```response title=Response
┌─polygonsIntersectSpherical()─┐
                │ 1 │
                └───────────────────┘
```

","25.6","Geo"
"25.9.2.1","bech32Encode",0,0,"","","System","
Encodes a binary data string, along with a human-readable part (HRP), using the [Bech32 or Bech32m](https://en.bitcoin.it/wiki/Bech32) algorithms.

:::note
When using the [`FixedString`](../data-types/fixedstring.md) data type, if a value does not fully fill the row it is padded with null characters.
While the `bech32Encode` function will handle this automatically for the hrp argument, for the data argument the values must not be padded.
For this reason it is not recommended to use the [`FixedString`](../data-types/fixedstring.md) data type for your data values unless you are
certain that they are all the same length and ensure that your `FixedString` column is set to that length as well.
:::
    ","bech32Encode(hrp, data[, witver])","- `hrp` — A String of `1 - 83` lowercase characters specifying the ""human-readable part"" of the code. Usually 'bc' or 'tb'. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring)
- `data` — A String of binary data to encode. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring)
- `witver` — Optional. The witness version (default = 1). An `UInt*` specifying the version of the algorithm to run. `0` for Bech32 and `1` or greater for Bech32m. [`UInt*`](/sql-reference/data-types/int-uint)
","","Returns a Bech32 address string, consisting of the human-readable part, a separator character which is always '1', and a data part. The length of the string will never exceed 90 characters. If the algorithm cannot generate a valid address from the input, it will return an empty string. [`String`](/sql-reference/data-types/string)","**Default Bech32m**

```sql title=Query
-- When no witness version is supplied, the default is 1, the updated Bech32m algorithm.
SELECT bech32Encode('bc', unhex('751e76e8199196d454941c45d1b3a323f1433bd6'))
```

```response title=Response
bc1w508d6qejxtdg4y5r3zarvary0c5xw7k8zcwmq
```

**Bech32 algorithm**

```sql title=Query
-- A witness version of 0 will result in a different address string.
SELECT bech32Encode('bc', unhex('751e76e8199196d454941c45d1b3a323f1433bd6'), 0)
```

```response title=Response
bc1w508d6qejxtdg4y5r3zarvary0c5xw7kj7gz7z
```

**Custom HRP**

```sql title=Query
-- While 'bc' (Mainnet) and 'tb' (Testnet) are the only allowed hrp values for the
-- SegWit address format, Bech32 allows any hrp that satisfies the above requirements.
SELECT bech32Encode('abcdefg', unhex('751e76e8199196d454941c45d1b3a323f1433bd6'), 10)
```

```response title=Response
abcdefg1w508d6qejxtdg4y5r3zarvary0c5xw7k9rp8r4
```

","25.6","Encoding"
"25.9.2.1","exp10",0,0,"","","System","
Returns 10 to the power of the given argument.
","exp10(x)","- `x` — The exponent. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal*`](/sql-reference/data-types/decimal)
","","Returns 10^x [`Float*`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT exp10(2);
```

```response title=Response
100
```

","1.1","Mathematical"
"25.9.2.1","murmurHash2_32",0,0,"","","System","
Computes the [MurmurHash2](https://github.com/aappleby/smhasher) hash of the input value.

:::note
The calculated hash values may be equal for the same input values of different argument types.
This affects for example integer types of different size, named and unnamed `Tuple` with the same data, `Map` and the corresponding `Array(Tuple(key, value))` type with the same data.
:::
","murmurHash2_32(arg1[, arg2, ...])","- `arg1[, arg2, ...]` — A variable number of input arguments for which to compute the hash. [`Any`](/sql-reference/data-types)
","","Returns the computed hash value of the input arguments. [`UInt32`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT murmurHash2_32(array('e','x','a'), 'mple', 10, toDateTime('2019-06-15 23:00:00')) AS MurmurHash2, toTypeName(MurmurHash2) AS type;
```

```response title=Response
┌─MurmurHash2─┬─type───┐
│  3681770635 │ UInt32 │
└─────────────┴────────┘
```

","18.5","Hash"
"25.9.2.1","toStartOfTenMinutes",0,0,"","","System","
Rounds down a date with time to the start of the nearest ten-minute interval.

:::note
The return type can be configured by setting [`enable_extended_results_for_datetime_functions`](/operations/settings/settings#enable_extended_results_for_datetime_functions).
:::
    ","toStartOfTenMinutes(datetime)","- `datetime` — A date with time. [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)
","","Returns the date with time rounded to the start of the nearest ten-minute interval [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)","**Example**

```sql title=Query
SELECT
    toStartOfTenMinutes(toDateTime('2023-04-21 10:17:00')),
    toStartOfTenMinutes(toDateTime('2023-04-21 10:20:00')),
    toStartOfTenMinutes(toDateTime('2023-04-21 10:23:00'))
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toStartOfTenMinutes(toDateTime('2023-04-21 10:17:00')): 2023-04-21 10:10:00
toStartOfTenMinutes(toDateTime('2023-04-21 10:20:00')): 2023-04-21 10:20:00
toStartOfTenMinutes(toDateTime('2023-04-21 10:23:00')): 2023-04-21 10:20:00
```

","20.1","Dates and Times"
"25.9.2.1","nullInIgnoreSet",0,0,"","","System","","","","","","","",""
"25.9.2.1","arrayZipUnaligned",0,0,"","","System","Combines multiple arrays into a single array, allowing for unaligned arrays (arrays of differing lengths). The resulting array contains the corresponding elements of the source arrays grouped into tuples in the listed order of arguments.","arrayZipUnaligned(arr1, arr2, ..., arrN)","- `arr1, arr2, ..., arrN` — N arrays to combine into a single array. [`Array(T)`](/sql-reference/data-types/array)
","","Returns an array with elements from the source arrays grouped in tuples. Data types in the tuple are the same as types of the input arrays and in the same order as arrays are passed. [`Array(T)`](/sql-reference/data-types/array) or [`Tuple(T1, T2, ...)`](/sql-reference/data-types/tuple)","**Usage example**

```sql title=Query
SELECT arrayZipUnaligned(['a'], [1, 2, 3]);
```

```response title=Response
[('a', 1),(NULL, 2),(NULL, 3)]
```

","20.1","Arrays"
"25.9.2.1","s2CellsIntersect",0,0,"","","System","","","","","","","",""
"25.9.2.1","hilbertEncode",0,0,"","","System","
Calculates code for Hilbert Curve for a list of unsigned integers.

The function has two modes of operation:
- **Simple**
- **Expanded**

**Simple mode**

Accepts up to 2 unsigned integers as arguments and produces a UInt64 code.

**Expanded mode**

Accepts a range mask ([Tuple](../../sql-reference/data-types/tuple.md)) as the
first argument and up to 2 [unsigned integers](../../sql-reference/data-types/int-uint.md)
as other arguments.

Each number in the mask configures the number of bits by which the corresponding
argument will be shifted left, effectively scaling the argument within its range.
    ","-- Simplified mode
hilbertEncode(args)

-- Expanded mode
hilbertEncode(range_mask, args)","- `args` — Up to two `UInt` values or columns of type `UInt`. [`UInt8/16/32/64`](/sql-reference/data-types/int-uint)
- `range_mask` — For the expanded mode, up to two `UInt` values or columns of type `UInt`. [`UInt8/16/32/64`](/sql-reference/data-types/int-uint)
","","Returns a `UInt64` code. [`UInt64`](/sql-reference/data-types/int-uint)","**Simple mode**

```sql title=Query
SELECT hilbertEncode(3, 4)
```

```response title=Response
31
```

**Expanded mode**

```sql title=Query
-- Range expansion can be beneficial when you need a similar distribution for
-- arguments with wildly different ranges (or cardinality).
-- For example: 'IP Address' (0...FFFFFFFF) and 'Country code' (0...FF).
-- Note: tuple size must be equal to the number of the other arguments.
SELECT hilbertEncode((10, 6), 1024, 16)
```

```response title=Response
4031541586602
```

**Single argument**

```sql title=Query
-- For a single argument without a tuple, the function returns the argument
-- itself as the Hilbert index, since no dimensional mapping is needed.
SELECT hilbertEncode(1)
```

```response title=Response
1
```

**Expanded single argument**

```sql title=Query
-- If a single argument is provided with a tuple specifying bit shifts, the function
-- shifts the argument left by the specified number of bits.
SELECT hilbertEncode(tuple(2), 128)
```

```response title=Response
512
```

**Column usage**

```sql title=Query
-- First create the table and insert some data
CREATE TABLE hilbert_numbers(
    n1 UInt32,
    n2 UInt32
)
ENGINE=MergeTree()
ORDER BY n1;
insert into hilbert_numbers (*) values(1, 2);

-- Use column names instead of constants as function arguments
SELECT hilbertEncode(n1, n2) FROM hilbert_numbers;
```

```response title=Response
13
```

","24.6","Encoding"
"25.9.2.1","stringBytesUniq",0,0,"","","System","
Counts the number of distinct bytes in a string.
","stringBytesUniq(s)","- `s` — The string to analyze. [`String`](/sql-reference/data-types/string)
","","Returns the number of distinct bytes in the string. [`UInt16`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT stringBytesUniq('Hello')
```

```response title=Response
┌─stringBytesUniq('Hello')─┐
│                        4 │
└──────────────────────────┘
```

","25.6","String"
"25.9.2.1","uniqThetaUnion",0,0,"","","System","
Two uniqThetaSketch objects to do union calculation(set operation ∪), the result is a new uniqThetaSketch.
    ","uniqThetaUnion(uniqThetaSketch,uniqThetaSketch)","- `uniqThetaSketch` — uniqThetaSketch object. [`Tuple`](/sql-reference/data-types/tuple) or [`Array`](/sql-reference/data-types/array) or [`Date`](/sql-reference/data-types/date) or [`DateTime`](/sql-reference/data-types/datetime) or [`String`](/sql-reference/data-types/string) or [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
","","Returns a new uniqThetaSketch containing the union result. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT finalizeAggregation(uniqThetaUnion(a, b)) AS a_union_b, finalizeAggregation(a) AS a_cardinality, finalizeAggregation(b) AS b_cardinality
FROM
(SELECT arrayReduce('uniqThetaState', [1, 2]) AS a, arrayReduce('uniqThetaState', [2, 3, 4]) AS b);
```

```response title=Response
┌─a_union_b─┬─a_cardinality─┬─b_cardinality─┐
│         4 │             2 │             3 │
└───────────┴───────────────┴───────────────┘
```

","22.9","Other"
"25.9.2.1","URLHierarchy",0,0,"","","System","","","","","","","",""
"25.9.2.1","toFloat64OrNull",0,0,"","","System","
Converts an input value to a value of type [Float64](../data-types/float.md) but returns `NULL` in case of an error.
Like [`toFloat64`](#tofloat64) but returns `NULL` instead of throwing an exception on conversion errors.

Supported arguments:
- Values of type (U)Int*.
- String representations of (U)Int8/16/32/128/256.
- Values of type Float*, including `NaN` and `Inf`.
- String representations of type Float*, including `NaN` and `Inf` (case-insensitive).

Unsupported arguments (return `NULL`):
- String representations of binary and hexadecimal values, e.g. `SELECT toFloat64OrNull('0xc0fe');`.
- Invalid string formats.

See also:
- [`toFloat64`](#toFloat64).
- [`toFloat64OrZero`](#toFloat64OrZero).
- [`toFloat64OrDefault`](#toFloat64OrDefault).
    ","toFloat64OrNull(x)","- `x` — A string representation of a number. [`String`](/sql-reference/data-types/string)
","","Returns a 64-bit Float value if successful, otherwise `NULL`. [`Float64`](/sql-reference/data-types/float) or [`NULL`](/sql-reference/syntax#null)","**Usage example**

```sql title=Query
SELECT
    toFloat64OrNull('42.7'),
    toFloat64OrNull('NaN'),
    toFloat64OrNull('abc')
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toFloat64OrNull('42.7'): 42.7
toFloat64OrNull('NaN'):  nan
toFloat64OrNull('abc'):  \N
```

","1.1","Type Conversion"
"25.9.2.1","arrayZip",0,0,"","","System","Combines multiple arrays into a single array. The resulting array contains the corresponding elements of the source arrays grouped into tuples in the listed order of arguments.","arrayZip(arr1, arr2, ... , arrN)","- `arr1, arr2, ... , arrN` — N arrays to combine into a single array. [`Array(T)`](/sql-reference/data-types/array)
","","Returns an array with elements from the source arrays grouped in tuples. Data types in the tuple are the same as types of the input arrays and in the same order as arrays are passed [`Array(T)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT arrayZip(['a', 'b', 'c'], [5, 2, 1]);
```

```response title=Response
[('a', 5), ('b', 2), ('c', 1)]
```

","20.1","Arrays"
"25.9.2.1","subtractInterval",0,0,"","","System","
Adds a negated interval to another interval or tuple of intervals.

Note: Intervals of the same type will be combined into a single interval. For instance if `toIntervalDay(2)` and `toIntervalDay(1)` are
passed then the result will be `(1)` rather than `(2,1)`.
    ","subtractInterval(interval_1, interval_2)","- `interval_1` — First interval or interval of tuples. [`Interval`](/sql-reference/data-types/int-uint) or [`Tuple(Interval)`](/sql-reference/data-types/tuple)
- `interval_2` — Second interval to be negated. [`Interval`](/sql-reference/data-types/int-uint)
","","Returns a tuple of intervals [`Tuple(T)`](/sql-reference/data-types/tuple)","**Subtract intervals**

```sql title=Query
SELECT subtractInterval(INTERVAL 1 DAY, INTERVAL 1 MONTH);
SELECT subtractInterval((INTERVAL 1 DAY, INTERVAL 1 YEAR), INTERVAL 1 MONTH);
SELECT subtractInterval(INTERVAL 2 DAY, INTERVAL 1 DAY);
```

```response title=Response
┌─subtractInterval(toIntervalDay(1), toIntervalMonth(1))─┐
│ (1,-1)                                                 │
└────────────────────────────────────────────────────────┘
┌─subtractInterval((toIntervalDay(1), toIntervalYear(1)), toIntervalMonth(1))─┐
│ (1,1,-1)                                                                    │
└─────────────────────────────────────────────────────────────────────────────┘
┌─subtractInterval(toIntervalDay(2), toIntervalDay(1))─┐
│ (1)                                                  │
└──────────────────────────────────────────────────────┘
```

","22.11","Dates and Times"
"25.9.2.1","defaultRoles",0,0,"","","System","
Returns an array of default roles for the current user.
    ","defaultRoles()","","","Returns an array of default roles for the current user. [`Array(String)`](/sql-reference/data-types/array)","**Usage example**

```sql title=Query
SELECT defaultRoles();
```

```response title=Response
┌─defaultRoles()─────────────────────────────────┐
│ ['sql-console-role:jane.smith@clickhouse.com'] │
└────────────────────────────────────────────────┘
```

","21.9","Other"
"25.9.2.1","arrayFilter",0,0,"","","System","Returns an array containing only the elements in the source array for which a lambda function returns true.","arrayFilter(func(x[, y1, ..., yN]), source_arr[, cond1_arr, ... , condN_arr])]","- `func(x[, y1, ..., yN])` — A lambda function which operates on elements of the source array (`x`) and condition arrays (`y`). [`Lambda function`](/sql-reference/functions/overview#arrow-operator-and-lambda)
- `source_arr` — The source array to process. [`Array(T)`](/sql-reference/data-types/array)
- `[, cond1_arr, ... , condN_arr]` — Optional. N condition arrays providing additional arguments to the lambda function. [`Array(T)`](/sql-reference/data-types/array)
","","Returns a subset of the source array [`Array(T)`](/sql-reference/data-types/array)","**Example 1**

```sql title=Query
SELECT arrayFilter(x -> x LIKE '%World%', ['Hello', 'abc World']) AS res
```

```response title=Response
['abc World']
```

**Example 2**

```sql title=Query
SELECT
    arrayFilter(
        (i, x) -> x LIKE '%World%',
        arrayEnumerate(arr),
        ['Hello', 'abc World'] AS arr)
    AS res
```

```response title=Response
[2]
```

","1.1","Arrays"
"25.9.2.1","multiIf",0,0,"","","System","
Allows writing the [`CASE`](/sql-reference/operators#conditional-expression) operator more compactly in the query.
Evaluates each condition in order. For the first condition that is true (non-zero and not `NULL`), returns the corresponding branch value.
If none of the conditions are true, returns the `else` value.

Setting [`short_circuit_function_evaluation`](/operations/settings/settings#short_circuit_function_evaluation) controls
whether short-circuit evaluation is used. If enabled, the `then_i` expression is evaluated only on rows where
`((NOT cond_1) AND ... AND (NOT cond_{i-1}) AND cond_i)` is true.

For example, with short-circuit evaluation, no division-by-zero exception is thrown when executing the following query:

```sql
SELECT multiIf(number = 2, intDiv(1, number), number = 5) FROM numbers(10)
```

All branch and else expressions must have a common supertype. `NULL` conditions are treated as false.
    ","multiIf(cond_1, then_1, cond_2, then_2, ..., else)","- `cond_N` — The N-th evaluated condition which controls if `then_N` is returned. [`UInt8`](/sql-reference/data-types/int-uint) or [`Nullable(UInt8)`](/sql-reference/data-types/nullable) or [`NULL`](/sql-reference/syntax#null)
- `then_N` — The result of the function when `cond_N` is true. - `else` — The result of the function if none of the conditions is true. ","","Returns the result of `then_N` for matching `cond_N`, otherwise returns the `else` condition.","**Example usage**

```sql title=Query
CREATE TABLE LEFT_RIGHT (left Nullable(UInt8), right Nullable(UInt8)) ENGINE = Memory;
INSERT INTO LEFT_RIGHT VALUES (NULL, 4), (1, 3), (2, 2), (3, 1), (4, NULL);

SELECT
    left,
    right,
    multiIf(left < right, 'left is smaller', left > right, 'left is greater', left = right, 'Both equal', 'Null value') AS result
FROM LEFT_RIGHT;
```

```response title=Response
┌─left─┬─right─┬─result──────────┐
│ ᴺᵁᴸᴸ │     4 │ Null value      │
│    1 │     3 │ left is smaller │
│    2 │     2 │ Both equal      │
│    3 │     1 │ left is greater │
│    4 │  ᴺᵁᴸᴸ │ Null value      │
└──────┴───────┴─────────────────┘
```

","1.1","Conditional"
"25.9.2.1","caseWithExpression",0,0,"","","System","","","","","","","",""
"25.9.2.1","readWKTRing",0,0,"","","System","","","","","","","",""
"25.9.2.1","nested",0,0,"","","System","
This is a function used internally by the ClickHouse engine and not meant to be used directly.

Returns the array of tuples from multiple arrays.

The first argument must be a constant array of Strings determining the names of the resulting Tuple.
The other arguments must be arrays of the same size.
","","","","","**nested**

```sql title=Query
SELECT nested(['keys', 'values'], ['key_1', 'key_2'], ['value_1','value_2'])
```

```response title=Response

```

","","Other"
"25.9.2.1","toIPv4OrNull",0,0,"","","System","
Converts an input value to a value of type `IPv4` but returns `NULL` in case of an error.
Like [`toIPv4`](#toIPv4) but returns `NULL` instead of throwing an exception on conversion errors.

Supported arguments:
- String representations of IPv4 addresses in dotted decimal notation.
- Integer representations of IPv4 addresses.

Unsupported arguments (return `NULL`):
- Invalid IP address formats.
- IPv6 addresses.
- Out-of-range values.
- Malformed addresses.
    ","toIPv4OrNull(x)","- `x` — A string or integer representation of an IPv4 address. [`String`](/sql-reference/data-types/string) or [`Integer`](/sql-reference/data-types/int-uint)
","","Returns an IPv4 address if successful, otherwise `NULL`. [`IPv4`](/sql-reference/data-types/ipv4) or [`NULL`](/sql-reference/syntax#null)","**Usage example**

```sql title=Query
SELECT
    toIPv4OrNull('192.168.1.1') AS valid_ip,
    toIPv4OrNull('invalid.ip') AS invalid_ip
```

```response title=Response
┌─valid_ip────┬─invalid_ip─┐
│ 192.168.1.1 │       ᴺᵁᴸᴸ │
└─────────────┴────────────┘
```

","22.3","IP Address"
"25.9.2.1","readWKTLineString",0,0,"","","System","
Parses a Well-Known Text (WKT) representation of a LineString geometry and returns it in the internal ClickHouse format.
","readWKTLineString(wkt_string)","- `wkt_string` — The input WKT string representing a LineString geometry. [`String`](/sql-reference/data-types/string)
","","The function returns a ClickHouse internal representation of the linestring geometry.","**first call**

```sql title=Query
SELECT readWKTLineString('LINESTRING (1 1, 2 2, 3 3, 1 1)');
```

```response title=Response
┌─readWKTLineString('LINESTRING (1 1, 2 2, 3 3, 1 1)')─┐
│ [(1,1),(2,2),(3,3),(1,1)]                            │
└──────────────────────────────────────────────────────┘
```

**second call**

```sql title=Query
SELECT toTypeName(readWKTLineString('LINESTRING (1 1, 2 2, 3 3, 1 1)'));
```

```response title=Response
┌─toTypeName(readWKTLineString('LINESTRING (1 1, 2 2, 3 3, 1 1)'))─┐
│ LineString                                                       │
└──────────────────────────────────────────────────────────────────┘
```

","","UUID"
"25.9.2.1","throwIf",0,0,"","","System","
Throw an exception if argument x is true.
To use the `error_code` argument, configuration parameter `allow_custom_error_code_in_throw` must be enabled.
","throwIf(x[, message[, error_code]])","- `x` — The condition to check. [`Any`](/sql-reference/data-types)
- `message` — Optional. Custom error message. [`const String`](/sql-reference/data-types/string)
- `error_code` — Optional. Custom error code. [`const Int8/16/32`](/sql-reference/data-types/int-uint)
","","Returns `0` if the condition is false, throws an exception if the condition is true. [`UInt8`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT throwIf(number = 3, 'Too many') FROM numbers(10);
```

```response title=Response
↙ Progress: 0.00 rows, 0.00 B (0.00 rows/s., 0.00 B/s.) Received exception from server (version 19.14.1):
Code: 395. DB::Exception: Received from localhost:9000. DB::Exception: Too many.
```

","1.1","Other"
"25.9.2.1","uniqThetaIntersect",0,0,"","","System","
Two uniqThetaSketch objects to do intersect calculation(set operation ∩), the result is a new uniqThetaSketch.
    ","uniqThetaIntersect(uniqThetaSketch,uniqThetaSketch)","- `uniqThetaSketch` — uniqThetaSketch object. [`Tuple`](/sql-reference/data-types/tuple) or [`Array`](/sql-reference/data-types/array) or [`Date`](/sql-reference/data-types/date) or [`DateTime`](/sql-reference/data-types/datetime) or [`String`](/sql-reference/data-types/string) or [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal)
","","A new uniqThetaSketch containing the intersect result. [`UInt64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT finalizeAggregation(uniqThetaIntersect(a, b)) AS a_intersect_b, finalizeAggregation(a) AS a_cardinality, finalizeAggregation(b) AS b_cardinality
FROM
(SELECT arrayReduce('uniqThetaState', [1, 2]) AS a, arrayReduce('uniqThetaState', [2, 3, 4]) AS b);
```

```response title=Response
┌─a_intersect_b─┬─a_cardinality─┬─b_cardinality─┐
│             1 │             2 │             3 │
└───────────────┴───────────────┴───────────────┘
```

","22.9","Other"
"25.9.2.1","detectLanguageUnknown",0,0,"","","System","","","","","","","",""
"25.9.2.1","and",0,0,"","","System","
Calculates the logical conjunction of two or more values.

Setting [`short_circuit_function_evaluation`](/operations/settings/settings#short_circuit_function_evaluation) controls whether short-circuit evaluation is used.
If enabled, `val_i` is evaluated only if `(val_1 AND val_2 AND ... AND val_{i-1})` is `true`.

For example, with short-circuit evaluation, no division-by-zero exception is thrown when executing the query `SELECT and(number = 2, intDiv(1, number)) FROM numbers(5)`.
Zero as an argument is considered `false`, non-zero values are considered `true`.
","and(val1, val2[, ...])","- `val1, val2[, ...]` — List of at least two values. [`Nullable((U)Int*)`](/sql-reference/data-types/nullable) or [`Nullable(Float*)`](/sql-reference/data-types/nullable)
","","Returns:
- `0`, if at least one argument evaluates to `false`
- `NULL`, if no argument evaluates to `false` and at least one argument is `NULL`
- `1`, otherwise
         [`Nullable(UInt8)`](/sql-reference/data-types/nullable)","**Basic usage**

```sql title=Query
SELECT and(0, 1, -2);
```

```response title=Response
0
```

**With NULL**

```sql title=Query
SELECT and(NULL, 1, 10, -2);
```

```response title=Response
ᴺᵁᴸᴸ
```

","1.1","Logical"
"25.9.2.1","jaroSimilarity",0,0,"","","System","
Calculates the [Jaro similarity](https://en.wikipedia.org/wiki/Jaro%E2%80%93Winkler_distance#Jaro_similarity) between two byte strings.
","jaroSimilarity(s1, s2)","- `s1` — First input string. [`String`](/sql-reference/data-types/string)
- `s2` — Second input string. [`String`](/sql-reference/data-types/string)
","","Returns the Jaro similarity between the two strings. [`Float64`](/sql-reference/data-types/float)","**Usage example**

```sql title=Query
SELECT jaroSimilarity('clickhouse', 'click')
```

```response title=Response
┌─jaroSimilarity('clickhouse', 'click')─┐
│                    0.8333333333333333 │
└───────────────────────────────────────┘
```

","24.1","String"
"25.9.2.1","h3IsResClassIII",0,0,"","","System","","","","","","","",""
"25.9.2.1","cutQueryStringAndFragment",0,0,"","","System","
Removes the query string and fragment identifier, including the question mark and number sign, from a URL.
    ","cutQueryStringAndFragment(url)","- `url` — URL. [`String`](/sql-reference/data-types/string)
","","Returns the URL with query string and fragment identifier removed. [`String`](/sql-reference/data-types/string)","**Usage example**

```sql title=Query
SELECT cutQueryStringAndFragment('http://example.com/path?query=value&param=123#fragment');
```

```response title=Response
┌─cutQueryStringAndFragment('http://example.com/path?query=value&param=123#fragment')─┐
│ http://example.com/path                                                             │
└─────────────────────────────────────────────────────────────────────────────────────┘
```

","1.1","URL"
"25.9.2.1","toUInt256OrNull",0,0,"","","System","
Like [`toUInt256`](#toUInt256), this function converts an input value to a value of type [`UInt256`](../data-types/int-uint.md) but returns `NULL` in case of an error.

Supported arguments:
- String representations of (U)Int*.

Unsupported arguments (return `NULL`):
- String representations of Float* values, including `NaN` and `Inf`.
- String representations of binary and hexadecimal values, e.g. `SELECT toUInt256OrNull('0xc0fe');`.

:::note
If the input value cannot be represented within the bounds of [`UInt256`](../data-types/int-uint.md), overflow or underflow of the result occurs.
This is not considered an error.
:::

See also:
- [`toUInt256`](#toUInt256).
- [`toUInt256OrZero`](#toUInt256OrZero).
- [`toUInt256OrDefault`](#toUInt256OrDefault).
    ","toUInt256OrNull(x)","- `x` — A String representation of a number. [`String`](/sql-reference/data-types/string)
","","Returns a value of type UInt256, otherwise `NULL` if the conversion is unsuccessful. [`UInt256`](/sql-reference/data-types/int-uint) or [`NULL`](/sql-reference/syntax#null)","**Usage example**

```sql title=Query
SELECT
    toUInt256OrNull('256'),
    toUInt256OrNull('abc')
FORMAT Vertical
```

```response title=Response
Row 1:
──────
toUInt256OrNull('256'): 256
toUInt256OrNull('abc'): \N
```

","20.8","Type Conversion"
"25.9.2.1","arrayFirstOrNull",0,0,"","","System","
Returns the first element in the source array for which `func(x[, y1, y2, ... yN])` returns true, otherwise it returns `NULL`.
    ","arrayFirstOrNull(func(x[, y1, ..., yN]), source_arr[, cond1_arr, ... , condN_arr])","- `func(x[, y1, ..., yN])` — A lambda function which operates on elements of the source array (`x`) and condition arrays (`y`). [`Lambda function`](/sql-reference/functions/overview#arrow-operator-and-lambda)
- `source_arr` — The source array to process. [`Array(T)`](/sql-reference/data-types/array)
- `[, cond1_arr, ... , condN_arr]` — Optional. N condition arrays providing additional arguments to the lambda function. [`Array(T)`](/sql-reference/data-types/array)
","","Returns the first element of the source array for which `func` is true, otherwise returns `NULL`.","**Usage example**

```sql title=Query
SELECT arrayFirstOrNull(x, y -> x=y, ['a', 'b', 'c'], ['c', 'b', 'a'])
```

```response title=Response
b
```

**No match**

```sql title=Query
SELECT arrayFirstOrNull(x, y -> x=y, [0, 1, 2], [3, 3, 3]) AS res, toTypeName(res)
```

```response title=Response
NULL Nullable(UInt8)
```

","1.1","Arrays"
"25.9.2.1","addMonths",0,0,"","","System","
Adds a specified number of months to a date, a date with time or a string-encoded date or date with time.
    ","addMonths(datetime, num)","- `datetime` — Date or date with time to add specified number of months to. [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64) or [`String`](/sql-reference/data-types/string)
- `num` — Number of months to add. [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float)
","","Returns `datetime` plus `num` months [`Date`](/sql-reference/data-types/date) or [`Date32`](/sql-reference/data-types/date32) or [`DateTime`](/sql-reference/data-types/datetime) or [`DateTime64`](/sql-reference/data-types/datetime64)","**Add months to different date types**

```sql title=Query
WITH
    toDate('2024-01-01') AS date,
    toDateTime('2024-01-01 00:00:00') AS date_time,
    '2024-01-01 00:00:00' AS date_time_string
SELECT
    addMonths(date, 6) AS add_months_with_date,
    addMonths(date_time, 6) AS add_months_with_date_time,
    addMonths(date_time_string, 6) AS add_months_with_date_time_string
```

```response title=Response
┌─add_months_with_date─┬─add_months_with_date_time─┬─add_months_with_date_time_string─┐
│           2024-07-01 │       2024-07-01 00:00:00 │          2024-07-01 00:00:00.000 │
└──────────────────────┴───────────────────────────┴──────────────────────────────────┘
```

**Using alternative INTERVAL syntax**

```sql title=Query
SELECT dateAdd('1998-06-16'::Date, INTERVAL 10 month)
```

```response title=Response
┌─plus(CAST('1⋯lMonth(10))─┐
│               1999-04-16 │
└──────────────────────────┘
```

","1.1","Dates and Times"
"25.9.2.1","toInt64OrZero",0,0,"","","System","
Converts an input value to type [Int64](/en/sql-reference/data-types/int-uint) but returns `0` in case of an error.
Like [`toInt64`](#toint64) but returns `0` instead of throwing an exception.

See also:
- [`toInt64`](#toInt64).
- [`toInt64OrNull`](#toInt64OrNull).
- [`toInt64OrDefault`](#toInt64OrDefault).
    ","toInt64OrZero(x)","- `x` — Input value to convert. [`String`](/sql-reference/data-types/string) or [`FixedString`](/sql-reference/data-types/fixedstring) or [`Float*`](/sql-reference/data-types/float) or [`Decimal`](/sql-reference/data-types/decimal) or [`(U)Int*`](/sql-reference/data-types/int-uint) or [`Date`](/sql-reference/data-types/date) or [`DateTime`](/sql-reference/data-types/datetime)
","","Returns the converted input value, otherwise `0` if conversion fails. [`Int64`](/sql-reference/data-types/int-uint)","**Usage example**

```sql title=Query
SELECT toInt64OrZero('123')
```

```response title=Response
123
```

**Failed conversion returns zero**

```sql title=Query
SELECT toInt64OrZero('abc')
```

```response title=Response
0
```

","1.1","Type Conversion"
"25.9.2.1","arrayAll",0,0,"","","System","
Returns `1` if lambda `func(x [, y1, y2, ... yN])` returns true for all elements. Otherwise, it returns `0`.
","arrayAll(func(x[, y1, ..., yN]), source_arr[, cond1_arr, ... , condN_arr])","- `func(x[, y1, ..., yN])` — A lambda function which operates on elements of the source array (`x`) and condition arrays (`y`). [`Lambda function`](/sql-reference/functions/overview#arrow-operator-and-lambda)
- `source_arr` — The source array to process. [`Array(T)`](/sql-reference/data-types/array)
- `cond1_arr, ...` — Optional. N condition arrays providing additional arguments to the lambda function. [`Array(T)`](/sql-reference/data-types/array)
","","Returns `1` if the lambda function returns true for all elements, `0` otherwise [`UInt8`](/sql-reference/data-types/int-uint)","**All elements match**

```sql title=Query
SELECT arrayAll(x, y -> x=y, [1, 2, 3], [1, 2, 3])
```

```response title=Response
1
```

**Not all elements match**

```sql title=Query
SELECT arrayAll(x, y -> x=y, [1, 2, 3], [1, 1, 1])
```

```response title=Response
0
```

","1.1","Arrays"
"25.9.2.1","truncate",0,1,"trunc","","System","","","","","","","",""
"25.9.2.1","ceiling",0,1,"ceil","","System","","","","","","","",""
"25.9.2.1","FROM_UNIXTIME",0,1,"fromUnixTimestamp","","System","","","","","","","",""
"25.9.2.1","DAY",0,1,"toDayOfMonth","","System","","","","","","","",""
"25.9.2.1","HOUR",0,1,"toHour","","System","","","","","","","",""
"25.9.2.1","fullHostName",0,0,"FQDN","","System","","","","","","","",""
"25.9.2.1","SVG",0,0,"svg","","System","","","","","","","",""
"25.9.2.1","connection_id",0,1,"connectionID","","System","","","","","","","",""
"25.9.2.1","INET6_ATON",0,1,"IPv6StringToNum","","System","","","","","","","",""
"25.9.2.1","INET_ATON",0,1,"IPv4StringToNum","","System","","","","","","","",""
"25.9.2.1","levenshteinDistanceUTF8",0,0,"editDistanceUTF8","","System","","","","","","","",""
"25.9.2.1","levenshteinDistance",0,0,"editDistance","","System","","","","","","","",""
"25.9.2.1","mismatches",0,0,"byteHammingDistance","","System","","","","","","","",""
"25.9.2.1","LAST_DAY",0,1,"toLastDayOfMonth","","System","","","","","","","",""
"25.9.2.1","caseWithExpr",0,0,"caseWithExpression","","System","","","","","","","",""
"25.9.2.1","initial_query_start_time",0,1,"initialQueryStartTime","","System","","","","","","","",""
"25.9.2.1","INET_NTOA",0,1,"IPv4NumToString","","System","","","","","","","",""
"25.9.2.1","current_database",0,1,"currentDatabase","","System","","","","","","","",""
"25.9.2.1","SCHEMA",0,1,"currentDatabase","","System","","","","","","","",""
"25.9.2.1","replace",0,1,"replaceAll","","System","","","","","","","",""
"25.9.2.1","DATE_TRUNC",0,1,"dateTrunc","","System","","","","","","","",""
"25.9.2.1","timestampDiff",0,0,"dateDiff","","System","","","","","","","",""
"25.9.2.1","toTimeZone",0,0,"toTimezone","","System","","","","","","","",""
"25.9.2.1","timeZone",0,1,"timezone","","System","","","","","","","",""
"25.9.2.1","INET6_NTOA",0,1,"IPv6NumToString","","System","","","","","","","",""
"25.9.2.1","JSON_ARRAY_LENGTH",0,1,"JSONArrayLength","","System","","","","","","","",""
"25.9.2.1","CHAR_LENGTH",0,1,"lengthUTF8","","System","","","","","","","",""
"25.9.2.1","SUBSTRING_INDEX",0,1,"substringIndex","","System","","","","","","","",""
"25.9.2.1","instr",0,1,"positionCaseInsensitive","","System","","","","","","","",""
"25.9.2.1","byteSlice",0,1,"substring","","System","","","","","","","",""
"25.9.2.1","mid",0,1,"substring","","System","","","","","","","",""
"25.9.2.1","curdate",0,1,"today","","System","","","","","","","",""
"25.9.2.1","str_to_map",0,1,"extractKeyValuePairs","","System","","","","","","","",""
"25.9.2.1","splitByAlpha",0,0,"alphaTokens","","System","","","","","","","",""
"25.9.2.1","ST_MPolyFromWKB",0,0,"readWKBMultiPolygon","","System","","","","","","","",""
"25.9.2.1","REGEXP_REPLACE",0,1,"replaceRegexpAll","","System","","","","","","","",""
"25.9.2.1","ST_PolyFromWKB",0,0,"readWKBPolygon","","System","","","","","","","",""
"25.9.2.1","ST_MLineFromWKB",0,0,"readWKBMultiLineString","","System","","","","","","","",""
"25.9.2.1","current_date",0,1,"today","","System","","","","","","","",""
"25.9.2.1","ST_LineFromWKB",0,0,"readWKBLineString","","System","","","","","","","",""
"25.9.2.1","date_bin",0,1,"toStartOfInterval","","System","","","","","","","",""
"25.9.2.1","minSampleSizeContinous",0,0,"minSampleSizeContinuous","","System","","","","","","","",""
"25.9.2.1","MILLISECOND",0,1,"toMillisecond","","System","","","","","","","",""
"25.9.2.1","power",0,1,"pow","","System","","","","","","","",""
"25.9.2.1","modOrNull",0,1,"moduloOrNull","","System","","","","","","","",""
"25.9.2.1","FORMAT_BYTES",0,1,"formatReadableSize","","System","","","","","","","",""
"25.9.2.1","isASCII",0,0,"isValidASCII","","System","","","","","","","",""
"25.9.2.1","SECOND",0,1,"toSecond","","System","","","","","","","",""
"25.9.2.1","normalizeLinf",0,1,"LinfNormalize","","System","","","","","","","",""
"25.9.2.1","initial_query_id",0,1,"initialQueryID","","System","","","","","","","",""
"25.9.2.1","normalizeL2",0,1,"L2Normalize","","System","","","","","","","",""
"25.9.2.1","current_query_id",0,1,"currentQueryID","","System","","","","","","","",""
"25.9.2.1","REGEXP_EXTRACT",0,1,"regexpExtract","","System","","","","","","","",""
"25.9.2.1","normalizeL1",0,1,"L1Normalize","","System","","","","","","","",""
"25.9.2.1","CHARACTER_LENGTH",0,1,"lengthUTF8","","System","","","","","","","",""
"25.9.2.1","TIMESTAMP_DIFF",0,0,"dateDiff","","System","","","","","","","",""
"25.9.2.1","visitParamExtractFloat",0,0,"simpleJSONExtractFloat","","System","","","","","","","",""
"25.9.2.1","substr",0,1,"substring","","System","","","","","","","",""
"25.9.2.1","distanceLinf",0,1,"LinfDistance","","System","","","","","","","",""
"25.9.2.1","partitionID",0,0,"partitionId","","System","","","","","","","",""
"25.9.2.1","distanceL2Squared",0,1,"L2SquaredDistance","","System","","","","","","","",""
"25.9.2.1","distanceL1",0,1,"L1Distance","","System","","","","","","","",""
"25.9.2.1","mapContains",0,0,"mapContainsKey","","System","","","","","","","",""
"25.9.2.1","mapFromString",0,0,"extractKeyValuePairs","","System","","","","","","","",""
"25.9.2.1","TO_BASE64",0,1,"base64Encode","","System","","","","","","","",""
"25.9.2.1","normL1",0,1,"L1Norm","","System","","","","","","","",""
"25.9.2.1","yandexConsistentHash",0,0,"kostikConsistentHash","","System","","","","","","","",""
"25.9.2.1","scalarProduct",0,1,"dotProduct","","System","","","","","","","",""
"25.9.2.1","DAYOFMONTH",0,1,"toDayOfMonth","","System","","","","","","","",""
"25.9.2.1","vectorDifference",0,1,"tupleMinus","","System","","","","","","","",""
"25.9.2.1","vectorSum",0,1,"tuplePlus","","System","","","","","","","",""
"25.9.2.1","DATE_DIFF",0,0,"dateDiff","","System","","","","","","","",""
"25.9.2.1","distanceL2",0,1,"L2Distance","","System","","","","","","","",""
"25.9.2.1","positive_modulo_or_null",0,1,"positiveModuloOrNull","","System","","","","","","","",""
"25.9.2.1","lcase",0,1,"lower","","System","","","","","","","",""
"25.9.2.1","user",0,1,"currentUser","","System","","","","","","","",""
"25.9.2.1","normL2Squared",0,1,"L2SquaredNorm","","System","","","","","","","",""
"25.9.2.1","hostname",0,0,"hostName","","System","","","","","","","",""
"25.9.2.1","caseWithoutExpression",0,0,"multiIf","","System","","","","","","","",""
"25.9.2.1","concat_ws",0,1,"concatWithSeparator","","System","","","","","","","",""
"25.9.2.1","date_diff",0,0,"dateDiff","","System","","","","","","","",""
"25.9.2.1","time_bucket",0,1,"toStartOfInterval","","System","","","","","","","",""
"25.9.2.1","rand32",0,0,"rand","","System","","","","","","","",""
"25.9.2.1","FROM_BASE64",0,1,"base64Decode","","System","","","","","","","",""
"25.9.2.1","extractAllGroups",0,0,"extractAllGroupsVertical","","System","","","","","","","",""
"25.9.2.1","UTC_timestamp",0,1,"UTCTimestamp","","System","","","","","","","",""
"25.9.2.1","ln",0,1,"log","","System","","","","","","","",""
"25.9.2.1","distanceLp",0,1,"LpDistance","","System","","","","","","","",""
"25.9.2.1","QUARTER",0,1,"toQuarter","","System","","","","","","","",""
"25.9.2.1","current_timestamp",0,1,"now","","System","","","","","","","",""
"25.9.2.1","query_id",0,1,"queryID","","System","","","","","","","",""
"25.9.2.1","positive_modulo",0,1,"positiveModulo","","System","","","","","","","",""
"25.9.2.1","MAP_FROM_ARRAYS",0,0,"mapFromArrays","","System","","","","","","","",""
"25.9.2.1","normLinf",0,1,"LinfNorm","","System","","","","","","","",""
"25.9.2.1","visitParamExtractInt",0,0,"simpleJSONExtractInt","","System","","","","","","","",""
"25.9.2.1","sqid",0,0,"sqidEncode","","System","","","","","","","",""
"25.9.2.1","normLp",0,1,"LpNorm","","System","","","","","","","",""
"25.9.2.1","current_schemas",0,1,"currentSchemas","","System","","","","","","","",""
"25.9.2.1","current_user",0,1,"currentUser","","System","","","","","","","",""
"25.9.2.1","TO_UNIXTIME",0,1,"parseDateTime","","System","","","","","","","",""
"25.9.2.1","OCTET_LENGTH",0,1,"length","","System","","","","","","","",""
"25.9.2.1","timeZoneOf",0,0,"timezoneOf","","System","","","","","","","",""
"25.9.2.1","visitParamHas",0,0,"simpleJSONHas","","System","","","","","","","",""
"25.9.2.1","timestamp_diff",0,0,"dateDiff","","System","","","","","","","",""
"25.9.2.1","timeZoneOffset",0,0,"timezoneOffset","","System","","","","","","","",""
"25.9.2.1","normalizeLp",0,1,"LpNormalize","","System","","","","","","","",""
"25.9.2.1","yearweek",0,1,"toYearWeek","","System","","","","","","","",""
"25.9.2.1","visitParamExtractUInt",0,0,"simpleJSONExtractUInt","","System","","","","","","","",""
"25.9.2.1","week",0,1,"toWeek","","System","","","","","","","",""
"25.9.2.1","trim",0,0,"trimBoth","","System","","","","","","","",""
"25.9.2.1","pmodOrNull",0,1,"positiveModuloOrNull","","System","","","","","","","",""
"25.9.2.1","rtrim",0,0,"trimRight","","System","","","","","","","",""
"25.9.2.1","visitParamExtractBool",0,0,"simpleJSONExtractBool","","System","","","","","","","",""
"25.9.2.1","flatten",0,1,"arrayFlatten","","System","","","","","","","",""
"25.9.2.1","to_utc_timestamp",0,1,"toUTCTimestamp","","System","","","","","","","",""
"25.9.2.1","DATABASE",0,1,"currentDatabase","","System","","","","","","","",""
"25.9.2.1","width_bucket",0,1,"widthBucket","","System","","","","","","","",""
"25.9.2.1","MINUTE",0,1,"toMinute","","System","","","","","","","",""
"25.9.2.1","jsonMergePatch",0,0,"JSONMergePatch","","System","","","","","","","",""
"25.9.2.1","ltrim",0,0,"trimLeft","","System","","","","","","","",""
"25.9.2.1","DAYOFYEAR",0,1,"toDayOfYear","","System","","","","","","","",""
"25.9.2.1","from_utc_timestamp",0,1,"fromUTCTimestamp","","System","","","","","","","",""
"25.9.2.1","TO_DAYS",0,1,"toDaysSinceYearZero","","System","","","","","","","",""
"25.9.2.1","str_to_date",0,1,"parseDateTimeOrNull","","System","","","","","","","",""
"25.9.2.1","toStartOfFiveMinute",0,0,"toStartOfFiveMinutes","","System","","","","","","","",""
"25.9.2.1","ucase",0,1,"upper","","System","","","","","","","",""
"25.9.2.1","rpad",0,1,"rightPad","","System","","","","","","","",""
"25.9.2.1","mod",0,1,"modulo","","System","","","","","","","",""
"25.9.2.1","MONTH",0,1,"toMonth","","System","","","","","","","",""
"25.9.2.1","YEAR",0,1,"toYear","","System","","","","","","","",""
"25.9.2.1","serverTimeZone",0,0,"serverTimezone","","System","","","","","","","",""
"25.9.2.1","visitParamExtractRaw",0,0,"simpleJSONExtractRaw","","System","","","","","","","",""
"25.9.2.1","arrayPRAUC",0,0,"arrayAUCPR","","System","","","","","","","",""
"25.9.2.1","arrayAUC",0,0,"arrayROCAUC","","System","","","","","","","",""
"25.9.2.1","REGEXP_MATCHES",0,1,"match","","System","","","","","","","",""
"25.9.2.1","visitParamExtractString",0,0,"simpleJSONExtractString","","System","","","","","","","",""
"25.9.2.1","FROM_DAYS",0,1,"fromDaysSinceYearZero","","System","","","","","","","",""
"25.9.2.1","pmod",0,1,"positiveModulo","","System","","","","","","","",""
"25.9.2.1","ST_PointFromWKB",0,0,"readWKBPoint","","System","","","","","","","",""
"25.9.2.1","normL2",0,1,"L2Norm","","System","","","","","","","",""
"25.9.2.1","DATE_FORMAT",0,1,"formatDateTime","","System","","","","","","","",""
"25.9.2.1","caseWithoutExpr",0,0,"multiIf","","System","","","","","","","",""
"25.9.2.1","lpad",0,1,"leftPad","","System","","","","","","","",""
"25.9.2.1","DAYOFWEEK",0,1,"toDayOfWeek","","System","","","","","","","",""
"25.9.2.1","exponentialTimeDecayedCount",1,0,"","","System","","","","","","","",""
"25.9.2.1","exponentialTimeDecayedMax",1,0,"","","System","","","","","","","",""
"25.9.2.1","lead",1,0,"","","System","","","","","","","",""
"25.9.2.1","lag",1,0,"","","System","","","","","","","",""
"25.9.2.1","lagInFrame",1,0,"","","System","","","","","","","",""
"25.9.2.1","nth_value",1,1,"","","System","","","","","","","",""
"25.9.2.1","ntile",1,1,"","","System","","","","","","","",""
"25.9.2.1","row_number",1,1,"","","System","","","","","","","",""
"25.9.2.1","percentRank",1,0,"","","System","","","","","","","",""
"25.9.2.1","timeSeriesResetsToGrid",1,0,"","","System","","","","","","","",""
"25.9.2.1","timeSeriesPredictLinearToGrid",1,0,"","","System","","","","","","","",""
"25.9.2.1","timeSeriesDerivToGrid",1,0,"","","System","","","","","","","",""
"25.9.2.1","timeSeriesInstantDeltaToGrid",1,0,"","","System","","","","","","","",""
"25.9.2.1","largestTriangleThreeBuckets",1,0,"","","System","","","","","","","",""
"25.9.2.1","flameGraph",1,0,"","","System","","","","","","","",""
"25.9.2.1","exponentialMovingAverage",1,0,"","","System","","","","","","","",""
"25.9.2.1","nothingUInt64",1,0,"","","System","","","","","","","",""
"25.9.2.1","nothingNull",1,0,"","","System","","","","","","","",""
"25.9.2.1","nothing",1,0,"","","System","","","","","","","",""
"25.9.2.1","singleValueOrNull",1,0,"","","System","","","","","","","",""
"25.9.2.1","meanZTest",1,0,"","","System","","","","","","","",""
"25.9.2.1","analysisOfVariance",1,1,"","","System","","","","","","","",""
"25.9.2.1","studentTTest",1,0,"","","System","","","","","","","",""
"25.9.2.1","timeSeriesInstantRateToGrid",1,0,"","","System","","","","","","","",""
"25.9.2.1","rankCorr",1,0,"","","System","","","","","","","",""
"25.9.2.1","aggThrow",1,0,"","","System","","","","","","","",""
"25.9.2.1","categoricalInformationValue",1,0,"","","System","","","","","","","",""
"25.9.2.1","groupArrayMovingSum",1,0,"","","System","","","","","","","",""
"25.9.2.1","simpleLinearRegression",1,0,"","","System","","","","","","","",""
"25.9.2.1","entropy",1,0,"","","System","","","","","","","",""
"25.9.2.1","stochasticLogisticRegression",1,0,"","","System","","","","","","","",""
"25.9.2.1","histogram",1,0,"","","System","","","","","","","",""
"25.9.2.1","mannWhitneyUTest",1,0,"","","System","","","","","","","",""
"25.9.2.1","maxIntersections",1,0,"","","System","","","","","","","",""
"25.9.2.1","groupBitmapXor",1,0,"","","System","","","","","","","",""
"25.9.2.1","cramersVBiasCorrected",1,0,"","","System","","","","","","","",""
"25.9.2.1","contingency",1,0,"","","System","","","","","","","",""
"25.9.2.1","theilsU",1,0,"","","System","","","","","","","",""
"25.9.2.1","groupBitmapAnd",1,0,"","","System","","","","","","","",""
"25.9.2.1","cramersV",1,0,"","","System","","","","","","","",""
"25.9.2.1","groupBitXor",1,0,"","","System","","","","","","","",""
"25.9.2.1","groupBitAnd",1,0,"","","System","","","","","","","",""
"25.9.2.1","approx_top_sum",1,1,"","","System","","","","","","","",""
"25.9.2.1","exponentialTimeDecayedSum",1,0,"","","System","","","","","","","",""
"25.9.2.1","topKWeighted",1,0,"","","System","","","","","","","",""
"25.9.2.1","topK",1,0,"","","System","","","","","","","",""
"25.9.2.1","uniqUpTo",1,0,"","","System","","","","","","","",""
"25.9.2.1","stochasticLinearRegression",1,0,"","","System","","","","","","","",""
"25.9.2.1","uniqCombined64",1,0,"","","System","","","","","","","",""
"25.9.2.1","intervalLengthSum",1,0,"","","System","
Takes multiple numeric ranges and calculates the total length when all overlapping parts are combined into a single unified range.

:::note
Arguments must be of the same data type.
Otherwise, an exception will be thrown.
:::
    ","intervalLengthSum(start, end)","- `start` — The starting value of the interval. [`(U)Int32/64`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`DateTime`](/sql-reference/data-types/datetime) or [`Date`](/sql-reference/data-types/date)
- `end` — The ending value of the interval. [`(U)Int32/64`](/sql-reference/data-types/int-uint) or [`Float*`](/sql-reference/data-types/float) or [`DateTime`](/sql-reference/data-types/datetime) or [`Date`](/sql-reference/data-types/date)
","","Returns the total length of union of all ranges (segments on numeric axis). Depending on the type of the argument, the return value may be UInt64 or Float64 type. [`UInt64`](/sql-reference/data-types/int-uint) or [`Float64`](/sql-reference/data-types/float)","**Float32 example**

```sql title=Query
CREATE TABLE fl_interval (id String, start Float32, end Float32) ENGINE = Memory;
INSERT INTO fl_interval VALUES ('a', 1.1, 2.9), ('a', 2.5, 3.2), ('a', 4, 5);

SELECT id, intervalLengthSum(start, end), toTypeName(intervalLengthSum(start, end)) FROM fl_interval GROUP BY id ORDER BY id;
```

```response title=Response
┌─id─┬─intervalLengthSum(start, end)─┬─toTypeName(intervalLengthSum(start, end))─┐
│ a  │                           3.1 │ Float64                                   │
└────┴───────────────────────────────┴───────────────────────────────────────────┘
```

**DateTime example**

```sql title=Query
CREATE TABLE dt_interval (id String, start DateTime, end DateTime) ENGINE = Memory;
INSERT INTO dt_interval VALUES ('a', '2020-01-01 01:12:30', '2020-01-01 02:10:10'), ('a', '2020-01-01 02:05:30', '2020-01-01 02:50:31'), ('a', '2020-01-01 03:11:22', '2020-01-01 03:23:31');

SELECT id, intervalLengthSum(start, end), toTypeName(intervalLengthSum(start, end)) FROM dt_interval GROUP BY id ORDER BY id;
```

```response title=Response
┌─id─┬─intervalLengthSum(start, end)─┬─toTypeName(intervalLengthSum(start, end))─┐
│ a  │                          6610 │ UInt64                                    │
└────┴───────────────────────────────┴───────────────────────────────────────────┘
```

**Date example**

```sql title=Query
CREATE TABLE date_interval (id String, start Date, end Date) ENGINE = Memory;
INSERT INTO date_interval VALUES ('a', '2020-01-01', '2020-01-04'), ('a', '2020-01-12', '2020-01-18');

SELECT id, intervalLengthSum(start, end), toTypeName(intervalLengthSum(start, end)) FROM date_interval GROUP BY id ORDER BY id;
```

```response title=Response
┌─id─┬─intervalLengthSum(start, end)─┬─toTypeName(intervalLengthSum(start, end))─┐
│ a  │                             9 │ UInt64                                    │
└────┴───────────────────────────────┴───────────────────────────────────────────┘
```

","21.7","Aggregate Functions"
"25.9.2.1","uniqCombined",1,0,"","","System","","","","","","","",""
"25.9.2.1","uniqTheta",1,0,"","","System","","","","","","","",""
"25.9.2.1","nonNegativeDerivative",1,0,"","","System","","","","","","","",""
"25.9.2.1","uniqExact",1,0,"","","System","","","","","","","",""
"25.9.2.1","uniq",1,0,"","","System","","","","","","","",""
"25.9.2.1","kurtPop",1,0,"","","System","","","","","","","",""
"25.9.2.1","sumMapFiltered",1,0,"","","System","","","","","","","",""
"25.9.2.1","distinctJSONPathsAndTypes",1,0,"","","System","","","","","","","",""
"25.9.2.1","distinctJSONPaths",1,0,"","","System","","","","","","","",""
"25.9.2.1","minMappedArrays",1,0,"","","System","","","","","","","",""
"25.9.2.1","quantiles",1,0,"","","System","","","","","","","",""
"25.9.2.1","sum",1,1,"","","System","","","","","","","",""
"25.9.2.1","corrMatrix",1,0,"","","System","","","","","","","",""
"25.9.2.1","timeSeriesRateToGrid",1,0,"","","System","","","","","","","",""
"25.9.2.1","quantileExactWeighted",1,0,"","","System","","","","","","","",""
"25.9.2.1","sumMapFilteredWithOverflow",1,0,"","","System","","","","","","","",""
"25.9.2.1","corr",1,1,"","","System","","","","","","","",""
"25.9.2.1","skewPop",1,0,"","","System","","","","","","","",""
"25.9.2.1","corrStable",1,0,"","","System","","","","","","","",""
"25.9.2.1","covarPopMatrix",1,0,"","","System","","","","","","","",""
"25.9.2.1","groupBitmapOr",1,0,"","","System","","","","","","","",""
"25.9.2.1","covarSampMatrix",1,0,"","","System","","","","","","","",""
"25.9.2.1","sumMappedArrays",1,0,"","","System","","","","","","","",""
"25.9.2.1","quantileExactWeightedInterpolated",1,0,"","","System","","","","","","","",""
"25.9.2.1","skewSamp",1,0,"","","System","","","","","","","",""
"25.9.2.1","distinctDynamicTypes",1,0,"","","System","","","","","","","",""
"25.9.2.1","sumMapWithOverflow",1,0,"","","System","","","","","","","",""
"25.9.2.1","stddevSamp",1,0,"","","System","","","","","","","",""
"25.9.2.1","quantileExactHigh",1,0,"","","System","","","","","","","",""
"25.9.2.1","varPop",1,0,"","","System","","","","","","","",""
"25.9.2.1","sumCount",1,0,"","","System","","","","","","","",""
"25.9.2.1","covarPop",1,0,"","","System","","","","","","","",""
"25.9.2.1","varSamp",1,0,"","","System","","","","","","","",""
"25.9.2.1","quantileTimingWeighted",1,0,"","","System","","","","","","","",""
"25.9.2.1","covarPopStable",1,0,"","","System","","","","","","","",""
"25.9.2.1","stddevPopStable",1,0,"","","System","","","","","","","",""
"25.9.2.1","any_respect_nulls",1,0,"","","System","","","","","","","",""
"25.9.2.1","argMin",1,0,"","","System","","","","","","","",""
"25.9.2.1","windowFunnel",1,0,"","","System","","","","","","","",""
"25.9.2.1","retention",1,0,"","","System","","","","","","","",""
"25.9.2.1","sequenceMatch",1,0,"","","System","","","","","","","",""
"25.9.2.1","quantilesExactHigh",1,0,"","","System","","","","","","","",""
"25.9.2.1","quantileGK",1,0,"","","System","","","","","","","",""
"25.9.2.1","anyLast_respect_nulls",1,0,"","","System","","","","","","","",""
"25.9.2.1","quantilesBFloat16Weighted",1,0,"","","System","","","","","","","",""
"25.9.2.1","quantileBFloat16Weighted",1,0,"","","System","","","","","","","",""
"25.9.2.1","deltaSumTimestamp",1,0,"","","System","","","","","","","",""
"25.9.2.1","varSampStable",1,0,"","","System","","","","","","","",""
"25.9.2.1","groupNumericIndexedVector",1,0,"","","System","","","","","","","",""
"25.9.2.1","any",1,0,"","","System","","","","","","","",""
"25.9.2.1","sparkbar",1,0,"","","System","","","","","","","",""
"25.9.2.1","sequenceMatchEvents",1,0,"","","System","","","","","","","",""
"25.9.2.1","max",1,1,"","","System","","","","","","","",""
"25.9.2.1","quantilesDD",1,0,"","","System","","","","","","","",""
"25.9.2.1","denseRank",1,0,"","","System","","","","","","","",""
"25.9.2.1","quantile",1,0,"","","System","","","","","","","",""
"25.9.2.1","quantilesExact",1,0,"","","System","","","","","","","",""
"25.9.2.1","uniqHLL12",1,0,"","","System","","","","","","","",""
"25.9.2.1","min",1,1,"","","System","","","","","","","",""
"25.9.2.1","quantileExactInclusive",1,0,"","","System","","","","","","","",""
"25.9.2.1","quantileDD",1,0,"","","System","","","","","","","",""
"25.9.2.1","timeSeriesGroupArray",1,0,"","","System","","","","","","","",""
"25.9.2.1","kurtSamp",1,0,"","","System","","","","","","","",""
"25.9.2.1","estimateCompressionRatio",1,0,"","","System","","","","","","","",""
"25.9.2.1","quantileTDigest",1,0,"","","System","","","","","","","",""
"25.9.2.1","quantileTDigestWeighted",1,0,"","","System","","","","","","","",""
"25.9.2.1","quantileDeterministic",1,0,"","","System","","","","","","","",""
"25.9.2.1","quantilesTDigest",1,0,"","","System","","","","","","","",""
"25.9.2.1","avg",1,1,"","","System","","","","","","","",""
"25.9.2.1","covarSampStable",1,0,"","","System","","","","","","","",""
"25.9.2.1","quantilesTiming",1,0,"","","System","","","","","","","",""
"25.9.2.1","leadInFrame",1,0,"","","System","","","","","","","",""
"25.9.2.1","timeSeriesResampleToGridWithStaleness",1,0,"","","System","","","","","","","",""
"25.9.2.1","quantilesExactExclusive",1,0,"","","System","","","","","","","",""
"25.9.2.1","groupArrayMovingAvg",1,0,"","","System","","","","","","","",""
"25.9.2.1","anyHeavy",1,0,"","","System","","","","","","","",""
"25.9.2.1","groupArrayIntersect",1,0,"","","System","","","","","","","",""
"25.9.2.1","quantileInterpolatedWeighted",1,0,"","","System","","","","","","","",""
"25.9.2.1","quantileExactLow",1,0,"","","System","","","","","","","",""
"25.9.2.1","groupBitmap",1,0,"","","System","","","","","","","",""
"25.9.2.1","quantilesInterpolatedWeighted",1,0,"","","System","","","","","","","",""
"25.9.2.1","quantilesTDigestWeighted",1,0,"","","System","","","","","","","",""
"25.9.2.1","timeSeriesDeltaToGrid",1,0,"","","System","","","","","","","",""
"25.9.2.1","stddevSampStable",1,0,"","","System","","","","","","","",""
"25.9.2.1","quantilesExactWeightedInterpolated",1,0,"","","System","","","","","","","",""
"25.9.2.1","groupUniqArray",1,0,"","","System","","","","","","","",""
"25.9.2.1","sumKahan",1,0,"","","System","","","","","","","",""
"25.9.2.1","quantilesExactWeighted",1,0,"","","System","","","","","","","",""
"25.9.2.1","quantilesDeterministic",1,0,"","","System","","","","","","","",""
"25.9.2.1","groupArrayInsertAt",1,0,"","","System","","","","","","","",""
"25.9.2.1","quantilesGK",1,0,"","","System","","","","","","","",""
"25.9.2.1","rank",1,1,"","","System","","","","","","","",""
"25.9.2.1","maxIntersectionsPosition",1,0,"","","System","","","","","","","",""
"25.9.2.1","quantilesBFloat16",1,0,"","","System","","","","","","","",""
"25.9.2.1","quantilesExactInclusive",1,0,"","","System","","","","","","","",""
"25.9.2.1","groupConcat",1,0,"","","System","","","","","","","",""
"25.9.2.1","boundingRatio",1,0,"","","System","","","","","","","",""
"25.9.2.1","sequenceNextNode",1,0,"","","System","","","","","","","",""
"25.9.2.1","anyLast",1,0,"","","System","","","","","","","",""
"25.9.2.1","quantilesTimingWeighted",1,0,"","","System","","","","","","","",""
"25.9.2.1","groupArray",1,0,"","","System","","","","","","","",""
"25.9.2.1","count",1,1,"","","System","","","","","","","",""
"25.9.2.1","quantileExact",1,0,"","","System","","","","","","","",""
"25.9.2.1","groupArraySorted",1,0,"","","System","","","","","","","",""
"25.9.2.1","timeSeriesLastTwoSamples",1,0,"","","System","","","","","","","",""
"25.9.2.1","maxMappedArrays",1,0,"","","System","","","","","","","",""
"25.9.2.1","stddevPop",1,0,"","","System","","","","","","","",""
"25.9.2.1","groupArrayLast",1,0,"","","System","","","","","","","",""
"25.9.2.1","kolmogorovSmirnovTest",1,1,"","","System","","","","","","","",""
"25.9.2.1","sumWithOverflow",1,0,"","","System","","","","","","","",""
"25.9.2.1","sequenceCount",1,0,"","","System","","","","","","","",""
"25.9.2.1","exponentialTimeDecayedAvg",1,0,"","","System","","","","","","","",""
"25.9.2.1","quantileExactExclusive",1,0,"","","System","","","","","","","",""
"25.9.2.1","avgWeighted",1,0,"","","System","","","","","","","",""
"25.9.2.1","argMax",1,0,"","","System","","","","","","","",""
"25.9.2.1","quantileBFloat16",1,0,"","","System","","","","","","","",""
"25.9.2.1","groupBitOr",1,0,"","","System","","","","","","","",""
"25.9.2.1","approx_top_k",1,1,"","","System","","","","","","","",""
"25.9.2.1","deltaSum",1,0,"","","System","","","","","","","",""
"25.9.2.1","welchTTest",1,0,"","","System","","","","","","","",""
"25.9.2.1","covarSamp",1,0,"","","System","","","","","","","",""
"25.9.2.1","varPopStable",1,0,"","","System","","","","","","","",""
"25.9.2.1","timeSeriesChangesToGrid",1,0,"","","System","","","","","","","",""
"25.9.2.1","quantileTiming",1,0,"","","System","","","","","","","",""
"25.9.2.1","quantilesExactLow",1,0,"","","System","","","","","","","",""
"25.9.2.1","groupArraySample",1,0,"","","System","","","","","","","",""
"25.9.2.1","timeSeriesLastToGrid",1,0,"timeSeriesResampleToGridWithStaleness","","System","","","","","","","",""
"25.9.2.1","BIT_AND",1,1,"groupBitAnd","","System","","","","","","","",""
"25.9.2.1","approx_top_count",1,1,"approx_top_k","","System","","","","","","","",""
"25.9.2.1","STD",1,1,"stddevPop","","System","","","","","","","",""
"25.9.2.1","lttb",1,0,"largestTriangleThreeBuckets","","System","","","","","","","",""
"25.9.2.1","STDDEV_POP",1,1,"stddevPop","","System","","","","","","","",""
"25.9.2.1","anova",1,1,"analysisOfVariance","","System","","","","","","","",""
"25.9.2.1","STDDEV_SAMP",1,1,"stddevSamp","","System","","","","","","","",""
"25.9.2.1","VAR_SAMP",1,1,"varSamp","","System","","","","","","","",""
"25.9.2.1","VAR_POP",1,1,"varPop","","System","","","","","","","",""
"25.9.2.1","lastValueRespectNulls",1,0,"anyLast_respect_nulls","","System","","","","","","","",""
"25.9.2.1","last_value_respect_nulls",1,1,"anyLast_respect_nulls","","System","","","","","","","",""
"25.9.2.1","any_value_respect_nulls",1,1,"any_respect_nulls","","System","","","","","","","",""
"25.9.2.1","BIT_OR",1,1,"groupBitOr","","System","","","","","","","",""
"25.9.2.1","anyLastRespectNulls",1,0,"anyLast_respect_nulls","","System","","","","","","","",""
"25.9.2.1","firstValueRespectNulls",1,0,"any_respect_nulls","","System","","","","","","","",""
"25.9.2.1","first_value_respect_nulls",1,1,"any_respect_nulls","","System","","","","","","","",""
"25.9.2.1","COVAR_SAMP",1,1,"covarSamp","","System","","","","","","","",""
"25.9.2.1","any_value",1,1,"any","","System","","","","","","","",""
"25.9.2.1","medianDD",1,0,"quantileDD","","System","","","","","","","",""
"25.9.2.1","percent_rank",1,1,"percentRank","","System","","","","","","","",""
"25.9.2.1","sparkBar",1,0,"sparkbar","","System","","","","","","","",""
"25.9.2.1","medianInterpolatedWeighted",1,0,"quantileInterpolatedWeighted","","System","","","","","","","",""
"25.9.2.1","medianTDigestWeighted",1,0,"quantileTDigestWeighted","","System","","","","","","","",""
"25.9.2.1","medianBFloat16",1,0,"quantileBFloat16","","System","","","","","","","",""
"25.9.2.1","first_value",1,1,"any","","System","","","","","","","",""
"25.9.2.1","medianTDigest",1,0,"quantileTDigest","","System","","","","","","","",""
"25.9.2.1","BIT_XOR",1,1,"groupBitXor","","System","","","","","","","",""
"25.9.2.1","medianTimingWeighted",1,0,"quantileTimingWeighted","","System","","","","","","","",""
"25.9.2.1","group_concat",1,1,"groupConcat","","System","","","","","","","",""
"25.9.2.1","medianExactHigh",1,0,"quantileExactHigh","","System","","","","","","","",""
"25.9.2.1","dense_rank",1,1,"denseRank","","System","","","","","","","",""
"25.9.2.1","medianExactWeightedInterpolated",1,0,"quantileExactWeightedInterpolated","","System","","","","","","","",""
"25.9.2.1","medianBFloat16Weighted",1,0,"quantileBFloat16Weighted","","System","","","","","","","",""
"25.9.2.1","anyValueRespectNulls",1,0,"any_respect_nulls","","System","","","","","","","",""
"25.9.2.1","medianExactWeighted",1,0,"quantileExactWeighted","","System","","","","","","","",""
"25.9.2.1","median",1,0,"quantile","","System","","","","","","","",""
"25.9.2.1","medianExact",1,0,"quantileExact","","System","","","","","","","",""
"25.9.2.1","medianExactLow",1,0,"quantileExactLow","","System","","","","","","","",""
"25.9.2.1","medianTiming",1,0,"quantileTiming","","System","","","","","","","",""
"25.9.2.1","array_agg",1,1,"groupArray","","System","","","","","","","",""
"25.9.2.1","medianGK",1,0,"quantileGK","","System","","","","","","","",""
"25.9.2.1","medianDeterministic",1,0,"quantileDeterministic","","System","","","","","","","",""
"25.9.2.1","last_value",1,1,"anyLast","","System","","","","","","","",""
"25.9.2.1","COVAR_POP",1,1,"covarPop","","System","","","","","","","",""
"25.9.2.1","anyRespectNulls",1,0,"any_respect_nulls","","System","","","","","","","",""
"25.9.2.1","array_concat_agg",1,1,"groupArrayArray","","System","","","","","","","",""
